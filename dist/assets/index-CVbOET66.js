var Hk=Object.defineProperty;var Wk=(t,e,n)=>e in t?Hk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C0=(t,e,n)=>Wk(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var qk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ux={exports:{}},If={},cx={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mc=Symbol.for("react.element"),$k=Symbol.for("react.portal"),Gk=Symbol.for("react.fragment"),Kk=Symbol.for("react.strict_mode"),Zk=Symbol.for("react.profiler"),Yk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Qk=Symbol.for("react.forward_ref"),Jk=Symbol.for("react.suspense"),e2=Symbol.for("react.memo"),t2=Symbol.for("react.lazy"),A0=Symbol.iterator;function n2(t){return t===null||typeof t!="object"?null:(t=A0&&t[A0]||t["@@iterator"],typeof t=="function"?t:null)}var hx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dx=Object.assign,fx={};function ll(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||hx}ll.prototype.isReactComponent={};ll.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ll.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function px(){}px.prototype=ll.prototype;function Iy(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||hx}var Cy=Iy.prototype=new px;Cy.constructor=Iy;dx(Cy,ll.prototype);Cy.isPureReactComponent=!0;var b0=Array.isArray,mx=Object.prototype.hasOwnProperty,Ay={current:null},gx={key:!0,ref:!0,__self:!0,__source:!0};function yx(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)mx.call(e,i)&&!gx.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:mc,type:t,key:o,ref:a,props:r,_owner:Ay.current}}function i2(t,e){return{$$typeof:mc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function by(t){return typeof t=="object"&&t!==null&&t.$$typeof===mc}function r2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k0=/\/+/g;function Dp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r2(""+t.key):e.toString(36)}function Xh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case mc:case $k:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Dp(a,0):i,b0(r)?(n="",t!=null&&(n=t.replace(k0,"$&/")+"/"),Xh(r,e,n,"",function(f){return f})):r!=null&&(by(r)&&(r=i2(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(k0,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",b0(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+Dp(o,u);a+=Xh(o,e,n,c,r)}else if(c=n2(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+Dp(o,u++),a+=Xh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wh(t,e,n){if(t==null)return t;var i=[],r=0;return Xh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function s2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},Qh={transition:null},o2={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Qh,ReactCurrentOwner:Ay};function _x(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:wh,forEach:function(t,e,n){wh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wh(t,function(){e++}),e},toArray:function(t){return wh(t,function(e){return e})||[]},only:function(t){if(!by(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ll;Ie.Fragment=Gk;Ie.Profiler=Zk;Ie.PureComponent=Iy;Ie.StrictMode=Kk;Ie.Suspense=Jk;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o2;Ie.act=_x;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=dx({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Ay.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)mx.call(e,c)&&!gx.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:mc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:Xk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Yk,_context:t},t.Consumer=t};Ie.createElement=yx;Ie.createFactory=function(t){var e=yx.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:Qk,render:t}};Ie.isValidElement=by;Ie.lazy=function(t){return{$$typeof:t2,_payload:{_status:-1,_result:t},_init:s2}};Ie.memo=function(t,e){return{$$typeof:e2,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Qh.transition;Qh.transition={};try{t()}finally{Qh.transition=e}};Ie.unstable_act=_x;Ie.useCallback=function(t,e){return ln.current.useCallback(t,e)};Ie.useContext=function(t){return ln.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return ln.current.useEffect(t,e)};Ie.useId=function(){return ln.current.useId()};Ie.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return ln.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};Ie.useRef=function(t){return ln.current.useRef(t)};Ie.useState=function(t){return ln.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return ln.current.useTransition()};Ie.version="18.3.1";cx.exports=Ie;var W=cx.exports;const Pd=lx(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=W,l2=Symbol.for("react.element"),u2=Symbol.for("react.fragment"),c2=Object.prototype.hasOwnProperty,h2=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d2={key:!0,ref:!0,__self:!0,__source:!0};function vx(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)c2.call(e,i)&&!d2.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:l2,type:t,key:o,ref:a,props:r,_owner:h2.current}}If.Fragment=u2;If.jsx=vx;If.jsxs=vx;ux.exports=If;var T=ux.exports,Vm={},wx={exports:{}},Nn={},Tx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,se){var Q=$.length;$.push(se);e:for(;0<Q;){var fe=Q-1>>>1,xe=$[fe];if(0<r(xe,se))$[fe]=se,$[Q]=xe,Q=fe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var se=$[0],Q=$.pop();if(Q!==se){$[0]=Q;e:for(var fe=0,xe=$.length,He=xe>>>1;fe<He;){var ne=2*(fe+1)-1,he=$[ne],ce=ne+1,Ke=$[ce];if(0>r(he,Q))ce<xe&&0>r(Ke,he)?($[fe]=Ke,$[ce]=Q,fe=ce):($[fe]=he,$[ne]=Q,fe=ne);else if(ce<xe&&0>r(Ke,Q))$[fe]=Ke,$[ce]=Q,fe=ce;else break e}}return se}function r($,se){var Q=$.sortIndex-se.sortIndex;return Q!==0?Q:$.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],m=1,g=null,_=3,x=!1,k=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var se=n(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=$)i(f),se.sortIndex=se.expirationTime,e(c,se);else break;se=n(f)}}function F($){if(A=!1,C($),!k)if(n(c)!==null)k=!0,Ge(z);else{var se=n(f);se!==null&&J(F,se.startTime-$)}}function z($,se){k=!1,A&&(A=!1,P(I),I=-1),x=!0;var Q=_;try{for(C(se),g=n(c);g!==null&&(!(g.expirationTime>se)||$&&!V());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,_=g.priorityLevel;var xe=fe(g.expirationTime<=se);se=t.unstable_now(),typeof xe=="function"?g.callback=xe:g===n(c)&&i(c),C(se)}else i(c);g=n(c)}if(g!==null)var He=!0;else{var ne=n(f);ne!==null&&J(F,ne.startTime-se),He=!1}return He}finally{g=null,_=Q,x=!1}}var K=!1,R=null,I=-1,M=5,D=-1;function V(){return!(t.unstable_now()-D<M)}function U(){if(R!==null){var $=t.unstable_now();D=$;var se=!0;try{se=R(!0,$)}finally{se?O():(K=!1,R=null)}}else K=!1}var O;if(typeof E=="function")O=function(){E(U)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Dt=ke.port2;ke.port1.onmessage=U,O=function(){Dt.postMessage(null)}}else O=function(){N(U,0)};function Ge($){R=$,K||(K=!0,O())}function J($,se){I=N(function(){$(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||x||(k=!0,Ge(z))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var Q=_;_=se;try{return $()}finally{_=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=_;_=$;try{return se()}finally{_=Q}},t.unstable_scheduleCallback=function($,se,Q){var fe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?fe+Q:fe):Q=fe,$){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Q+xe,$={id:m++,callback:se,priorityLevel:$,startTime:Q,expirationTime:xe,sortIndex:-1},Q>fe?($.sortIndex=Q,e(f,$),n(c)===null&&$===n(f)&&(A?(P(I),I=-1):A=!0,J(F,Q-fe))):($.sortIndex=xe,e(c,$),k||x||(k=!0,Ge(z))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var se=_;return function(){var Q=_;_=se;try{return $.apply(this,arguments)}finally{_=Q}}}})(Ex);Tx.exports=Ex;var f2=Tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=W,kn=f2;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xx=new Set,Ou={};function Ao(t,e){Wa(t,e),Wa(t+"Capture",e)}function Wa(t,e){for(Ou[t]=e,t=0;t<e.length;t++)xx.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jm=Object.prototype.hasOwnProperty,m2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R0={},N0={};function g2(t){return jm.call(N0,t)?!0:jm.call(R0,t)?!1:m2.test(t)?N0[t]=!0:(R0[t]=!0,!1)}function y2(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _2(t,e,n,i){if(e===null||typeof e>"u"||y2(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,Ry);Ut[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,Ry);Ut[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,Ry);Ut[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ny(t,e,n,i){var r=Ut.hasOwnProperty(e)?Ut[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_2(e,n,r,i)&&(n=null),i||r===null?g2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Er=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Th=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),Fm=Symbol.for("react.profiler"),Sx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),Bm=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),Ix=Symbol.for("react.offscreen"),L0=Symbol.iterator;function $l(t){return t===null||typeof t!="object"?null:(t=L0&&t[L0]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Op;function iu(t){if(Op===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Op=e&&e[1]||""}return`
`+Op+t}var Vp=!1;function jp(t,e){if(!t||Vp)return"";Vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{Vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?iu(t):""}function v2(t){switch(t.tag){case 5:return iu(t.type);case 16:return iu("Lazy");case 13:return iu("Suspense");case 19:return iu("SuspenseList");case 0:case 2:case 15:return t=jp(t.type,!1),t;case 11:return t=jp(t.type.render,!1),t;case 1:return t=jp(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case ma:return"Portal";case Fm:return"Profiler";case Ly:return"StrictMode";case Um:return"Suspense";case Bm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Px:return(t.displayName||"Context")+".Consumer";case Sx:return(t._context.displayName||"Context")+".Provider";case My:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dy:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function w2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===Ly?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T2(t){var e=Cx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eh(t){t._valueTracker||(t._valueTracker=T2(t))}function Ax(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Cx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Id(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hm(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bx(t,e){e=e.checked,e!=null&&Ny(t,"checked",e,!1)}function Wm(t,e){bx(t,e);var n=ds(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qm(t,e.type,n):e.hasOwnProperty("defaultValue")&&qm(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qm(t,e,n){(e!=="number"||Id(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function La(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ds(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function $m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(ru(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ds(n)}}function kx(t,e){var n=ds(e.value),i=ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function V0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xh,Nx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xh=xh||document.createElement("div"),xh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E2=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(t){E2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fu[e]=fu[t]})});function Lx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fu.hasOwnProperty(t)&&fu[t]?(""+e).trim():e+"px"}function Mx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Lx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var x2=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Km(t,e){if(e){if(x2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ym=null;function Oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xm=null,Ma=null,Da=null;function j0(t){if(t=_c(t)){if(typeof Xm!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Rf(e),Xm(t.stateNode,t.type,e))}}function Dx(t){Ma?Da?Da.push(t):Da=[t]:Ma=t}function Ox(){if(Ma){var t=Ma,e=Da;if(Da=Ma=null,j0(t),e)for(t=0;t<e.length;t++)j0(e[t])}}function Vx(t,e){return t(e)}function jx(){}var Fp=!1;function Fx(t,e,n){if(Fp)return t(e,n);Fp=!0;try{return Vx(t,e,n)}finally{Fp=!1,(Ma!==null||Da!==null)&&(jx(),Ox())}}function ju(t,e){var n=t.stateNode;if(n===null)return null;var i=Rf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Qm=!1;if(dr)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Qm=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Qm=!1}function S2(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var pu=!1,Cd=null,Ad=!1,Jm=null,P2={onError:function(t){pu=!0,Cd=t}};function I2(t,e,n,i,r,o,a,u,c){pu=!1,Cd=null,S2.apply(P2,arguments)}function C2(t,e,n,i,r,o,a,u,c){if(I2.apply(this,arguments),pu){if(pu){var f=Cd;pu=!1,Cd=null}else throw Error(ee(198));Ad||(Ad=!0,Jm=f)}}function bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ux(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F0(t){if(bo(t)!==t)throw Error(ee(188))}function A2(t){var e=t.alternate;if(!e){if(e=bo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return F0(r),t;if(o===i)return F0(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function Bx(t){return t=A2(t),t!==null?zx(t):null}function zx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zx(t);if(e!==null)return e;t=t.sibling}return null}var Hx=kn.unstable_scheduleCallback,U0=kn.unstable_cancelCallback,b2=kn.unstable_shouldYield,k2=kn.unstable_requestPaint,ft=kn.unstable_now,R2=kn.unstable_getCurrentPriorityLevel,Vy=kn.unstable_ImmediatePriority,Wx=kn.unstable_UserBlockingPriority,bd=kn.unstable_NormalPriority,N2=kn.unstable_LowPriority,qx=kn.unstable_IdlePriority,Cf=null,bi=null;function L2(t){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var ai=Math.clz32?Math.clz32:O2,M2=Math.log,D2=Math.LN2;function O2(t){return t>>>=0,t===0?32:31-(M2(t)/D2|0)|0}var Sh=64,Ph=4194304;function su(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=su(u):(o&=a,o!==0&&(i=su(o)))}else a=n&~r,a!==0?i=su(a):o!==0&&(i=su(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ai(e),r=1<<n,i|=t[n],e&=~r;return i}function V2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j2(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ai(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=V2(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function eg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $x(){var t=Sh;return Sh<<=1,!(Sh&4194240)&&(Sh=64),t}function Up(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ai(e),t[e]=n}function F2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ai(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function jy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ai(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ze=0;function Gx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Kx,Fy,Zx,Yx,Xx,tg=!1,Ih=[],Qr=null,Jr=null,es=null,Fu=new Map,Uu=new Map,zr=[],U2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B0(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(e.pointerId)}}function Kl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=_c(e),e!==null&&Fy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function B2(t,e,n,i,r){switch(e){case"focusin":return Qr=Kl(Qr,t,e,n,i,r),!0;case"dragenter":return Jr=Kl(Jr,t,e,n,i,r),!0;case"mouseover":return es=Kl(es,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Fu.set(o,Kl(Fu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Uu.set(o,Kl(Uu.get(o)||null,t,e,n,i,r)),!0}return!1}function Qx(t){var e=eo(t.target);if(e!==null){var n=bo(e);if(n!==null){if(e=n.tag,e===13){if(e=Ux(n),e!==null){t.blockedOn=e,Xx(t.priority,function(){Zx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ym=i,n.target.dispatchEvent(i),Ym=null}else return e=_c(n),e!==null&&Fy(e),t.blockedOn=n,!1;e.shift()}return!0}function z0(t,e,n){Jh(t)&&n.delete(e)}function z2(){tg=!1,Qr!==null&&Jh(Qr)&&(Qr=null),Jr!==null&&Jh(Jr)&&(Jr=null),es!==null&&Jh(es)&&(es=null),Fu.forEach(z0),Uu.forEach(z0)}function Zl(t,e){t.blockedOn===e&&(t.blockedOn=null,tg||(tg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,z2)))}function Bu(t){function e(r){return Zl(r,t)}if(0<Ih.length){Zl(Ih[0],t);for(var n=1;n<Ih.length;n++){var i=Ih[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Qr!==null&&Zl(Qr,t),Jr!==null&&Zl(Jr,t),es!==null&&Zl(es,t),Fu.forEach(e),Uu.forEach(e),n=0;n<zr.length;n++)i=zr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)Qx(n),n.blockedOn===null&&zr.shift()}var Oa=Er.ReactCurrentBatchConfig,Rd=!0;function H2(t,e,n,i){var r=ze,o=Oa.transition;Oa.transition=null;try{ze=1,Uy(t,e,n,i)}finally{ze=r,Oa.transition=o}}function W2(t,e,n,i){var r=ze,o=Oa.transition;Oa.transition=null;try{ze=4,Uy(t,e,n,i)}finally{ze=r,Oa.transition=o}}function Uy(t,e,n,i){if(Rd){var r=ng(t,e,n,i);if(r===null)Yp(t,e,i,Nd,n),B0(t,i);else if(B2(r,t,e,n,i))i.stopPropagation();else if(B0(t,i),e&4&&-1<U2.indexOf(t)){for(;r!==null;){var o=_c(r);if(o!==null&&Kx(o),o=ng(t,e,n,i),o===null&&Yp(t,e,i,Nd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Yp(t,e,i,null,n)}}var Nd=null;function ng(t,e,n,i){if(Nd=null,t=Oy(i),t=eo(t),t!==null)if(e=bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ux(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nd=t,null}function Jx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R2()){case Vy:return 1;case Wx:return 4;case bd:case N2:return 16;case qx:return 536870912;default:return 16}default:return 16}}var Kr=null,By=null,ed=null;function eS(){if(ed)return ed;var t,e=By,n=e.length,i,r="value"in Kr?Kr.value:Kr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return ed=r.slice(t,1<i?1-i:void 0)}function td(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ch(){return!0}function H0(){return!1}function Ln(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ch:H0,this.isPropagationStopped=H0,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),e}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zy=Ln(ul),yc=it({},ul,{view:0,detail:0}),q2=Ln(yc),Bp,zp,Yl,Af=it({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yl&&(Yl&&t.type==="mousemove"?(Bp=t.screenX-Yl.screenX,zp=t.screenY-Yl.screenY):zp=Bp=0,Yl=t),Bp)},movementY:function(t){return"movementY"in t?t.movementY:zp}}),W0=Ln(Af),$2=it({},Af,{dataTransfer:0}),G2=Ln($2),K2=it({},yc,{relatedTarget:0}),Hp=Ln(K2),Z2=it({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),Y2=Ln(Z2),X2=it({},ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Q2=Ln(X2),J2=it({},ul,{data:0}),q0=Ln(J2),eR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nR[t])?!!e[t]:!1}function Hy(){return iR}var rR=it({},yc,{key:function(t){if(t.key){var e=eR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=td(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?td(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?td(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sR=Ln(rR),oR=it({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=Ln(oR),aR=it({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),lR=Ln(aR),uR=it({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),cR=Ln(uR),hR=it({},Af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dR=Ln(hR),fR=[9,13,27,32],Wy=dr&&"CompositionEvent"in window,mu=null;dr&&"documentMode"in document&&(mu=document.documentMode);var pR=dr&&"TextEvent"in window&&!mu,tS=dr&&(!Wy||mu&&8<mu&&11>=mu),G0=" ",K0=!1;function nS(t,e){switch(t){case"keyup":return fR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ya=!1;function mR(t,e){switch(t){case"compositionend":return iS(e);case"keypress":return e.which!==32?null:(K0=!0,G0);case"textInput":return t=e.data,t===G0&&K0?null:t;default:return null}}function gR(t,e){if(ya)return t==="compositionend"||!Wy&&nS(t,e)?(t=eS(),ed=By=Kr=null,ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tS&&e.locale!=="ko"?null:e.data;default:return null}}var yR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yR[t.type]:e==="textarea"}function rS(t,e,n,i){Dx(i),e=Ld(e,"onChange"),0<e.length&&(n=new zy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var gu=null,zu=null;function _R(t){mS(t,0)}function bf(t){var e=wa(t);if(Ax(e))return t}function vR(t,e){if(t==="change")return e}var sS=!1;if(dr){var Wp;if(dr){var qp="oninput"in document;if(!qp){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),qp=typeof Y0.oninput=="function"}Wp=qp}else Wp=!1;sS=Wp&&(!document.documentMode||9<document.documentMode)}function X0(){gu&&(gu.detachEvent("onpropertychange",oS),zu=gu=null)}function oS(t){if(t.propertyName==="value"&&bf(zu)){var e=[];rS(e,zu,t,Oy(t)),Fx(_R,e)}}function wR(t,e,n){t==="focusin"?(X0(),gu=e,zu=n,gu.attachEvent("onpropertychange",oS)):t==="focusout"&&X0()}function TR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bf(zu)}function ER(t,e){if(t==="click")return bf(e)}function xR(t,e){if(t==="input"||t==="change")return bf(e)}function SR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fi=typeof Object.is=="function"?Object.is:SR;function Hu(t,e){if(fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!jm.call(e,r)||!fi(t[r],e[r]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J0(t,e){var n=Q0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q0(n)}}function aS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lS(){for(var t=window,e=Id();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Id(t.document)}return e}function qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PR(t){var e=lS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aS(n.ownerDocument.documentElement,n)){if(i!==null&&qy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=J0(n,o);var a=J0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IR=dr&&"documentMode"in document&&11>=document.documentMode,_a=null,ig=null,yu=null,rg=!1;function ew(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rg||_a==null||_a!==Id(i)||(i=_a,"selectionStart"in i&&qy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),yu&&Hu(yu,i)||(yu=i,i=Ld(ig,"onSelect"),0<i.length&&(e=new zy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_a)))}function Ah(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var va={animationend:Ah("Animation","AnimationEnd"),animationiteration:Ah("Animation","AnimationIteration"),animationstart:Ah("Animation","AnimationStart"),transitionend:Ah("Transition","TransitionEnd")},$p={},uS={};dr&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function kf(t){if($p[t])return $p[t];if(!va[t])return t;var e=va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uS)return $p[t]=e[n];return t}var cS=kf("animationend"),hS=kf("animationiteration"),dS=kf("animationstart"),fS=kf("transitionend"),pS=new Map,tw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){pS.set(t,e),Ao(e,[t])}for(var Gp=0;Gp<tw.length;Gp++){var Kp=tw[Gp],CR=Kp.toLowerCase(),AR=Kp[0].toUpperCase()+Kp.slice(1);xs(CR,"on"+AR)}xs(cS,"onAnimationEnd");xs(hS,"onAnimationIteration");xs(dS,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(fS,"onTransitionEnd");Wa("onMouseEnter",["mouseout","mouseover"]);Wa("onMouseLeave",["mouseout","mouseover"]);Wa("onPointerEnter",["pointerout","pointerover"]);Wa("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function nw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,C2(i,e,void 0,t),t.currentTarget=null}function mS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;nw(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;nw(r,u,f),o=c}}}if(Ad)throw t=Jm,Ad=!1,Jm=null,t}function Ze(t,e){var n=e[ug];n===void 0&&(n=e[ug]=new Set);var i=t+"__bubble";n.has(i)||(gS(e,t,2,!1),n.add(i))}function Zp(t,e,n){var i=0;e&&(i|=4),gS(n,t,i,e)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[bh]){t[bh]=!0,xx.forEach(function(n){n!=="selectionchange"&&(bR.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bh]||(e[bh]=!0,Zp("selectionchange",!1,e))}}function gS(t,e,n,i){switch(Jx(e)){case 1:var r=H2;break;case 4:r=W2;break;default:r=Uy}n=r.bind(null,e,n,t),r=void 0,!Qm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Yp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=eo(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}Fx(function(){var f=o,m=Oy(n),g=[];e:{var _=pS.get(t);if(_!==void 0){var x=zy,k=t;switch(t){case"keypress":if(td(n)===0)break e;case"keydown":case"keyup":x=sR;break;case"focusin":k="focus",x=Hp;break;case"focusout":k="blur",x=Hp;break;case"beforeblur":case"afterblur":x=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=G2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=lR;break;case cS:case hS:case dS:x=Y2;break;case fS:x=cR;break;case"scroll":x=q2;break;case"wheel":x=dR;break;case"copy":case"cut":case"paste":x=Q2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=$0}var A=(e&4)!==0,N=!A&&t==="scroll",P=A?_!==null?_+"Capture":null:_;A=[];for(var E=f,C;E!==null;){C=E;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,P!==null&&(F=ju(E,P),F!=null&&A.push(qu(E,F,C)))),N)break;E=E.return}0<A.length&&(_=new x(_,k,null,n,m),g.push({event:_,listeners:A}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",_&&n!==Ym&&(k=n.relatedTarget||n.fromElement)&&(eo(k)||k[fr]))break e;if((x||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,x?(k=n.relatedTarget||n.toElement,x=f,k=k?eo(k):null,k!==null&&(N=bo(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=f),x!==k)){if(A=W0,F="onMouseLeave",P="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(A=$0,F="onPointerLeave",P="onPointerEnter",E="pointer"),N=x==null?_:wa(x),C=k==null?_:wa(k),_=new A(F,E+"leave",x,n,m),_.target=N,_.relatedTarget=C,F=null,eo(m)===f&&(A=new A(P,E+"enter",k,n,m),A.target=C,A.relatedTarget=N,F=A),N=F,x&&k)t:{for(A=x,P=k,E=0,C=A;C;C=la(C))E++;for(C=0,F=P;F;F=la(F))C++;for(;0<E-C;)A=la(A),E--;for(;0<C-E;)P=la(P),C--;for(;E--;){if(A===P||P!==null&&A===P.alternate)break t;A=la(A),P=la(P)}A=null}else A=null;x!==null&&iw(g,_,x,A,!1),k!==null&&N!==null&&iw(g,N,k,A,!0)}}e:{if(_=f?wa(f):window,x=_.nodeName&&_.nodeName.toLowerCase(),x==="select"||x==="input"&&_.type==="file")var z=vR;else if(Z0(_))if(sS)z=xR;else{z=TR;var K=wR}else(x=_.nodeName)&&x.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(z=ER);if(z&&(z=z(t,f))){rS(g,z,n,m);break e}K&&K(t,_,f),t==="focusout"&&(K=_._wrapperState)&&K.controlled&&_.type==="number"&&qm(_,"number",_.value)}switch(K=f?wa(f):window,t){case"focusin":(Z0(K)||K.contentEditable==="true")&&(_a=K,ig=f,yu=null);break;case"focusout":yu=ig=_a=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,ew(g,n,m);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":ew(g,n,m)}var R;if(Wy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ya?nS(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(tS&&n.locale!=="ko"&&(ya||I!=="onCompositionStart"?I==="onCompositionEnd"&&ya&&(R=eS()):(Kr=m,By="value"in Kr?Kr.value:Kr.textContent,ya=!0)),K=Ld(f,I),0<K.length&&(I=new q0(I,t,null,n,m),g.push({event:I,listeners:K}),R?I.data=R:(R=iS(n),R!==null&&(I.data=R)))),(R=pR?mR(t,n):gR(t,n))&&(f=Ld(f,"onBeforeInput"),0<f.length&&(m=new q0("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}mS(g,e)})}function qu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ld(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ju(t,n),o!=null&&i.unshift(qu(t,o,r)),o=ju(t,e),o!=null&&i.push(qu(t,o,r))),t=t.return}return i}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=ju(n,o),c!=null&&a.unshift(qu(n,c,u))):r||(c=ju(n,o),c!=null&&a.push(qu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var kR=/\r\n?/g,RR=/\u0000|\uFFFD/g;function rw(t){return(typeof t=="string"?t:""+t).replace(kR,`
`).replace(RR,"")}function kh(t,e,n){if(e=rw(e),rw(t)!==e&&n)throw Error(ee(425))}function Md(){}var sg=null,og=null;function ag(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,sw=typeof Promise=="function"?Promise:void 0,LR=typeof queueMicrotask=="function"?queueMicrotask:typeof sw<"u"?function(t){return sw.resolve(null).then(t).catch(MR)}:lg;function MR(t){setTimeout(function(){throw t})}function Xp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Bu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Bu(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ow(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Pi="__reactFiber$"+cl,$u="__reactProps$"+cl,fr="__reactContainer$"+cl,ug="__reactEvents$"+cl,DR="__reactListeners$"+cl,OR="__reactHandles$"+cl;function eo(t){var e=t[Pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[Pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ow(t);t!==null;){if(n=t[Pi])return n;t=ow(t)}return e}t=n,n=t.parentNode}return null}function _c(t){return t=t[Pi]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Rf(t){return t[$u]||null}var cg=[],Ta=-1;function Ss(t){return{current:t}}function Ye(t){0>Ta||(t.current=cg[Ta],cg[Ta]=null,Ta--)}function $e(t,e){Ta++,cg[Ta]=t.current,t.current=e}var fs={},Xt=Ss(fs),_n=Ss(!1),fo=fs;function qa(t,e){var n=t.type.contextTypes;if(!n)return fs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function vn(t){return t=t.childContextTypes,t!=null}function Dd(){Ye(_n),Ye(Xt)}function aw(t,e,n){if(Xt.current!==fs)throw Error(ee(168));$e(Xt,e),$e(_n,n)}function yS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,w2(t)||"Unknown",r));return it({},n,i)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,fo=Xt.current,$e(Xt,t),$e(_n,_n.current),!0}function lw(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=yS(t,e,fo),i.__reactInternalMemoizedMergedChildContext=t,Ye(_n),Ye(Xt),$e(Xt,t)):Ye(_n),$e(_n,n)}var nr=null,Nf=!1,Qp=!1;function _S(t){nr===null?nr=[t]:nr.push(t)}function VR(t){Nf=!0,_S(t)}function Ps(){if(!Qp&&nr!==null){Qp=!0;var t=0,e=ze;try{var n=nr;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}nr=null,Nf=!1}catch(r){throw nr!==null&&(nr=nr.slice(t+1)),Hx(Vy,Ps),r}finally{ze=e,Qp=!1}}return null}var Ea=[],xa=0,Vd=null,jd=0,Hn=[],Wn=0,po=null,rr=1,sr="";function Ks(t,e){Ea[xa++]=jd,Ea[xa++]=Vd,Vd=t,jd=e}function vS(t,e,n){Hn[Wn++]=rr,Hn[Wn++]=sr,Hn[Wn++]=po,po=t;var i=rr;t=sr;var r=32-ai(i)-1;i&=~(1<<r),n+=1;var o=32-ai(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-ai(e)+r|n<<r|i,sr=o+t}else rr=1<<o|n<<r|i,sr=t}function $y(t){t.return!==null&&(Ks(t,1),vS(t,1,0))}function Gy(t){for(;t===Vd;)Vd=Ea[--xa],Ea[xa]=null,jd=Ea[--xa],Ea[xa]=null;for(;t===po;)po=Hn[--Wn],Hn[Wn]=null,sr=Hn[--Wn],Hn[Wn]=null,rr=Hn[--Wn],Hn[Wn]=null}var An=null,Pn=null,Qe=!1,si=null;function wS(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Pn=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=po!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Pn=null,!0):!1;default:return!1}}function hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dg(t){if(Qe){var e=Pn;if(e){var n=e;if(!uw(t,e)){if(hg(t))throw Error(ee(418));e=ts(n.nextSibling);var i=An;e&&uw(t,e)?wS(i,n):(t.flags=t.flags&-4097|2,Qe=!1,An=t)}}else{if(hg(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Qe=!1,An=t}}}function cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function Rh(t){if(t!==An)return!1;if(!Qe)return cw(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ag(t.type,t.memoizedProps)),e&&(e=Pn)){if(hg(t))throw TS(),Error(ee(418));for(;e;)wS(t,e),e=ts(e.nextSibling)}if(cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=An?ts(t.stateNode.nextSibling):null;return!0}function TS(){for(var t=Pn;t;)t=ts(t.nextSibling)}function $a(){Pn=An=null,Qe=!1}function Ky(t){si===null?si=[t]:si.push(t)}var jR=Er.ReactCurrentBatchConfig;function Xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Nh(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hw(t){var e=t._init;return e(t._payload)}function ES(t){function e(P,E){if(t){var C=P.deletions;C===null?(P.deletions=[E],P.flags|=16):C.push(E)}}function n(P,E){if(!t)return null;for(;E!==null;)e(P,E),E=E.sibling;return null}function i(P,E){for(P=new Map;E!==null;)E.key!==null?P.set(E.key,E):P.set(E.index,E),E=E.sibling;return P}function r(P,E){return P=ss(P,E),P.index=0,P.sibling=null,P}function o(P,E,C){return P.index=C,t?(C=P.alternate,C!==null?(C=C.index,C<E?(P.flags|=2,E):C):(P.flags|=2,E)):(P.flags|=1048576,E)}function a(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,E,C,F){return E===null||E.tag!==6?(E=sm(C,P.mode,F),E.return=P,E):(E=r(E,C),E.return=P,E)}function c(P,E,C,F){var z=C.type;return z===ga?m(P,E,C.props.children,F,C.key):E!==null&&(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Fr&&hw(z)===E.type)?(F=r(E,C.props),F.ref=Xl(P,E,C),F.return=P,F):(F=ld(C.type,C.key,C.props,null,P.mode,F),F.ref=Xl(P,E,C),F.return=P,F)}function f(P,E,C,F){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=om(C,P.mode,F),E.return=P,E):(E=r(E,C.children||[]),E.return=P,E)}function m(P,E,C,F,z){return E===null||E.tag!==7?(E=ao(C,P.mode,F,z),E.return=P,E):(E=r(E,C),E.return=P,E)}function g(P,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=sm(""+E,P.mode,C),E.return=P,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Th:return C=ld(E.type,E.key,E.props,null,P.mode,C),C.ref=Xl(P,null,E),C.return=P,C;case ma:return E=om(E,P.mode,C),E.return=P,E;case Fr:var F=E._init;return g(P,F(E._payload),C)}if(ru(E)||$l(E))return E=ao(E,P.mode,C,null),E.return=P,E;Nh(P,E)}return null}function _(P,E,C,F){var z=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return z!==null?null:u(P,E,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Th:return C.key===z?c(P,E,C,F):null;case ma:return C.key===z?f(P,E,C,F):null;case Fr:return z=C._init,_(P,E,z(C._payload),F)}if(ru(C)||$l(C))return z!==null?null:m(P,E,C,F,null);Nh(P,C)}return null}function x(P,E,C,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return P=P.get(C)||null,u(E,P,""+F,z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Th:return P=P.get(F.key===null?C:F.key)||null,c(E,P,F,z);case ma:return P=P.get(F.key===null?C:F.key)||null,f(E,P,F,z);case Fr:var K=F._init;return x(P,E,C,K(F._payload),z)}if(ru(F)||$l(F))return P=P.get(C)||null,m(E,P,F,z,null);Nh(E,F)}return null}function k(P,E,C,F){for(var z=null,K=null,R=E,I=E=0,M=null;R!==null&&I<C.length;I++){R.index>I?(M=R,R=null):M=R.sibling;var D=_(P,R,C[I],F);if(D===null){R===null&&(R=M);break}t&&R&&D.alternate===null&&e(P,R),E=o(D,E,I),K===null?z=D:K.sibling=D,K=D,R=M}if(I===C.length)return n(P,R),Qe&&Ks(P,I),z;if(R===null){for(;I<C.length;I++)R=g(P,C[I],F),R!==null&&(E=o(R,E,I),K===null?z=R:K.sibling=R,K=R);return Qe&&Ks(P,I),z}for(R=i(P,R);I<C.length;I++)M=x(R,P,I,C[I],F),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?I:M.key),E=o(M,E,I),K===null?z=M:K.sibling=M,K=M);return t&&R.forEach(function(V){return e(P,V)}),Qe&&Ks(P,I),z}function A(P,E,C,F){var z=$l(C);if(typeof z!="function")throw Error(ee(150));if(C=z.call(C),C==null)throw Error(ee(151));for(var K=z=null,R=E,I=E=0,M=null,D=C.next();R!==null&&!D.done;I++,D=C.next()){R.index>I?(M=R,R=null):M=R.sibling;var V=_(P,R,D.value,F);if(V===null){R===null&&(R=M);break}t&&R&&V.alternate===null&&e(P,R),E=o(V,E,I),K===null?z=V:K.sibling=V,K=V,R=M}if(D.done)return n(P,R),Qe&&Ks(P,I),z;if(R===null){for(;!D.done;I++,D=C.next())D=g(P,D.value,F),D!==null&&(E=o(D,E,I),K===null?z=D:K.sibling=D,K=D);return Qe&&Ks(P,I),z}for(R=i(P,R);!D.done;I++,D=C.next())D=x(R,P,I,D.value,F),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?I:D.key),E=o(D,E,I),K===null?z=D:K.sibling=D,K=D);return t&&R.forEach(function(U){return e(P,U)}),Qe&&Ks(P,I),z}function N(P,E,C,F){if(typeof C=="object"&&C!==null&&C.type===ga&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Th:e:{for(var z=C.key,K=E;K!==null;){if(K.key===z){if(z=C.type,z===ga){if(K.tag===7){n(P,K.sibling),E=r(K,C.props.children),E.return=P,P=E;break e}}else if(K.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Fr&&hw(z)===K.type){n(P,K.sibling),E=r(K,C.props),E.ref=Xl(P,K,C),E.return=P,P=E;break e}n(P,K);break}else e(P,K);K=K.sibling}C.type===ga?(E=ao(C.props.children,P.mode,F,C.key),E.return=P,P=E):(F=ld(C.type,C.key,C.props,null,P.mode,F),F.ref=Xl(P,E,C),F.return=P,P=F)}return a(P);case ma:e:{for(K=C.key;E!==null;){if(E.key===K)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(P,E.sibling),E=r(E,C.children||[]),E.return=P,P=E;break e}else{n(P,E);break}else e(P,E);E=E.sibling}E=om(C,P.mode,F),E.return=P,P=E}return a(P);case Fr:return K=C._init,N(P,E,K(C._payload),F)}if(ru(C))return k(P,E,C,F);if($l(C))return A(P,E,C,F);Nh(P,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(P,E.sibling),E=r(E,C),E.return=P,P=E):(n(P,E),E=sm(C,P.mode,F),E.return=P,P=E),a(P)):n(P,E)}return N}var Ga=ES(!0),xS=ES(!1),Fd=Ss(null),Ud=null,Sa=null,Zy=null;function Yy(){Zy=Sa=Ud=null}function Xy(t){var e=Fd.current;Ye(Fd),t._currentValue=e}function fg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Va(t,e){Ud=t,Zy=Sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yn=!0),t.firstContext=null)}function Kn(t){var e=t._currentValue;if(Zy!==t)if(t={context:t,memoizedValue:e,next:null},Sa===null){if(Ud===null)throw Error(ee(308));Sa=t,Ud.dependencies={lanes:0,firstContext:t}}else Sa=Sa.next=t;return e}var to=null;function Qy(t){to===null?to=[t]:to.push(t)}function SS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Qy(e)):(n.next=r.next,r.next=n),e.interleaved=n,pr(t,i)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function Jy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,pr(t,n)}return r=i.interleaved,r===null?(e.next=e,Qy(i)):(e.next=r.next,r.next=e),i.interleaved=e,pr(t,n)}function nd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jy(t,n)}}function dw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bd(t,e,n,i){var r=t.updateQueue;Ur=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=f=c=null,u=o;do{var _=u.lane,x=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,A=u;switch(_=e,x=n,A.tag){case 1:if(k=A.payload,typeof k=="function"){g=k.call(x,g,_);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=A.payload,_=typeof k=="function"?k.call(x,g,_):k,_==null)break e;g=it({},g,_);break e;case 2:Ur=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else x={eventTime:x,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=x,c=g):m=m.next=x,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);go|=a,t.lanes=a,t.memoizedState=g}}function fw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var vc={},ki=Ss(vc),Gu=Ss(vc),Ku=Ss(vc);function no(t){if(t===vc)throw Error(ee(174));return t}function e_(t,e){switch($e(Ku,e),$e(Gu,t),$e(ki,vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gm(e,t)}Ye(ki),$e(ki,e)}function Ka(){Ye(ki),Ye(Gu),Ye(Ku)}function IS(t){no(Ku.current);var e=no(ki.current),n=Gm(e,t.type);e!==n&&($e(Gu,t),$e(ki,n))}function t_(t){Gu.current===t&&(Ye(ki),Ye(Gu))}var Je=Ss(0);function zd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jp=[];function n_(){for(var t=0;t<Jp.length;t++)Jp[t]._workInProgressVersionPrimary=null;Jp.length=0}var id=Er.ReactCurrentDispatcher,em=Er.ReactCurrentBatchConfig,mo=0,nt=null,Tt=null,Rt=null,Hd=!1,_u=!1,Zu=0,FR=0;function zt(){throw Error(ee(321))}function i_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fi(t[n],e[n]))return!1;return!0}function r_(t,e,n,i,r,o){if(mo=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,id.current=t===null||t.memoizedState===null?HR:WR,t=n(i,r),_u){o=0;do{if(_u=!1,Zu=0,25<=o)throw Error(ee(301));o+=1,Rt=Tt=null,e.updateQueue=null,id.current=qR,t=n(i,r)}while(_u)}if(id.current=Wd,e=Tt!==null&&Tt.next!==null,mo=0,Rt=Tt=nt=null,Hd=!1,e)throw Error(ee(300));return t}function s_(){var t=Zu!==0;return Zu=0,t}function xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Zn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Rt===null?nt.memoizedState:Rt.next;if(e!==null)Rt=e,Tt=t;else{if(t===null)throw Error(ee(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Yu(t,e){return typeof e=="function"?e(t):e}function tm(t){var e=Zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=Tt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var m=f.lane;if((mo&m)===m)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,nt.lanes|=m,go|=m}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,fi(i,e.memoizedState)||(yn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,go|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nm(t){var e=Zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);fi(o,e.memoizedState)||(yn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function CS(){}function AS(t,e){var n=nt,i=Zn(),r=e(),o=!fi(i.memoizedState,r);if(o&&(i.memoizedState=r,yn=!0),i=i.queue,o_(RS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Xu(9,kS.bind(null,n,i,r,e),void 0,null),Lt===null)throw Error(ee(349));mo&30||bS(n,e,r)}return r}function bS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kS(t,e,n,i){e.value=n,e.getSnapshot=i,NS(e)&&LS(t)}function RS(t,e,n){return n(function(){NS(e)&&LS(t)})}function NS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fi(t,n)}catch{return!0}}function LS(t){var e=pr(t,1);e!==null&&li(e,t,1,-1)}function pw(t){var e=xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:t},e.queue=t,t=t.dispatch=zR.bind(null,nt,t),[e.memoizedState,t]}function Xu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function MS(){return Zn().memoizedState}function rd(t,e,n,i){var r=xi();nt.flags|=t,r.memoizedState=Xu(1|e,n,void 0,i===void 0?null:i)}function Lf(t,e,n,i){var r=Zn();i=i===void 0?null:i;var o=void 0;if(Tt!==null){var a=Tt.memoizedState;if(o=a.destroy,i!==null&&i_(i,a.deps)){r.memoizedState=Xu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Xu(1|e,n,o,i)}function mw(t,e){return rd(8390656,8,t,e)}function o_(t,e){return Lf(2048,8,t,e)}function DS(t,e){return Lf(4,2,t,e)}function OS(t,e){return Lf(4,4,t,e)}function VS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jS(t,e,n){return n=n!=null?n.concat([t]):null,Lf(4,4,VS.bind(null,e,t),n)}function a_(){}function FS(t,e){var n=Zn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function US(t,e){var n=Zn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function BS(t,e,n){return mo&21?(fi(n,e)||(n=$x(),nt.lanes|=n,go|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yn=!0),t.memoizedState=n)}function UR(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=em.transition;em.transition={};try{t(!1),e()}finally{ze=n,em.transition=i}}function zS(){return Zn().memoizedState}function BR(t,e,n){var i=rs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},HS(t))WS(e,n);else if(n=SS(t,e,n,i),n!==null){var r=an();li(n,t,i,r),qS(n,e,i)}}function zR(t,e,n){var i=rs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(HS(t))WS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,fi(u,a)){var c=e.interleaved;c===null?(r.next=r,Qy(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=SS(t,e,r,i),n!==null&&(r=an(),li(n,t,i,r),qS(n,e,i))}}function HS(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function WS(t,e){_u=Hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jy(t,n)}}var Wd={readContext:Kn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},HR={readContext:Kn,useCallback:function(t,e){return xi().memoizedState=[t,e===void 0?null:e],t},useContext:Kn,useEffect:mw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rd(4194308,4,VS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return rd(4,2,t,e)},useMemo:function(t,e){var n=xi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=BR.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=xi();return t={current:t},e.memoizedState=t},useState:pw,useDebugValue:a_,useDeferredValue:function(t){return xi().memoizedState=t},useTransition:function(){var t=pw(!1),e=t[0];return t=UR.bind(null,t[1]),xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=xi();if(Qe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Lt===null)throw Error(ee(349));mo&30||bS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,mw(RS.bind(null,i,o,t),[t]),i.flags|=2048,Xu(9,kS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=xi(),e=Lt.identifierPrefix;if(Qe){var n=sr,i=rr;n=(i&~(1<<32-ai(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WR={readContext:Kn,useCallback:FS,useContext:Kn,useEffect:o_,useImperativeHandle:jS,useInsertionEffect:DS,useLayoutEffect:OS,useMemo:US,useReducer:tm,useRef:MS,useState:function(){return tm(Yu)},useDebugValue:a_,useDeferredValue:function(t){var e=Zn();return BS(e,Tt.memoizedState,t)},useTransition:function(){var t=tm(Yu)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:CS,useSyncExternalStore:AS,useId:zS,unstable_isNewReconciler:!1},qR={readContext:Kn,useCallback:FS,useContext:Kn,useEffect:o_,useImperativeHandle:jS,useInsertionEffect:DS,useLayoutEffect:OS,useMemo:US,useReducer:nm,useRef:MS,useState:function(){return nm(Yu)},useDebugValue:a_,useDeferredValue:function(t){var e=Zn();return Tt===null?e.memoizedState=t:BS(e,Tt.memoizedState,t)},useTransition:function(){var t=nm(Yu)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:CS,useSyncExternalStore:AS,useId:zS,unstable_isNewReconciler:!1};function ii(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mf={isMounted:function(t){return(t=t._reactInternals)?bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=an(),r=rs(t),o=ur(i,r);o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(li(e,t,r,i),nd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=an(),r=rs(t),o=ur(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(li(e,t,r,i),nd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),i=rs(t),r=ur(n,i);r.tag=2,e!=null&&(r.callback=e),e=ns(t,r,i),e!==null&&(li(e,t,i,n),nd(e,t,i))}};function gw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Hu(n,i)||!Hu(r,o):!0}function $S(t,e,n){var i=!1,r=fs,o=e.contextType;return typeof o=="object"&&o!==null?o=Kn(o):(r=vn(e)?fo:Xt.current,i=e.contextTypes,o=(i=i!=null)?qa(t,r):fs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function yw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Mf.enqueueReplaceState(e,e.state,null)}function mg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Jy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Kn(o):(o=vn(e)?fo:Xt.current,r.context=qa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pg(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Mf.enqueueReplaceState(r,r.state,null),Bd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Za(t,e){try{var n="",i=e;do n+=v2(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function im(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $R=typeof WeakMap=="function"?WeakMap:Map;function GS(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){$d||($d=!0,Ig=i),gg(t,e)},n}function KS(t,e,n){n=ur(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){gg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gg(t,e),typeof i!="function"&&(is===null?is=new Set([this]):is.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function _w(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new $R;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=oN.bind(null,t,e,n),e.then(t,t))}function vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ww(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var GR=Er.ReactCurrentOwner,yn=!1;function rn(t,e,n,i){e.child=t===null?xS(e,null,n,i):Ga(e,t.child,n,i)}function Tw(t,e,n,i,r){n=n.render;var o=e.ref;return Va(e,r),i=r_(t,e,n,i,o,r),n=s_(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mr(t,e,r)):(Qe&&n&&$y(e),e.flags|=1,rn(t,e,i,r),e.child)}function Ew(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!m_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ZS(t,e,o,i,r)):(t=ld(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Hu,n(a,i)&&t.ref===e.ref)return mr(t,e,r)}return e.flags|=1,t=ss(o,i),t.ref=e.ref,t.return=e,e.child=t}function ZS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Hu(o,i)&&t.ref===e.ref)if(yn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(yn=!0);else return e.lanes=t.lanes,mr(t,e,r)}return yg(t,e,n,i,r)}function YS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ia,xn),xn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Ia,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(Ia,xn),xn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(Ia,xn),xn|=i;return rn(t,e,r,n),e.child}function XS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yg(t,e,n,i,r){var o=vn(n)?fo:Xt.current;return o=qa(e,o),Va(e,r),n=r_(t,e,n,i,o,r),i=s_(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mr(t,e,r)):(Qe&&i&&$y(e),e.flags|=1,rn(t,e,n,r),e.child)}function xw(t,e,n,i,r){if(vn(n)){var o=!0;Od(e)}else o=!1;if(Va(e,r),e.stateNode===null)sd(t,e),$S(e,n,i),mg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Kn(f):(f=vn(n)?fo:Xt.current,f=qa(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&yw(e,a,i,f),Ur=!1;var _=e.memoizedState;a.state=_,Bd(e,i,a,r),c=e.memoizedState,u!==i||_!==c||_n.current||Ur?(typeof m=="function"&&(pg(e,n,m,i),c=e.memoizedState),(u=Ur||gw(e,n,u,i,_,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,PS(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ii(e.type,u),a.props=f,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kn(c):(c=vn(n)?fo:Xt.current,c=qa(e,c));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&yw(e,a,i,c),Ur=!1,_=e.memoizedState,a.state=_,Bd(e,i,a,r);var k=e.memoizedState;u!==g||_!==k||_n.current||Ur?(typeof x=="function"&&(pg(e,n,x,i),k=e.memoizedState),(f=Ur||gw(e,n,f,i,_,k,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return _g(t,e,n,i,o,r)}function _g(t,e,n,i,r,o){XS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&lw(e,n,!1),mr(t,e,o);i=e.stateNode,GR.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ga(e,t.child,null,o),e.child=Ga(e,null,u,o)):rn(t,e,u,o),e.memoizedState=i.state,r&&lw(e,n,!0),e.child}function QS(t){var e=t.stateNode;e.pendingContext?aw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aw(t,e.context,!1),e_(t,e.containerInfo)}function Sw(t,e,n,i,r){return $a(),Ky(r),e.flags|=256,rn(t,e,n,i),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,n){var i=e.pendingProps,r=Je.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(Je,r&1),t===null)return dg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Vf(a,i,0,null),t=ao(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=wg(n),e.memoizedState=vg,t):l_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return KR(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=ss(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ss(u,o):(o=ao(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?wg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=vg,i}return o=t.child,t=o.sibling,i=ss(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function l_(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lh(t,e,n,i){return i!==null&&Ky(i),Ga(e,t.child,null,n),t=l_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KR(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=im(Error(ee(422))),Lh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Vf({mode:"visible",children:i.children},r,0,null),o=ao(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ga(e,t.child,null,a),e.child.memoizedState=wg(a),e.memoizedState=vg,o);if(!(e.mode&1))return Lh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=im(o,i,void 0),Lh(t,e,a,i)}if(u=(a&t.childLanes)!==0,yn||u){if(i=Lt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,pr(t,r),li(i,t,r,-1))}return p_(),i=im(Error(ee(421))),Lh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=aN.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Pn=ts(r.nextSibling),An=e,Qe=!0,si=null,t!==null&&(Hn[Wn++]=rr,Hn[Wn++]=sr,Hn[Wn++]=po,rr=t.id,sr=t.overflow,po=e),e=l_(e,i.children),e.flags|=4096,e)}function Pw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),fg(t.return,e,n)}function rm(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function eP(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(rn(t,e,i.children,n),i=Je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pw(t,n,e);else if(t.tag===19)Pw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(Je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),rm(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}rm(e,!0,n,null,o);break;case"together":rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),go|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZR(t,e,n){switch(e.tag){case 3:QS(e),$a();break;case 5:IS(e);break;case 1:vn(e.type)&&Od(e);break;case 4:e_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(Fd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?JS(t,e,n):($e(Je,Je.current&1),t=mr(t,e,n),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return eP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(Je,Je.current),i)break;return null;case 22:case 23:return e.lanes=0,YS(t,e,n)}return mr(t,e,n)}var tP,Tg,nP,iP;tP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tg=function(){};nP=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no(ki.current);var o=null;switch(n){case"input":r=Hm(t,r),i=Hm(t,i),o=[];break;case"select":r=it({},r,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":r=$m(t,r),i=$m(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Md)}Km(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ou.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ze("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};iP=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ql(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function YR(t,e,n){var i=e.pendingProps;switch(Gy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return vn(e.type)&&Dd(),Ht(e),null;case 3:return i=e.stateNode,Ka(),Ye(_n),Ye(Xt),n_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,si!==null&&(bg(si),si=null))),Tg(t,e),Ht(e),null;case 5:t_(e);var r=no(Ku.current);if(n=e.type,t!==null&&e.stateNode!=null)nP(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Ht(e),null}if(t=no(ki.current),Rh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Pi]=e,i[$u]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(r=0;r<ou.length;r++)Ze(ou[r],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":M0(i,o),Ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",i);break;case"textarea":O0(i,o),Ze("invalid",i)}Km(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&kh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&kh(i.textContent,u,t),r=["children",""+u]):Ou.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ze("scroll",i)}switch(n){case"input":Eh(i),D0(i,o,!0);break;case"textarea":Eh(i),V0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Md)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Pi]=e,t[$u]=i,tP(t,e,!1,!1),e.stateNode=t;e:{switch(a=Zm(n,i),n){case"dialog":Ze("cancel",t),Ze("close",t),r=i;break;case"iframe":case"object":case"embed":Ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<ou.length;r++)Ze(ou[r],t);r=i;break;case"source":Ze("error",t),r=i;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),r=i;break;case"details":Ze("toggle",t),r=i;break;case"input":M0(t,i),r=Hm(t,i),Ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=it({},i,{value:void 0}),Ze("invalid",t);break;case"textarea":O0(t,i),r=$m(t,i),Ze("invalid",t);break;default:r=i}Km(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?Mx(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nx(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vu(t,c):typeof c=="number"&&Vu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ou.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ze("scroll",t):c!=null&&Ny(t,o,c,a))}switch(n){case"input":Eh(t),D0(t,i,!1);break;case"textarea":Eh(t),V0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ds(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?La(t,!!i.multiple,o,!1):i.defaultValue!=null&&La(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Md)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)iP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=no(Ku.current),no(ki.current),Rh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pi]=e,(o=i.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:kh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pi]=e,e.stateNode=i}return Ht(e),null;case 13:if(Ye(Je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Pn!==null&&e.mode&1&&!(e.flags&128))TS(),$a(),e.flags|=98560,o=!1;else if(o=Rh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Pi]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),o=!1}else si!==null&&(bg(si),si=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?xt===0&&(xt=3):p_())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Ka(),Tg(t,e),t===null&&Wu(e.stateNode.containerInfo),Ht(e),null;case 10:return Xy(e.type._context),Ht(e),null;case 17:return vn(e.type)&&Dd(),Ht(e),null;case 19:if(Ye(Je),o=e.memoizedState,o===null)return Ht(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Ql(o,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zd(t),a!==null){for(e.flags|=128,Ql(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Je,Je.current&1|2),e.child}t=t.sibling}o.tail!==null&&ft()>Ya&&(e.flags|=128,i=!0,Ql(o,!1),e.lanes=4194304)}else{if(!i)if(t=zd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ql(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Qe)return Ht(e),null}else 2*ft()-o.renderingStartTime>Ya&&n!==1073741824&&(e.flags|=128,i=!0,Ql(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ft(),e.sibling=null,n=Je.current,$e(Je,i?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return f_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function XR(t,e){switch(Gy(e),e.tag){case 1:return vn(e.type)&&Dd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ka(),Ye(_n),Ye(Xt),n_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return t_(e),null;case 13:if(Ye(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(Je),null;case 4:return Ka(),null;case 10:return Xy(e.type._context),null;case 22:case 23:return f_(),null;case 24:return null;default:return null}}var Mh=!1,Gt=!1,QR=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Pa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function Eg(t,e,n){try{n()}catch(i){at(t,e,i)}}var Iw=!1;function JR(t,e){if(sg=Rd,t=lS(),qy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var x;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(x=g.firstChild)!==null;)_=g,g=x;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(c=a),(x=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=x}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(og={focusedElem:t,selectionRange:n},Rd=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var A=k.memoizedProps,N=k.memoizedState,P=e.stateNode,E=P.getSnapshotBeforeUpdate(e.elementType===e.type?A:ii(e.type,A),N);P.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(F){at(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return k=Iw,Iw=!1,k}function vu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Eg(e,n,o)}r=r.next}while(r!==i)}}function Df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function xg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rP(t){var e=t.alternate;e!==null&&(t.alternate=null,rP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pi],delete e[$u],delete e[ug],delete e[DR],delete e[OR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sP(t){return t.tag===5||t.tag===3||t.tag===4}function Cw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Md));else if(i!==4&&(t=t.child,t!==null))for(Sg(t,e,n),t=t.sibling;t!==null;)Sg(t,e,n),t=t.sibling}function Pg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Pg(t,e,n),t=t.sibling;t!==null;)Pg(t,e,n),t=t.sibling}var Ot=null,ri=!1;function Dr(t,e,n){for(n=n.child;n!==null;)oP(t,e,n),n=n.sibling}function oP(t,e,n){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:Gt||Pa(n,e);case 6:var i=Ot,r=ri;Ot=null,Dr(t,e,n),Ot=i,ri=r,Ot!==null&&(ri?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(ri?(t=Ot,n=n.stateNode,t.nodeType===8?Xp(t.parentNode,n):t.nodeType===1&&Xp(t,n),Bu(t)):Xp(Ot,n.stateNode));break;case 4:i=Ot,r=ri,Ot=n.stateNode.containerInfo,ri=!0,Dr(t,e,n),Ot=i,ri=r;break;case 0:case 11:case 14:case 15:if(!Gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Eg(n,e,a),r=r.next}while(r!==i)}Dr(t,e,n);break;case 1:if(!Gt&&(Pa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(Gt=(i=Gt)||n.memoizedState!==null,Dr(t,e,n),Gt=i):Dr(t,e,n);break;default:Dr(t,e,n)}}function Aw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QR),e.forEach(function(i){var r=lN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ti(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ot=u.stateNode,ri=!1;break e;case 3:Ot=u.stateNode.containerInfo,ri=!0;break e;case 4:Ot=u.stateNode.containerInfo,ri=!0;break e}u=u.return}if(Ot===null)throw Error(ee(160));oP(o,a,r),Ot=null,ri=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aP(e,t),e=e.sibling}function aP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ti(e,t),Ei(t),i&4){try{vu(3,t,t.return),Df(3,t)}catch(A){at(t,t.return,A)}try{vu(5,t,t.return)}catch(A){at(t,t.return,A)}}break;case 1:ti(e,t),Ei(t),i&512&&n!==null&&Pa(n,n.return);break;case 5:if(ti(e,t),Ei(t),i&512&&n!==null&&Pa(n,n.return),t.flags&32){var r=t.stateNode;try{Vu(r,"")}catch(A){at(t,t.return,A)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&bx(r,o),Zm(u,a);var f=Zm(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?Mx(r,g):m==="dangerouslySetInnerHTML"?Nx(r,g):m==="children"?Vu(r,g):Ny(r,m,g,f)}switch(u){case"input":Wm(r,o);break;case"textarea":kx(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?La(r,!!o.multiple,x,!1):_!==!!o.multiple&&(o.defaultValue!=null?La(r,!!o.multiple,o.defaultValue,!0):La(r,!!o.multiple,o.multiple?[]:"",!1))}r[$u]=o}catch(A){at(t,t.return,A)}}break;case 6:if(ti(e,t),Ei(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(A){at(t,t.return,A)}}break;case 3:if(ti(e,t),Ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Bu(e.containerInfo)}catch(A){at(t,t.return,A)}break;case 4:ti(e,t),Ei(t);break;case 13:ti(e,t),Ei(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(h_=ft())),i&4&&Aw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(f=Gt)||m,ti(e,t),Gt=f):ti(e,t),Ei(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ae=t,m=t.child;m!==null;){for(g=ae=m;ae!==null;){switch(_=ae,x=_.child,_.tag){case 0:case 11:case 14:case 15:vu(4,_,_.return);break;case 1:Pa(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(A){at(i,n,A)}}break;case 5:Pa(_,_.return);break;case 22:if(_.memoizedState!==null){kw(g);continue}}x!==null?(x.return=_,ae=x):kw(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Lx("display",a))}catch(A){at(t,t.return,A)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(A){at(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ti(e,t),Ei(t),i&4&&Aw(t);break;case 21:break;default:ti(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sP(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Vu(r,""),i.flags&=-33);var o=Cw(t);Pg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=Cw(t);Sg(t,u,a);break;default:throw Error(ee(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eN(t,e,n){ae=t,lP(t)}function lP(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var r=ae,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Mh;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Gt;u=Mh;var f=Gt;if(Mh=a,(Gt=c)&&!f)for(ae=r;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?Rw(r):c!==null?(c.return=a,ae=c):Rw(r);for(;o!==null;)ae=o,lP(o),o=o.sibling;ae=r,Mh=u,Gt=f}bw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ae=o):bw(t)}}function bw(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||Df(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ii(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&fw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Bu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Gt||e.flags&512&&xg(e)}catch(_){at(e,e.return,_)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function kw(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Rw(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Df(4,e)}catch(c){at(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){at(e,r,c)}}var o=e.return;try{xg(e)}catch(c){at(e,o,c)}break;case 5:var a=e.return;try{xg(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){ae=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ae=u;break}ae=e.return}}var tN=Math.ceil,qd=Er.ReactCurrentDispatcher,u_=Er.ReactCurrentOwner,Gn=Er.ReactCurrentBatchConfig,Le=0,Lt=null,vt=null,Ft=0,xn=0,Ia=Ss(0),xt=0,Qu=null,go=0,Of=0,c_=0,wu=null,mn=null,h_=0,Ya=1/0,tr=null,$d=!1,Ig=null,is=null,Dh=!1,Zr=null,Gd=0,Tu=0,Cg=null,od=-1,ad=0;function an(){return Le&6?ft():od!==-1?od:od=ft()}function rs(t){return t.mode&1?Le&2&&Ft!==0?Ft&-Ft:jR.transition!==null?(ad===0&&(ad=$x()),ad):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Jx(t.type)),t):1}function li(t,e,n,i){if(50<Tu)throw Tu=0,Cg=null,Error(ee(185));gc(t,n,i),(!(Le&2)||t!==Lt)&&(t===Lt&&(!(Le&2)&&(Of|=n),xt===4&&Hr(t,Ft)),wn(t,i),n===1&&Le===0&&!(e.mode&1)&&(Ya=ft()+500,Nf&&Ps()))}function wn(t,e){var n=t.callbackNode;j2(t,e);var i=kd(t,t===Lt?Ft:0);if(i===0)n!==null&&U0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&U0(n),e===1)t.tag===0?VR(Nw.bind(null,t)):_S(Nw.bind(null,t)),LR(function(){!(Le&6)&&Ps()}),n=null;else{switch(Gx(i)){case 1:n=Vy;break;case 4:n=Wx;break;case 16:n=bd;break;case 536870912:n=qx;break;default:n=bd}n=gP(n,uP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uP(t,e){if(od=-1,ad=0,Le&6)throw Error(ee(327));var n=t.callbackNode;if(ja()&&t.callbackNode!==n)return null;var i=kd(t,t===Lt?Ft:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Kd(t,i);else{e=i;var r=Le;Le|=2;var o=hP();(Lt!==t||Ft!==e)&&(tr=null,Ya=ft()+500,oo(t,e));do try{rN();break}catch(u){cP(t,u)}while(!0);Yy(),qd.current=o,Le=r,vt!==null?e=0:(Lt=null,Ft=0,e=xt)}if(e!==0){if(e===2&&(r=eg(t),r!==0&&(i=r,e=Ag(t,r))),e===1)throw n=Qu,oo(t,0),Hr(t,i),wn(t,ft()),n;if(e===6)Hr(t,i);else{if(r=t.current.alternate,!(i&30)&&!nN(r)&&(e=Kd(t,i),e===2&&(o=eg(t),o!==0&&(i=o,e=Ag(t,o))),e===1))throw n=Qu,oo(t,0),Hr(t,i),wn(t,ft()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Zs(t,mn,tr);break;case 3:if(Hr(t,i),(i&130023424)===i&&(e=h_+500-ft(),10<e)){if(kd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){an(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=lg(Zs.bind(null,t,mn,tr),e);break}Zs(t,mn,tr);break;case 4:if(Hr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ai(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tN(i/1960))-i,10<i){t.timeoutHandle=lg(Zs.bind(null,t,mn,tr),i);break}Zs(t,mn,tr);break;case 5:Zs(t,mn,tr);break;default:throw Error(ee(329))}}}return wn(t,ft()),t.callbackNode===n?uP.bind(null,t):null}function Ag(t,e){var n=wu;return t.current.memoizedState.isDehydrated&&(oo(t,e).flags|=256),t=Kd(t,e),t!==2&&(e=mn,mn=n,e!==null&&bg(e)),t}function bg(t){mn===null?mn=t:mn.push.apply(mn,t)}function nN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!fi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~c_,e&=~Of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ai(e),i=1<<n;t[n]=-1,e&=~i}}function Nw(t){if(Le&6)throw Error(ee(327));ja();var e=kd(t,0);if(!(e&1))return wn(t,ft()),null;var n=Kd(t,e);if(t.tag!==0&&n===2){var i=eg(t);i!==0&&(e=i,n=Ag(t,i))}if(n===1)throw n=Qu,oo(t,0),Hr(t,e),wn(t,ft()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zs(t,mn,tr),wn(t,ft()),null}function d_(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Ya=ft()+500,Nf&&Ps())}}function yo(t){Zr!==null&&Zr.tag===0&&!(Le&6)&&ja();var e=Le;Le|=1;var n=Gn.transition,i=ze;try{if(Gn.transition=null,ze=1,t)return t()}finally{ze=i,Gn.transition=n,Le=e,!(Le&6)&&Ps()}}function f_(){xn=Ia.current,Ye(Ia)}function oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NR(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(Gy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Dd();break;case 3:Ka(),Ye(_n),Ye(Xt),n_();break;case 5:t_(i);break;case 4:Ka();break;case 13:Ye(Je);break;case 19:Ye(Je);break;case 10:Xy(i.type._context);break;case 22:case 23:f_()}n=n.return}if(Lt=t,vt=t=ss(t.current,null),Ft=xn=e,xt=0,Qu=null,c_=Of=go=0,mn=wu=null,to!==null){for(e=0;e<to.length;e++)if(n=to[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}to=null}return t}function cP(t,e){do{var n=vt;try{if(Yy(),id.current=Wd,Hd){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Hd=!1}if(mo=0,Rt=Tt=nt=null,_u=!1,Zu=0,u_.current=null,n===null||n.return===null){xt=1,Qu=e,vt=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Ft,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=vw(a);if(x!==null){x.flags&=-257,ww(x,a,u,o,e),x.mode&1&&_w(o,f,e),e=x,c=f;var k=e.updateQueue;if(k===null){var A=new Set;A.add(c),e.updateQueue=A}else k.add(c);break e}else{if(!(e&1)){_w(o,f,e),p_();break e}c=Error(ee(426))}}else if(Qe&&u.mode&1){var N=vw(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ww(N,a,u,o,e),Ky(Za(c,u));break e}}o=c=Za(c,u),xt!==4&&(xt=2),wu===null?wu=[o]:wu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=GS(o,c,e);dw(o,P);break e;case 1:u=c;var E=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(is===null||!is.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=KS(o,u,e);dw(o,F);break e}}o=o.return}while(o!==null)}fP(n)}catch(z){e=z,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function hP(){var t=qd.current;return qd.current=Wd,t===null?Wd:t}function p_(){(xt===0||xt===3||xt===2)&&(xt=4),Lt===null||!(go&268435455)&&!(Of&268435455)||Hr(Lt,Ft)}function Kd(t,e){var n=Le;Le|=2;var i=hP();(Lt!==t||Ft!==e)&&(tr=null,oo(t,e));do try{iN();break}catch(r){cP(t,r)}while(!0);if(Yy(),Le=n,qd.current=i,vt!==null)throw Error(ee(261));return Lt=null,Ft=0,xt}function iN(){for(;vt!==null;)dP(vt)}function rN(){for(;vt!==null&&!b2();)dP(vt)}function dP(t){var e=mP(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?fP(t):vt=e,u_.current=null}function fP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XR(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,vt=null;return}}else if(n=YR(n,e,xn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);xt===0&&(xt=5)}function Zs(t,e,n){var i=ze,r=Gn.transition;try{Gn.transition=null,ze=1,sN(t,e,n,i)}finally{Gn.transition=r,ze=i}return null}function sN(t,e,n,i){do ja();while(Zr!==null);if(Le&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(F2(t,o),t===Lt&&(vt=Lt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dh||(Dh=!0,gP(bd,function(){return ja(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gn.transition,Gn.transition=null;var a=ze;ze=1;var u=Le;Le|=4,u_.current=null,JR(t,n),aP(n,t),PR(og),Rd=!!sg,og=sg=null,t.current=n,eN(n),k2(),Le=u,ze=a,Gn.transition=o}else t.current=n;if(Dh&&(Dh=!1,Zr=t,Gd=r),o=t.pendingLanes,o===0&&(is=null),L2(n.stateNode),wn(t,ft()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if($d)throw $d=!1,t=Ig,Ig=null,t;return Gd&1&&t.tag!==0&&ja(),o=t.pendingLanes,o&1?t===Cg?Tu++:(Tu=0,Cg=t):Tu=0,Ps(),null}function ja(){if(Zr!==null){var t=Gx(Gd),e=Gn.transition,n=ze;try{if(Gn.transition=null,ze=16>t?16:t,Zr===null)var i=!1;else{if(t=Zr,Zr=null,Gd=0,Le&6)throw Error(ee(331));var r=Le;for(Le|=4,ae=t.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(ae=f;ae!==null;){var m=ae;switch(m.tag){case 0:case 11:case 15:vu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ae=g;else for(;ae!==null;){m=ae;var _=m.sibling,x=m.return;if(rP(m),m===f){ae=null;break}if(_!==null){_.return=x,ae=_;break}ae=x}}}var k=o.alternate;if(k!==null){var A=k.child;if(A!==null){k.child=null;do{var N=A.sibling;A.sibling=null,A=N}while(A!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vu(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,ae=P;break e}ae=o.return}}var E=t.current;for(ae=E;ae!==null;){a=ae;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ae=C;else e:for(a=E;ae!==null;){if(u=ae,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Df(9,u)}}catch(z){at(u,u.return,z)}if(u===a){ae=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,ae=F;break e}ae=u.return}}if(Le=r,Ps(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(Cf,t)}catch{}i=!0}return i}finally{ze=n,Gn.transition=e}}return!1}function Lw(t,e,n){e=Za(n,e),e=GS(t,e,1),t=ns(t,e,1),e=an(),t!==null&&(gc(t,1,e),wn(t,e))}function at(t,e,n){if(t.tag===3)Lw(t,t,n);else for(;e!==null;){if(e.tag===3){Lw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(is===null||!is.has(i))){t=Za(n,t),t=KS(e,t,1),e=ns(e,t,1),t=an(),e!==null&&(gc(e,1,t),wn(e,t));break}}e=e.return}}function oN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Ft&n)===n&&(xt===4||xt===3&&(Ft&130023424)===Ft&&500>ft()-h_?oo(t,0):c_|=n),wn(t,e)}function pP(t,e){e===0&&(t.mode&1?(e=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):e=1);var n=an();t=pr(t,e),t!==null&&(gc(t,e,n),wn(t,n))}function aN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pP(t,n)}function lN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),pP(t,n)}var mP;mP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_n.current)yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yn=!1,ZR(t,e,n);yn=!!(t.flags&131072)}else yn=!1,Qe&&e.flags&1048576&&vS(e,jd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sd(t,e),t=e.pendingProps;var r=qa(e,Xt.current);Va(e,n),r=r_(null,e,i,t,r,n);var o=s_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(i)?(o=!0,Od(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jy(e),r.updater=Mf,e.stateNode=r,r._reactInternals=e,mg(e,i,t,n),e=_g(null,e,i,!0,o,n)):(e.tag=0,Qe&&o&&$y(e),rn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sd(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=cN(i),t=ii(i,t),r){case 0:e=yg(null,e,i,t,n);break e;case 1:e=xw(null,e,i,t,n);break e;case 11:e=Tw(null,e,i,t,n);break e;case 14:e=Ew(null,e,i,ii(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),yg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),xw(t,e,i,r,n);case 3:e:{if(QS(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,PS(t,e),Bd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Za(Error(ee(423)),e),e=Sw(t,e,i,n,r);break e}else if(i!==r){r=Za(Error(ee(424)),e),e=Sw(t,e,i,n,r);break e}else for(Pn=ts(e.stateNode.containerInfo.firstChild),An=e,Qe=!0,si=null,n=xS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($a(),i===r){e=mr(t,e,n);break e}rn(t,e,i,n)}e=e.child}return e;case 5:return IS(e),t===null&&dg(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,ag(i,r)?a=null:o!==null&&ag(i,o)&&(e.flags|=32),XS(t,e),rn(t,e,a,n),e.child;case 6:return t===null&&dg(e),null;case 13:return JS(t,e,n);case 4:return e_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ga(e,null,i,n):rn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),Tw(t,e,i,r,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(Fd,i._currentValue),i._currentValue=a,o!==null)if(fi(o.value,a)){if(o.children===r.children&&!_n.current){e=mr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=ur(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),fg(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),fg(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}rn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Va(e,n),r=Kn(r),i=i(r),e.flags|=1,rn(t,e,i,n),e.child;case 14:return i=e.type,r=ii(i,e.pendingProps),r=ii(i.type,r),Ew(t,e,i,r,n);case 15:return ZS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),sd(t,e),e.tag=1,vn(i)?(t=!0,Od(e)):t=!1,Va(e,n),$S(e,i,r),mg(e,i,r,n),_g(null,e,i,!0,t,n);case 19:return eP(t,e,n);case 22:return YS(t,e,n)}throw Error(ee(156,e.tag))};function gP(t,e){return Hx(t,e)}function uN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,i){return new uN(t,e,n,i)}function m_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cN(t){if(typeof t=="function")return m_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===My)return 11;if(t===Dy)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ld(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")m_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ga:return ao(n.children,r,o,e);case Ly:a=8,r|=8;break;case Fm:return t=$n(12,n,e,r|2),t.elementType=Fm,t.lanes=o,t;case Um:return t=$n(13,n,e,r),t.elementType=Um,t.lanes=o,t;case Bm:return t=$n(19,n,e,r),t.elementType=Bm,t.lanes=o,t;case Ix:return Vf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sx:a=10;break e;case Px:a=9;break e;case My:a=11;break e;case Dy:a=14;break e;case Fr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=$n(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function ao(t,e,n,i){return t=$n(7,t,i,e),t.lanes=n,t}function Vf(t,e,n,i){return t=$n(22,t,i,e),t.elementType=Ix,t.lanes=n,t.stateNode={isHidden:!1},t}function sm(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function om(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hN(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Up(0),this.expirationTimes=Up(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Up(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function g_(t,e,n,i,r,o,a,u,c){return t=new hN(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=$n(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jy(o),t}function dN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function yP(t){if(!t)return fs;t=t._reactInternals;e:{if(bo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(vn(n))return yS(t,n,e)}return e}function _P(t,e,n,i,r,o,a,u,c){return t=g_(n,i,!0,t,r,o,a,u,c),t.context=yP(null),n=t.current,i=an(),r=rs(n),o=ur(i,r),o.callback=e??null,ns(n,o,r),t.current.lanes=r,gc(t,r,i),wn(t,i),t}function jf(t,e,n,i){var r=e.current,o=an(),a=rs(r);return n=yP(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ns(r,e,a),t!==null&&(li(t,r,a,o),nd(t,r,a)),a}function Zd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function y_(t,e){Mw(t,e),(t=t.alternate)&&Mw(t,e)}function fN(){return null}var vP=typeof reportError=="function"?reportError:function(t){console.error(t)};function __(t){this._internalRoot=t}Ff.prototype.render=__.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));jf(t,e,null,null)};Ff.prototype.unmount=__.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yo(function(){jf(null,t,null,null)}),e[fr]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&Qx(t)}};function v_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dw(){}function pN(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Zd(a);o.call(f)}}var a=_P(e,i,t,0,null,!1,!1,"",Dw);return t._reactRootContainer=a,t[fr]=a.current,Wu(t.nodeType===8?t.parentNode:t),yo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Zd(c);u.call(f)}}var c=g_(t,0,!1,null,null,!1,!1,"",Dw);return t._reactRootContainer=c,t[fr]=c.current,Wu(t.nodeType===8?t.parentNode:t),yo(function(){jf(e,c,n,i)}),c}function Bf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Zd(a);u.call(c)}}jf(e,a,t,r)}else a=pN(n,e,t,r,i);return Zd(a)}Kx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=su(e.pendingLanes);n!==0&&(jy(e,n|1),wn(e,ft()),!(Le&6)&&(Ya=ft()+500,Ps()))}break;case 13:yo(function(){var i=pr(t,1);if(i!==null){var r=an();li(i,t,1,r)}}),y_(t,1)}};Fy=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=an();li(e,t,134217728,n)}y_(t,134217728)}};Zx=function(t){if(t.tag===13){var e=rs(t),n=pr(t,e);if(n!==null){var i=an();li(n,t,e,i)}y_(t,e)}};Yx=function(){return ze};Xx=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Xm=function(t,e,n){switch(e){case"input":if(Wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Rf(i);if(!r)throw Error(ee(90));Ax(i),Wm(i,r)}}}break;case"textarea":kx(t,n);break;case"select":e=n.value,e!=null&&La(t,!!n.multiple,e,!1)}};Vx=d_;jx=yo;var mN={usingClientEntryPoint:!1,Events:[_c,wa,Rf,Dx,Ox,d_]},Jl={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gN={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bx(t),t===null?null:t.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||fN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Cf=Oh.inject(gN),bi=Oh}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mN;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v_(e))throw Error(ee(200));return dN(t,e,null,n)};Nn.createRoot=function(t,e){if(!v_(t))throw Error(ee(299));var n=!1,i="",r=vP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=g_(t,1,!1,null,null,n,!1,i,r),t[fr]=e.current,Wu(t.nodeType===8?t.parentNode:t),new __(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=Bx(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return yo(t)};Nn.hydrate=function(t,e,n){if(!Uf(e))throw Error(ee(200));return Bf(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!v_(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=vP;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=_P(e,null,t,1,n??null,r,!1,o,a),t[fr]=e.current,Wu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ff(e)};Nn.render=function(t,e,n){if(!Uf(e))throw Error(ee(200));return Bf(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Uf(t))throw Error(ee(40));return t._reactRootContainer?(yo(function(){Bf(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};Nn.unstable_batchedUpdates=d_;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Uf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Bf(t,e,n,!1,i)};Nn.version="18.3.1-next-f1338f8080-20240426";function wP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wP)}catch(t){console.error(t)}}wP(),wx.exports=Nn;var TP=wx.exports,Ow=TP;Vm.createRoot=Ow.createRoot,Vm.hydrateRoot=Ow.hydrateRoot;const yN="modulepreload",_N=function(t){return"/"+t},Vw={},jw=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=_N(c),c in Vw)return;Vw[c]=!0;const f=c.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":yN,f||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((_,x)=>{g.addEventListener("load",_),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Te=(t,e)=>{const n=W.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:c,...f},m)=>W.createElement("svg",{ref:m,...vN,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${wN(t)}`,u].join(" "),...f},[...e.map(([g,_])=>W.createElement(g,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Te("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=Te("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Te("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Te("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Te("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Te("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=Te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Te("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Te("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Te("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Te("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Te("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Te("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Te("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=Te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=Te("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=Te("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=Te("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=Te("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function je(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function gr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ZN(t,e){const n=je(t);return isNaN(e)?gr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const IP=6048e5,YN=864e5,E_=6e4,x_=36e5,Vh=43200,Hw=1440;let XN={};function Tc(){return XN}function ec(t,e){var u,c,f,m;const n=Tc(),i=(e==null?void 0:e.weekStartsOn)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=je(t),o=r.getDay(),a=(o<i?7:0)+o-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Yd(t){return ec(t,{weekStartsOn:1})}function CP(t){const e=je(t),n=e.getFullYear(),i=gr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=Yd(i),o=gr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Yd(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Ww(t){const e=je(t);return e.setHours(0,0,0,0),e}function Xd(t){const e=je(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function AP(t,e){const n=Ww(t),i=Ww(e),r=+n-Xd(n),o=+i-Xd(i);return Math.round((r-o)/YN)}function QN(t){const e=CP(t),n=gr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Yd(n)}function ud(t,e){const n=je(t),i=je(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function JN(t){return gr(t,Date.now())}function eL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tL(t){if(!eL(t)&&typeof t!="number")return!1;const e=je(t);return!isNaN(Number(e))}function nL(t,e){const n=je(t),i=je(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function iL(t,e){const n=je(t),i=je(e),r=qw(n,i),o=Math.abs(AP(n,i));n.setDate(n.getDate()-r*o);const a=+(qw(n,i)===-r),u=r*(o-a);return u===0?0:u}function qw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function S_(t){return e=>{const n=Math.trunc,i=n(e);return i===0?0:i}}function P_(t,e){return+je(t)-+je(e)}function rL(t,e,n){const i=P_(t,e)/x_;return S_()(i)}function sL(t,e,n){const i=P_(t,e)/E_;return S_()(i)}function oL(t){const e=je(t);return e.setHours(23,59,59,999),e}function aL(t){const e=je(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function lL(t){const e=je(t);return+oL(e)==+aL(e)}function uL(t,e){const n=je(t),i=je(e),r=ud(n,i),o=Math.abs(nL(n,i));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);let u=ud(n,i)===-r;lL(je(t))&&o===1&&ud(t,i)===1&&(u=!1),a=r*(o-Number(u))}return a===0?0:a}function cL(t,e,n){const i=P_(t,e)/1e3;return S_()(i)}function hL(t){const e=je(t),n=gr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const dL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fL=(t,e,n)=>{let i;const r=dL[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Fa(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const pL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yL={date:Fa({formats:pL,defaultWidth:"full"}),time:Fa({formats:mL,defaultWidth:"full"}),dateTime:Fa({formats:gL,defaultWidth:"full"})},_L={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vL=(t,e,n,i)=>_L[t];function Ii(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):a;r=t.formattingValues[u]||t.formattingValues[a]}else{const a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[u]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return r[o]}}const wL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},PL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},IL=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},CL={ordinalNumber:IL,era:Ii({values:wL,defaultWidth:"wide"}),quarter:Ii({values:TL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ii({values:EL,defaultWidth:"wide"}),day:Ii({values:xL,defaultWidth:"wide"}),dayPeriod:Ii({values:SL,defaultWidth:"wide",formattingValues:PL,defaultFormattingWidth:"wide"})};function Ci(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;const a=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(u)?bL(u,g=>g.test(a)):AL(u,g=>g.test(a));let f;f=t.valueCallback?t.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(a.length);return{value:f,rest:m}}}function AL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function bL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function bP(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const kL=/^(\d+)(th|st|nd|rd)?/i,RL=/\d+/i,NL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LL={any:[/^b/i,/^(a|c)/i]},ML={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DL={any:[/1/i,/2/i,/3/i,/4/i]},OL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},FL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},BL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zL={ordinalNumber:bP({matchPattern:kL,parsePattern:RL,valueCallback:t=>parseInt(t,10)}),era:Ci({matchPatterns:NL,defaultMatchWidth:"wide",parsePatterns:LL,defaultParseWidth:"any"}),quarter:Ci({matchPatterns:ML,defaultMatchWidth:"wide",parsePatterns:DL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ci({matchPatterns:OL,defaultMatchWidth:"wide",parsePatterns:VL,defaultParseWidth:"any"}),day:Ci({matchPatterns:jL,defaultMatchWidth:"wide",parsePatterns:FL,defaultParseWidth:"any"}),dayPeriod:Ci({matchPatterns:UL,defaultMatchWidth:"any",parsePatterns:BL,defaultParseWidth:"any"})},kP={code:"en-US",formatDistance:fL,formatLong:yL,formatRelative:vL,localize:CL,match:zL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HL(t){const e=je(t);return AP(e,hL(e))+1}function WL(t){const e=je(t),n=+Yd(e)-+QN(e);return Math.round(n/IP)+1}function RP(t,e){var m,g,_,x;const n=je(t),i=n.getFullYear(),r=Tc(),o=(e==null?void 0:e.firstWeekContainsDate)??((g=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(_=r.locale)==null?void 0:_.options)==null?void 0:x.firstWeekContainsDate)??1,a=gr(t,0);a.setFullYear(i+1,0,o),a.setHours(0,0,0,0);const u=ec(a,e),c=gr(t,0);c.setFullYear(i,0,o),c.setHours(0,0,0,0);const f=ec(c,e);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function qL(t,e){var u,c,f,m;const n=Tc(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=RP(t,e),o=gr(t,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),ec(o,e)}function $L(t,e){const n=je(t),i=+ec(n,e)-+qL(n,e);return Math.round(i/IP)+1}function Be(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Or={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return Be(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Be(n+1,2)},d(t,e){return Be(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Be(t.getHours()%12||12,e.length)},H(t,e){return Be(t.getHours(),e.length)},m(t,e){return Be(t.getMinutes(),e.length)},s(t,e){return Be(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return Be(r,e.length)}},ua={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$w={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return Or.y(t,e)},Y:function(t,e,n,i){const r=RP(t,i),o=r>0?r:1-r;if(e==="YY"){const a=o%100;return Be(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Be(o,e.length)},R:function(t,e){const n=CP(t);return Be(n,e.length)},u:function(t,e){const n=t.getFullYear();return Be(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Be(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Be(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Or.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return Be(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=$L(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Be(r,e.length)},I:function(t,e,n){const i=WL(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):Be(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Or.d(t,e)},D:function(t,e,n){const i=HL(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Be(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Be(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Be(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Be(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=ua.noon:i===0?r=ua.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=ua.evening:i>=12?r=ua.afternoon:i>=4?r=ua.morning:r=ua.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Or.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Or.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Be(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):Be(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Or.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Or.s(t,e)},S:function(t,e){return Or.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Kw(i);case"XXXX":case"XX":return Ys(i);case"XXXXX":case"XXX":default:return Ys(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return Kw(i);case"xxxx":case"xx":return Ys(i);case"xxxxx":case"xxx":default:return Ys(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Gw(i,":");case"OOOO":default:return"GMT"+Ys(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Gw(i,":");case"zzzz":default:return"GMT"+Ys(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return Be(i,e.length)},T:function(t,e,n){const i=t.getTime();return Be(i,e.length)}};function Gw(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return o===0?n+String(r):n+String(r)+e+Be(o,2)}function Kw(t,e){return t%60===0?(t>0?"-":"+")+Be(Math.abs(t)/60,2):Ys(t,e)}function Ys(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Be(Math.trunc(i/60),2),o=Be(i%60,2);return n+r+e+o}const Zw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},NP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},GL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return Zw(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Zw(i,e)).replace("{{time}}",NP(r,e))},KL={p:NP,P:GL},ZL=/^D+$/,YL=/^Y+$/,XL=["D","DD","YY","YYYY"];function QL(t){return ZL.test(t)}function JL(t){return YL.test(t)}function eM(t,e,n){const i=tM(t,e,n);if(console.warn(i),XL.includes(t))throw new RangeError(i)}function tM(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const nM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rM=/^'([^]*?)'?$/,sM=/''/g,oM=/[a-zA-Z]/;function aM(t,e,n){var m,g,_,x;const i=Tc(),r=i.locale??kP,o=i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=i.weekStartsOn??((x=(_=i.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,u=je(t);if(!tL(u))throw new RangeError("Invalid time value");let c=e.match(iM).map(k=>{const A=k[0];if(A==="p"||A==="P"){const N=KL[A];return N(k,r.formatLong)}return k}).join("").match(nM).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const A=k[0];if(A==="'")return{isToken:!1,value:lM(k)};if($w[A])return{isToken:!0,value:k};if(A.match(oM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:k}});r.localize.preprocessor&&(c=r.localize.preprocessor(u,c));const f={firstWeekContainsDate:o,weekStartsOn:a,locale:r};return c.map(k=>{if(!k.isToken)return k.value;const A=k.value;(JL(A)||QL(A))&&eM(A,e,String(t));const N=$w[A[0]];return N(u,A,r.localize,f)}).join("")}function lM(t){const e=t.match(rM);return e?e[1].replace(sM,"'"):t}function uM(t,e,n){const i=Tc(),r=(n==null?void 0:n.locale)??i.locale??kP,o=2520,a=ud(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,f;a>0?(c=je(e),f=je(t)):(c=je(t),f=je(e));const m=cL(f,c),g=(Xd(f)-Xd(c))/1e3,_=Math.round((m-g)/60);let x;if(_<2)return n!=null&&n.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,u):m<10?r.formatDistance("lessThanXSeconds",10,u):m<20?r.formatDistance("lessThanXSeconds",20,u):m<40?r.formatDistance("halfAMinute",0,u):m<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):_===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",_,u);if(_<45)return r.formatDistance("xMinutes",_,u);if(_<90)return r.formatDistance("aboutXHours",1,u);if(_<Hw){const k=Math.round(_/60);return r.formatDistance("aboutXHours",k,u)}else{if(_<o)return r.formatDistance("xDays",1,u);if(_<Vh){const k=Math.round(_/Hw);return r.formatDistance("xDays",k,u)}else if(_<Vh*2)return x=Math.round(_/Vh),r.formatDistance("aboutXMonths",x,u)}if(x=uL(f,c),x<12){const k=Math.round(_/Vh);return r.formatDistance("xMonths",k,u)}else{const k=x%12,A=Math.trunc(x/12);return k<3?r.formatDistance("aboutXYears",A,u):k<9?r.formatDistance("overXYears",A,u):r.formatDistance("almostXYears",A+1,u)}}function cM(t,e){return uM(t,JN(t),e)}function hM(t,e){const i=mM(t);let r;if(i.date){const c=gM(i.date,2);r=yM(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let a=0,u;if(i.time&&(a=_M(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(u=vM(i.timezone),isNaN(u))return new Date(NaN)}else{const c=new Date(o+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(o+a+u)}const jh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dM=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fM=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pM=/^([+-])(\d{2})(?::?(\d{2}))?$/;function mM(t){const e={},n=t.split(jh.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],jh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(jh.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=jh.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function gM(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function yM(t,e){if(e===null)return new Date(NaN);const n=t.match(dM);if(!n)return new Date(NaN);const i=!!n[4],r=eu(n[1]),o=eu(n[2])-1,a=eu(n[3]),u=eu(n[4]),c=eu(n[5])-1;if(i)return SM(e,u,c)?wM(e,u,c):new Date(NaN);{const f=new Date(0);return!EM(e,o,a)||!xM(e,r)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(r,a)),f)}}function eu(t){return t?parseInt(t):1}function _M(t){const e=t.match(fM);if(!e)return NaN;const n=am(e[1]),i=am(e[2]),r=am(e[3]);return PM(n,i,r)?n*x_+i*E_+r*1e3:NaN}function am(t){return t&&parseFloat(t.replace(",","."))||0}function vM(t){if(t==="Z")return 0;const e=t.match(pM);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return IM(i,r)?n*(i*x_+r*E_):NaN}function wM(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,o=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}const TM=[31,null,31,30,31,30,31,31,30,31,30,31];function LP(t){return t%400===0||t%4===0&&t%100!==0}function EM(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(TM[e]||(LP(t)?29:28))}function xM(t,e){return e>=1&&e<=(LP(t)?366:365)}function SM(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function PM(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function IM(t,e){return e>=0&&e<=59}function CM({isEditing:t,onToggleEdit:e,onExport:n,onOpenWallet:i,user:r,isAdmin:o,onLogin:a,onLogout:u}){var k;const[c,f]=W.useState({days:0,hours:0,minutes:0}),[m,g]=W.useState(new Date("2026-05-20T00:00:00")),[_,x]=W.useState(new Date("2026-06-04T00:00:00"));return W.useEffect(()=>{(async()=>{try{const{doc:N,getDoc:P}=await jw(async()=>{const{doc:F,getDoc:z}=await Promise.resolve().then(()=>az);return{doc:F,getDoc:z}},void 0),{db:E}=await jw(async()=>{const{db:F}=await Promise.resolve().then(()=>u8);return{db:F}},void 0),C=await P(N(E,"trips","settings"));if(C.exists()){const F=C.data();F.startDate&&g(new Date(F.startDate+"T00:00:00")),F.endDate&&x(new Date(F.endDate+"T00:00:00"))}}catch(N){console.error("Failed to fetch settings:",N)}})()},[]),W.useEffect(()=>{const A=()=>{const P=new Date;f({days:iL(m,P),hours:rL(m,P)%24,minutes:sL(m,P)%60})};A();const N=setInterval(A,6e4);return()=>clearInterval(N)},[m]),T.jsx("header",{className:"relative pt-8 pb-12 px-4 overflow-hidden",children:T.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[T.jsxs("div",{className:"bg-white p-6 md:p-8 shadow-lg transform rotate-1 border-2 border-gray-200 relative mx-4 md:mx-0",style:{backgroundImage:"radial-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[T.jsx("div",{className:"washi-tape"}),T.jsx("div",{className:"absolute left-0 right-0 top-1/2 border-b-2 border-dashed border-gray-300 -z-10 hidden md:block"}),T.jsx("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),T.jsx("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 md:gap-12",children:[T.jsxs("div",{className:"flex-1 text-center md:text-left",children:[T.jsx("div",{className:"inline-block border-2 border-gray-800 px-3 py-1 mb-3 transform -rotate-2",children:T.jsx("span",{className:"font-heading font-bold tracking-widest uppercase text-xs",children:"Boarding Pass"})}),T.jsxs("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-2 text-gray-800 leading-tight",children:["ACSM ",T.jsx("span",{className:"text-gray-400 italic font-serif",children:"2026"})]}),T.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-sm font-bold tracking-wider text-gray-600 font-mono",children:[T.jsx("span",{children:"SF"}),T.jsx(Eu,{size:16,className:"text-gray-400"}),T.jsx("span",{children:"SLC"}),T.jsx(Eu,{size:16,className:"text-gray-400"}),T.jsx("span",{children:"SAN"}),T.jsx(Eu,{size:16,className:"text-gray-400"}),T.jsx("span",{children:"LA"})]})]}),T.jsxs("div",{className:"flex flex-col items-center md:items-end gap-4",children:[T.jsxs("div",{className:"text-center md:text-right",children:[T.jsx("div",{className:"font-hand text-2xl text-gray-500 transform -rotate-3 mb-1",children:"Save the date!"}),T.jsxs("div",{className:"font-heading text-xl font-bold border-b-2 border-gray-800 inline-block pb-1",children:[m.toLocaleDateString("en-US",{month:"short",day:"numeric"}),T.jsx("span",{className:"mx-2 text-gray-400",children:""}),_.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),T.jsxs("div",{className:"flex gap-3 mt-2",children:[r?T.jsxs("div",{className:"relative group cursor-pointer",title:r.displayName||r.email||"",children:[T.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 overflow-hidden shadow-sm grayscale hover:grayscale-0 transition-all",children:r.photoURL?T.jsx("img",{src:r.photoURL,alt:"User",className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-gray-500 font-bold",children:((k=r.displayName)==null?void 0:k[0])||"U"})}),T.jsx("button",{onClick:u,className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:T.jsx(LN,{size:10})})]}):T.jsx("button",{onClick:a,className:"sticker px-4 py-2 font-hand text-lg font-bold hover:scale-105 transition-transform",children:"Sign In"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:n,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Export",children:T.jsx(kN,{size:18})}),T.jsx("button",{onClick:i,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Wallet",children:T.jsx(kg,{size:18})}),o&&T.jsx("button",{onClick:e,className:`w-10 h-10 border-2 rounded-full flex items-center justify-center transition-colors ${t?"border-red-400 text-red-500 bg-red-50":"border-gray-300 text-gray-500 hover:border-gray-800 hover:text-gray-800"}`,title:"Edit Mode",children:T.jsx(T_,{size:18})})]})]})]})]})]}),T.jsxs("div",{className:"absolute -bottom-10 left-4 md:-left-6 paper-note p-3 w-28 text-center transform -rotate-2 z-0 hidden md:block",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400 mx-auto mb-1 shadow-sm"}),T.jsx("div",{className:"font-hand text-lg leading-none mb-0.5 text-gray-600",children:"Countdown"}),T.jsxs("div",{className:"font-heading text-2xl font-bold text-gray-800",children:[c.days,T.jsx("span",{className:"text-xs font-sans font-normal text-gray-500 ml-1",children:"days"})]})]})]})})}const I_=W.createContext({});function C_(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const zf=W.createContext(null),A_=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class AM extends W.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bM({children:t,isPresent:e}){const n=W.useId(),i=W.useRef(null),r=W.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=W.useContext(A_);return W.useInsertionEffect(()=>{const{width:a,height:u,top:c,left:f}=r.current;if(e||!i.current||!a||!u)return;i.current.dataset.motionPopId=n;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${c}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),T.jsx(AM,{isPresent:e,childRef:i,sizeRef:r,children:W.cloneElement(t,{ref:i})})}const kM=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=C_(RM),c=W.useId(),f=W.useCallback(g=>{u.set(g,!0);for(const _ of u.values())if(!_)return;i&&i()},[u,i]),m=W.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:f,register:g=>(u.set(g,!1),()=>u.delete(g))}),o?[Math.random(),f]:[n,f]);return W.useMemo(()=>{u.forEach((g,_)=>u.set(_,!1))},[n]),W.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=T.jsx(bM,{isPresent:n,children:t})),T.jsx(zf.Provider,{value:m,children:t})};function RM(){return new Map}function MP(t=!0){const e=W.useContext(zf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=W.useId();W.useEffect(()=>{t&&r(o)},[t]);const a=W.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Fh=t=>t.key||"";function Yw(t){const e=[];return W.Children.forEach(t,n=>{W.isValidElement(n)&&e.push(n)}),e}const b_=typeof window<"u",DP=b_?W.useLayoutEffect:W.useEffect,Ec=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1})=>{const[u,c]=MP(a),f=W.useMemo(()=>Yw(t),[t]),m=a&&!u?[]:f.map(Fh),g=W.useRef(!0),_=W.useRef(f),x=C_(()=>new Map),[k,A]=W.useState(f),[N,P]=W.useState(f);DP(()=>{g.current=!1,_.current=f;for(let F=0;F<N.length;F++){const z=Fh(N[F]);m.includes(z)?x.delete(z):x.get(z)!==!0&&x.set(z,!1)}},[N,m.length,m.join("-")]);const E=[];if(f!==k){let F=[...f];for(let z=0;z<N.length;z++){const K=N[z],R=Fh(K);m.includes(R)||(F.splice(z,0,K),E.push(K))}o==="wait"&&E.length&&(F=E),P(Yw(F)),A(f);return}const{forceRender:C}=W.useContext(I_);return T.jsx(T.Fragment,{children:N.map(F=>{const z=Fh(F),K=a&&!u?!1:f===N||m.includes(z),R=()=>{if(x.has(z))x.set(z,!0);else return;let I=!0;x.forEach(M=>{M||(I=!1)}),I&&(C==null||C(),P(_.current),a&&(c==null||c()),i&&i())};return T.jsx(kM,{isPresent:K,initial:!g.current||n?void 0:!1,custom:K?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:K?void 0:R,children:F},z)})})},bn=t=>t;let OP=bn;function k_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Xa=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},cr=t=>t*1e3,hr=t=>t/1e3,NM={useManualTiming:!1};function LM(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(c.schedule(f),t()),f(a)}const c={schedule:(f,m=!1,g=!1)=>{const x=g&&i?e:n;return m&&o.add(f),x.has(f)||x.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,c.process(f))}};return c}const Uh=["read","resolveKeyframes","update","preRender","render","postRender"],MM=40;function VP(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Uh.reduce((P,E)=>(P[E]=LM(o),P),{}),{read:u,resolveKeyframes:c,update:f,preRender:m,render:g,postRender:_}=a,x=()=>{const P=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(P-r.timestamp,MM),1),r.timestamp=P,r.isProcessing=!0,u.process(r),c.process(r),f.process(r),m.process(r),g.process(r),_.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(x))},k=()=>{n=!0,i=!0,r.isProcessing||t(x)};return{schedule:Uh.reduce((P,E)=>{const C=a[E];return P[E]=(F,z=!1,K=!1)=>(n||k(),C.schedule(F,z,K)),P},{}),cancel:P=>{for(let E=0;E<Uh.length;E++)a[Uh[E]].cancel(P)},state:r,steps:a}}const{schedule:Xe,cancel:ps,state:Vt,steps:lm}=VP(typeof requestAnimationFrame<"u"?requestAnimationFrame:bn,!0),jP=W.createContext({strict:!1}),Xw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qa={};for(const t in Xw)Qa[t]={isEnabled:e=>Xw[t].some(n=>!!e[n])};function DM(t){for(const e in t)Qa[e]={...Qa[e],...t[e]}}const OM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||OM.has(t)}let FP=t=>!Qd(t);function VM(t){t&&(FP=e=>e.startsWith("on")?!Qd(e):t(e))}try{VM(require("@emotion/is-prop-valid").default)}catch{}function jM(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(FP(r)||n===!0&&Qd(r)||!e&&!Qd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function FM(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Hf=W.createContext({});function tc(t){return typeof t=="string"||Array.isArray(t)}function Wf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const R_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],N_=["initial",...R_];function qf(t){return Wf(t.animate)||N_.some(e=>tc(t[e]))}function UP(t){return!!(qf(t)||t.variants)}function UM(t,e){if(qf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||tc(n)?n:void 0,animate:tc(i)?i:void 0}}return t.inherit!==!1?e:{}}function BM(t){const{initial:e,animate:n}=UM(t,W.useContext(Hf));return W.useMemo(()=>({initial:e,animate:n}),[Qw(e),Qw(n)])}function Qw(t){return Array.isArray(t)?t.join(" "):t}const zM=Symbol.for("motionComponentSymbol");function Ca(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HM(t,e,n){return W.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ca(n)&&(n.current=i))},[e])}const L_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WM="framerAppearId",BP="data-"+L_(WM),{schedule:M_}=VP(queueMicrotask,!1),zP=W.createContext({});function qM(t,e,n,i,r){var o,a;const{visualElement:u}=W.useContext(Hf),c=W.useContext(jP),f=W.useContext(zf),m=W.useContext(A_).reducedMotion,g=W.useRef(null);i=i||c.renderer,!g.current&&i&&(g.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const _=g.current,x=W.useContext(zP);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&$M(g.current,n,r,x);const k=W.useRef(!1);W.useInsertionEffect(()=>{_&&k.current&&_.update(n,f)});const A=n[BP],N=W.useRef(!!A&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,A))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,A)));return DP(()=>{_&&(k.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),M_.render(_.render),N.current&&_.animationState&&_.animationState.animateChanges())}),W.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,A)}),N.current=!1))}),_}function $M(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HP(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&Ca(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:f})}function HP(t){if(t)return t.options.allowProjection!==!1?t.projection:HP(t.parent)}function GM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&DM(t);function u(f,m){let g;const _={...W.useContext(A_),...f,layoutId:KM(f)},{isStatic:x}=_,k=BM(f),A=i(f,x);if(!x&&b_){ZM();const N=YM(_);g=N.MeasureLayout,k.visualElement=qM(r,A,_,e,N.ProjectionNode)}return T.jsxs(Hf.Provider,{value:k,children:[g&&k.visualElement?T.jsx(g,{visualElement:k.visualElement,..._}):null,n(r,f,HM(A,k.visualElement,m),A,x,k.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const c=W.forwardRef(u);return c[zM]=r,c}function KM({layoutId:t}){const e=W.useContext(I_).id;return e&&t!==void 0?e+"-"+t:t}function ZM(t,e){W.useContext(jP).strict}function YM(t){const{drag:e,layout:n}=Qa;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const XM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function D_(t){return typeof t!="string"||t.includes("-")?!1:!!(XM.indexOf(t)>-1||/[A-Z]/u.test(t))}function Jw(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function O_(t,e,n,i){if(typeof e=="function"){const[r,o]=Jw(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=Jw(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const Mg=t=>Array.isArray(t),QM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),JM=t=>Mg(t)?t[t.length-1]||0:t,Yt=t=>!!(t&&t.getVelocity);function cd(t){const e=Yt(t)?t.get():t;return QM(e)?e.toValue():e}function eD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:tD(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const WP=t=>(e,n)=>{const i=W.useContext(Hf),r=W.useContext(zf),o=()=>eD(t,e,i,r);return n?o():C_(o)};function tD(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=cd(o[_]);let{initial:a,animate:u}=t;const c=qf(t),f=UP(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!Wf(g)){const _=Array.isArray(g)?g:[g];for(let x=0;x<_.length;x++){const k=O_(t,_[x]);if(k){const{transitionEnd:A,transition:N,...P}=k;for(const E in P){let C=P[E];if(Array.isArray(C)){const F=m?C.length-1:0;C=C[F]}C!==null&&(r[E]=C)}for(const E in A)r[E]=A[E]}}}return r}const hl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(hl),qP=t=>e=>typeof e=="string"&&e.startsWith(t),$P=qP("--"),nD=qP("var(--"),V_=t=>nD(t)?iD.test(t.split("/*")[0].trim()):!1,iD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,GP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,yr=(t,e,n)=>n>e?e:n<t?t:n,dl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nc={...dl,transform:t=>yr(0,1,t)},Bh={...dl,default:1},xc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jr=xc("deg"),Ri=xc("%"),pe=xc("px"),rD=xc("vh"),sD=xc("vw"),eT={...Ri,parse:t=>Ri.parse(t)/100,transform:t=>Ri.transform(t*100)},oD={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe},aD={rotate:jr,rotateX:jr,rotateY:jr,rotateZ:jr,scale:Bh,scaleX:Bh,scaleY:Bh,scaleZ:Bh,skew:jr,skewX:jr,skewY:jr,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:nc,originX:eT,originY:eT,originZ:pe},tT={...dl,transform:Math.round},j_={...oD,...aD,zIndex:tT,size:pe,fillOpacity:nc,strokeOpacity:nc,numOctaves:tT},lD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uD=hl.length;function cD(t,e,n){let i="",r=!0;for(let o=0;o<uD;o++){const a=hl[o],u=t[a];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(a.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const f=GP(u,j_[a]);if(!c){r=!1;const m=lD[a]||a;i+=`${m}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function F_(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const c in e){const f=e[c];if(ko.has(c)){a=!0;continue}else if($P(c)){r[c]=f;continue}else{const m=GP(f,j_[c]);c.startsWith("origin")?(u=!0,o[c]=m):i[c]=m}}if(e.transform||(a||n?i.transform=cD(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:m=0}=o;i.transformOrigin=`${c} ${f} ${m}`}}const hD={offset:"stroke-dashoffset",array:"stroke-dasharray"},dD={offset:"strokeDashoffset",array:"strokeDasharray"};function fD(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?hD:dD;t[o.offset]=pe.transform(-i);const a=pe.transform(e),u=pe.transform(n);t[o.array]=`${a} ${u}`}function nT(t,e,n){return typeof t=="string"?t:pe.transform(e+n*t)}function pD(t,e,n){const i=nT(e,t.x,t.width),r=nT(n,t.y,t.height);return`${i} ${r}`}function U_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},m,g){if(F_(t,f,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:x,dimensions:k}=t;_.transform&&(k&&(x.transform=_.transform),delete _.transform),k&&(r!==void 0||o!==void 0||x.transform)&&(x.transformOrigin=pD(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),i!==void 0&&(_.scale=i),a!==void 0&&fD(_,a,u,c,!1)}const B_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KP=()=>({...B_(),attrs:{}}),z_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ZP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const YP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function XP(t,e,n,i){ZP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(YP.has(r)?r:L_(r),e.attrs[r])}const Jd={};function mD(t){Object.assign(Jd,t)}function QP(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jd[t]||t==="opacity")}function H_(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(Yt(r[a])||e.style&&Yt(e.style[a])||QP(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function JP(t,e,n){const i=H_(t,e,n);for(const r in t)if(Yt(t[r])||Yt(e[r])){const o=hl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function gD(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iT=["x","y","width","height","cx","cy","r"],yD={useVisualState:WP({scrapeMotionValuesFromProps:JP,createRenderState:KP,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(ko.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<iT.length;u++){const c=iT[u];t[c]!==e[c]&&(a=!0)}a&&Xe.read(()=>{gD(n,i),Xe.render(()=>{U_(i,r,z_(n.tagName),t.transformTemplate),XP(n,i)})})}})},_D={useVisualState:WP({scrapeMotionValuesFromProps:H_,createRenderState:B_})};function eI(t,e,n){for(const i in e)!Yt(e[i])&&!QP(i,n)&&(t[i]=e[i])}function vD({transformTemplate:t},e){return W.useMemo(()=>{const n=B_();return F_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function wD(t,e){const n=t.style||{},i={};return eI(i,n,t),Object.assign(i,vD(t,e)),i}function TD(t,e){const n={},i=wD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function ED(t,e,n,i){const r=W.useMemo(()=>{const o=KP();return U_(o,e,z_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};eI(o,t.style,t),r.style={...o,...r.style}}return r}function xD(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(D_(n)?ED:TD)(i,o,a,n),f=jM(i,typeof n=="string",t),m=n!==W.Fragment?{...f,...c,ref:r}:{},{children:g}=i,_=W.useMemo(()=>Yt(g)?g.get():g,[g]);return W.createElement(n,{...m,children:_})}}function SD(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...D_(i)?yD:_D,preloadedFeatures:t,useRender:xD(r),createVisualElement:e,Component:i};return GM(a)}}function tI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function $f(t,e,n){const i=t.getProps();return O_(i,e,n!==void 0?n:i.custom,t)}const PD=k_(()=>window.ScrollTimeline!==void 0);class ID{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(PD()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class CD extends ID{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function W_(t,e){return t?t[e]||t.default||t:void 0}const Dg=2e4;function nI(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Dg;)e+=n,i=t.next(e);return e>=Dg?1/0:e}function q_(t){return typeof t=="function"}function rT(t,e){t.timeline=e,t.onfinish=null}const $_=t=>Array.isArray(t)&&typeof t[0]=="number",AD={linearEasing:void 0};function bD(t,e){const n=k_(t);return()=>{var i;return(i=AD[e])!==null&&i!==void 0?i:n()}}const ef=bD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),iI=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Xa(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function rI(t){return!!(typeof t=="function"&&ef()||!t||typeof t=="string"&&(t in Og||ef())||$_(t)||Array.isArray(t)&&t.every(rI))}const au=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Og={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:au([0,.65,.55,1]),circOut:au([.55,0,1,.45]),backIn:au([.31,.01,.66,-.59]),backOut:au([.33,1.53,.69,.99])};function sI(t,e){if(t)return typeof t=="function"&&ef()?iI(t,e):$_(t)?au(t):Array.isArray(t)?t.map(n=>sI(n,e)||Og.easeOut):Og[t]}const ni={x:!1,y:!1};function oI(){return ni.x||ni.y}function kD(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function aI(t,e){const n=kD(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function sT(t){return e=>{e.pointerType==="touch"||oI()||t(e)}}function RD(t,e,n={}){const[i,r,o]=aI(t,n),a=sT(u=>{const{target:c}=u,f=e(u);if(typeof f!="function"||!c)return;const m=sT(g=>{f(g),c.removeEventListener("pointerleave",m)});c.addEventListener("pointerleave",m,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const lI=(t,e)=>e?t===e?!0:lI(t,e.parentElement):!1,G_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ND=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function LD(t){return ND.has(t.tagName)||t.tabIndex!==-1}const lu=new WeakSet;function oT(t){return e=>{e.key==="Enter"&&t(e)}}function um(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MD=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=oT(()=>{if(lu.has(n))return;um(n,"down");const r=oT(()=>{um(n,"up")}),o=()=>um(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function aT(t){return G_(t)&&!oI()}function DD(t,e,n={}){const[i,r,o]=aI(t,n),a=u=>{const c=u.currentTarget;if(!aT(u)||lu.has(c))return;lu.add(c);const f=e(u),m=(x,k)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",_),!(!aT(x)||!lu.has(c))&&(lu.delete(c),typeof f=="function"&&f(x,{success:k}))},g=x=>{m(x,n.useGlobalTarget||lI(c,x.target))},_=x=>{m(x,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",_,r)};return i.forEach(u=>{!LD(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>MD(f,r),r)}),o}function OD(t){return t==="x"||t==="y"?ni[t]?null:(ni[t]=!0,()=>{ni[t]=!1}):ni.x||ni.y?null:(ni.x=ni.y=!0,()=>{ni.x=ni.y=!1})}const uI=new Set(["width","height","top","left","right","bottom",...hl]);let hd;function VD(){hd=void 0}const Ni={now:()=>(hd===void 0&&Ni.set(Vt.isProcessing||NM.useManualTiming?Vt.timestamp:performance.now()),hd),set:t=>{hd=t,queueMicrotask(VD)}};function K_(t,e){t.indexOf(e)===-1&&t.push(e)}function Z_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Y_{constructor(){this.subscriptions=[]}add(e){return K_(this.subscriptions,e),()=>Z_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function cI(t,e){return e?t*(1e3/e):0}const lT=30,jD=t=>!isNaN(parseFloat(t));class FD{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=Ni.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ni.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Y_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ni.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lT);return cI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ic(t,e){return new FD(t,e)}function UD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ic(n))}function BD(t,e){const n=$f(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=JM(o[a]);UD(t,a,u)}}function zD(t){return!!(Yt(t)&&t.add)}function Vg(t,e){const n=t.getValue("willChange");if(zD(n))return n.add(e)}function hI(t){return t.props[BP]}const dI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HD=1e-7,WD=12;function qD(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=dI(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>HD&&++u<WD);return a}function Sc(t,e,n,i){if(t===e&&n===i)return bn;const r=o=>qD(o,0,1,t,n);return o=>o===0||o===1?o:dI(r(o),e,i)}const fI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pI=t=>e=>1-t(1-e),mI=Sc(.33,1.53,.69,.99),X_=pI(mI),gI=fI(X_),yI=t=>(t*=2)<1?.5*X_(t):.5*(2-Math.pow(2,-10*(t-1))),Q_=t=>1-Math.sin(Math.acos(t)),_I=pI(Q_),vI=fI(Q_),wI=t=>/^0[^.\s]+$/u.test(t);function $D(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wI(t):!0}const xu=t=>Math.round(t*1e5)/1e5,J_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GD(t){return t==null}const KD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ev=(t,e)=>n=>!!(typeof n=="string"&&KD.test(n)&&n.startsWith(t)||e&&!GD(n)&&Object.prototype.hasOwnProperty.call(n,e)),TI=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(J_);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},ZD=t=>yr(0,255,t),cm={...dl,transform:t=>Math.round(ZD(t))},io={test:ev("rgb","red"),parse:TI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+cm.transform(t)+", "+cm.transform(e)+", "+cm.transform(n)+", "+xu(nc.transform(i))+")"};function YD(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const jg={test:ev("#"),parse:YD,transform:io.transform},Aa={test:ev("hsl","hue"),parse:TI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ri.transform(xu(e))+", "+Ri.transform(xu(n))+", "+xu(nc.transform(i))+")"},qt={test:t=>io.test(t)||jg.test(t)||Aa.test(t),parse:t=>io.test(t)?io.parse(t):Aa.test(t)?Aa.parse(t):jg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?io.transform(t):Aa.transform(t)},XD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(J_))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(XD))===null||n===void 0?void 0:n.length)||0)>0}const EI="number",xI="color",JD="var",eO="var(",uT="${}",tO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rc(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(tO,c=>(qt.test(c)?(i.color.push(o),r.push(xI),n.push(qt.parse(c))):c.startsWith(eO)?(i.var.push(o),r.push(JD),n.push(c)):(i.number.push(o),r.push(EI),n.push(parseFloat(c))),++o,uT)).split(uT);return{values:n,split:u,indexes:i,types:r}}function SI(t){return rc(t).values}function PI(t){const{split:e,types:n}=rc(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===EI?o+=xu(r[a]):u===xI?o+=qt.transform(r[a]):o+=r[a]}return o}}const nO=t=>typeof t=="number"?0:t;function iO(t){const e=SI(t);return PI(t)(e.map(nO))}const ms={test:QD,parse:SI,createTransformer:PI,getAnimatableNone:iO},rO=new Set(["brightness","contrast","saturate","opacity"]);function sO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(J_)||[];if(!i)return t;const r=n.replace(i,"");let o=rO.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const oO=/\b([a-z-]*)\(.*?\)/gu,Fg={...ms,getAnimatableNone:t=>{const e=t.match(oO);return e?e.map(sO).join(" "):t}},aO={...j_,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:Fg,WebkitFilter:Fg},tv=t=>aO[t];function II(t,e){let n=tv(t);return n!==Fg&&(n=ms),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lO=new Set(["auto","none","0"]);function uO(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!lO.has(o)&&rc(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=II(n,r)}const cT=t=>t===dl||t===pe,hT=(t,e)=>parseFloat(t.split(", ")[e]),dT=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return hT(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?hT(o[1],t):0}},cO=new Set(["x","y","z"]),hO=hl.filter(t=>!cO.has(t));function dO(t){const e=[];return hO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ja={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:dT(4,13),y:dT(5,14)};Ja.translateX=Ja.x;Ja.translateY=Ja.y;const lo=new Set;let Ug=!1,Bg=!1;function CI(){if(Bg){const t=Array.from(lo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=dO(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Bg=!1,Ug=!1,lo.forEach(t=>t.complete()),lo.clear()}function AI(){lo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Bg=!0)})}function fO(){AI(),CI()}class nv{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lo.add(this),Ug||(Ug=!0,Xe.read(AI),Xe.resolveKeyframes(CI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const c=i.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const bI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),pO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mO(t){const e=pO.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function kI(t,e,n=1){const[i,r]=mO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return bI(a)?parseFloat(a):a}return V_(r)?kI(r,e,n+1):r}const RI=t=>e=>e.test(t),gO={test:t=>t==="auto",parse:t=>t},NI=[dl,pe,Ri,jr,sD,rD,gO],fT=t=>NI.find(RI(t));class LI extends nv{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),V_(f))){const m=kI(f,n.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!uI.has(i)||e.length!==2)return;const[r,o]=e,a=fT(r),u=fT(o);if(a!==u)if(cT(a)&&cT(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)$D(e[r])&&i.push(r);i.length&&uO(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ja[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Ja[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const pT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ms.test(t)||t==="0")&&!t.startsWith("url("));function yO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _O(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=pT(r,e),u=pT(o,e);return!a||!u?!1:yO(t)||(n==="spring"||q_(n))&&i}const vO=t=>t!==null;function Gf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(vO),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const wO=40;class MI{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ni.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>wO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&fO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ni.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:c,isGenerator:f}=this.options;if(!f&&!_O(e,i,r,o))if(a)this.options.duration=0;else{c&&c(Gf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tt=(t,e,n)=>t+(e-t)*n;function hm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function TO({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=hm(c,u,t+1/3),o=hm(c,u,t),a=hm(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function tf(t,e){return n=>n>0?e:t}const dm=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},EO=[jg,io,Aa],xO=t=>EO.find(e=>e.test(t));function mT(t){const e=xO(t);if(!e)return!1;let n=e.parse(t);return e===Aa&&(n=TO(n)),n}const gT=(t,e)=>{const n=mT(t),i=mT(e);if(!n||!i)return tf(t,e);const r={...n};return o=>(r.red=dm(n.red,i.red,o),r.green=dm(n.green,i.green,o),r.blue=dm(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),io.transform(r))},SO=(t,e)=>n=>e(t(n)),Pc=(...t)=>t.reduce(SO),zg=new Set(["none","hidden"]);function PO(t,e){return zg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function IO(t,e){return n=>tt(t,e,n)}function iv(t){return typeof t=="number"?IO:typeof t=="string"?V_(t)?tf:qt.test(t)?gT:bO:Array.isArray(t)?DI:typeof t=="object"?qt.test(t)?gT:CO:tf}function DI(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>iv(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function CO(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=iv(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function AO(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],c=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=c,r[a]++}return i}const bO=(t,e)=>{const n=ms.createTransformer(e),i=rc(t),r=rc(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?zg.has(t)&&!r.values.length||zg.has(e)&&!i.values.length?PO(t,e):Pc(DI(AO(i,r),r.values),n):tf(t,e)};function OI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tt(t,e,n):iv(t)(t,e)}const kO=5;function VI(t,e,n){const i=Math.max(e-kO,0);return cI(n-t(i),e-i)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fm=.001;function RO({duration:t=ot.duration,bounce:e=ot.bounce,velocity:n=ot.velocity,mass:i=ot.mass}){let r,o,a=1-e;a=yr(ot.minDamping,ot.maxDamping,a),t=yr(ot.minDuration,ot.maxDuration,hr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,x=Hg(f,a),k=Math.exp(-g);return fm-_/x*k},o=f=>{const g=f*a*t,_=g*n+n,x=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),A=Hg(Math.pow(f,2),a);return(-r(f)+fm>0?-1:1)*((_-x)*k)/A}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-fm+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,c=LO(r,o,u);if(t=cr(t),isNaN(c))return{stiffness:ot.stiffness,damping:ot.damping,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const NO=12;function LO(t,e,n){let i=n;for(let r=1;r<NO;r++)i=i-t(i)/e(i);return i}function Hg(t,e){return t*Math.sqrt(1-e*e)}const MO=["duration","bounce"],DO=["stiffness","damping","mass"];function yT(t,e){return e.some(n=>t[n]!==void 0)}function OO(t){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...t};if(!yT(t,DO)&&yT(t,MO))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*yr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ot.mass,stiffness:r,damping:o}}else{const n=RO(t);e={...e,...n,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function jI(t=ot.visualDuration,e=ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:m,duration:g,velocity:_,isResolvedFromDuration:x}=OO({...n,velocity:-hr(n.velocity||0)}),k=_||0,A=f/(2*Math.sqrt(c*m)),N=a-o,P=hr(Math.sqrt(c/m)),E=Math.abs(N)<5;i||(i=E?ot.restSpeed.granular:ot.restSpeed.default),r||(r=E?ot.restDelta.granular:ot.restDelta.default);let C;if(A<1){const z=Hg(P,A);C=K=>{const R=Math.exp(-A*P*K);return a-R*((k+A*P*N)/z*Math.sin(z*K)+N*Math.cos(z*K))}}else if(A===1)C=z=>a-Math.exp(-P*z)*(N+(k+P*N)*z);else{const z=P*Math.sqrt(A*A-1);C=K=>{const R=Math.exp(-A*P*K),I=Math.min(z*K,300);return a-R*((k+A*P*N)*Math.sinh(I)+z*N*Math.cosh(I))/z}}const F={calculatedDuration:x&&g||null,next:z=>{const K=C(z);if(x)u.done=z>=g;else{let R=0;A<1&&(R=z===0?cr(k):VI(C,z,K));const I=Math.abs(R)<=i,M=Math.abs(a-K)<=r;u.done=I&&M}return u.value=u.done?a:K,u},toString:()=>{const z=Math.min(nI(F),Dg),K=iI(R=>F.next(z*R).value,z,30);return z+"ms "+K}};return F}function _T({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},x=I=>u!==void 0&&I<u||c!==void 0&&I>c,k=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let A=n*e;const N=g+A,P=a===void 0?N:a(N);P!==N&&(A=P-g);const E=I=>-A*Math.exp(-I/i),C=I=>P+E(I),F=I=>{const M=E(I),D=C(I);_.done=Math.abs(M)<=f,_.value=_.done?P:D};let z,K;const R=I=>{x(_.value)&&(z=I,K=jI({keyframes:[_.value,k(_.value)],velocity:VI(C,I,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let M=!1;return!K&&z===void 0&&(M=!0,F(I),R(I)),z!==void 0&&I>=z?K.next(I-z):(!M&&F(I),_)}}}const VO=Sc(.42,0,1,1),jO=Sc(0,0,.58,1),FI=Sc(.42,0,.58,1),FO=t=>Array.isArray(t)&&typeof t[0]!="number",UO={linear:bn,easeIn:VO,easeInOut:FI,easeOut:jO,circIn:Q_,circInOut:vI,circOut:_I,backIn:X_,backInOut:gI,backOut:mI,anticipate:yI},vT=t=>{if($_(t)){OP(t.length===4);const[e,n,i,r]=t;return Sc(e,n,i,r)}else if(typeof t=="string")return UO[t];return t};function BO(t,e,n){const i=[],r=n||OI,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||bn:e;u=Pc(c,u)}i.push(u)}return i}function zO(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(OP(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=BO(e,i,r),c=u.length,f=m=>{if(a&&m<t[0])return e[0];let g=0;if(c>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const _=Xa(t[g],t[g+1],m);return u[g](_)};return n?m=>f(yr(t[0],t[o-1],m)):f}function HO(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Xa(0,e,i);t.push(tt(n,1,r))}}function WO(t){const e=[0];return HO(e,t.length-1),e}function qO(t,e){return t.map(n=>n*e)}function $O(t,e){return t.map(()=>e||FI).splice(0,t.length-1)}function nf({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=FO(i)?i.map(vT):vT(i),o={done:!1,value:e[0]},a=qO(n&&n.length===e.length?n:WO(e),t),u=zO(a,e,{ease:Array.isArray(r)?r:$O(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const GO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Xe.update(e,!0),stop:()=>ps(e),now:()=>Vt.isProcessing?Vt.timestamp:Ni.now()}},KO={decay:_T,inertia:_T,tween:nf,keyframes:nf,spring:jI},ZO=t=>t/100;class rv extends MI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||nv,u=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=q_(n)?n:KO[n]||nf;let c,f;u!==nf&&typeof e[0]!="number"&&(c=Pc(ZO,OI(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=nI(m));const{calculatedDuration:g}=m,_=g+r,x=_*(i+1)-r;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:_,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=i;if(this.startTime===null)return o.next(0);const{delay:_,repeat:x,repeatType:k,repeatDelay:A,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-_*(this.speed>=0?1:-1),E=this.speed>=0?P<0:P>m;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let C=this.currentTime,F=o;if(x){const I=Math.min(this.currentTime,m)/g;let M=Math.floor(I),D=I%1;!D&&I>=1&&(D=1),D===1&&M--,M=Math.min(M,x+1),!!(M%2)&&(k==="reverse"?(D=1-D,A&&(D-=A/g)):k==="mirror"&&(F=a)),C=yr(0,1,D)*g}const z=E?{done:!1,value:c[0]}:F.next(C);u&&(z.value=u(z.value));let{done:K}=z;!E&&f!==null&&(K=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return R&&r!==void 0&&(z.value=Gf(c,this.options,r)),N&&N(z.value),R&&this.finish(),z}get duration(){const{resolved:e}=this;return e?hr(e.calculatedDuration):0}get time(){return hr(this.currentTime)}set time(e){e=cr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=hr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=GO,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const YO=new Set(["opacity","clipPath","filter","transform"]);function XO(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const m=sI(u,r);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const QO=k_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rf=10,JO=2e4;function eV(t){return q_(t.type)||t.type==="spring"||!rI(t.ease)}function tV(t,e){const n=new rv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<JO;)i=n.sample(o),r.push(i.value),o+=rf;return{times:void 0,keyframes:r,duration:o-rf,ease:"linear"}}const UI={anticipate:yI,backInOut:gI,circInOut:vI};function nV(t){return t in UI}class wT extends MI{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new LI(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:c,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&ef()&&nV(o)&&(o=UI[o]),eV(this.options)){const{onComplete:g,onUpdate:_,motionValue:x,element:k,...A}=this.options,N=tV(e,A);e=N.keyframes,e.length===1&&(e[1]=e[0]),i=N.duration,r=N.times,o=N.ease,a="keyframes"}const m=XO(u.owner.current,c,e,{...this.options,duration:i,times:r,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(rT(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Gf(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return hr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return hr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=cr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return bn;const{animation:i}=n;rT(i,e)}return bn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:_,...x}=this.options,k=new rv({...x,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),A=cr(this.time);f.setWithVelocity(k.sample(A-rf).value,k.sample(A).value,rf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return QO()&&i&&YO.has(i)&&!c&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const iV={type:"spring",stiffness:500,damping:25,restSpeed:10},rV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sV={type:"keyframes",duration:.8},oV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aV=(t,{keyframes:e})=>e.length>2?sV:ko.has(t)?t.startsWith("scale")?rV(e[1]):iV:oV;function lV({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...m}){return!!Object.keys(m).length}const sv=(t,e,n,i={},r,o)=>a=>{const u=W_(i,t)||{},c=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-cr(c);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};lV(u)||(m={...m,...aV(t,m)}),m.duration&&(m.duration=cr(m.duration)),m.repeatDelay&&(m.repeatDelay=cr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!o&&e.get()!==void 0){const _=Gf(m.keyframes,u);if(_!==void 0)return Xe.update(()=>{m.onUpdate(_),m.onComplete()}),new CD([])}return!o&&wT.supports(m)?new wT(m):new rv(m)};function uV({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function BI(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...c}=e;i&&(a=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in c){const _=t.getValue(g,(o=t.latestValues[g])!==null&&o!==void 0?o:null),x=c[g];if(x===void 0||m&&uV(m,g))continue;const k={delay:n,...W_(a||{},g)};let A=!1;if(window.MotionHandoffAnimation){const P=hI(t);if(P){const E=window.MotionHandoffAnimation(P,g,Xe);E!==null&&(k.startTime=E,A=!0)}}Vg(t,g),_.start(sv(g,_,x,t.shouldReduceMotion&&uI.has(g)?{type:!1}:k,t,A));const N=_.animation;N&&f.push(N)}return u&&Promise.all(f).then(()=>{Xe.update(()=>{u&&BD(t,u)})}),f}function Wg(t,e,n={}){var i;const r=$f(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(BI(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:_}=o;return cV(t,e,m+f,g,_,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,m]=c==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function cV(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(hV).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Wg(f,e,{...o,delay:n+c(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function hV(t,e){return t.sortNodePosition(e)}function dV(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Wg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Wg(t,e,n);else{const r=typeof e=="function"?$f(t,e,n.custom):e;i=Promise.all(BI(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const fV=N_.length;function zI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<fV;n++){const i=N_[n],r=t.props[i];(tc(r)||r===!1)&&(e[i]=r)}return e}const pV=[...R_].reverse(),mV=R_.length;function gV(t){return e=>Promise.all(e.map(({animation:n,options:i})=>dV(t,n,i)))}function yV(t){let e=gV(t),n=TT(),i=!0;const r=c=>(f,m)=>{var g;const _=$f(t,m,c==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(_){const{transition:x,transitionEnd:k,...A}=_;f={...f,...A,...k}}return f};function o(c){e=c(t)}function a(c){const{props:f}=t,m=zI(t.parent)||{},g=[],_=new Set;let x={},k=1/0;for(let N=0;N<mV;N++){const P=pV[N],E=n[P],C=f[P]!==void 0?f[P]:m[P],F=tc(C),z=P===c?E.isActive:null;z===!1&&(k=N);let K=C===m[P]&&C!==f[P]&&F;if(K&&i&&t.manuallyAnimateOnMount&&(K=!1),E.protectedKeys={...x},!E.isActive&&z===null||!C&&!E.prevProp||Wf(C)||typeof C=="boolean")continue;const R=_V(E.prevProp,C);let I=R||P===c&&E.isActive&&!K&&F||N>k&&F,M=!1;const D=Array.isArray(C)?C:[C];let V=D.reduce(r(P),{});z===!1&&(V={});const{prevResolvedValues:U={}}=E,O={...U,...V},ke=J=>{I=!0,_.has(J)&&(M=!0,_.delete(J)),E.needsAnimating[J]=!0;const $=t.getValue(J);$&&($.liveStyle=!1)};for(const J in O){const $=V[J],se=U[J];if(x.hasOwnProperty(J))continue;let Q=!1;Mg($)&&Mg(se)?Q=!tI($,se):Q=$!==se,Q?$!=null?ke(J):_.add(J):$!==void 0&&_.has(J)?ke(J):E.protectedKeys[J]=!0}E.prevProp=C,E.prevResolvedValues=V,E.isActive&&(x={...x,...V}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(K&&R)||M)&&g.push(...D.map(J=>({animation:J,options:{type:P}})))}if(_.size){const N={};_.forEach(P=>{const E=t.getBaseTarget(P),C=t.getValue(P);C&&(C.liveStyle=!0),N[P]=E??null}),g.push({animation:N})}let A=!!g.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(g):Promise.resolve()}function u(c,f){var m;if(n[c].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(_=>{var x;return(x=_.animationState)===null||x===void 0?void 0:x.setActive(c,f)}),n[c].isActive=f;const g=a(c);for(const _ in n)n[_].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=TT(),i=!0}}}function _V(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tI(e,t):!1}function Gs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TT(){return{animate:Gs(!0),whileInView:Gs(),whileHover:Gs(),whileTap:Gs(),whileDrag:Gs(),whileFocus:Gs(),exit:Gs()}}class Is{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vV extends Is{constructor(e){super(e),e.animationState||(e.animationState=yV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Wf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let wV=0;class TV extends Is{constructor(){super(...arguments),this.id=wV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const EV={animation:{Feature:vV},exit:{Feature:TV}};function sc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Ic(t){return{point:{x:t.pageX,y:t.pageY}}}const xV=t=>e=>G_(e)&&t(e,Ic(e));function Su(t,e,n,i){return sc(t,e,xV(n),i)}const ET=(t,e)=>Math.abs(t-e);function SV(t,e){const n=ET(t.x,e.x),i=ET(t.y,e.y);return Math.sqrt(n**2+i**2)}class HI{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=mm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,x=SV(g.offset,{x:0,y:0})>=3;if(!_&&!x)return;const{point:k}=g,{timestamp:A}=Vt;this.history.push({...k,timestamp:A});const{onStart:N,onMove:P}=this.handlers;_||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=pm(_,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:x,onSessionEnd:k,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=mm(g.type==="pointercancel"?this.lastMoveEventInfo:pm(_,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,N),k&&k(g,N)},!G_(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Ic(e),u=pm(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=Vt;this.history=[{...c,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,mm(u,this.history)),this.removeListeners=Pc(Su(this.contextWindow,"pointermove",this.handlePointerMove),Su(this.contextWindow,"pointerup",this.handlePointerUp),Su(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ps(this.updatePoint)}}function pm(t,e){return e?{point:e(t.point)}:t}function xT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mm({point:t},e){return{point:t,delta:xT(t,WI(e)),offset:xT(t,PV(e)),velocity:IV(e,.1)}}function PV(t){return t[0]}function WI(t){return t[t.length-1]}function IV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=WI(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>cr(e)));)n--;if(!i)return{x:0,y:0};const o=hr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const qI=1e-4,CV=1-qI,AV=1+qI,$I=.01,bV=0-$I,kV=0+$I;function Rn(t){return t.max-t.min}function RV(t,e,n){return Math.abs(t-e)<=n}function ST(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=Rn(n)/Rn(e),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CV&&t.scale<=AV||isNaN(t.scale))&&(t.scale=1),(t.translate>=bV&&t.translate<=kV||isNaN(t.translate))&&(t.translate=0)}function Pu(t,e,n,i){ST(t.x,e.x,n.x,i?i.originX:void 0),ST(t.y,e.y,n.y,i?i.originY:void 0)}function PT(t,e,n){t.min=n.min+e.min,t.max=t.min+Rn(e)}function NV(t,e,n){PT(t.x,e.x,n.x),PT(t.y,e.y,n.y)}function IT(t,e,n){t.min=e.min-n.min,t.max=t.min+Rn(e)}function Iu(t,e,n){IT(t.x,e.x,n.x),IT(t.y,e.y,n.y)}function LV(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function CT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function MV(t,{top:e,left:n,bottom:i,right:r}){return{x:CT(t.x,n,r),y:CT(t.y,e,i)}}function AT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function DV(t,e){return{x:AT(t.x,e.x),y:AT(t.y,e.y)}}function OV(t,e){let n=.5;const i=Rn(t),r=Rn(e);return r>i?n=Xa(e.min,e.max-i,t.min):i>r&&(n=Xa(t.min,t.max-r,e.min)),yr(0,1,n)}function VV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qg=.35;function jV(t=qg){return t===!1?t=0:t===!0&&(t=qg),{x:bT(t,"left","right"),y:bT(t,"top","bottom")}}function bT(t,e,n){return{min:kT(t,e),max:kT(t,n)}}function kT(t,e){return typeof t=="number"?t:t[e]||0}const RT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ba=()=>({x:RT(),y:RT()}),NT=()=>({min:0,max:0}),ht=()=>({x:NT(),y:NT()});function zn(t){return[t("x"),t("y")]}function GI({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function FV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function UV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function gm(t){return t===void 0||t===1}function $g({scale:t,scaleX:e,scaleY:n}){return!gm(t)||!gm(e)||!gm(n)}function Xs(t){return $g(t)||KI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function KI(t){return LT(t.x)||LT(t.y)}function LT(t){return t&&t!=="0%"}function sf(t,e,n){const i=t-n,r=e*i;return n+r}function MT(t,e,n,i,r){return r!==void 0&&(t=sf(t,r,i)),sf(t,n,i)+e}function Gg(t,e=0,n=1,i,r){t.min=MT(t.min,e,n,i,r),t.max=MT(t.max,e,n,i,r)}function ZI(t,{x:e,y:n}){Gg(t.x,e.translate,e.scale,e.originPoint),Gg(t.y,n.translate,n.scale,n.originPoint)}const DT=.999999999999,OT=1.0000000000001;function BV(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ra(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ZI(t,a)),i&&Xs(o.latestValues)&&Ra(t,o.latestValues))}e.x<OT&&e.x>DT&&(e.x=1),e.y<OT&&e.y>DT&&(e.y=1)}function ka(t,e){t.min=t.min+e,t.max=t.max+e}function VT(t,e,n,i,r=.5){const o=tt(t.min,t.max,r);Gg(t,e,n,o,i)}function Ra(t,e){VT(t.x,e.x,e.scaleX,e.scale,e.originX),VT(t.y,e.y,e.scaleY,e.scale,e.originY)}function YI(t,e){return GI(UV(t.getBoundingClientRect(),e))}function zV(t,e,n){const i=YI(t,n),{scroll:r}=e;return r&&(ka(i.x,r.offset.x),ka(i.y,r.offset.y)),i}const XI=({current:t})=>t?t.ownerDocument.defaultView:null,HV=new WeakMap;class WV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ic(m).point)},o=(m,g)=>{const{drag:_,dragPropagation:x,onDragStart:k}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OD(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(N=>{let P=this.getAxisMotionValue(N).get()||0;if(Ri.test(P)){const{projection:E}=this.visualElement;if(E&&E.layout){const C=E.layout.layoutBox[N];C&&(P=Rn(C)*(parseFloat(P)/100))}}this.originPoint[N]=P}),k&&Xe.postRender(()=>k(m,g)),Vg(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:k,onDrag:A}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=g;if(x&&this.currentDirection===null){this.currentDirection=qV(N),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),A&&A(m,g)},u=(m,g)=>this.stop(m,g),c=()=>zn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new HI(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:XI(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Xe.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!zh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=LV(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ca(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=MV(r.layoutBox,n):this.constraints=!1,this.elastic=jV(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=VV(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ca(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=zV(i,r.root,this.visualElement.getTransformPagePoint());let a=DV(r.layout.layoutBox,o);if(n){const u=n(FV(a));this.hasMutatedConstraints=!!u,u&&(a=GI(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=zn(m=>{if(!zh(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,x=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Vg(this.visualElement,e),i.start(sv(e,i,0,n,this.visualElement,!1))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:i}=this.getProps();if(!zh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ca(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};zn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const c=u.get();r[a]=OV({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),zn(a=>{if(!zh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(tt(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;HV.set(this.visualElement,this);const e=this.visualElement.current,n=Su(e,"pointerdown",c=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Ca(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Xe.read(i);const a=sc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(zn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=qg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function zh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $V extends Is{constructor(e){super(e),this.removeGroupControls=bn,this.removeListeners=bn,this.controls=new WV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bn}unmount(){this.removeGroupControls(),this.removeListeners()}}const jT=t=>(e,n)=>{t&&Xe.postRender(()=>t(e,n))};class GV extends Is{constructor(){super(...arguments),this.removePointerDownListener=bn}onPointerDown(e){this.session=new HI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:jT(e),onStart:jT(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Xe.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=Su(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=FT(t,e.target.x),i=FT(t,e.target.y);return`${n}% ${i}%`}},KV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ms.parse(t);if(r.length>5)return i;const o=ms.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=tt(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class ZV extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;mD(YV),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),dd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Xe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),M_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QI(t){const[e,n]=MP(),i=W.useContext(I_);return T.jsx(ZV,{...t,layoutGroup:i,switchLayoutGroup:W.useContext(zP),isPresent:e,safeToRemove:n})}const YV={borderRadius:{...tu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tu,borderTopRightRadius:tu,borderBottomLeftRadius:tu,borderBottomRightRadius:tu,boxShadow:KV};function XV(t,e,n){const i=Yt(t)?t:ic(t);return i.start(sv("",i,e,n)),i.animation}function QV(t){return t instanceof SVGElement&&t.tagName!=="svg"}const JV=(t,e)=>t.depth-e.depth;class e4{constructor(){this.children=[],this.isDirty=!1}add(e){K_(this.children,e),this.isDirty=!0}remove(e){Z_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JV),this.isDirty=!1,this.children.forEach(e)}}function t4(t,e){const n=Ni.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ps(i),t(o-e))};return Xe.read(i,!0),()=>ps(i)}const JI=["TopLeft","TopRight","BottomLeft","BottomRight"],n4=JI.length,UT=t=>typeof t=="string"?parseFloat(t):t,BT=t=>typeof t=="number"||pe.test(t);function i4(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,r4(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,s4(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<n4;a++){const u=`border${JI[a]}Radius`;let c=zT(e,u),f=zT(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||BT(c)===BT(f)?(t[u]=Math.max(tt(UT(c),UT(f),i),0),(Ri.test(f)||Ri.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function zT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r4=eC(0,.5,_I),s4=eC(.5,.95,bn);function eC(t,e,n){return i=>i<t?0:i>e?1:n(Xa(t,e,i))}function HT(t,e){t.min=e.min,t.max=e.max}function Bn(t,e){HT(t.x,e.x),HT(t.y,e.y)}function WT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qT(t,e,n,i,r){return t-=e,t=sf(t,1/n,i),r!==void 0&&(t=sf(t,1/r,i)),t}function o4(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ri.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=qT(t.min,e,n,u,r),t.max=qT(t.max,e,n,u,r)}function $T(t,e,[n,i,r],o,a){o4(t,e[n],e[i],e[r],e.scale,o,a)}const a4=["x","scaleX","originX"],l4=["y","scaleY","originY"];function GT(t,e,n,i){$T(t.x,e,a4,n?n.x:void 0,i?i.x:void 0),$T(t.y,e,l4,n?n.y:void 0,i?i.y:void 0)}function KT(t){return t.translate===0&&t.scale===1}function tC(t){return KT(t.x)&&KT(t.y)}function ZT(t,e){return t.min===e.min&&t.max===e.max}function u4(t,e){return ZT(t.x,e.x)&&ZT(t.y,e.y)}function YT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function nC(t,e){return YT(t.x,e.x)&&YT(t.y,e.y)}function XT(t){return Rn(t.x)/Rn(t.y)}function QT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class c4{constructor(){this.members=[]}add(e){K_(this.members,e),e.scheduleRender()}remove(e){if(Z_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h4(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:_,skewX:x,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),g&&(i+=`rotateX(${g}deg) `),_&&(i+=`rotateY(${_}deg) `),x&&(i+=`skewX(${x}deg) `),k&&(i+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(i+=`scale(${u}, ${c})`),i||"none"}const Qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},uu=typeof window<"u"&&window.MotionDebug!==void 0,ym=["","X","Y","Z"],d4={visibility:"hidden"},JT=1e3;let f4=0;function _m(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function iC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Xe,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&iC(i)}function rC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=f4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,uu&&(Qs.totalNodes=Qs.resolvedTargetDeltas=Qs.recalculatedProjection=0),this.nodes.forEach(g4),this.nodes.forEach(T4),this.nodes.forEach(E4),this.nodes.forEach(y4),uu&&window.MotionDebug.record(Qs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new e4)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Y_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QV(a),this.instance=a;const{layoutId:c,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=t4(_,250),dd.hasAnimatedSinceResize&&(dd.hasAnimatedSinceResize=!1,this.nodes.forEach(t1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:x,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||m.getDefaultTransition()||C4,{onLayoutAnimationStart:N,onLayoutAnimationComplete:P}=m.getProps(),E=!this.targetLayout||!nC(this.targetLayout,k)||x,C=!_&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const F={...W_(A,"layout"),onPlay:N,onComplete:P};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||t1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ps(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(x4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(e1);return}this.isUpdating||this.nodes.forEach(v4),this.isUpdating=!1,this.nodes.forEach(w4),this.nodes.forEach(p4),this.nodes.forEach(m4),this.clearAllSnapshots();const u=Ni.now();Vt.delta=yr(0,1e3/60,u-Vt.timestamp),Vt.timestamp=u,Vt.isProcessing=!0,lm.update.process(Vt),lm.preRender.process(Vt),lm.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,M_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_4),this.sharedNodes.forEach(S4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!tC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Xs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),A4(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return ht();const c=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(b4))){const{scroll:m}=this.root;m&&(ka(c.x,m.offset.x),ka(c.y,m.offset.y))}return c}removeElementScroll(a){var u;const c=ht();if(Bn(c,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:_}=m;m!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&Bn(c,a),ka(c.x,g.offset.x),ka(c.y,g.offset.y))}return c}applyTransform(a,u=!1){const c=ht();Bn(c,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ra(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Xs(m.latestValues)&&Ra(c,m.latestValues)}return Xs(this.latestValues)&&Ra(c,this.latestValues),c}removeTransform(a){const u=ht();Bn(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!Xs(f.latestValues))continue;$g(f.latestValues)&&f.updateSnapshot();const m=ht(),g=f.measurePageBox();Bn(m,g),GT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Xs(this.latestValues)&&GT(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),Iu(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),NV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),ZI(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),Iu(this.relativeTargetOrigin,this.target,x.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}uu&&Qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$g(this.parent.latestValues)||KI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Bn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,x=this.treeScale.y;BV(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ht());const{target:k}=u;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WT(this.prevProjectionDelta.x,this.projectionDelta.x),WT(this.prevProjectionDelta.y,this.projectionDelta.y)),Pu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==x||!QT(this.projectionDelta.x,this.prevProjectionDelta.x)||!QT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),uu&&Qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ba(),this.projectionDelta=ba(),this.projectionDeltaWithTransform=ba()}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},m={...this.latestValues},g=ba();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=ht(),x=c?c.source:void 0,k=this.layout?this.layout.source:void 0,A=x!==k,N=this.getStack(),P=!N||N.members.length<=1,E=!!(A&&!P&&this.options.crossfade===!0&&!this.path.some(I4));this.animationProgress=0;let C;this.mixTargetDelta=F=>{const z=F/1e3;n1(g.x,a.x,z),n1(g.y,a.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Iu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P4(this.relativeTarget,this.relativeTargetOrigin,_,z),C&&u4(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ht()),Bn(C,this.relativeTarget)),A&&(this.animationValues=m,i4(m,f,this.latestValues,z,E,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ps(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{dd.hasAnimatedSinceResize=!0,this.currentAnimation=XV(0,JT,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:m}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&sC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||ht();const g=Rn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const _=Rn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+_}Bn(u,c),Ra(u,m),Pu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new c4),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&_m("z",a,f,this.animationValues);for(let m=0;m<ym.length;m++)_m(`rotate${ym[m]}`,a,f,this.animationValues),_m(`skew${ym[m]}`,a,f,this.animationValues);a.render();for(const m in f)a.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d4;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=cd(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=cd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Xs(this.latestValues)&&(A.transform=m?m({},""):"none",this.hasProjected=!1),A}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=h4(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x,y:k}=this.projectionDelta;f.transformOrigin=`${x.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(c=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const A in Jd){if(_[A]===void 0)continue;const{correct:N,applyTo:P}=Jd[A],E=f.transform==="none"?_[A]:N(_[A],g);if(P){const C=P.length;for(let F=0;F<C;F++)f[P[F]]=E}else f[A]=E}return this.options.layoutId&&(f.pointerEvents=g===this?cd(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(e1),this.root.sharedNodes.clear()}}}function p4(t){t.updateLayout()}function m4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],x=Rn(_);_.min=i[g].min,_.max=_.min+x}):sC(o,n.layoutBox,i)&&zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],x=Rn(i[g]);_.max=_.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const u=ba();Pu(u,i,n.layoutBox);const c=ba();a?Pu(c,t.applyTransform(r,!0),n.measuredBox):Pu(c,i,n.layoutBox);const f=!tC(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:x}=g;if(_&&x){const k=ht();Iu(k,n.layoutBox,_.layoutBox);const A=ht();Iu(A,i,x.layoutBox),nC(k,A)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function g4(t){uu&&Qs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function y4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _4(t){t.clearSnapshot()}function e1(t){t.clearMeasurements()}function v4(t){t.isLayoutDirty=!1}function w4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function t1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function T4(t){t.resolveTargetDelta()}function E4(t){t.calcProjection()}function x4(t){t.resetSkewAndRotation()}function S4(t){t.removeLeadSnapshot()}function n1(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function i1(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function P4(t,e,n,i){i1(t.x,e.x,n.x,i),i1(t.y,e.y,n.y,i)}function I4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const C4={duration:.45,ease:[.4,0,.1,1]},r1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),s1=r1("applewebkit/")&&!r1("chrome/")?Math.round:bn;function o1(t){t.min=s1(t.min),t.max=s1(t.max)}function A4(t){o1(t.x),o1(t.y)}function sC(t,e,n){return t==="position"||t==="preserve-aspect"&&!RV(XT(e),XT(n),.2)}function b4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const k4=rC({attachResizeListener:(t,e)=>sc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vm={current:void 0},oC=rC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vm.current){const t=new k4({});t.mount(window),t.setOptions({layoutScroll:!0}),vm.current=t}return vm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),R4={pan:{Feature:GV},drag:{Feature:$V,ProjectionNode:oC,MeasureLayout:QI}};function a1(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Xe.postRender(()=>o(e,Ic(e)))}class N4 extends Is{mount(){const{current:e}=this.node;e&&(this.unmount=RD(e,n=>(a1(this.node,n,"Start"),i=>a1(this.node,i,"End"))))}unmount(){}}class L4 extends Is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Pc(sc(this.node.current,"focus",()=>this.onFocus()),sc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function l1(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Xe.postRender(()=>o(e,Ic(e)))}class M4 extends Is{mount(){const{current:e}=this.node;e&&(this.unmount=DD(e,n=>(l1(this.node,n,"Start"),(i,{success:r})=>l1(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kg=new WeakMap,wm=new WeakMap,D4=t=>{const e=Kg.get(t.target);e&&e(t)},O4=t=>{t.forEach(D4)};function V4({root:t,...e}){const n=t||document;wm.has(n)||wm.set(n,{});const i=wm.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(O4,{root:t,...e})),i[r]}function j4(t,e,n){const i=V4(e);return Kg.set(t,n),i.observe(t),()=>{Kg.delete(t),i.unobserve(t)}}const F4={some:0,all:1};class U4 extends Is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:F4[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(c)};return j4(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(B4(e,n))&&this.startObserver()}unmount(){}}function B4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const z4={inView:{Feature:U4},tap:{Feature:M4},focus:{Feature:L4},hover:{Feature:N4}},H4={layout:{ProjectionNode:oC,MeasureLayout:QI}},Zg={current:null},aC={current:!1};function W4(){if(aC.current=!0,!!b_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zg.current=t.matches;t.addListener(e),e()}else Zg.current=!1}const q4=[...NI,qt,ms],$4=t=>q4.find(RI(t)),u1=new WeakMap;function G4(t,e,n){for(const i in e){const r=e[i],o=n[i];if(Yt(r))t.addValue(i,r);else if(Yt(o))t.addValue(i,ic(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,ic(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const c1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K4{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Ni.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Xe.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:m}=a;this.onUpdate=m,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=qf(n),this.isVariantNode=UP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in _){const k=_[x];c[x]!==void 0&&Yt(k)&&k.set(c[x],!1)}}mount(e){this.current=e,u1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),aC.current||W4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){u1.delete(this.current),this.projection&&this.projection.unmount(),ps(this.notifyUpdate),ps(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ko.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Xe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qa){const n=Qa[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<c1.length;i++){const r=c1[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=G4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ic(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(bI(r)||wI(r))?r=parseFloat(r):!$4(r)&&ms.test(n)&&(r=II(e,n)),this.setBaseTarget(e,Yt(r)?r.get():r)),Yt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=O_(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Yt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Y_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class lC extends K4{constructor(){super(...arguments),this.KeyframeResolver=LI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Z4(t){return window.getComputedStyle(t)}class Y4 extends lC{constructor(){super(...arguments),this.type="html",this.renderInstance=ZP}readValueFromInstance(e,n){if(ko.has(n)){const i=tv(n);return i&&i.default||0}else{const i=Z4(e),r=($P(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YI(e,n)}build(e,n,i){F_(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return H_(e,n,i)}}class X4 extends lC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const i=tv(n);return i&&i.default||0}return n=YP.has(n)?n:L_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return JP(e,n,i)}build(e,n,i){U_(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){XP(e,n,i,r)}mount(e){this.isSVGTag=z_(e.tagName),super.mount(e)}}const Q4=(t,e)=>D_(t)?new X4(e):new Y4(e,{allowProjection:t!==W.Fragment}),J4=SD({...EV,...z4,...R4,...H4},Q4),ji=FM(J4),e3={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},t3=(t,e,n)=>{let i;const r=e3[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?i+"":i+"":i},n3={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},i3={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},r3={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},s3={date:Fa({formats:n3,defaultWidth:"full"}),time:Fa({formats:i3,defaultWidth:"full"}),dateTime:Fa({formats:r3,defaultWidth:"full"})},o3={lastWeek:"''eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"''eeee p",other:"P"},a3=(t,e,n,i)=>o3[t],l3={narrow:["",""],abbreviated:["",""],wide:["",""]},u3={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},c3={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},h3={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},d3={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},f3={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},p3=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n+"";case"hour":return n+"";case"minute":return n+"";case"second":return n+"";default:return" "+n}},m3={ordinalNumber:p3,era:Ii({values:l3,defaultWidth:"wide"}),quarter:Ii({values:u3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ii({values:c3,defaultWidth:"wide"}),day:Ii({values:h3,defaultWidth:"wide"}),dayPeriod:Ii({values:d3,defaultWidth:"wide",formattingValues:f3,defaultFormattingWidth:"wide"})},g3=/^(\s*)?\d+(|||)?/i,y3=/\d+/i,_3={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},v3={any:[/^()/i,/^()/i]},w3={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},T3={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},E3={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},x3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},S3={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},P3={any:[//i,//i,//i,//i,//i,//i,//i]},I3={any:/^(?|?||[]|?||?|)/i},C3={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},A3={ordinalNumber:bP({matchPattern:g3,parsePattern:y3,valueCallback:t=>parseInt(t,10)}),era:Ci({matchPatterns:_3,defaultMatchWidth:"wide",parsePatterns:v3,defaultParseWidth:"any"}),quarter:Ci({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:T3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ci({matchPatterns:E3,defaultMatchWidth:"wide",parsePatterns:x3,defaultParseWidth:"any"}),day:Ci({matchPatterns:S3,defaultMatchWidth:"wide",parsePatterns:P3,defaultParseWidth:"any"}),dayPeriod:Ci({matchPatterns:I3,defaultMatchWidth:"any",parsePatterns:C3,defaultParseWidth:"any"})},b3={code:"zh-TW",formatDistance:t3,formatLong:s3,formatRelative:a3,localize:m3,match:A3,options:{weekStartsOn:1,firstWeekContainsDate:4}};function k3({activity:t,isLast:e,isEditing:n,onEdit:i,onDelete:r}){const a=(u=>{switch(u){case"Plane":return Eu;case"MapPin":return Ng;case"Coffee":return bN;case"Camera":return xN;case"Train":return SP;case"Car":return SN;case"Sun":return Lg;case"Moon":return ON;case"Briefcase":return TN;case"Utensils":return PP;case"CheckSquare":return EP;default:return Uw}})(t.iconName);return T.jsxs(ji.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative flex gap-4 group/item",children:[!e&&T.jsx("div",{className:"absolute left-[15px] top-8 bottom-[-24px] w-0.5 bg-indigo-100 group-hover/item:bg-indigo-200 transition-colors"}),T.jsx("div",{className:"relative z-10 flex-shrink-0 w-8 h-8 bg-white border-2 border-indigo-100 rounded-full flex items-center justify-center text-indigo-500 shadow-sm group-hover/item:border-indigo-400 group-hover/item:scale-110 group-hover/item:shadow-md transition-all duration-300",children:T.jsx(a,{size:14})}),T.jsxs("div",{className:"flex-1 pb-6",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-2",children:[T.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded w-fit",children:t.time}),T.jsx("h4",{className:"font-semibold text-gray-800 text-base",children:t.title}),t.cost&&T.jsxs("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:["$",t.cost]})]}),n&&T.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[T.jsx("button",{onClick:i,className:"p-1 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded",title:"",children:T.jsx(zN,{size:14})}),T.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"",children:T.jsx(wc,{size:14})})]})]}),T.jsx("p",{className:"text-sm text-gray-600 mt-1.5 leading-relaxed",children:t.description}),t.attachments&&t.attachments.length>0&&T.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.attachments.map(u=>u.type==="image"?T.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"block w-24 h-24 rounded-lg overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors relative group/img",children:[T.jsx("img",{src:u.url,alt:u.label,className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/10 transition-colors"})]},u.id):T.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-blue-600 bg-blue-50 px-2.5 py-1.5 rounded-md border border-blue-100 hover:bg-blue-100 transition-colors",children:[T.jsx(Rg,{size:12}),u.label||""]},u.id))}),(t.tips||t.location)&&T.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[t.location&&T.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-gray-500 bg-white px-2.5 py-1.5 rounded-md border border-gray-200 w-fit hover:bg-gray-50 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:[T.jsx(Ng,{size:12}),t.location]}),t.tips&&T.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100",children:[T.jsx(Uw,{size:14,className:"mt-0.5 flex-shrink-0"}),T.jsx("span",{className:"leading-relaxed",children:t.tips})]})]}),t.modifiedBy&&T.jsx("div",{className:"mt-2 flex justify-end",children:T.jsxs("span",{className:"text-[10px] text-gray-300",children:["Updated by ",t.modifiedBy.split("@")[0],"  ",t.modifiedAt?cM(new Date(t.modifiedAt),{addSuffix:!0,locale:b3}):""]})})]})]})}function uC(t,e){const n=W.useRef(e);W.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const R3=1;function N3(t){return Object.freeze({__version:R3,map:t})}function cC(t,e){return Object.freeze({...t,...e})}const hC=W.createContext(null),dC=hC.Provider;function Kf(){const t=W.useContext(hC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function fC(t){function e(n,i){const{instance:r,context:o}=t(n).current;return W.useImperativeHandle(i,()=>r),n.children==null?null:Pd.createElement(dC,{value:o},n.children)}return W.forwardRef(e)}function L3(t){function e(n,i){const[r,o]=W.useState(!1),{instance:a}=t(n,o).current;W.useImperativeHandle(i,()=>a),W.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?TP.createPortal(n.children,u):null}return W.forwardRef(e)}function M3(t){function e(n,i){const{instance:r}=t(n).current;return W.useImperativeHandle(i,()=>r),null}return W.forwardRef(e)}function ov(t,e){const n=W.useRef();W.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Zf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function D3(t,e){return function(i,r){const o=Kf(),a=t(Zf(i,o),o);return uC(o.map,i.attribution),ov(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Yg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(qk,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,S,j;return j=function(){p=!1,v&&(S.apply(d,v),v=!1)},S=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(j,l),p=!0)},S}function m(s,l,d){var p=l[1],v=l[0],S=p-v;return s===p&&d?s:((s-v)%S+S)%S+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function x(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return x(s).split(/\s+/)}function A(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function N(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function E(s,l){return s.replace(P,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var M=window.requestAnimationFrame||K("RequestAnimationFrame")||I,D=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&M===I)s.call(l);else return M.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:x,splitWords:k,setOptions:A,getParamString:N,template:E,isArray:C,indexOf:F,emptyImageUrl:z,requestFn:M,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:U};function ke(){}ke.extend=function(s){var l=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Dt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,j=p._initHooks.length;S<j;S++)p._initHooks[S].call(this)}},l},ke.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ke.mergeOptions=function(s){return r(this.prototype.options,s),this},ke.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Dt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ge={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var v=arguments.length===1,S=0,j=s.length;S<j;S++)v?this._off(s[S]):this._off(s[S],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,S;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,S=p.length;v<S;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(s,l,d);if(j!==!1){var H=p[j];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(j,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var S=0,j=v.length;S<j;S++){var H=v[S],G=H.fn;H.once&&this.off(s,G,H.ctx),G.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var S=this._events&&this._events[s];if(S&&S.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var j in this._eventParents)if(this._eventParents[j].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,S=p.length;v<S;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ge.addEventListener=Ge.on,Ge.removeEventListener=Ge.clearAllEventListeners=Ge.off,Ge.addOneTimeEventListener=Ge.once,Ge.fireEvent=Ge.fire,Ge.hasEventListeners=Ge.listens;var J=ke.extend(Ge);function $(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var se=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(s){return this.clone()._add(Q(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Q(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new $(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new $(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=se(this.x),this.y=se(this.y),this},distanceTo:function(s){s=Q(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=Q(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Q(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Q(s,l,d){return s instanceof $?s:C(s)?new $(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new $(s.x,s.y):new $(s,l,d)}function fe(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}fe.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof $||typeof s[0]=="number"||"x"in s)l=d=Q(s);else if(s=xe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof $?s=Q(s):s=xe(s),s instanceof fe?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>=l.x&&p.x<=d.x,j=v.y>=l.y&&p.y<=d.y;return S&&j},overlaps:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>l.x&&p.x<d.x,j=v.y>l.y&&p.y<d.y;return S&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return xe(Q(l.x-p,l.y-v),Q(d.x+p,d.y+v))},equals:function(s){return s?(s=xe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function xe(s,l){return!s||s instanceof fe?s:new fe(s,l)}function He(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}He.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof he)p=s,v=s;else if(s instanceof He){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(ce(s)||ne(s)):this;return!l&&!d?(this._southWest=new he(p.lat,p.lng),this._northEast=new he(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new He(new he(l.lat-p,l.lng-v),new he(d.lat+p,d.lng+v))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof he||"lat"in s?s=ce(s):s=ne(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof He?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=ne(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>=l.lat&&p.lat<=d.lat,j=v.lng>=l.lng&&p.lng<=d.lng;return S&&j},overlaps:function(s){s=ne(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>l.lat&&p.lat<d.lat,j=v.lng>l.lng&&p.lng<d.lng;return S&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ne(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ne(s,l){return s instanceof He?s:new He(s,l)}function he(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}he.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return mt.distance(this,ce(s))},wrap:function(){return mt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ne([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ce(s,l,d){return s instanceof he?s:C(s)&&typeof s[0]!="object"?s.length===3?new he(s[0],s[1],s[2]):s.length===2?new he(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new he(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new he(s,l,d)}var Ke={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new fe(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new he(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var S=s.getSouthWest(),j=s.getNorthEast(),H=new he(S.lat-p,S.lng-v),G=new he(j.lat-p,j.lng-v);return new He(H,G)}},mt=r({},Ke,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,S=Math.sin((l.lat-s.lat)*d/2),j=Math.sin((l.lng-s.lng)*d/2),H=S*S+Math.cos(p)*Math.cos(v)*j*j,G=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*G}}),xr=6378137,ks={R:xr,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new $(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new he((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=xr*Math.PI;return new fe([-s,-s],[s,s])}()};function vl(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}vl.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new $((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Sr(s,l,d,p){return new vl(s,l,d,p)}var Rs=r({},mt,{code:"EPSG:3857",projection:ks,transformation:function(){var s=.5/(Math.PI*ks.R);return Sr(s,.5,-s,.5)}()}),Uc=r({},Rs,{code:"EPSG:900913"});function Bc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Mo(s,l){var d="",p,v,S,j,H,G;for(p=0,S=s.length;p<S;p++){for(H=s[p],v=0,j=H.length;v<j;v++)G=H[v],d+=(v?"L":"M")+G.x+" "+G.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var Ns=document.documentElement.style,Ls="ActiveXObject"in window,It=Ls&&!document.addEventListener,Ct="msLaunchUri"in navigator&&!("documentMode"in document),Pr=cn("webkit"),zc=cn("android"),wl=cn("android 2")||cn("android 3"),Ep=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ms=zc&&cn("Google")&&Ep<537&&!("AudioNode"in window),Do=!!window.opera,Tl=!Ct&&cn("chrome"),Oo=cn("gecko")&&!Pr&&!Do&&!Ls,xp=!Tl&&cn("safari"),Hc=cn("phantom"),El="OTransition"in Ns,Wc=navigator.platform.indexOf("Win")===0,Ir=Ls&&"transition"in Ns,Ds="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wl,Vo="MozPerspective"in Ns,Hi=!window.L_DISABLE_3D&&(Ir||Ds||Vo)&&!El&&!Hc,Cr=typeof orientation<"u"||cn("mobile"),jo=Cr&&Pr,qc=Cr&&Ds,Ar=!window.PointerEvent&&window.MSPointerEvent,xl=!!(window.PointerEvent||Ar),At="ontouchstart"in window||!!window.TouchEvent,$c=!window.L_NO_TOUCH&&(At||xl),Os=Cr&&Do,Vs=Cr&&Oo,Sp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pp=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),br=function(){return!!document.createElement("canvas").getContext}(),Sl=!!(document.createElementNS&&Bc("svg").createSVGRect),Ip=!!Sl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fo=!Sl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Gc=navigator.platform.indexOf("Mac")===0,Kc=navigator.platform.indexOf("Linux")===0;function cn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:Ls,ielt9:It,edge:Ct,webkit:Pr,android:zc,android23:wl,androidStock:Ms,opera:Do,chrome:Tl,gecko:Oo,safari:xp,phantom:Hc,opera12:El,win:Wc,ie3d:Ir,webkit3d:Ds,gecko3d:Vo,any3d:Hi,mobile:Cr,mobileWebkit:jo,mobileWebkit3d:qc,msPointer:Ar,pointer:xl,touch:$c,touchNative:At,mobileOpera:Os,mobileGecko:Vs,retina:Sp,passiveEvents:Pp,canvas:br,svg:Sl,vml:Fo,inlineSvg:Ip,mac:Gc,linux:Kc},Zc=le.msPointer?"MSPointerDown":"pointerdown",Yn=le.msPointer?"MSPointerMove":"pointermove",Pl=le.msPointer?"MSPointerUp":"pointerup",Il=le.msPointer?"MSPointerCancel":"pointercancel",js={touchstart:Zc,touchmove:Yn,touchend:Pl,touchcancel:Il},Uo={touchstart:Cl,touchmove:Mn,touchend:Mn,touchcancel:Mn},Wi={},Yc=!1;function Xc(s,l,d){return l==="touchstart"&&Fs(),Uo[l]?(d=Uo[l].bind(this,d),s.addEventListener(js[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Cp(s,l,d){if(!js[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(js[l],d,!1)}function Bo(s){Wi[s.pointerId]=s}function Qc(s){Wi[s.pointerId]&&(Wi[s.pointerId]=s)}function zo(s){delete Wi[s.pointerId]}function Fs(){Yc||(document.addEventListener(Zc,Bo,!0),document.addEventListener(Yn,Qc,!0),document.addEventListener(Pl,zo,!0),document.addEventListener(Il,zo,!0),Yc=!0)}function Mn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Wi)l.touches.push(Wi[d]);l.changedTouches=[l],s(l)}}function Cl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&gt(l),Mn(s,l)}function Ap(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Jc=200;function eh(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(S){if(S.detail!==1){p=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var j=Nl(S);if(!(j.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!j.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Jc?(p++,p===2&&l(Ap(S))):p=1,d=H}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function th(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Us=Ho(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qi=Ho(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Al=qi==="webkitTransition"||qi==="OTransition"?qi+"End":"transitionend";function bl(s){return typeof s=="string"?document.getElementById(s):s}function kr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Re(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Me(s){var l=s.parentNode;l&&l.removeChild(s)}function Jt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Dn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function On(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Bs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=pi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function oe(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Bs(s,l)){var S=pi(s);$i(s,(S?S+" ":"")+l)}}function We(s,l){s.classList!==void 0?s.classList.remove(l):$i(s,x((" "+pi(s)+" ").replace(" "+l+" "," ")))}function $i(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function pi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function hn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&nh(s,l)}function nh(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Ho(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Gi(s,l,d){var p=l||new $(0,0);s.style[Us]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function st(s,l){s._leaflet_pos=l,le.any3d?Gi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Ki(s){return s._leaflet_pos||new $(0,0)}var Xn,Tn,Wo;if("onselectstart"in document)Xn=function(){_e(window,"selectstart",gt)},Tn=function(){Ue(window,"selectstart",gt)};else{var Rr=Ho(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xn=function(){if(Rr){var s=document.documentElement.style;Wo=s[Rr],s[Rr]="none"}},Tn=function(){Rr&&(document.documentElement.style[Rr]=Wo,Wo=void 0)}}function qo(){_e(window,"dragstart",gt)}function $o(){Ue(window,"dragstart",gt)}var zs,mi;function kl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Go(),zs=s,mi=s.style.outlineStyle,s.style.outlineStyle="none",_e(window,"keydown",Go))}function Go(){zs&&(zs.style.outlineStyle=mi,zs=void 0,mi=void 0,Ue(window,"keydown",Go))}function ih(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Vn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var bp={__proto__:null,TRANSFORM:Us,TRANSITION:qi,TRANSITION_END:Al,get:bl,getStyle:kr,create:Re,remove:Me,empty:Jt,toFront:Dn,toBack:On,hasClass:Bs,addClass:oe,removeClass:We,setClass:$i,getClass:pi,setOpacity:hn,testProp:Ho,setTransform:Gi,setPosition:st,getPosition:Ki,get disableTextSelection(){return Xn},get enableTextSelection(){return Tn},disableImageDrag:qo,enableImageDrag:$o,preventOutline:kl,restoreOutline:Go,getSizedParentNode:ih,getScale:Vn};function _e(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Ko(s,v,l[v],d);else{l=k(l);for(var S=0,j=l.length;S<j;S++)Ko(s,l[S],d,p)}return this}var en="_leaflet_events";function Ue(s,l,d,p){if(arguments.length===1)Nr(s),delete s[en];else if(l&&typeof l=="object")for(var v in l)Hs(s,v,l[v],d);else if(l=k(l),arguments.length===2)Nr(s,function(H){return F(l,H)!==-1});else for(var S=0,j=l.length;S<j;S++)Hs(s,l[S],d,p);return this}function Nr(s,l){for(var d in s[en]){var p=d.split(/\d/)[0];(!l||l(p))&&Hs(s,p,null,null,d)}}var Zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ko(s,l,d,p){var v=l+c(d)+(p?"_"+c(p):"");if(s[en]&&s[en][v])return this;var S=function(H){return d.call(p||s,H||window.event)},j=S;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?S=Xc(s,l,S):le.touch&&l==="dblclick"?S=eh(s,S):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Zi[l]||l,S,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(S=function(H){H=H||window.event,Ml(s,H)&&j(H)},s.addEventListener(Zi[l],S,!1)):s.addEventListener(l,j,!1):s.attachEvent("on"+l,S),s[en]=s[en]||{},s[en][v]=S}function Hs(s,l,d,p,v){v=v||l+c(d)+(p?"_"+c(p):"");var S=s[en]&&s[en][v];if(!S)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?Cp(s,l,S):le.touch&&l==="dblclick"?th(s,S):"removeEventListener"in s?s.removeEventListener(Zi[l]||l,S,!1):s.detachEvent("on"+l,S),s[en][v]=null}function Oe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Rl(s){return Ko(s,"wheel",Oe),this}function Ws(s){return _e(s,"mousedown touchstart dblclick contextmenu",Oe),s._leaflet_disable_click=!0,this}function gt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gi(s){return gt(s),Oe(s),this}function Nl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function qs(s,l){if(!l)return new $(s.clientX,s.clientY);var d=Vn(l),p=d.boundingClientRect;return new $((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var yi=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ll(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/yi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ml(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var $s={__proto__:null,on:_e,off:Ue,stopPropagation:Oe,disableScrollPropagation:Rl,disableClickPropagation:Ws,preventDefault:gt,stop:gi,getPropagationPath:Nl,getMousePosition:qs,getWheelDelta:Ll,isExternalTarget:Ml,addListener:_e,removeListener:Ue},Dl=J.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Ki(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),st(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=J.extend({options:{crs:Rs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=A(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qi&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,Al,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),S=s instanceof $?s:this.latLngToContainerPoint(s),j=S.subtract(v).multiplyBy(1-1/p),H=this.containerPointToLatLng(v.add(j));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ne(s);var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var S=p.subtract(d).divideBy(2),j=this.project(s.getSouthWest(),v),H=this.project(s.getNorthEast(),v),G=this.unproject(j.add(H).divideBy(2).add(S),v);return{center:G,zoom:v}},fitBounds:function(s,l){if(s=ne(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=Q(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),S=this.getSize(),j=this._zoom;s=ce(s),l=l===void 0?j:l;var H=Math.max(S.x,S.y),G=H*this.getZoomScale(j,l),Y=v.distanceTo(p)||1,ie=1.42,me=ie*ie;function Pe(yt){var vh=yt?-1:1,Fk=yt?G:H,Uk=G*G-H*H+vh*me*me*Y*Y,Bk=2*Fk*me*Y,Mp=Uk/Bk,I0=Math.sqrt(Mp*Mp+1)-Mp,zk=I0<1e-9?-18:Math.log(I0);return zk}function tn(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function bt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}function Un(yt){return tn(yt)/bt(yt)}var fn=Pe(0);function aa(yt){return H*(bt(fn)/bt(fn+ie*yt))}function Dk(yt){return H*(bt(fn)*Un(fn+ie*yt)-tn(fn))/me}function Ok(yt){return 1-Math.pow(1-yt,1.5)}var Vk=Date.now(),S0=(Pe(1)-fn)/ie,jk=d.duration?1e3*d.duration:1e3*S0*.8;function P0(){var yt=(Date.now()-Vk)/jk,vh=Ok(yt)*S0;yt<=1?(this._flyToFrame=V(P0,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(Dk(vh)/Y)),j),this.getScaleZoom(H/aa(vh),j),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),P0.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=ne(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ne(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),S=this.project(s),j=this.getPixelBounds(),H=xe([j.min.add(d),j.max.subtract(p)]),G=H.getSize();if(!H.contains(S)){this._enforcingBounds=!0;var Y=S.subtract(H.getCenter()),ie=H.extend(S).getSize().subtract(G);v.x+=Y.x<0?-ie.x:ie.x,v.y+=Y.y<0?-ie.y:ie.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),S=p.subtract(v);return!S.x&&!S.y?this:(s.animate&&s.pan?this.panBy(S):(s.pan&&this._rawPanBy(S),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new he(l,d),v=p.toBounds(s.coords.accuracy*2),S=this._locateOptions;if(S.setView){var j=this.getBoundsZoom(v);this.setView(p,S.maxZoom?Math.min(j,S.maxZoom):j)}var H={latlng:p,bounds:v,timestamp:s.timestamp};for(var G in s.coords)typeof s.coords[G]=="number"&&(H[G]=s.coords[G]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Me(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Re("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new He(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=ne(s),d=Q(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),S=this.getMaxZoom(),j=s.getNorthWest(),H=s.getSouthEast(),G=this.getSize().subtract(d),Y=xe(this.project(H,p),this.project(j,p)).getSize(),ie=le.any3d?this.options.zoomSnap:1,me=G.x/Y.x,Pe=G.y/Y.y,tn=l?Math.max(me,Pe):Math.min(me,Pe);return p=this.getScaleZoom(tn,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(v,Math.min(S,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Q(s),l)},layerPointToLatLng:function(s){var l=Q(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ne(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return Q(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Q(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(Q(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return qs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=bl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,oe(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=kr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(s.markerPane,"leaflet-zoom-hide"),oe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){st(this._mapPane,new $(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){st(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?Ue:_e;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",S=s.target||s.srcElement,j=!1;S;){if(p=this._targets[c(S)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){j=!0;break}if(p&&p.listens(l,!0)&&(v&&!Ml(S,s)||(d.push(p),v))||S===this._container)break;S=S.parentNode}return!d.length&&!j&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&kl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var S=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&S.push(d[j]);v=S.concat(v)}if(v.length){l==="contextmenu"&&gt(s);var H=v[0],G={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=H.getLatLng&&(!H._radius||H._radius<=10);G.containerPoint=Y?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=Y?H.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(j=0;j<v.length;j++)if(v[j].fire(l,G,!0),G.originalEvent._stopped||v[j].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Ki(this._mapPane)||new $(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return xe([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),S=new fe(p.subtract(v),p.add(v)),j=this._getBoundsOffset(S,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?s:this.unproject(p.add(j),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=xe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),S=p.max.subtract(s.max),j=this._rebound(v.x,-S.x),H=this._rebound(v.y,-S.y);return new $(j,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Us,p=this._proxy.style[d];Gi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Gi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Zo(s,l){return new Se(s,l)}var dn=ke.extend({options:{position:"topright"},initialize:function(s){A(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return oe(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),_i=function(s){return new dn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Re("div",l+"control-container",this._container);function p(v,S){var j=l+v+" "+l+S;s[v+S]=Re("div",j,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Me(this._controlCorners[s]);Me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rh=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){A(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return dn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Re("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ws(l),Rl(l);var p=this._section=Re("section",s+"-list");d&&(this._map.on("click",this.collapse,this),_e(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Re("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),_e(v,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){gt(S),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Re("div",s+"-base",p),this._separator=Re("div",s+"-separator",p),this._overlaysList=Re("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Jt(this._baseLayersList),Jt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(p),p.layerId=c(s.layer),_e(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var S=document.createElement("span");l.appendChild(S),S.appendChild(p),S.appendChild(v);var j=s.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var S=s.length-1;S>=0;S--)l=s[S],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(S=0;S<v.length;S++)this._map.hasLayer(v[S])&&this._map.removeLayer(v[S]);for(S=0;S<p.length;S++)this._map.hasLayer(p[S])||this._map.addLayer(p[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,_e(s,"click",gt),this.expand();var l=this;setTimeout(function(){Ue(s,"click",gt),l._preventClick=!1})}}),sh=function(s,l,d){return new rh(s,l,d)},Yi=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Re("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var S=Re("a",d,p);return S.innerHTML=s,S.href="#",S.title=l,S.setAttribute("role","button"),S.setAttribute("aria-label",l),Ws(S),_e(S,"click",gi),_e(S,"click",v,this),_e(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";We(this._zoomInButton,l),We(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yi,this.addControl(this.zoomControl))});var oh=function(s){return new Yi(s)},Ol=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Re("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Re("div",l,d)),s.imperial&&(this._iScale=Re("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Vl=function(s){return new Ol(s)},jl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yo=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?jl+" ":"")+"Leaflet</a>"},initialize:function(s){A(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Ws(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Yo().addTo(this)});var Xo=function(s){return new Yo(s)};dn.Layers=rh,dn.Zoom=Yi,dn.Scale=Ol,dn.Attribution=Yo,_i.layers=sh,_i.zoom=oh,_i.scale=Vl,_i.attribution=Xo;var En=ke.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});En.addTo=function(s,l){return s.addHandler(l,this),this};var ah={Events:Ge},vi=le.touch?"touchstart mousedown":"mousedown",Qn=J.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){A(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(_e(this._dragStartTarget,vi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,vi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Bs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Qn._dragging===this&&this.finishDrag();return}if(!(Qn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Qn._dragging=this,this._preventOutline&&kl(this._element),qo(),Xn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=ih(this._element);this._startPoint=new $(l.clientX,l.clientY),this._startPos=Ki(this._element),this._parentScale=Vn(d);var p=s.type==="mousedown";_e(document,p?"mousemove":"touchmove",this._onMove,this),_e(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new $(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,gt(s),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),st(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),$o(),Tn();var l=this._moved&&this._moving;this._moving=!1,Qn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Fl(s,l,d){var p,v=[1,4,2,8],S,j,H,G,Y,ie,me,Pe;for(S=0,ie=s.length;S<ie;S++)s[S]._code=q(s[S],l);for(H=0;H<4;H++){for(me=v[H],p=[],S=0,ie=s.length,j=ie-1;S<ie;j=S++)G=s[S],Y=s[j],G._code&me?Y._code&me||(Pe=B(Y,G,me,l,d),Pe._code=q(Pe,l),p.push(Pe)):(Y._code&me&&(Pe=B(Y,G,me,l,d),Pe._code=q(Pe,l),p.push(Pe)),p.push(G));s=p}return s}function Ul(s,l){var d,p,v,S,j,H,G,Y,ie;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=ce([0,0]),Pe=ne(s),tn=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());tn<1700&&(me=Qo(s));var bt=s.length,Un=[];for(d=0;d<bt;d++){var fn=ce(s[d]);Un.push(l.project(ce([fn.lat-me.lat,fn.lng-me.lng])))}for(H=G=Y=0,d=0,p=bt-1;d<bt;p=d++)v=Un[d],S=Un[p],j=v.y*S.x-S.y*v.x,G+=(v.x+S.x)*j,Y+=(v.y+S.y)*j,H+=j*3;H===0?ie=Un[0]:ie=[G/H,Y/H];var aa=l.unproject(Q(ie));return ce([aa.lat+me.lat,aa.lng+me.lng])}function Qo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var S=ce(s[v]);l+=S.lat,d+=S.lng,p++}return ce([l/p,d/p])}var Jo={__proto__:null,clipPolygon:Fl,polygonCenter:Ul,centroid:Qo};function Bt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Lr(s,d),s}function Bl(s,l,d){return Math.sqrt(ve(s,l,d,!0))}function lh(s,l,d){return ve(s,l,d)}function Lr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,h(s,v,l,0,d-1);var S,j=[];for(S=0;S<d;S++)v[S]&&j.push(s[S]);return j}function h(s,l,d,p,v){var S=0,j,H,G;for(H=p+1;H<=v-1;H++)G=ve(s[H],s[p],s[v],!0),G>S&&(j=H,S=G);S>d&&(l[j]=1,h(s,l,d,p,j),h(s,l,d,j,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,S=s.length;p<S;p++)te(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<S-1&&d.push(s[S-1]),d}var w;function b(s,l,d,p,v){var S=p?w:q(s,d),j=q(l,d),H,G,Y;for(w=j;;){if(!(S|j))return[s,l];if(S&j)return!1;H=S||j,G=B(s,l,H,d,v),Y=q(G,d),H===S?(s=G,S=Y):(l=G,j=Y)}}function B(s,l,d,p,v){var S=l.x-s.x,j=l.y-s.y,H=p.min,G=p.max,Y,ie;return d&8?(Y=s.x+S*(G.y-s.y)/j,ie=G.y):d&4?(Y=s.x+S*(H.y-s.y)/j,ie=H.y):d&2?(Y=G.x,ie=s.y+j*(G.x-s.x)/S):d&1&&(Y=H.x,ie=s.y+j*(H.x-s.x)/S),new $(Y,ie,v)}function q(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function ve(s,l,d,p){var v=l.x,S=l.y,j=d.x-v,H=d.y-S,G=j*j+H*H,Y;return G>0&&(Y=((s.x-v)*j+(s.y-S)*H)/G,Y>1?(v=d.x,S=d.y):Y>0&&(v+=j*Y,S+=H*Y)),j=s.x-v,H=s.y-S,p?j*j+H*H:new $(v,S)}function De(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ve(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),De(s)}function ct(s,l){var d,p,v,S,j,H,G,Y;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=ce([0,0]),me=ne(s),Pe=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Pe<1700&&(ie=Qo(s));var tn=s.length,bt=[];for(d=0;d<tn;d++){var Un=ce(s[d]);bt.push(l.project(ce([Un.lat-ie.lat,Un.lng-ie.lng])))}for(d=0,p=0;d<tn-1;d++)p+=bt[d].distanceTo(bt[d+1])/2;if(p===0)Y=bt[0];else for(d=0,S=0;d<tn-1;d++)if(j=bt[d],H=bt[d+1],v=j.distanceTo(H),S+=v,S>p){G=(S-p)/v,Y=[H.x-G*(H.x-j.x),H.y-G*(H.y-j.y)];break}var fn=l.unproject(Q(Y));return ce([fn.lat+ie.lat,fn.lng+ie.lng])}var jn={__proto__:null,simplify:Bt,pointToSegmentDistance:Bl,closestPointOnSegment:lh,clipSegment:b,_getEdgeIntersection:B,_getBitCode:q,_sqClosestPointOnSegment:ve,isFlat:De,_flat:Ve,polylineCenter:ct},Jn={project:function(s){return new $(s.lng,s.lat)},unproject:function(s){return new he(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},Fn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,S=Math.sqrt(1-v*v),j=S*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-j)/(1+j),S/2);return p=-d*Math.log(Math.max(H,1e-10)),new $(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),S=Math.exp(-s.y/d),j=Math.PI/2-2*Math.atan(S),H=0,G=.1,Y;H<15&&Math.abs(G)>1e-7;H++)Y=v*Math.sin(j),Y=Math.pow((1-Y)/(1+Y),v/2),G=Math.PI/2-2*Math.atan(S*Y)-j,j+=G;return new he(j*l,s.x*l/d)}},wi={__proto__:null,LonLat:Jn,Mercator:Fn,SphericalMercator:ks},ea=r({},mt,{code:"EPSG:3395",projection:Fn,transformation:function(){var s=.5/(Math.PI*Fn.R);return Sr(s,.5,-s,.5)}()}),ta=r({},mt,{code:"EPSG:4326",projection:Jn,transformation:Sr(1/180,1,-1/180,.5)}),fk=r({},Ke,{projection:Jn,transformation:Sr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ke.Earth=mt,Ke.EPSG3395=ea,Ke.EPSG3857=Rs,Ke.EPSG900913=Uc,Ke.EPSG4326=ta,Ke.Simple=fk;var ei=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var na=ei.extend({initialize:function(s,l){A(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),pk=function(s,l){return new na(s,l)},Xi=na.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),na.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),na.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new He;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),mk=function(s,l){return new Xi(s,l)},ia=ke.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){A(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=Q(p),S=Q(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),S&&(s.style.marginLeft=-S.x+"px",s.style.marginTop=-S.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function gk(s){return new ia(s)}var zl=ia.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof zl.imagePath!="string"&&(zl.imagePath=this._detectIconPath()),(this.options.imagePath||zl.imagePath)+ia.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var S=p.exec(d);return S&&S[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),l=kr(s,"background-image")||kr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),s0=En.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Qn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,S=Ki(l._icon),j=d.getPixelBounds(),H=d.getPixelOrigin(),G=xe(j.min._subtract(H).add(v),j.max._subtract(H).subtract(v));if(!G.contains(S)){var Y=Q((Math.max(G.max.x,S.x)-G.max.x)/(j.max.x-G.max.x)-(Math.min(G.min.x,S.x)-G.min.x)/(j.min.x-G.min.x),(Math.max(G.max.y,S.y)-G.max.y)/(j.max.y-G.max.y)-(Math.min(G.min.y,S.y)-G.min.y)/(j.min.y-G.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),st(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Ki(l._icon),v=l._map.layerPointToLatLng(p);d&&st(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),uh=ei.extend({options:{icon:new zl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){A(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),oe(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),S=!1;v!==this._shadow&&(this._removeShadow(),S=!0),v&&(oe(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&S&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Me(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),s0)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new s0(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&hn(this._icon,s),this._shadow&&hn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?Q(l.iconSize):Q(0,0),p=l.iconAnchor?Q(l.iconAnchor):Q(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yk(s,l){return new uh(s,l)}var Mr=ei.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return A(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ch=Mr.extend({options:{fill:!0,radius:10},initialize:function(s,l){A(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Mr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _k(s,l){return new ch(s,l)}var kp=ch.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),A(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new He(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Mr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===mt.distance){var v=Math.PI/180,S=this._mRadius/mt.R/v,j=d.project([l+S,s]),H=d.project([l-S,s]),G=j.add(H).divideBy(2),Y=d.unproject(G).lat,ie=Math.acos((Math.cos(S*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(ie)||ie===0)&&(ie=S/Math.cos(Math.PI/180*l)),this._point=G.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:G.x-d.project([Y,s-ie]).x,this._radiusY=G.y-j.y}else{var me=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(me).x}this._updateBounds()}});function vk(s,l,d){return new kp(s,l,d)}var Qi=Mr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){A(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=ve,v,S,j=0,H=this._parts.length;j<H;j++)for(var G=this._parts[j],Y=1,ie=G.length;Y<ie;Y++){v=G[Y-1],S=G[Y];var me=p(s,v,S,!0);me<l&&(l=me,d=p(s,v,S))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ct(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new He,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return De(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=De(s),p=0,v=s.length;p<v;p++)d?(l[p]=ce(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new $(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof he,v=s.length,S,j;if(p){for(j=[],S=0;S<v;S++)j[S]=this._map.latLngToLayerPoint(s[S]),d.extend(j[S]);l.push(j)}else for(S=0;S<v;S++)this._projectLatlngs(s[S],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,S,j,H,G;for(d=0,v=0,S=this._rings.length;d<S;d++)for(G=this._rings[d],p=0,j=G.length;p<j-1;p++)H=b(G[p],G[p+1],s,p,!0),H&&(l[v]=l[v]||[],l[v].push(H[0]),(H[1]!==G[p+1]||p===j-2)&&(l[v].push(H[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Bt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,S,j,H,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,S=this._parts.length;d<S;d++)for(H=this._parts[d],p=0,j=H.length,v=j-1;p<j;v=p++)if(!(!l&&p===0)&&Bl(s,H[v],H[p])<=G)return!0;return!1}});function wk(s,l){return new Qi(s,l)}Qi._flat=Ve;var ra=Qi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ul(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Qi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof he&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Qi.prototype._setLatLngs.call(this,s),De(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return De(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new $(l,l);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,S;p<v;p++)S=Fl(this._rings[p],s,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,S,j,H,G,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(S=0,G=this._parts.length;S<G;S++)for(d=this._parts[S],j=0,Y=d.length,H=Y-1;j<Y;H=j++)p=d[j],v=d[H],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Qi.prototype._containsPoint.call(this,s,!0)}});function Tk(s,l){return new ra(s,l)}var Ji=Xi.extend({initialize:function(s,l){A(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var S=this.options;if(S.filter&&!S.filter(s))return this;var j=hh(s,S);return j?(j.feature=ph(s),j.defaultOptions=j.options,this.resetStyle(j),S.onEachFeature&&S.onEachFeature(s,j),this.addLayer(j)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function hh(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],S=l&&l.pointToLayer,j=l&&l.coordsToLatLng||Rp,H,G,Y,ie;if(!p&&!d)return null;switch(d.type){case"Point":return H=j(p),o0(S,s,H,l);case"MultiPoint":for(Y=0,ie=p.length;Y<ie;Y++)H=j(p[Y]),v.push(o0(S,s,H,l));return new Xi(v);case"LineString":case"MultiLineString":return G=dh(p,d.type==="LineString"?0:1,j),new Qi(G,l);case"Polygon":case"MultiPolygon":return G=dh(p,d.type==="Polygon"?1:2,j),new ra(G,l);case"GeometryCollection":for(Y=0,ie=d.geometries.length;Y<ie;Y++){var me=hh({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);me&&v.push(me)}return new Xi(v);case"FeatureCollection":for(Y=0,ie=d.features.length;Y<ie;Y++){var Pe=hh(d.features[Y],l);Pe&&v.push(Pe)}return new Xi(v);default:throw new Error("Invalid GeoJSON object.")}}function o0(s,l,d,p){return s?s(l,d):new uh(d,p&&p.markersInheritOptions&&p)}function Rp(s){return new he(s[1],s[0],s[2])}function dh(s,l,d){for(var p=[],v=0,S=s.length,j;v<S;v++)j=l?dh(s[v],l-1,d):(d||Rp)(s[v]),p.push(j);return p}function Np(s,l){return s=ce(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function fh(s,l,d,p){for(var v=[],S=0,j=s.length;S<j;S++)v.push(l?fh(s[S],De(s[S])?0:l-1,d,p):Np(s[S],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function sa(s,l){return s.feature?r({},s.feature,{geometry:l}):ph(l)}function ph(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Lp={toGeoJSON:function(s){return sa(this,{type:"Point",coordinates:Np(this.getLatLng(),s)})}};uh.include(Lp),kp.include(Lp),ch.include(Lp),Qi.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=fh(this._latlngs,l?1:0,!1,s);return sa(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ra.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=l&&!De(this._latlngs[0]),p=fh(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),sa(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),na.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),sa(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var S=v.toGeoJSON(s);if(d)p.push(S.geometry);else{var j=ph(S);j.type==="FeatureCollection"?p.push.apply(p,j.features):p.push(j)}}}),d?sa(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function a0(s,l){return new Ji(s,l)}var Ek=a0,mh=ei.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=ne(l),A(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Dn(this._image),this},bringToBack:function(){return this._map&&On(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ne(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Re("img");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Gi(this._image,d,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();st(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),xk=function(s,l,d){return new mh(s,l,d)},l0=mh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Re("video");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var j=Re("source");j.src=this._url[S],l.appendChild(j)}}});function Sk(s,l,d){return new l0(s,l,d)}var u0=mh.extend({_initImage:function(){var s=this._image=this._url;oe(s,"leaflet-image-layer"),this._zoomAnimated&&oe(s,"leaflet-zoom-animated"),this.options.className&&oe(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function Pk(s,l,d){return new u0(s,l,d)}var Ti=ei.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof he||C(s))?(this._latlng=ce(s),A(this,l)):(A(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&hn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(hn(this._container,0),this._removeTimeout=setTimeout(a(Me,void 0,this._container),200)):Me(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Dn(this._container),this},bringToBack:function(){return this._map&&On(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Xi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=Q(this.options.offset),d=this._getAnchor();this._zoomAnimated?st(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),ei.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(A(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var gh=Ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ti.prototype.openOn.call(this,s)},onAdd:function(s){Ti.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mr||this._source.on("preclick",Oe))},onRemove:function(s){Ti.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mr||this._source.off("preclick",Oe))},getEvents:function(){var s=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Re("div",s+"-content-wrapper",l);if(this._contentNode=Re("div",s+"-content",d),Ws(l),Rl(this._contentNode),_e(l,"contextmenu",Oe),this._tipContainer=Re("div",s+"-tip-container",l),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Re("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',_e(p,"click",function(v){gt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,S="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",oe(s,S)):We(s,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();st(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(kr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new $(this._containerLeft,-d-this._containerBottom);v._add(Ki(this._container));var S=s.layerPointToContainerPoint(v),j=Q(this.options.autoPanPadding),H=Q(this.options.autoPanPaddingTopLeft||j),G=Q(this.options.autoPanPaddingBottomRight||j),Y=s.getSize(),ie=0,me=0;S.x+p+G.x>Y.x&&(ie=S.x+p-Y.x+G.x),S.x-ie-H.x<0&&(ie=S.x-H.x),S.y+d+G.y>Y.y&&(me=S.y+d-Y.y+G.y),S.y-me-H.y<0&&(me=S.y-H.y),(ie||me)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,me]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ik=function(s,l){return new gh(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,d){return this._initOverlay(gh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ei.include({bindPopup:function(s,l){return this._popup=this._initOverlay(gh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Xi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Mr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var yh=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ti.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ti.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ti.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,S=p.latLngToContainerPoint(p.getCenter()),j=p.layerPointToContainerPoint(s),H=this.options.direction,G=v.offsetWidth,Y=v.offsetHeight,ie=Q(this.options.offset),me=this._getAnchor();H==="top"?(l=G/2,d=Y):H==="bottom"?(l=G/2,d=0):H==="center"?(l=G/2,d=Y/2):H==="right"?(l=0,d=Y/2):H==="left"?(l=G,d=Y/2):j.x<S.x?(H="right",l=0,d=Y/2):(H="left",l=G+(ie.x+me.x)*2,d=Y/2),s=s.subtract(Q(l,d,!0)).add(ie).add(me),We(v,"leaflet-tooltip-right"),We(v,"leaflet-tooltip-left"),We(v,"leaflet-tooltip-top"),We(v,"leaflet-tooltip-bottom"),oe(v,"leaflet-tooltip-"+H),st(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&hn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ck=function(s,l){return new yh(s,l)};Se.include({openTooltip:function(s,l,d){return this._initOverlay(yh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ei.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Xi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(_e(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),_e(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var c0=ia.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Jt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=Q(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Ak(s){return new c0(s)}ia.Default=zl;var Hl=ei.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){A(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Me(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Dn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof $?s:new $(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,S;p<v;p++)S=l[p].style.zIndex,l[p]!==this._container&&S&&(d=s(d,+S));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){hn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var S=Math.min(1,(s-v.loaded)/200);hn(v.el,S),S<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Me(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Me(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),S=Math.floor(l/2),j=d-1,H=new $(+v,+S);H.z=+j;var G=this._tileCoordsToKey(H),Y=this._tiles[G];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),j>p?this._retainParent(v,S,j,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var S=2*l;S<2*l+2;S++){var j=new $(v,S);j.z=d+1;var H=this._tileCoordsToKey(j),G=this._tiles[H];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);d+1<p&&this._retainChildren(v,S,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var S=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||S)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?Gi(s.el,v,p):st(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),S=l.getSize().divideBy(p*2);return new fe(v.subtract(S),v.add(S))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),S=v.getCenter(),j=[],H=this.options.keepBuffer,G=new fe(v.getBottomLeft().subtract([H,-H]),v.getTopRight().add([H,-H]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ie=this._tiles[Y].coords;(ie.z!==this._tileZoom||!G.contains(new $(ie.x,ie.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var me=v.min.y;me<=v.max.y;me++)for(var Pe=v.min.x;Pe<=v.max.x;Pe++){var tn=new $(Pe,me);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var bt=this._tiles[this._tileCoordsToKey(tn)];bt?bt.current=!0:j.push(tn)}}if(j.sort(function(fn,aa){return fn.distanceTo(S)-aa.distanceTo(S)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Un=document.createDocumentFragment();for(Pe=0;Pe<j.length;Pe++)this._addTile(j[Pe],Un);this._level.el.appendChild(Un)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ne(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),S=l.unproject(p,s.z),j=l.unproject(v,s.z);return[S,j]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new He(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new $(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Me(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){oe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&hn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,s,null,v)),st(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(hn(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(oe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new $(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function bk(s){return new Hl(s)}var oa=Hl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=A(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return _e(d,"load",a(this._tileOnLoad,this,l,d)),_e(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return E(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=z;var d=this._tiles[s].coords;Me(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",z),Hl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===z))return Hl.prototype._tileReady.call(this,s,l,d)}});function h0(s,l){return new oa(s,l)}var d0=oa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=A(this,l);var v=l.detectRetina&&le.retina?2:1,S=this.getTileSize();d.width=S.x*v,d.height=S.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,oa.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=xe(d.project(l[0]),d.project(l[1])),v=p.min,S=p.max,j=(this._wmsVersion>=1.3&&this._crs===ta?[v.y,v.x,S.y,S.x]:[v.x,v.y,S.x,S.y]).join(","),H=oa.prototype.getTileUrl.call(this,s);return H+N(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function kk(s,l){return new d0(s,l)}oa.WMS=d0,h0.wms=kk;var er=ei.extend({options:{padding:.1},initialize:function(s){A(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),S=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Gi(this._container,S,d):st(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),f0=er.extend({options:{tolerance:0},getEvents:function(){var s=er.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");_e(s,"mousemove",this._onMouseMove,this),_e(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Me(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;st(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,S,j=s._parts,H=j.length,G=this._ctx;if(H){for(G.beginPath(),d=0;d<H;d++){for(p=0,v=j[d].length;p<v;p++)S=j[d][p],G[p?"lineTo":"moveTo"](S.x,S.y);l&&G.closePath()}this._fillStroke(G,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(We(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(oe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function p0(s){return le.canvas?new f0(s):null}var Wl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Rk={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Wl("shape");oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Wl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Me(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Wl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Wl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Dn(s._container)},_bringToBack:function(s){On(s._container)}},_h=le.vml?Wl:Bc,ql=er.extend({_initContainer:function(){this._container=_h("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_h("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Me(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),st(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=_h("path");s.options.className&&oe(l,s.options.className),s.options.interactive&&oe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Me(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Mo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",S=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,S)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Dn(s._path)},_bringToBack:function(s){On(s._path)}});le.vml&&ql.include(Rk);function m0(s){return le.svg||le.vml?new ql(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&p0(s)||m0(s)}});var g0=ra.extend({initialize:function(s,l){ra.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ne(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Nk(s,l){return new g0(s,l)}ql.create=_h,ql.pointsToPath=Mo,Ji.geometryToLayer=hh,Ji.coordsToLatLng=Rp,Ji.coordsToLatLngs=dh,Ji.latLngToCoords=Np,Ji.latLngsToCoords=fh,Ji.getFeature=sa,Ji.asFeature=ph,Se.mergeOptions({boxZoom:!0});var y0=En.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xn(),qo(),this._startPoint=this._map.mouseEventToContainerPoint(s),_e(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),d=l.getSize();st(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Me(this._box),We(this._container,"leaflet-crosshair")),Tn(),$o(),Ue(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new He(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",y0),Se.mergeOptions({doubleClickZoom:!0});var _0=En.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Se.addInitHook("addHandler","doubleClickZoom",_0),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var v0=En.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Qn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ne(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,S=(p+l+d)%s-l-d,j=Math.abs(v+d)<Math.abs(S+d)?v:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,H=v.multiplyBy(j/S),G=H.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,G),ie=H.multiplyBy(Y/G),me=Y/(d.inertiaDeceleration*j),Pe=ie.multiplyBy(-me/2).round();!Pe.x&&!Pe.y?l.fire("moveend"):(Pe=l._limitOffset(Pe,l.options.maxBounds),V(function(){l.panBy(Pe,{duration:me,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",v0),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var w0=En.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),_e(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=Q(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(Q(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;gi(s)}}});Se.addInitHook("addHandler","keyboard",w0),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var T0=En.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Ll(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),gi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,S=d?Math.ceil(v/d)*d:v,j=s._limitZoom(l+(this._delta>0?S:-S))-l;this._delta=0,this._startTime=null,j&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+j):s.setZoomAround(this._lastMousePos,l+j))}});Se.addInitHook("addHandler","scrollWheelZoom",T0);var Lk=600;Se.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var E0=En.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new $(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",gt),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Lk),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ue(document,"touchend",gt),Ue(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new $(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Se.addInitHook("addHandler","tapHold",E0),Se.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var x0=En.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),gt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var S=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&S.x===0&&S.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var j=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(j,this,!0),gt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",x0),Se.BoxZoom=y0,Se.DoubleClickZoom=_0,Se.Drag=v0,Se.Keyboard=w0,Se.ScrollWheelZoom=T0,Se.TapHold=E0,Se.TouchZoom=x0,n.Bounds=fe,n.Browser=le,n.CRS=Ke,n.Canvas=f0,n.Circle=kp,n.CircleMarker=ch,n.Class=ke,n.Control=dn,n.DivIcon=c0,n.DivOverlay=Ti,n.DomEvent=$s,n.DomUtil=bp,n.Draggable=Qn,n.Evented=J,n.FeatureGroup=Xi,n.GeoJSON=Ji,n.GridLayer=Hl,n.Handler=En,n.Icon=ia,n.ImageOverlay=mh,n.LatLng=he,n.LatLngBounds=He,n.Layer=ei,n.LayerGroup=na,n.LineUtil=jn,n.Map=Se,n.Marker=uh,n.Mixin=ah,n.Path=Mr,n.Point=$,n.PolyUtil=Jo,n.Polygon=ra,n.Polyline=Qi,n.Popup=gh,n.PosAnimation=Dl,n.Projection=wi,n.Rectangle=g0,n.Renderer=er,n.SVG=ql,n.SVGOverlay=u0,n.TileLayer=oa,n.Tooltip=yh,n.Transformation=vl,n.Util=O,n.VideoOverlay=l0,n.bind=a,n.bounds=xe,n.canvas=p0,n.circle=vk,n.circleMarker=_k,n.control=_i,n.divIcon=Ak,n.extend=r,n.featureGroup=mk,n.geoJSON=a0,n.geoJson=Ek,n.gridLayer=bk,n.icon=gk,n.imageOverlay=xk,n.latLng=ce,n.latLngBounds=ne,n.layerGroup=pk,n.map=Zo,n.marker=yk,n.point=Q,n.polygon=Tk,n.polyline=wk,n.popup=Ik,n.rectangle=Nk,n.setOptions=A,n.stamp=c,n.svg=m0,n.svgOverlay=Pk,n.tileLayer=h0,n.tooltip=Ck,n.transformation=Sr,n.version=i,n.videoOverlay=Sk;var Mk=window.L;n.noConflict=function(){return window.L=Mk,this},window.L=n})})(Yg,Yg.exports);var fl=Yg.exports;const av=lx(fl);function Yf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Xf(t,e){return e==null?function(i,r){const o=W.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=W.useRef();o.current||(o.current=t(i,r));const a=W.useRef(i),{instance:u}=o.current;return W.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function pC(t,e){W.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function mC(t){return function(n){const i=Kf(),r=t(Zf(n,i),i);return uC(i.map,n.attribution),ov(r.current,n.eventHandlers),pC(r.current,i),r}}function O3(t,e){const n=W.useRef();W.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function V3(t){return function(n){const i=Kf(),r=t(Zf(n,i),i);return ov(r.current,n.eventHandlers),pC(r.current,i),O3(r.current,n),r}}function j3(t,e){const n=Xf(t,e),i=mC(n);return fC(i)}function F3(t,e){const n=Xf(t),i=D3(n,e);return L3(i)}function U3(t,e){const n=Xf(t,e),i=V3(n);return fC(i)}function B3(t,e){const n=Xf(t,e),i=mC(n);return M3(i)}function z3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function H3(){return Kf().map}function Xg(){return Xg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xg.apply(this,arguments)}function W3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...m},g){const[_]=W.useState({className:r,id:o,style:u}),[x,k]=W.useState(null);W.useImperativeHandle(g,()=>(x==null?void 0:x.map)??null,[x]);const A=W.useCallback(P=>{if(P!==null&&x===null){const E=new fl.Map(P,m);n!=null&&f!=null?E.setView(n,f):t!=null&&E.fitBounds(t,e),c!=null&&E.whenReady(c),k(N3(E))}},[]);W.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const N=x?Pd.createElement(dC,{value:x},i):a??null;return Pd.createElement("div",Xg({},_,{ref:A}),N)}const q3=W.forwardRef(W3),$3=j3(function({position:e,...n},i){const r=new fl.Marker(e,n);return Yf(r,cC(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),G3=U3(function({positions:e,...n},i){const r=new fl.Polyline(e,n);return Yf(r,cC(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),K3=F3(function(e,n){const i=new fl.Popup(e,n.overlayContainer);return Yf(i,n)},function(e,n,{position:i},r){W.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function c(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:c}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),Z3=B3(function({url:e,...n},i){const r=new fl.TileLayer(e,Zf(n,i));return Yf(r,i)},function(e,n,i){z3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),Y3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",X3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function gC(t,e,n,i){const o=Yr(n-t),a=Yr(i-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(Yr(t))*Math.cos(Yr(n))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function Yr(t){return t*(Math.PI/180)}function h1(t){return t*(180/Math.PI)}function Q3(t,e,n=100){const[i,r]=t,[o,a]=e;if(gC(i,r,o,a)<500)return[t,e];const c=[],f=Yr(i),m=Yr(r),g=Yr(o),_=Yr(a),x=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-g)/2),2)+Math.cos(f)*Math.cos(g)*Math.pow(Math.sin((m-_)/2),2)));let k=t[1];for(let A=0;A<=n;A++){const N=A/n,P=Math.sin((1-N)*x)/Math.sin(x),E=Math.sin(N*x)/Math.sin(x),C=P*Math.cos(f)*Math.cos(m)+E*Math.cos(g)*Math.cos(_),F=P*Math.cos(f)*Math.sin(m)+E*Math.cos(g)*Math.sin(_),z=P*Math.sin(f)+E*Math.sin(g),K=Math.atan2(z,Math.sqrt(C*C+F*F));let R=Math.atan2(F,C),I=h1(R);const M=I-k;M<-180?I+=360:M>180&&(I-=360),c.push([h1(K),I]),k=I}return c}let J3=av.icon({iconUrl:Y3,shadowUrl:X3,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});av.Marker.prototype.options.icon=J3;const ej=({coords:t})=>{const e=H3();return W.useEffect(()=>{if(t.length>0){const n=av.latLngBounds(t);e.fitBounds(n,{padding:[50,50]})}},[t,e]),null},tj=({activities:t,className:e="h-[300px] w-full rounded-xl overflow-hidden"})=>{const n=t.filter(o=>o.coordinates),i=[];if(n.length>0){const o=n[0].coordinates;i.push([o.lat,o.lng]);for(let a=0;a<n.length-1;a++){const u=n[a].coordinates,c=n[a+1].coordinates;if(gC(u.lat,u.lng,c.lat,c.lng)>500){const m=Q3([u.lat,u.lng],[c.lat,c.lng]);i.push(...m.slice(1))}else i.push([c.lat,c.lng])}}if(n.length===0)return T.jsxs("div",{className:`${e} bg-gray-100 flex items-center justify-center text-gray-400 flex-col gap-2`,children:[T.jsx(Ng,{className:"w-8 h-8 opacity-50"}),T.jsx("span",{className:"text-sm",children:""})]});const r=n.length>0?[n[0].coordinates.lat,n[0].coordinates.lng]:[37.7749,-122.4194];return T.jsx("div",{className:e,children:T.jsxs(q3,{center:r,zoom:13,scrollWheelZoom:!1,className:"h-full w-full z-0",children:[T.jsx(Z3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((o,a)=>T.jsx($3,{position:[o.coordinates.lat,o.coordinates.lng],children:T.jsx(K3,{children:T.jsxs("div",{className:"font-sans",children:[T.jsx("div",{className:"font-bold text-indigo-600",children:o.time}),T.jsx("div",{className:"font-medium",children:o.title}),T.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o.location}),T.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${o.coordinates.lat},${o.coordinates.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-blue-500 mt-2 hover:underline",children:[T.jsx(FN,{className:"w-3 h-3"}),"Google Maps "]})]})})},a)),i.length>1&&T.jsx(G3,{positions:i,color:"#4f46e5",weight:3,opacity:.7,dashArray:"5, 10"}),T.jsx(ej,{coords:i})]})})};function yC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=yC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function or(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=yC(t))&&(i&&(i+=" "),i+=e);return i}function nj({day:t,isExpanded:e,onToggle:n,isEditing:i,onAddActivity:r,onUpdateActivity:o,onRemoveActivity:a}){const[u,c]=W.useState(!1);return T.jsxs("div",{className:or("polaroid-card mb-8 relative",e?"z-20 scale-105 rotate-0":"hover:z-10"),children:[T.jsx("div",{className:"washi-tape",style:{transform:`translateX(-50%) rotate(${Math.random()*4-2}deg)`,backgroundColor:t.city==="SF"?"rgba(255, 154, 158, 0.6)":"rgba(162, 217, 255, 0.6)"}}),T.jsxs("div",{onClick:n,className:"cursor-pointer flex items-start justify-between group select-none",children:[T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b-2 border-gray-100 pb-2",children:[T.jsx("span",{className:"font-hand text-xl font-bold text-gray-500 transform -rotate-2",children:t.date}),T.jsx("div",{className:"flex-1"}),T.jsx("span",{className:"text-xs font-bold tracking-widest uppercase bg-gray-800 text-white px-2 py-1 transform rotate-1",children:t.cityLabel})]}),T.jsx("h3",{className:"text-2xl font-heading font-bold text-gray-800 mb-2 leading-tight",children:t.title}),T.jsx("p",{className:"font-hand text-lg text-gray-500 leading-snug",children:t.summary})]}),T.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[T.jsx("button",{onClick:f=>{f.stopPropagation(),c(!u)},className:`p-2 rounded-full border-2 transition-all ${u?"border-gray-800 text-gray-800 bg-gray-100":"border-gray-200 text-gray-400 hover:border-gray-400"}`,title:u?"List View":"Map View",children:u?T.jsx(NN,{size:18}):T.jsx(MN,{size:18})}),T.jsx("div",{className:or("p-2 text-gray-300 transition-transform duration-300",e&&"rotate-180 text-gray-800"),children:T.jsx(IN,{size:20})})]})]}),e&&T.jsx("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-gray-200",children:T.jsxs("div",{className:"bg-[var(--paper-bg)] p-4 rounded border border-gray-100 shadow-inner",children:[u?T.jsx(tj,{activities:t.activities}):T.jsxs("div",{className:"space-y-4 relative",children:[T.jsx("div",{className:"absolute left-4 top-2 bottom-2 w-0.5 bg-gray-200 border-l border-dashed border-gray-300"}),t.activities.map((f,m)=>T.jsx(k3,{activity:f,isLast:m===t.activities.length-1,isEditing:i,onEdit:()=>o==null?void 0:o(m,f),onDelete:()=>a==null?void 0:a(m)},m))]}),i&&T.jsxs("button",{onClick:r,className:"mt-6 w-full py-3 border-2 border-dashed border-gray-300 rounded text-gray-500 font-heading font-bold hover:border-gray-800 hover:text-gray-800 transition-colors flex items-center justify-center gap-2 group",children:[T.jsx(w_,{size:18,className:"group-hover:rotate-90 transition-transform"}),"Add New Memory"]})]})})]})}const Tm=[{id:"day1",date:"2026/05/20 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"14:00 (TPE)",title:"",description:"",type:"flight",iconName:"Plane",coordinates:{lat:25.0797,lng:121.2342}},{time:"16:30 (TPE)",title:"",description:" JX012  ()",type:"flight",iconName:"Plane"},{time:"12:30 (SFO)",title:" SFO ",description:"",type:"transport",iconName:"MapPin",tips:" 1.5-2 ",coordinates:{lat:37.6213,lng:-122.379}},{time:"14:30",title:"",description:" BART ()  Powell St.  Uber/Lyft",type:"transport",iconName:"Train",tips:" Union SquareBART "},{time:"16:00",title:" Check-in & ",description:"",type:"hotel",iconName:"Moon"},{time:"18:00",title:"",description:" Ferry Building Marketplace ",type:"food",iconName:"Utensils",location:"1 Ferry Building, San Francisco",coordinates:{lat:37.7955,lng:-122.3937}}]},{id:"day2",date:"2026/05/21 ()",city:"SF",cityLabel:"/",title:"Apple Park",summary:" Apple ParkGoogle ",activities:[{time:"08:30",title:"",description:" (Turo  Hertz) Cupertino",type:"transport",iconName:"Car",tips:" 50 "},{time:"10:00",title:"Apple Park Visitor Center",description:"AR ",type:"sightseeing",iconName:"MapPin",location:"10600 N Tantau Ave, Cupertino",tips:" T-shirt",coordinates:{lat:37.3349,lng:-122.009}},{time:"12:30",title:"",description:" Main Street Cupertino ",type:"food",iconName:"Utensils"},{time:"14:00",title:"Googleplex & Android Statues",description:" Mountain View  Google ",type:"sightseeing",iconName:"Camera",location:"1600 Amphitheatre Pkwy, Mountain View",coordinates:{lat:37.422,lng:-122.0841}},{time:"16:00",title:"",description:" Main QuadHoover Tower ",type:"sightseeing",iconName:"Briefcase",tips:" Tresidder Parking Lot",coordinates:{lat:37.4275,lng:-122.1697}},{time:"19:00",title:"",description:" Palo Alto ",type:"transport",iconName:"Car"}]},{id:"day3",date:"2026/05/22 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (Golden Gate Bridge)",description:" Welcome Center",type:"sightseeing",iconName:"Camera",tips:" Uber  Battery Spencer",coordinates:{lat:37.8199,lng:-122.4783}},{time:"11:30",title:" (Palace of Fine Arts)",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8029,lng:-122.4484}},{time:"14:00",title:" (Lombard Street)",description:"",type:"sightseeing",iconName:"MapPin",tips:" Uber  (Hyde St)",coordinates:{lat:37.8021,lng:-122.4187}},{time:"16:00",title:"",description:" Westfield ",type:"other",iconName:"Coffee"}]},{id:"day4",date:"2026/05/23 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:30",title:" (Alcatraz) ",description:" 33 ",type:"sightseeing",iconName:"MapPin",tips:" 90 ",coordinates:{lat:37.827,lng:-122.423}},{time:"13:00",title:"39  (Pier 39)",description:" Boudin ",type:"food",iconName:"Utensils",coordinates:{lat:37.8087,lng:-122.4098}},{time:"15:00",title:"",description:" Musee Mecanique ()",type:"sightseeing",iconName:"Camera"}]},{id:"day5",date:"2026/05/24 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" Sausalito",description:" Ferry Building  Golden Gate Ferry",type:"transport",iconName:"Plane"},{time:"10:30",title:"Sausalito ",description:"",type:"sightseeing",iconName:"Sun",coordinates:{lat:37.8591,lng:-122.4853}},{time:"14:00",title:"",description:" Powell-Hyde ",type:"sightseeing",iconName:"Train",tips:""}]},{id:"day6",date:"2026/05/25 ()",city:"SLC",cityLabel:"",title:"",summary:" ACSM ",activities:[{time:"09:00",title:" SFO ",description:"Check-out Uber/BART ",type:"transport",iconName:"Plane"},{time:"12:00",title:" (SLC)",description:" (Delta/United/Southwest) 2 ",type:"flight",iconName:"Plane"},{time:"15:30",title:" SLC & ",description:" TRAX  () ",type:"transport",iconName:"Train",tips:"",coordinates:{lat:40.7899,lng:-111.9791}},{time:"17:00",title:" Check-in",description:" Salt Palace Convention Center ",type:"hotel",iconName:"Moon"}]},{id:"day7",date:"2026/05/26 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 1",summary:"",activities:[{time:"08:00",title:"",description:" Salt Palace Convention Center ",type:"conference",iconName:"Briefcase",coordinates:{lat:40.767,lng:-111.8965}},{time:"09:00",title:" & ",description:"",type:"conference",iconName:"Briefcase"},{time:"17:00",title:" (Temple Square)",description:"",type:"sightseeing",iconName:"Camera"},{time:"19:00",title:"City Creek Center ",description:"",type:"food",iconName:"Utensils"}]},{id:"day8",date:"2026/05/27 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 2",summary:"",activities:[{time:"08:30",title:"",description:" (Poster Session) ",type:"conference",iconName:"Briefcase"},{time:"12:00",title:"",description:"",type:"food",iconName:"Coffee"},{time:"18:00",title:"",description:" Uber  Utah State Capitol ",type:"sightseeing",iconName:"Camera",tips:"",coordinates:{lat:40.7774,lng:-111.8882}}]},{id:"day9",date:"2026/05/28 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 3",summary:"",activities:[{time:"09:00",title:"",description:"",type:"conference",iconName:"Briefcase"},{time:"19:00",title:" (Gala) ",description:" Red Iguana ",type:"food",iconName:"Utensils",tips:"Red Iguana "}]},{id:"day10",date:"2026/05/29 ()",city:"SLC",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:"",description:" (Expo)",type:"conference",iconName:"Briefcase"},{time:"14:00",title:"",description:" The Leonardo ",type:"sightseeing",iconName:"Camera"},{time:"18:00",title:"",description:"",type:"hotel",iconName:"CheckSquare"}]},{id:"day11",date:"2026/05/30 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" SLC ",description:" TRAX ",type:"transport",iconName:"Train"},{time:"11:00",title:" (SAN)",description:" Delta/Southwest 2 ",type:"flight",iconName:"Plane"},{time:"13:00",title:" SAN",description:" Uber  992 ",type:"transport",iconName:"MapPin",tips:" Downtown  Little Italy ",coordinates:{lat:32.7338,lng:-117.1933}},{time:"18:00",title:"Gaslamp Quarter",description:"",type:"food",iconName:"Utensils",coordinates:{lat:32.7114,lng:-117.1599}}]},{id:"day12",date:"2026/05/31 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (San Diego Zoo)",description:" (Skyfari)",type:"sightseeing",iconName:"Camera",location:"2920 Zoo Dr, San Diego",tips:"",coordinates:{lat:32.7353,lng:-117.149}},{time:"14:00",title:" (Balboa Park)",description:"",type:"sightseeing",iconName:"Sun"},{time:"18:00",title:"Little Italy ",description:"",type:"food",iconName:"Utensils"}]},{id:"day13",date:"2026/06/01 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (USS Midway)",description:"",type:"sightseeing",iconName:"Briefcase",tips:"",coordinates:{lat:32.7137,lng:-117.1751}},{time:"13:00",title:"",description:"",type:"sightseeing",iconName:"Camera"},{time:"14:00",title:"Seaport Village",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day14",date:"2026/06/02 ()",city:"SAN",cityLabel:"",title:"",summary:" La Jolla ",activities:[{time:"14:00",title:" La Jolla",description:" Uber/Lyft  ( 20-30 )",type:"transport",iconName:"Car"},{time:"15:00",title:"La Jolla Cove",description:" ()",type:"sightseeing",iconName:"Camera"},{time:"18:30",title:"",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day15",date:"2026/06/03 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (Coronado)",description:" Hotel del Coronado",type:"sightseeing",iconName:"Sun",tips:"",coordinates:{lat:32.6859,lng:-117.1831}},{time:"14:00",title:"Old Town San Diego",description:"",type:"sightseeing",iconName:"MapPin",coordinates:{lat:32.7549,lng:-117.1978}},{time:"18:00",title:"",description:" Old Town  Taco  Margarita",type:"food",iconName:"Utensils"}]},{id:"day16",date:"2026/06/04 ()",city:"LA",cityLabel:"",title:" LAX ",summary:"",activities:[{time:"10:00",title:" & ",description:"",type:"hotel",iconName:"Coffee"},{time:"13:00",title:" (LAX)",description:" (One-way rental)  LAX",type:"transport",iconName:"Car",tips:" 2.5-3  5 "},{time:"20:30",title:" LAX ",description:" Tom Bradley  (TBIT) ",type:"flight",iconName:"Plane",tips:"",coordinates:{lat:33.9416,lng:-118.4085}},{time:"23:50",title:"",description:" JX001/JX005 ()",type:"flight",iconName:"Plane"}]}],d1=["ESTA  ( 72 )","ACSM ","Apple Park Visitor Center "," (90)",""," eSIM"," ( 110V )"," ()",""];function ij(){const[t,e]=W.useState(()=>{const r=localStorage.getItem("trip_checklist");return r?JSON.parse(r):{}});W.useEffect(()=>{localStorage.setItem("trip_checklist",JSON.stringify(t))},[t]);const n=r=>{e(o=>({...o,[r]:!o[r]}))},i=Math.round(Object.values(t).filter(Boolean).length/d1.length*100);return T.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[T.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-100",children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsxs("h3",{className:"text-lg font-bold text-emerald-900 flex items-center gap-2",children:[T.jsx(EP,{size:20,className:"text-emerald-600"}),""]}),T.jsxs("span",{className:"text-sm font-bold text-emerald-700",children:[i,"% "]})]}),T.jsx("div",{className:"w-full bg-emerald-200/50 rounded-full h-2",children:T.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${i}%`}})})]}),T.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-3",children:d1.map((r,o)=>T.jsxs("label",{className:or("flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all border",t[r]?"bg-emerald-50 border-emerald-200":"hover:bg-gray-50 border-transparent hover:border-gray-200"),children:[T.jsxs("div",{className:"relative flex items-center mt-0.5",children:[T.jsx("input",{type:"checkbox",className:"peer sr-only",checked:!!t[r],onChange:()=>n(r)}),T.jsx("div",{className:or("w-5 h-5 rounded border flex items-center justify-center transition-colors",t[r]?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"),children:t[r]&&T.jsx(PN,{size:12,className:"text-white"})})]}),T.jsx("span",{className:or("text-sm transition-colors select-none",t[r]?"text-emerald-800 line-through opacity-70":"text-gray-700"),children:r})]},o))})]})}const rj=()=>{};var f1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},sj=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},vC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,x=f&63;c||(x=64,a||(_=64)),i.push(n[m],n[g],n[_],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_C(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new oj;const _=o<<2|u>>4;if(i.push(_),f!==64){const x=u<<4&240|f>>2;if(i.push(x),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aj=function(t){const e=_C(t);return vC.encodeByteArray(e,!0)},of=function(t){return aj(t).replace(/\./g,"")},wC=function(t){try{return vC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=()=>lj().__FIREBASE_DEFAULTS__,cj=()=>{if(typeof process>"u"||typeof f1>"u")return;const t=f1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wC(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return rj()||uj()||cj()||hj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TC=t=>{var e,n;return(n=(e=Qf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},EC=t=>{const e=TC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xC=()=>{var t;return(t=Qf())==null?void 0:t.config},SC=t=>{var e;return(e=Qf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[of(JSON.stringify(n)),of(JSON.stringify(a)),""].join(".")}const Cu={};function fj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?t.emulator.push(e):t.prod.push(e);return t}function pj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let p1=!1;function uv(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||Cu[t]===e||Cu[t]||p1)return;Cu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=fj().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,x){_.setAttribute("width","24"),_.setAttribute("id",x),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{p1=!0,a()},_}function m(_,x){_.setAttribute("id",x),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=pj(i),x=n("text"),k=document.getElementById(x)||document.createElement("span"),A=n("learnmore"),N=document.getElementById(A)||document.createElement("a"),P=n("preprendIcon"),E=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(N,A);const F=f();c(E,P),C.append(E,k,N,F),document.body.appendChild(C)}o?(k.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function gj(){var e;const t=(e=Qf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _j(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wj(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Tj(){return!gj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ej(){try{return typeof indexedDB=="object"}catch{return!1}}function xj(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="FirebaseError";class zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Sj,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Pj(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new zi(r,u,i)}}function Pj(t,e){return t.replace(Ij,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Ij=/\{\$([^}]+)}/g;function Cj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _o(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(m1(o)&&m1(a)){if(!_o(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function m1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Aj(t,e){const n=new bj(t,e);return n.subscribe.bind(n)}class bj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");kj(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Em),r.error===void 0&&(r.error=Em),r.complete===void 0&&(r.complete=Em);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Em(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class gs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new dj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lj(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Nj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nj(t){return t===Js?void 0:t}function Lj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const Dj={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Oj=Ce.INFO,Vj={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},jj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Vj[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cv{constructor(e){this.name=e,this._logLevel=Oj,this._logHandler=jj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const Fj=(t,e)=>e.some(n=>t instanceof n);let g1,y1;function Uj(){return g1||(g1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bj(){return y1||(y1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IC=new WeakMap,Qg=new WeakMap,CC=new WeakMap,xm=new WeakMap,hv=new WeakMap;function zj(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(os(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&IC.set(n,t)}).catch(()=>{}),hv.set(e,t),e}function Hj(t){if(Qg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Qg.set(t,e)}let Jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wj(t){Jg=t(Jg)}function qj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sm(this),e,...n);return CC.set(i,e.sort?e.sort():[e]),os(i)}:Bj().includes(t)?function(...e){return t.apply(Sm(this),e),os(IC.get(this))}:function(...e){return os(t.apply(Sm(this),e))}}function $j(t){return typeof t=="function"?qj(t):(t instanceof IDBTransaction&&Hj(t),Fj(t,Uj())?new Proxy(t,Jg):t)}function os(t){if(t instanceof IDBRequest)return zj(t);if(xm.has(t))return xm.get(t);const e=$j(t);return e!==t&&(xm.set(t,e),hv.set(e,t)),e}const Sm=t=>hv.get(t);function Gj(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=os(a);return i&&a.addEventListener("upgradeneeded",c=>{i(os(a.result),c.oldVersion,c.newVersion,os(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const Kj=["get","getKey","getAll","getAllKeys","count"],Zj=["put","add","delete","clear"],Pm=new Map;function _1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Zj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Kj.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return Pm.set(e,o),o}Wj(t=>({...t,get:(e,n,i)=>_1(e,n)||t.get(e,n,i),has:(e,n)=>!!_1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Xj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ey="@firebase/app",v1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new cv("@firebase/app"),Qj="@firebase/app-compat",Jj="@firebase/analytics-compat",eF="@firebase/analytics",tF="@firebase/app-check-compat",nF="@firebase/app-check",iF="@firebase/auth",rF="@firebase/auth-compat",sF="@firebase/database",oF="@firebase/data-connect",aF="@firebase/database-compat",lF="@firebase/functions",uF="@firebase/functions-compat",cF="@firebase/installations",hF="@firebase/installations-compat",dF="@firebase/messaging",fF="@firebase/messaging-compat",pF="@firebase/performance",mF="@firebase/performance-compat",gF="@firebase/remote-config",yF="@firebase/remote-config-compat",_F="@firebase/storage",vF="@firebase/storage-compat",wF="@firebase/firestore",TF="@firebase/ai",EF="@firebase/firestore-compat",xF="firebase",SF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="[DEFAULT]",PF={[ey]:"fire-core",[Qj]:"fire-core-compat",[eF]:"fire-analytics",[Jj]:"fire-analytics-compat",[nF]:"fire-app-check",[tF]:"fire-app-check-compat",[iF]:"fire-auth",[rF]:"fire-auth-compat",[sF]:"fire-rtdb",[oF]:"fire-data-connect",[aF]:"fire-rtdb-compat",[lF]:"fire-fn",[uF]:"fire-fn-compat",[cF]:"fire-iid",[hF]:"fire-iid-compat",[dF]:"fire-fcm",[fF]:"fire-fcm-compat",[pF]:"fire-perf",[mF]:"fire-perf-compat",[gF]:"fire-rc",[yF]:"fire-rc-compat",[_F]:"fire-gcs",[vF]:"fire-gcs-compat",[wF]:"fire-fst",[EF]:"fire-fst-compat",[TF]:"fire-vertex","fire-js":"fire-js",[xF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,IF=new Map,ny=new Map;function w1(t,e){try{t.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vo(t){const e=t.name;if(ny.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,t);for(const n of af.values())w1(n,t);for(const n of IF.values())w1(n,t);return!0}function Jf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Cc("app","Firebase",CF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=SF;function AC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ty,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw as.create("bad-app-name",{appName:String(r)});if(n||(n=xC()),!n)throw as.create("no-options");const o=af.get(r);if(o){if(_o(n,o.options)&&_o(i,o.config))return o;throw as.create("duplicate-app",{appName:r})}const a=new Mj(r);for(const c of ny.values())a.addComponent(c);const u=new AF(n,i,a);return af.set(r,u),u}function dv(t=ty){const e=af.get(t);if(!e&&t===ty&&xC())return AC();if(!e)throw as.create("no-app",{appName:t});return e}function Li(t,e,n){let i=PF[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(a.join(" "));return}vo(new gs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="firebase-heartbeat-database",kF=1,oc="firebase-heartbeat-store";let Im=null;function bC(){return Im||(Im=Gj(bF,kF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw as.create("idb-open",{originalErrorMessage:t.message})})),Im}async function RF(t){try{const n=(await bC()).transaction(oc),i=await n.objectStore(oc).get(kC(t));return await n.done,i}catch(e){if(e instanceof zi)_r.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function T1(t,e){try{const i=(await bC()).transaction(oc,"readwrite");await i.objectStore(oc).put(e,kC(t)),await i.done}catch(n){if(n instanceof zi)_r.warn(n.message);else{const i=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(i.message)}}}function kC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=1024,LF=30;class MF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=E1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>LF){const a=VF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=E1(),{heartbeatsToSend:i,unsentEntries:r}=DF(this._heartbeatsCache.heartbeats),o=of(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _r.warn(n),""}}}function E1(){return new Date().toISOString().substring(0,10)}function DF(t,e=NF){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),x1(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),x1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class OF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ej()?xj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return T1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return T1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function x1(t){return of(JSON.stringify({version:2,heartbeats:t})).length}function VF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){vo(new gs("platform-logger",e=>new Yj(e),"PRIVATE")),vo(new gs("heartbeat",e=>new MF(e),"PRIVATE")),Li(ey,v1,t),Li(ey,v1,"esm2020"),Li("fire-js","")}jF("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firebasestorage.googleapis.com",NC="storageBucket",FF=2*60*1e3,UF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends zi{constructor(e,n,i=0){super(Cm(e),`Firebase Storage: ${n} (${Cm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function Cm(t){return"storage/"+t}function fv(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(lt.UNKNOWN,t)}function BF(t){return new ut(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zF(t){return new ut(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(lt.UNAUTHENTICATED,t)}function WF(){return new ut(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qF(t){return new ut(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $F(){return new ut(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GF(){return new ut(lt.CANCELED,"User canceled the upload/download.")}function KF(t){return new ut(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function ZF(t){return new ut(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function YF(){return new ut(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NC+"' property when initializing the app?")}function XF(){return new ut(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QF(){return new ut(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JF(t){return new ut(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function iy(t){return new ut(lt.INVALID_ARGUMENT,t)}function LC(){return new ut(lt.APP_DELETED,"The Firebase app was deleted.")}function e5(t){return new ut(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Au(t,e){return new ut(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nu(t){throw new ut(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=In.makeFromUrl(e,n)}catch{return new In(e,"")}if(i.path==="")return i;throw ZF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${m}/b/${r}/o${_}`,"i"),k={bucket:1,path:3},A=n===RC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",P=new RegExp(`^https?://${A}/${r}/${N}`,"i"),C=[{regex:u,indices:c,postModify:o},{regex:x,indices:k,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<C.length;F++){const z=C[F],K=z.regex.exec(e);if(K){const R=K[z.indices.bucket];let I=K[z.indices.path];I||(I=""),i=new In(R,I),z.postModify(i);break}}if(i==null)throw KF(e);return i}}class t5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function c(){return u===2}let f=!1;function m(...N){f||(f=!0,e.apply(null,N))}function g(N){r=setTimeout(()=>{r=null,t(x,c())},N)}function _(){o&&clearTimeout(o)}function x(N,...P){if(f){_();return}if(N){_(),m.call(null,N,...P);return}if(c()||a){_(),m.call(null,N,...P);return}i<64&&(i*=2);let C;u===1?(u=2,C=0):C=(i+Math.random())*1e3,g(C)}let k=!1;function A(N){k||(k=!0,_(),!f&&(r!==null?(N||(u=2),clearTimeout(r),g(0)):N||(u=1)))}return g(0),o=setTimeout(()=>{a=!0,A(!0)},n),A}function i5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(t){return t!==void 0}function s5(t){return typeof t=="object"&&!Array.isArray(t)}function pv(t){return typeof t=="string"||t instanceof String}function S1(t){return mv()&&t instanceof Blob}function mv(){return typeof Blob<"u"}function P1(t,e,n,i){if(i<e)throw iy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw iy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function MC(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var uo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uo||(uo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n,i,r,o,a,u,c,f,m,g,_=!0,x=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=_,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,A)=>{this.resolve_=k,this.reject_=A,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Hh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===uo.NO_ERROR,c=o.getStatus();if(!u||o5(c,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===uo.ABORT;i(!1,new Hh(!1,null,m));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new Hh(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());r5(c)?o(c):o()}catch(c){a(c)}else if(u!==null){const c=fv();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(r.canceled){const c=this.appDelete_?LC():GF();a(c)}else{const c=$F();a(c)}};this.canceled_?n(!1,new Hh(!1,null,!0)):this.backoffId_=n5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&i5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function l5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function u5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function c5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function h5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function d5(t,e,n,i,r,o,a=!0,u=!1){const c=MC(t.urlParams),f=t.url+c,m=Object.assign({},t.headers);return c5(m,e),l5(m,n),u5(m,o),h5(m,i),new a5(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p5(...t){const e=f5();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(mv())return new Blob(t);throw new ut(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function m5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){if(typeof atob>"u")throw JF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Am{constructor(e,n){this.data=e,this.contentType=n||null}}function y5(t,e){switch(t){case Ai.RAW:return new Am(DC(e));case Ai.BASE64:case Ai.BASE64URL:return new Am(OC(t,e));case Ai.DATA_URL:return new Am(v5(e),w5(e))}throw fv()}function DC(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function _5(t){let e;try{e=decodeURIComponent(t)}catch{throw Au(Ai.DATA_URL,"Malformed data URL.")}return DC(e)}function OC(t,e){switch(t){case Ai.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Au(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Au(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=g5(e)}catch(r){throw r.message.includes("polyfill")?r:Au(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class VC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Au(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=T5(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function v5(t){const e=new VC(t);return e.base64?OC(Ai.BASE64,e.rest):_5(e.rest)}function w5(t){return new VC(t).contentType}function T5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){let i=0,r="";S1(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(S1(this.data_)){const i=this.data_,r=m5(i,e,n);return r===null?null:new Wr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Wr(i,!0)}}static getBlob(...e){if(mv()){const n=e.map(i=>i instanceof Wr?i.data_:i);return new Wr(p5.apply(null,n))}else{const n=e.map(a=>pv(a)?y5(Ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Wr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){let e;try{e=JSON.parse(t)}catch{return null}return s5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x5(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function FC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t,e){return e}class nn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||S5}}let Wh=null;function P5(t){return!pv(t)||t.length<2?t:FC(t)}function UC(){if(Wh)return Wh;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(o,a){return P5(a)}const n=new nn("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new nn("size");return r.xform=i,t.push(r),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),Wh=t,Wh}function I5(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new In(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function C5(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return I5(i,t),i}function BC(t,e,n){const i=jC(e);return i===null?null:C5(t,i,n)}function A5(t,e,n,i){const r=jC(e);if(r===null||!pv(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,g=t.fullPath,_="/b/"+a(m)+"/o/"+a(g),x=gv(_,n,i),k=MC({alt:"media",token:f});return x+k})[0]}function b5(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class zC{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){if(!t)throw fv()}function k5(t,e){function n(i,r){const o=BC(t,r,e);return HC(o!==null),o}return n}function R5(t,e){function n(i,r){const o=BC(t,r,e);return HC(o!==null),A5(o,r,t.host,t._protocol)}return n}function WC(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=WF():r=HF():n.getStatus()===402?r=zF(t.bucket):n.getStatus()===403?r=qF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function N5(t){const e=WC(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=BF(t.path)),o.serverResponse=r.serverResponse,o}return n}function L5(t,e,n){const i=e.fullServerUrl(),r=gv(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new zC(r,o,R5(t,n),a);return u.errorHandler=N5(e),u}function M5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D5(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=M5(null,e)),i}function O5(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let C="";for(let F=0;F<2;F++)C=C+Math.random().toString().slice(2);return C}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const f=D5(e,i,r),m=b5(f,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+c+"--",x=Wr.getBlob(g,i,_);if(x===null)throw XF();const k={name:f.fullPath},A=gv(o,t.host,t._protocol),N="POST",P=t.maxUploadRetryTime,E=new zC(A,N,k5(t,n),P);return E.urlParams=k,E.headers=a,E.body=x.uploadData(),E.errorHandler=WC(e),E}class V5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw nu("cannot .send() more than once");if(Cs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j5 extends V5{initXhr(){this.xhr_.responseType="text"}}function qC(){return new j5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this._service=e,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wo(e,n)}get root(){const e=new In(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FC(this._location.path)}get storage(){return this._service}get parent(){const e=E5(this._location.path);if(e===null)return null;const n=new In(this._location.bucket,e);return new wo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw e5(e)}}function F5(t,e,n){t._throwIfRoot("uploadBytes");const i=O5(t.storage,t._location,UC(),new Wr(e,!0),n);return t.storage.makeRequestWithTokens(i,qC).then(r=>({metadata:r,ref:t}))}function U5(t){t._throwIfRoot("getDownloadURL");const e=L5(t.storage,t._location,UC());return t.storage.makeRequestWithTokens(e,qC).then(n=>{if(n===null)throw QF();return n})}function B5(t,e){const n=x5(t._location.path,e),i=new In(t._location.bucket,n);return new wo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){return/^[A-Za-z]+:\/\//.test(t)}function H5(t,e){return new wo(t,e)}function $C(t,e){if(t instanceof yv){const n=t;if(n._bucket==null)throw YF();const i=new wo(n,n._bucket);return e!=null?$C(i,e):i}else return e!==void 0?B5(t,e):t}function W5(t,e){if(e&&z5(e)){if(t instanceof yv)return H5(t,e);throw iy("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(t,e)}function I1(t,e){const n=e==null?void 0:e[NC];return n==null?null:In.makeFromBucketSpec(n,t)}function q5(t,e,n,i={}){t.host=`${e}:${n}`;const r=Cs(e);r&&(lv(`https://${t.host}/b`),uv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:PC(o,t.app.options.projectId))}class yv{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=RC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FF,this._maxUploadRetryTime=UF,this._requests=new Set,r!=null?this._bucket=In.makeFromBucketSpec(r,this._host):this._bucket=I1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,e):this._bucket=I1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new t5(LC());{const a=d5(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const C1="@firebase/storage",A1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="storage";function $5(t,e,n){return t=Pt(t),F5(t,e,n)}function G5(t){return t=Pt(t),U5(t)}function K5(t,e){return t=Pt(t),W5(t,e)}function Z5(t=dv(),e){t=Pt(t);const i=Jf(t,GC).getImmediate({identifier:e}),r=EC("storage");return r&&Y5(i,...r),i}function Y5(t,e,n,i={}){q5(t,e,n,i)}function X5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new yv(n,i,r,e,Ro)}function Q5(){vo(new gs(GC,X5,"PUBLIC").setMultipleInstances(!0)),Li(C1,A1,""),Li(C1,A1,"esm2020")}Q5();var J5="firebase",e6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(J5,e6,"app");var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,KC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function M(){}M.prototype=I.prototype,R.F=I.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(D,V,U){for(var O=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)O[ke-2]=arguments[ke];return I.prototype[V].apply(D,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,M){M||(M=0);const D=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)D[V]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(V=0;V<16;++V)D[V]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=R.g[0],M=R.g[1],V=R.g[2];let U=R.g[3],O;O=I+(U^M&(V^U))+D[0]+3614090360&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[1]+3905402710&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[2]+606105819&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[3]+3250441966&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[4]+4118548399&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[5]+1200080426&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[6]+2821735955&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[7]+4249261313&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[8]+1770035416&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[9]+2336552879&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[10]+4294925233&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[11]+2304563134&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[12]+1804603682&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[13]+4254626195&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[14]+2792965006&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[15]+1236535329&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(V^U&(M^V))+D[1]+4129170786&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[6]+3225465664&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[11]+643717713&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[0]+3921069994&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[5]+3593408605&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[10]+38016083&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[15]+3634488961&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[4]+3889429448&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[9]+568446438&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[14]+3275163606&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[3]+4107603335&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[8]+1163531501&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[13]+2850285829&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[2]+4243563512&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[7]+1735328473&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[12]+2368359562&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(M^V^U)+D[5]+4294588738&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[8]+2272392833&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[11]+1839030562&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[14]+4259657740&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[1]+2763975236&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[4]+1272893353&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[7]+4139469664&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[10]+3200236656&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[13]+681279174&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[0]+3936430074&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[3]+3572445317&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[6]+76029189&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[9]+3654602809&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[12]+3873151461&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[15]+530742520&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[2]+3299628645&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(V^(M|~U))+D[0]+4096336452&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[7]+1126891415&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[14]+2878612391&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[5]+4237533241&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[12]+1700485571&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[3]+2399980690&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[10]+4293915773&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[1]+2240044497&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[8]+1873313359&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[15]+4264355552&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[6]+2734768916&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[13]+1309151649&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[4]+4149444226&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[11]+3174756917&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[2]+718787259&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const M=I-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<I;){if(V==0)for(;U<=M;)r(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(D[V++]=R.charCodeAt(U++),V==this.blockSize){r(this,D),V=0;break}}else for(;U<I;)if(D[V++]=R[U++],V==this.blockSize){r(this,D),V=0;break}}this.h=V,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,M=0;M<4;++M)for(let D=0;D<32;D+=8)R[I++]=this.g[M]>>>D&255;return R};function o(R,I){var M=u;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=I(R)}function a(R,I){this.h=I;const M=[];let D=!0;for(let V=R.length-1;V>=0;V--){const U=R[V]|0;D&&U==I||(M[V]=U,D=!1)}this.g=M}var u={};function c(R){return-128<=R&&R<128?o(R,function(I){return new a([I|0],I<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return N(f(-R));const I=[];let M=1;for(let D=0;R>=M;D++)I[D]=R/M|0,M*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return N(m(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(I,8));let D=g;for(let U=0;U<R.length;U+=8){var V=Math.min(8,R.length-U);const O=parseInt(R.substring(U,U+V),I);V<8?(V=f(Math.pow(I,V)),D=D.j(V).add(f(O))):(D=D.j(M),D=D.add(f(O)))}return D}var g=c(0),_=c(1),x=c(16777216);t=a.prototype,t.m=function(){if(A(this))return-N(this).m();let R=0,I=1;for(let M=0;M<this.g.length;M++){const D=this.i(M);R+=(D>=0?D:4294967296+D)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(A(this))return"-"+N(this).toString(R);const I=f(Math.pow(R,6));var M=this;let D="";for(;;){const V=F(M,I).g;M=P(M,V.j(I));let U=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=V,k(M))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function A(R){return R.h==-1}t.l=function(R){return R=P(this,R),A(R)?-1:k(R)?0:1};function N(R){const I=R.g.length,M=[];for(let D=0;D<I;D++)M[D]=~R.g[D];return new a(M,~R.h).add(_)}t.abs=function(){return A(this)?N(this):this},t.add=function(R){const I=Math.max(this.g.length,R.g.length),M=[];let D=0;for(let V=0;V<=I;V++){let U=D+(this.i(V)&65535)+(R.i(V)&65535),O=(U>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);D=O>>>16,U&=65535,O&=65535,M[V]=O<<16|U}return new a(M,M[M.length-1]&-2147483648?-1:0)};function P(R,I){return R.add(N(I))}t.j=function(R){if(k(this)||k(R))return g;if(A(this))return A(R)?N(this).j(N(R)):N(N(this).j(R));if(A(R))return N(this.j(N(R)));if(this.l(x)<0&&R.l(x)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,M=[];for(var D=0;D<2*I;D++)M[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<R.g.length;V++){const U=this.i(D)>>>16,O=this.i(D)&65535,ke=R.i(V)>>>16,Dt=R.i(V)&65535;M[2*D+2*V]+=O*Dt,E(M,2*D+2*V),M[2*D+2*V+1]+=U*Dt,E(M,2*D+2*V+1),M[2*D+2*V+1]+=O*ke,E(M,2*D+2*V+1),M[2*D+2*V+2]+=U*ke,E(M,2*D+2*V+2)}for(R=0;R<I;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=I;R<2*I;R++)M[R]=0;return new a(M,0)};function E(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function C(R,I){this.g=R,this.h=I}function F(R,I){if(k(I))throw Error("division by zero");if(k(R))return new C(g,g);if(A(R))return I=F(N(R),I),new C(N(I.g),N(I.h));if(A(I))return I=F(R,N(I)),new C(N(I.g),I.h);if(R.g.length>30){if(A(R)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var M=_,D=I;D.l(R)<=0;)M=z(M),D=z(D);var V=K(M,1),U=K(D,1);for(D=K(D,2),M=K(M,2);!k(D);){var O=U.add(D);O.l(R)<=0&&(V=V.add(M),U=O),D=K(D,1),M=K(M,1)}return I=P(R,V.j(I)),new C(V,I)}for(V=g;R.l(I)>=0;){for(M=Math.max(1,Math.floor(R.m()/I.m())),D=Math.ceil(Math.log(M)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(M),O=U.j(I);A(O)||O.l(R)>0;)M-=D,U=f(M),O=U.j(I);k(U)&&(U=_),V=V.add(U),R=P(R,O)}return new C(V,R)}t.B=function(R){return F(this,R).h},t.and=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)&R.i(D);return new a(M,this.h&R.h)},t.or=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)|R.i(D);return new a(M,this.h|R.h)},t.xor=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)^R.i(D);return new a(M,this.h^R.h)};function z(R){const I=R.g.length+1,M=[];for(let D=0;D<I;D++)M[D]=R.i(D)<<1|R.i(D-1)>>>31;return new a(M,R.h)}function K(R,I){const M=I>>5;I%=32;const D=R.g.length-M,V=[];for(let U=0;U<D;U++)V[U]=I>0?R.i(U+M)>>>I|R.i(U+M+1)<<32-I:R.i(U+M);return new a(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,KC=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ls=a}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZC,cu,YC,fd,ry,XC,QC,JC;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(h,y){if(y)e:{var w=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var B=h[b];if(!(B in w))break e;w=w[B]}h=h[h.length-1],b=w[h],y=y(b),y!=b&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(y){var w=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([b,y[b]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function c(h,y,w){return h.call.apply(h.bind,arguments)}function f(h,y,w){return f=c,f.apply(null,arguments)}function m(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function g(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(b,B,q){for(var te=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)te[ve-2]=arguments[ve];return y.prototype[B].apply(b,te)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const y=h.length;if(y>0){const w=Array(y);for(let b=0;b<y;b++)w[b]=h[b];return w}return[]}function k(h,y){for(let b=1;b<arguments.length;b++){const B=arguments[b];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=h.length||0;const q=B.length||0;h.length=w+q;for(let te=0;te<q;te++)h[w+te]=B[te]}else h.push(B)}}class A{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function N(h){a.setTimeout(()=>{throw h},0)}function P(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class E{constructor(){this.h=this.g=null}add(y,w){const b=C.get();b.set(y,w),this.h?this.h.next=b:this.g=b,this.h=b}}var C=new A(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let z,K=!1,R=new E,I=()=>{const h=Promise.resolve(void 0);z=()=>{h.then(M)}};function M(){for(var h;h=P();){try{h.h.call(h.g)}catch(w){N(w)}var y=C;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}K=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return h}();function O(h){return/^[\s\xa0]*$/.test(h)}function ke(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}g(ke,V),ke.prototype.init=function(h,y){const w=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Dt="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function J(h,y,w,b,B){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!b,this.ha=B,this.key=++Ge,this.da=this.fa=!1}function $(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function se(h,y,w){for(const b in h)y.call(w,h[b],b,h)}function Q(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function fe(h){const y={};for(const w in h)y[w]=h[w];return y}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(h,y){let w,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(w in b)h[w]=b[w];for(let q=0;q<xe.length;q++)w=xe[q],Object.prototype.hasOwnProperty.call(b,w)&&(h[w]=b[w])}}function ne(h){this.src=h,this.g={},this.h=0}ne.prototype.add=function(h,y,w,b,B){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const te=ce(h,y,b,B);return te>-1?(y=h[te],w||(y.fa=!1)):(y=new J(y,this.src,q,!!b,B),y.fa=w,h.push(y)),y};function he(h,y){const w=y.type;if(w in h.g){var b=h.g[w],B=Array.prototype.indexOf.call(b,y,void 0),q;(q=B>=0)&&Array.prototype.splice.call(b,B,1),q&&($(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ce(h,y,w,b){for(let B=0;B<h.length;++B){const q=h[B];if(!q.da&&q.listener==y&&q.capture==!!w&&q.ha==b)return B}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),mt={};function xr(h,y,w,b,B){if(Array.isArray(y)){for(let q=0;q<y.length;q++)xr(h,y[q],w,b,B);return null}return w=Ls(w),h&&h[Dt]?h.J(y,w,u(b)?!!b.capture:!1,B):ks(h,y,w,!1,b,B)}function ks(h,y,w,b,B,q){if(!y)throw Error("Invalid event type");const te=u(B)?!!B.capture:!!B;let ve=Mo(h);if(ve||(h[Ke]=ve=new ne(h)),w=ve.add(y,w,b,te,q),w.proxy)return w;if(b=vl(),w.proxy=b,b.src=h,b.listener=w,h.addEventListener)U||(B=te),B===void 0&&(B=!1),h.addEventListener(y.toString(),b,B);else if(h.attachEvent)h.attachEvent(Uc(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function vl(){function h(w){return y.call(h.src,h.listener,w)}const y=Bc;return h}function Sr(h,y,w,b,B){if(Array.isArray(y))for(var q=0;q<y.length;q++)Sr(h,y[q],w,b,B);else b=u(b)?!!b.capture:!!b,w=Ls(w),h&&h[Dt]?(h=h.i,q=String(y).toString(),q in h.g&&(y=h.g[q],w=ce(y,w,b,B),w>-1&&($(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[q],h.h--)))):h&&(h=Mo(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ce(y,w,b,B)),(w=h>-1?y[h]:null)&&Rs(w))}function Rs(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Dt])he(y.i,h);else{var w=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(w,b,h.capture):y.detachEvent?y.detachEvent(Uc(w),b):y.addListener&&y.removeListener&&y.removeListener(b),(w=Mo(y))?(he(w,h),w.h==0&&(w.src=null,y[Ke]=null)):$(h)}}}function Uc(h){return h in mt?mt[h]:mt[h]="on"+h}function Bc(h,y){if(h.da)h=!0;else{y=new ke(y,this);const w=h.listener,b=h.ha||h.src;h.fa&&Rs(h),h=w.call(b,y)}return h}function Mo(h){return h=h[Ke],h instanceof ne?h:null}var Ns="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ls(h){return typeof h=="function"?h:(h[Ns]||(h[Ns]=function(y){return h.handleEvent(y)}),h[Ns])}function It(){D.call(this),this.i=new ne(this),this.M=this,this.G=null}g(It,D),It.prototype[Dt]=!0,It.prototype.removeEventListener=function(h,y,w,b){Sr(this,h,y,w,b)};function Ct(h,y){var w,b=h.G;if(b)for(w=[];b;b=b.G)w.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var B=y;y=new V(b,h),He(y,B)}B=!0;let q,te;if(w)for(te=w.length-1;te>=0;te--)q=y.g=w[te],B=Pr(q,b,!0,y)&&B;if(q=y.g=h,B=Pr(q,b,!0,y)&&B,B=Pr(q,b,!1,y)&&B,w)for(te=0;te<w.length;te++)q=y.g=w[te],B=Pr(q,b,!1,y)&&B}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let b=0;b<w.length;b++)$(w[b]);delete h.g[y],h.h--}}this.G=null},It.prototype.J=function(h,y,w,b){return this.i.add(String(h),y,!1,w,b)},It.prototype.K=function(h,y,w,b){return this.i.add(String(h),y,!0,w,b)};function Pr(h,y,w,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let q=0;q<y.length;++q){const te=y[q];if(te&&!te.da&&te.capture==w){const ve=te.listener,De=te.ha||te.src;te.fa&&he(h.i,te),B=ve.call(De,b)!==!1&&B}}return B&&!b.defaultPrevented}function zc(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(h,y||0)}function wl(h){h.g=zc(()=>{h.g=null,h.i&&(h.i=!1,wl(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ep extends D{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(h){D.call(this),this.h=h,this.g={}}g(Ms,D);var Do=[];function Tl(h){se(h.g,function(y,w){this.g.hasOwnProperty(w)&&Rs(y)},h),h.g={}}Ms.prototype.N=function(){Ms.Z.N.call(this),Tl(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oo=a.JSON.stringify,xp=a.JSON.parse,Hc=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function El(){}function Wc(){}var Ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){V.call(this,"d")}g(Ds,V);function Vo(){V.call(this,"c")}g(Vo,V);var Hi={},Cr=null;function jo(){return Cr=Cr||new It}Hi.Ia="serverreachability";function qc(h){V.call(this,Hi.Ia,h)}g(qc,V);function Ar(h){const y=jo();Ct(y,new qc(y))}Hi.STAT_EVENT="statevent";function xl(h,y){V.call(this,Hi.STAT_EVENT,h),this.stat=y}g(xl,V);function At(h){const y=jo();Ct(y,new xl(y,h))}Hi.Ja="timingevent";function $c(h,y){V.call(this,Hi.Ja,h),this.size=y}g($c,V);function Os(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function Vs(){this.g=!0}Vs.prototype.ua=function(){this.g=!1};function Sp(h,y,w,b,B,q){h.info(function(){if(h.g)if(q){var te="",ve=q.split("&");for(let Ve=0;Ve<ve.length;Ve++){var De=ve[Ve].split("=");if(De.length>1){const ct=De[0];De=De[1];const jn=ct.split("_");te=jn.length>=2&&jn[1]=="type"?te+(ct+"="+De+"&"):te+(ct+"=redacted&")}}}else te=null;else te=q;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+y+`
`+w+`
`+te})}function Pp(h,y,w,b,B,q,te){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+y+`
`+w+`
`+q+" "+te})}function br(h,y,w,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ip(h,w)+(b?" "+b:"")})}function Sl(h,y){h.info(function(){return"TIMEOUT: "+y})}Vs.prototype.info=function(){};function Ip(h,y){if(!h.g)return y;if(!y)return null;try{const q=JSON.parse(y);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var w=q[h];if(!(w.length<2)){var b=w[1];if(Array.isArray(b)&&!(b.length<1)){var B=b[0];if(B!="noop"&&B!="stop"&&B!="close")for(let te=1;te<b.length;te++)b[te]=""}}}}return Oo(q)}catch{return y}}var Fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kc;function cn(){}g(cn,El),cn.prototype.g=function(){return new XMLHttpRequest},Kc=new cn;function le(h){return encodeURIComponent(String(h))}function Zc(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Yn(h,y,w,b){this.j=h,this.i=y,this.l=w,this.S=b||1,this.V=new Ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pl}function Pl(){this.i=null,this.g="",this.h=!1}var Il={},js={};function Uo(h,y,w){h.M=1,h.A=We(Jt(y)),h.u=w,h.R=!0,Wi(h,null)}function Wi(h,y){h.F=Date.now(),Bo(h),h.B=Jt(h.A);var w=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),$o(w.i,"t",b),h.C=0,w=h.j.L,h.h=new Pl,h.g=Ul(h.j,w?y:null,!h.u),h.P>0&&(h.O=new Ep(f(h.Y,h,h.g),h.P)),y=h.V,w=h.g,b=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Do[0]=B.toString()),B=Do);for(let q=0;q<B.length;q++){const te=xr(w,B[q],b||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=h.J?fe(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ar(),Sp(h.i,h.v,h.B,h.l,h.S,h.u)}Yn.prototype.ba=function(h){h=h.target;const y=this.O;y&&yi(h)==3?y.j():this.Y(h)},Yn.prototype.Y=function(h){try{if(h==this.g)e:{const ve=yi(this.g),De=this.g.ya(),Ve=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||ve!=4||De==7||(De==8||Ve<=0?Ar(3):Ar(2)),zo(this);var y=this.g.ca();this.X=y;var w=Yc(this);if(this.o=y==200,Pp(this.i,this.v,this.B,this.l,this.S,ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(b)){var q=b;break t}}q=null}if(h=q)br(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cl(this,h);else{this.o=!1,this.m=3,At(12),Mn(this),Fs(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<w.length;)if(ct=Cp(this,w),ct==js){ve==4&&(this.m=4,At(14),h=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Il){this.m=4,At(15),br(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else br(this.i,this.l,ct,null),Cl(this,ct);if(Xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||w.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)br(this.i,this.l,w,"[Invalid Chunked Response]"),Mn(this),Fs(this);else if(w.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),jl(te),te.P=!0,At(11))}}else br(this.i,this.l,w,null),Cl(this,w);ve==4&&Mn(this),this.o&&!this.K&&(ve==4?En(this.j,this):(this.o=!1,Bo(this)))}else Ml(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Mn(this),Fs(this)}}}catch{}finally{}};function Yc(h){if(!Xc(h))return h.g.la();const y=Ll(h.g);if(y==="")return"";let w="";const b=y.length,B=yi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Mn(h),Fs(h),"";h.h.i=new a.TextDecoder}for(let q=0;q<b;q++)h.h.h=!0,w+=h.h.i.decode(y[q],{stream:!(B&&q==b-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function Xc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Cp(h,y){var w=h.C,b=y.indexOf(`
`,w);return b==-1?js:(w=Number(y.substring(w,b)),isNaN(w)?Il:(b+=1,b+w>y.length?js:(y=y.slice(b,b+w),h.C=b+w,y)))}Yn.prototype.cancel=function(){this.K=!0,Mn(this)};function Bo(h){h.T=Date.now()+h.H,Qc(h,h.H)}function Qc(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Os(f(h.aa,h),y)}function zo(h){h.D&&(a.clearTimeout(h.D),h.D=null)}Yn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sl(this.i,this.B),this.M!=2&&(Ar(),At(17)),Mn(this),this.m=2,Fs(this)):Qc(this,this.T-h)};function Fs(h){h.j.I==0||h.K||En(h.j,h)}function Mn(h){zo(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Cl(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Us(w.h,h))){if(!h.L&&Us(w.h,h)&&w.I==3){try{var b=w.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Xo(w),Zo(w);else break e;Vl(w),At(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Os(f(w.Va,w),6e3));th(w.h)<=1&&w.ta&&(w.ta=void 0)}else vi(w,11)}else if((h.L||w.g==h)&&Xo(w),!O(y))for(B=w.Ba.g.parse(y),y=0;y<B.length;y++){let Ve=B[y];const ct=Ve[0];if(!(ct<=w.K))if(w.K=ct,Ve=Ve[1],w.I==2)if(Ve[0]=="c"){w.M=Ve[1],w.ba=Ve[2];const jn=Ve[3];jn!=null&&(w.ka=jn,w.j.info("VER="+w.ka));const Jn=Ve[4];Jn!=null&&(w.za=Jn,w.j.info("SVER="+w.za));const Fn=Ve[5];Fn!=null&&typeof Fn=="number"&&Fn>0&&(b=1.5*Fn,w.O=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const wi=h.g;if(wi){const ea=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var q=b.h;q.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(qi(q,q.h),q.h=null))}if(b.G){const ta=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(b.wa=ta,oe(b.J,b.G,ta))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),b=w;var te=h;if(b.na=Fl(b,b.L?b.ba:null,b.W),te.L){Al(b.h,te);var ve=te,De=b.O;De&&(ve.H=De),ve.D&&(zo(ve),Bo(ve)),b.g=te}else Ol(b);w.i.length>0&&_i(w)}else Ve[0]!="stop"&&Ve[0]!="close"||vi(w,7);else w.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?vi(w,7):Se(w):Ve[0]!="noop"&&w.l&&w.l.qa(Ve),w.A=0)}}Ar(4)}catch{}}var Ap=class{constructor(h,y){this.g=h,this.map=y}};function Jc(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eh(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function th(h){return h.h?1:h.g?h.g.size:0}function Us(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function qi(h,y){h.g?h.g.add(y):h.h=y}function Al(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Jc.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return x(h.i)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Re(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const b=h[w].indexOf("=");let B,q=null;b>=0?(B=h[w].substring(0,b),q=h[w].substring(b+1)):B=h[w],y(B,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Me(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Me?(this.l=h.l,Dn(this,h.j),this.o=h.o,this.g=h.g,On(this,h.u),this.h=h.h,Bs(this,zs(h.i)),this.m=h.m):h&&(y=String(h).match(kr))?(this.l=!1,Dn(this,y[1]||"",!0),this.o=$i(y[2]||""),this.g=$i(y[3]||"",!0),On(this,y[4]),this.h=$i(y[5]||"",!0),Bs(this,y[6]||"",!0),this.m=$i(y[7]||"")):(this.l=!1,this.i=new Xn(null,this.l))}Me.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(pi(y,nh,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(pi(y,nh,!0),"@"),h.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(pi(w,w.charAt(0)=="/"?Gi:Ho,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",pi(w,Ki)),h.join("")},Me.prototype.resolve=function(h){const y=Jt(this);let w=!!h.j;w?Dn(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var b=h.h;if(w)On(y,h.u);else if(w=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var B=y.h.lastIndexOf("/");B!=-1&&(b=y.h.slice(0,B+1)+b)}if(B=b,B==".."||B==".")b="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){b=B.lastIndexOf("/",0)==0,B=B.split("/");const q=[];for(let te=0;te<B.length;){const ve=B[te++];ve=="."?b&&te==B.length&&q.push(""):ve==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),b&&te==B.length&&q.push("")):(q.push(ve),b=!0)}b=q.join("/")}else b=B}return w?y.h=b:w=h.i.toString()!=="",w?Bs(y,zs(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Jt(h){return new Me(h)}function Dn(h,y,w){h.j=w?$i(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function On(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Bs(h,y,w){y instanceof Xn?(h.i=y,kl(h.i,h.l)):(w||(y=pi(y,st)),h.i=new Xn(y,h.l))}function oe(h,y,w){h.i.set(y,w)}function We(h){return oe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function $i(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pi(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,hn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var nh=/[#\/\?@]/g,Ho=/[#\?:]/g,Gi=/[#\?]/g,st=/[#\?@]/g,Ki=/#/g;function Xn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Tn(h){h.g||(h.g=new Map,h.h=0,h.i&&Re(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Xn.prototype,t.add=function(h,y){Tn(this),this.i=null,h=mi(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function Wo(h,y){Tn(h),y=mi(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Rr(h,y){return Tn(h),y=mi(h,y),h.g.has(y)}t.forEach=function(h,y){Tn(this),this.g.forEach(function(w,b){w.forEach(function(B){h.call(y,B,b,this)},this)},this)};function qo(h,y){Tn(h);let w=[];if(typeof y=="string")Rr(h,y)&&(w=w.concat(h.g.get(mi(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}t.set=function(h,y){return Tn(this),this.i=null,h=mi(this,h),Rr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=qo(this,h),h.length>0?String(h[0]):y):y};function $o(h,y,w){Wo(h,y),w.length>0&&(h.i=null,h.g.set(mi(h,y),x(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var w=y[b];const B=le(w);w=qo(this,w);for(let q=0;q<w.length;q++){let te=B;w[q]!==""&&(te+="="+le(w[q])),h.push(te)}}return this.i=h.join("&")};function zs(h){const y=new Xn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function mi(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function kl(h,y){y&&!h.j&&(Tn(h),h.i=null,h.g.forEach(function(w,b){const B=b.toLowerCase();b!=B&&(Wo(this,b),$o(this,B,w))},h)),h.j=y}function Go(h,y){const w=new Vs;if(a.Image){const b=new Image;b.onload=m(Vn,w,"TestLoadImage: loaded",!0,y,b),b.onerror=m(Vn,w,"TestLoadImage: error",!1,y,b),b.onabort=m(Vn,w,"TestLoadImage: abort",!1,y,b),b.ontimeout=m(Vn,w,"TestLoadImage: timeout",!1,y,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function ih(h,y){const w=new Vs,b=new AbortController,B=setTimeout(()=>{b.abort(),Vn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(q=>{clearTimeout(B),q.ok?Vn(w,"TestPingServer: ok",!0,y):Vn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Vn(w,"TestPingServer: error",!1,y)})}function Vn(h,y,w,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(w)}catch{}}function bp(){this.g=new Hc}function _e(h){this.i=h.Sb||null,this.h=h.ab||!1}g(_e,El),_e.prototype.g=function(){return new en(this.i,this.h)};function en(h,y){It.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(en,It),t=en.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Zi(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ue(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ue(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Nr(this):Zi(this),this.readyState==3&&Ue(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},t.Na=function(h){this.g&&(this.response=h,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zi(h)}t.setRequestHeader=function(h,y){this.A.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function Zi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(en.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ko(h){let y="";return se(h,function(w,b){y+=b,y+=":",y+=w,y+=`\r
`}),y}function Hs(h,y,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=Ko(w),typeof h=="string"?w!=null&&le(w):oe(h,y,w))}function Oe(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Oe,It);var Rl=/^https?$/i,Ws=["POST","PUT"];t=Oe.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,y,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(q){gt(this,q);return}if(h=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)w.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())w.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),B=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Ws,y,void 0)>=0)||b||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of w)this.g.setRequestHeader(q,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){gt(this,q)}};function gt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,gi(h),qs(h)}function gi(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ct(this,"complete"),Ct(this,"abort"),qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nl(this):this.Xa())},t.Xa=function(){Nl(this)};function Nl(h){if(h.h&&typeof o<"u"){if(h.v&&yi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ct(h,"readystatechange"),yi(h)==4){h.h=!1;try{const q=h.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var b;if(b=q===0){let te=String(h.D).match(kr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),b=!Rl.test(te?te.toLowerCase():"")}w=b}if(w)Ct(h,"complete"),Ct(h,"success");else{h.o=6;try{var B=yi(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",gi(h)}}finally{qs(h)}}}}function qs(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||Ct(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function yi(h){return h.g?h.g.readyState:0}t.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),xp(y)}};function Ll(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ml(h){const y={};h=(h.g&&yi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(O(h[b]))continue;var w=Zc(h[b]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=y[B]||[];y[B]=q,q.push(w)}Q(y,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Dl(h){this.za=0,this.i=[],this.j=new Vs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$s("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$s("baseRetryDelayMs",5e3,h),this.Za=$s("retryDelaySeedMs",1e4,h),this.Ta=$s("forwardChannelMaxRetries",2,h),this.va=$s("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Jc(h&&h.concurrentRequestLimit),this.Ba=new bp,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dl.prototype,t.ka=8,t.I=1,t.connect=function(h,y,w,b){At(0),this.W=h,this.H=y||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.J=Fl(this,null,this.W),_i(this)};function Se(h){if(dn(h),h.I==3){var y=h.V++,w=Jt(h.J);if(oe(w,"SID",h.M),oe(w,"RID",y),oe(w,"TYPE","terminate"),Yi(h,w),y=new Yn(h,h.j,y),y.M=2,y.A=We(Jt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Ul(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Bo(y)}Qn(h)}function Zo(h){h.g&&(jl(h),h.g.cancel(),h.g=null)}function dn(h){Zo(h),h.v&&(a.clearTimeout(h.v),h.v=null),Xo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function _i(h){if(!eh(h.h)&&!h.m){h.m=!0;var y=h.Ea;z||I(),K||(z(),K=!0),R.add(y,h),h.D=0}}function rh(h,y){return th(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Os(f(h.Ea,h,y),ah(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Yn(this,this.j,h);let q=this.o;if(this.U&&(q?(q=fe(q),He(q,this.U)):q=this.U),this.u!==null||this.R||(B.J=q,q=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=oh(this,B,y),w=Jt(this.J),oe(w,"RID",h),oe(w,"CVER",22),this.G&&oe(w,"X-HTTP-Session-Id",this.G),Yi(this,w),q&&(this.R?y="headers="+le(Ko(q))+"&"+y:this.u&&Hs(w,this.u,q)),qi(this.h,B),this.Ra&&oe(w,"TYPE","init"),this.S?(oe(w,"$req",y),oe(w,"SID","null"),B.U=!0,Uo(B,w,null)):Uo(B,w,y),this.I=2}}else this.I==3&&(h?sh(this,h):this.i.length==0||eh(this.h)||sh(this))};function sh(h,y){var w;y?w=y.l:w=h.V++;const b=Jt(h.J);oe(b,"SID",h.M),oe(b,"RID",w),oe(b,"AID",h.K),Yi(h,b),h.u&&h.o&&Hs(b,h.u,h.o),w=new Yn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=oh(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),qi(h.h,w),Uo(w,b,y)}function Yi(h,y){h.H&&se(h.H,function(w,b){oe(y,b,w)}),h.l&&se({},function(w,b){oe(y,b,w)})}function oh(h,y,w){w=Math.min(h.i.length,w);const b=h.l?f(h.l.Ka,h.l,h):null;e:{var B=h.i;let ve=-1;for(;;){const De=["count="+w];ve==-1?w>0?(ve=B[0].g,De.push("ofs="+ve)):ve=0:De.push("ofs="+ve);let Ve=!0;for(let ct=0;ct<w;ct++){var q=B[ct].g;const jn=B[ct].map;if(q-=ve,q<0)ve=Math.max(0,B[ct].g-100),Ve=!1;else try{q="req"+q+"_"||"";try{var te=jn instanceof Map?jn:Object.entries(jn);for(const[Jn,Fn]of te){let wi=Fn;u(Fn)&&(wi=Oo(Fn)),De.push(q+Jn+"="+encodeURIComponent(wi))}}catch(Jn){throw De.push(q+"type="+encodeURIComponent("_badmap")),Jn}}catch{b&&b(jn)}}if(Ve){te=De.join("&");break e}}te=void 0}return h=h.i.splice(0,w),y.G=h,te}function Ol(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;z||I(),K||(z(),K=!0),R.add(y,h),h.A=0}}function Vl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Os(f(h.Da,h),ah(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Yo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Os(f(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Zo(this),Yo(this))};function jl(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function Yo(h){h.g=new Yn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Jt(h.na);oe(y,"RID","rpc"),oe(y,"SID",h.M),oe(y,"AID",h.K),oe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&oe(y,"TO",h.ia),oe(y,"TYPE","xmlhttp"),Yi(h,y),h.u&&h.o&&Hs(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=We(Jt(y)),w.u=null,w.R=!0,Wi(w,h)}t.Va=function(){this.C!=null&&(this.C=null,Zo(this),Vl(this),At(19))};function Xo(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function En(h,y){var w=null;if(h.g==y){Xo(h),jl(h),h.g=null;var b=2}else if(Us(h.h,y))w=y.G,Al(h.h,y),b=1;else return;if(h.I!=0){if(y.o)if(b==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;b=jo(),Ct(b,new $c(b,w)),_i(h)}else Ol(h);else if(B=y.m,B==3||B==0&&y.X>0||!(b==1&&rh(h,y)||b==2&&Vl(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),B){case 1:vi(h,5);break;case 4:vi(h,10);break;case 3:vi(h,6);break;default:vi(h,2)}}}function ah(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function vi(h,y){if(h.j.info("Error code "+y),y==2){var w=f(h.bb,h),b=h.Ua;const B=!b;b=new Me(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dn(b,"https"),We(b),B?Go(b.toString(),w):ih(b.toString(),w)}else At(2);h.I=0,h.l&&h.l.pa(y),Qn(h),dn(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Qn(h){if(h.I=0,h.ja=[],h.l){const y=bl(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function Fl(h,y,w){var b=w instanceof Me?Jt(w):new Me(w);if(b.g!="")y&&(b.g=y+"."+b.g),On(b,b.u);else{var B=a.location;b=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const q=new Me(null);b&&Dn(q,b),y&&(q.g=y),B&&On(q,B),w&&(q.h=w),b=q}return w=h.G,y=h.wa,w&&y&&oe(b,w,y),oe(b,"VER",h.ka),Yi(h,b),b}function Ul(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Oe(new _e({ab:w})):new Oe(h.ma),y.Fa(h.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}t=Qo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jo(){}Jo.prototype.g=function(h,y){return new Bt(h,y)};function Bt(h,y){It.call(this),this.g=new Dl(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Lr(this)}g(Bt,It),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Se(this.g)},Bt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Oo(h),h=w);y.i.push(new Ap(y.Ya++,h)),y.I==3&&_i(y)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Se(this.g),delete this.g,Bt.Z.N.call(this)};function Bl(h){Ds.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}g(Bl,Ds);function lh(){Vo.call(this),this.status=1}g(lh,Vo);function Lr(h){this.g=h}g(Lr,Qo),Lr.prototype.ra=function(){Ct(this.g,"a")},Lr.prototype.qa=function(h){Ct(this.g,new Bl(h))},Lr.prototype.pa=function(h){Ct(this.g,new lh)},Lr.prototype.oa=function(){Ct(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,JC=function(){return new Jo},QC=function(){return jo()},XC=Hi,ry={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,fd=Fo,Gc.COMPLETE="complete",YC=Gc,Wc.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",It.prototype.listen=It.prototype.J,cu=Wc,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,ZC=Oe}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const k1="@firebase/firestore",R1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new cv("@firebase/firestore");function ha(){return To.logLevel}function re(t,...e){if(To.logLevel<=Ce.DEBUG){const n=e.map(_v);To.debug(`Firestore (${pl}): ${t}`,...n)}}function vr(t,...e){if(To.logLevel<=Ce.ERROR){const n=e.map(_v);To.error(`Firestore (${pl}): ${t}`,...n)}}function Eo(t,...e){if(To.logLevel<=Ce.WARN){const n=e.map(_v);To.warn(`Firestore (${pl}): ${t}`,...n)}}function _v(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,eA(t,i,n)}function eA(t,e,n){let i=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw vr(i),new Error(i)}function Fe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||eA(e,r,i)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class t6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class n6{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new us;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new us,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new us)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new tA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class i6{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new i6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new N1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=o6(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ae(t,e){return t<e?-1:t>e?1:0}function sy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return bm(r)===bm(o)?Ae(r,o):bm(r)?1:-1}return Ae(t.length,e.length)}const a6=55296,l6=57343;function bm(t){const e=t.charCodeAt(0);return e>=a6&&e<=l6}function el(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="__name__";class Si{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ge(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Si.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ae(e.length,n.length)}static compareSegments(e,n){const i=Si.isNumericId(e),r=Si.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Si.extractNumericId(e).compare(Si.extractNumericId(n)):sy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class et extends Si{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const u6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Si{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return u6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L1}static keyField(){return new Nt([L1])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(et.fromString(e))}static fromName(e){return new de(et.fromString(e).popFirst(5))}static empty(){return new de(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iA(t,e,n,i){if(e===!0&&i===!0)throw new ue(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function M1(t){if(!de.isDocumentKey(t))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vv(t);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function bc(t,e){if(!rA(t))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ue(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=-62135596800,O1=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*O1);return new qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<D1)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O1}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:wt("string",qe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new qe(0,0))}static max(){return new we(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=-1;function h6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new ys(r,de.empty(),e)}function d6(t){return new ys(t.readTime,t.key,ac)}class ys{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ys(we.min(),de.empty(),ac)}static max(){return new ys(we.max(),de.empty(),ac)}}function f6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==p6)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function g6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=-1;function np(t){return t==null}function lf(t){return t===0&&1/t==-1/0}function y6(t){return typeof t=="number"&&Number.isInteger(t)&&!lf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="";function _6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=V1(e)),e=v6(t.get(n),e);return V1(e)}function v6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case sA:n+="";break;default:n+=o}}return n}function V1(t){return t+sA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??jt.RED,this.left=r??jt.EMPTY,this.right=o??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new jt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F1(this.data.getIterator())}getIteratorFrom(e){return new F1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class F1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new St(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new aA("Invalid base64 string: "+o):o}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const w6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=w6.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="server_timestamp",uA="__type__",cA="__previous_value__",hA="__local_write_time__";function Tv(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uA])==null?void 0:i.stringValue)===lA}function ip(t){const e=t.mapValue.fields[cA];return Tv(e)?ip(e):e}function lc(t){const e=_s(t.mapValue.fields[hA].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,i,r,o,a,u,c,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=m}}const uf="(default)";class tl{constructor(e,n){this.projectId=e,this.database=n||uf}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===uf}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="__type__",E6="__max__",Gh={mapValue:{}},fA="__vector__",cf="value";function ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tv(t)?4:S6(t)?9007199254740991:x6(t)?10:11:ge(28295,{value:t})}function Fi(t,e){if(t===e)return!0;const n=ws(t);if(n!==ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=_s(r.timestampValue),u=_s(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return vs(r.bytesValue).isEqual(vs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return dt(r.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return dt(r.integerValue)===dt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=dt(r.doubleValue),u=dt(o.doubleValue);return a===u?lf(a)===lf(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return el(t.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(j1(a)!==j1(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Fi(a[c],u[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function uc(t,e){return(t.values||[]).find(n=>Fi(n,e))!==void 0}function nl(t,e){if(t===e)return 0;const n=ws(t),i=ws(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=dt(o.integerValue||o.doubleValue),c=dt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return U1(t.timestampValue,e.timestampValue);case 4:return U1(lc(t),lc(e));case 5:return sy(t.stringValue,e.stringValue);case 6:return function(o,a){const u=vs(o),c=vs(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const m=Ae(u[f],c[f]);if(m!==0)return m}return Ae(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ae(dt(o.latitude),dt(a.latitude));return u!==0?u:Ae(dt(o.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return B1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,x,k,A;const u=o.fields||{},c=a.fields||{},f=(_=u[cf])==null?void 0:_.arrayValue,m=(x=c[cf])==null?void 0:x.arrayValue,g=Ae(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((A=m==null?void 0:m.values)==null?void 0:A.length)||0);return g!==0?g:B1(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Gh.mapValue&&a===Gh.mapValue)return 0;if(o===Gh.mapValue)return 1;if(a===Gh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const _=sy(c[g],m[g]);if(_!==0)return _;const x=nl(u[c[g]],f[m[g]]);if(x!==0)return x}return Ae(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function U1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=_s(t),i=_s(e),r=Ae(n.seconds,i.seconds);return r!==0?r:Ae(n.nanos,i.nanos)}function B1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=nl(n[r],i[r]);if(o)return o}return Ae(n.length,i.length)}function il(t){return oy(t)}function oy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=_s(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=oy(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${oy(n.fields[a])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function pd(t){switch(ws(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ip(t);return e?16+pd(e):16;case 5:return 2*t.stringValue.length;case 6:return vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+pd(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return As(i.fields,(o,a)=>{r+=o.length+pd(a)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function ay(t){return!!t&&"integerValue"in t}function Ev(t){return!!t&&"arrayValue"in t}function z1(t){return!!t&&"nullValue"in t}function H1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function md(t){return!!t&&"mapValue"in t}function x6(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dA])==null?void 0:i.stringValue)===fA}function bu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=bu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(t.arrayValue.values[n]);return e}return{...t}}function S6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===E6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=bu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];md(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){As(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new gn(bu(this.value))}}function pA(t){const e=[];return As(t.fields,(n,i)=>{const r=new Nt([n]);if(md(i)){const o=pA(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Kt(e,0,we.min(),we.min(),we.min(),gn.empty(),0)}static newFoundDocument(e,n,i,r){return new Kt(e,1,n,we.min(),i,r,0)}static newNoDocument(e,n){return new Kt(e,2,n,we.min(),we.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,we.min(),we.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.position=e,this.inclusive=n}}function W1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=nl(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function q1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n="asc"){this.field=e,this.dir=n}}function P6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{}class Et extends mA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new C6(e,n,i):n==="array-contains"?new k6(e,i):n==="in"?new R6(e,i):n==="not-in"?new N6(e,i):n==="array-contains-any"?new L6(e,i):new Et(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new A6(e,i):new b6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(nl(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(nl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends mA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ui(e,n)}matches(e){return gA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gA(t){return t.op==="and"}function yA(t){return I6(t)&&gA(t)}function I6(t){for(const e of t.filters)if(e instanceof Ui)return!1;return!0}function ly(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+il(t.value);if(yA(t))return t.filters.map(e=>ly(e)).join(",");{const e=t.filters.map(n=>ly(n)).join(",");return`${t.op}(${e})`}}function _A(t,e){return t instanceof Et?function(i,r){return r instanceof Et&&i.op===r.op&&i.field.isEqual(r.field)&&Fi(i.value,r.value)}(t,e):t instanceof Ui?function(i,r){return r instanceof Ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&_A(a,r.filters[u]),!0):!1}(t,e):void ge(19439)}function vA(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${il(n.value)}`}(t):t instanceof Ui?function(n){return n.op.toString()+" {"+n.getFilters().map(vA).join(" ,")+"}"}(t):"Filter"}class C6 extends Et{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class A6 extends Et{constructor(e,n){super(e,"in",n),this.keys=wA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class b6 extends Et{constructor(e,n){super(e,"not-in",n),this.keys=wA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class k6 extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ev(n)&&uc(n.arrayValue,this.value)}}class R6 extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uc(this.value.arrayValue,n)}}class N6 extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uc(this.value.arrayValue,n)}}class L6 extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ev(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>uc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function $1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new M6(t,e,n,i,r,o,a)}function xv(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ly(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>il(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>il(i)).join(",")),e.Te=n}return e.Te}function Sv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!P6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q1(t.startAt,e.startAt)&&q1(t.endAt,e.endAt)}function uy(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D6(t,e,n,i,r,o,a,u){return new rp(t,e,n,i,r,o,a,u)}function sp(t){return new rp(t)}function G1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function O6(t){return t.collectionGroup!==null}function ku(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new St(Nt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new df(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new df(Nt.keyField(),i))}return e.Ie}function Mi(t){const e=Ee(t);return e.Ee||(e.Ee=V6(e,ku(t))),e.Ee}function V6(t,e){if(t.limitType==="F")return $1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new df(r.field,o)});const n=t.endAt?new hf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new hf(t.startAt.position,t.startAt.inclusive):null;return $1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function cy(t,e,n){return new rp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function op(t,e){return Sv(Mi(t),Mi(e))&&t.limitType===e.limitType}function TA(t){return`${xv(Mi(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>vA(r)).join(", ")}]`),np(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>il(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>il(r)).join(",")),`Target(${i})`}(Mi(t))}; limitType=${t.limitType})`}function ap(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of ku(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=W1(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,ku(i),r)||i.endAt&&!function(a,u,c){const f=W1(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,ku(i),r))}(t,e)}function j6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EA(t){return(e,n)=>{let i=!1;for(const r of ku(t)){const o=F6(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function F6(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?nl(c,f):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return oA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new rt(de.comparator);function wr(){return U6}const xA=new rt(de.comparator);function hu(...t){let e=xA;for(const n of t)e=e.insert(n.key,n);return e}function SA(t){let e=xA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ro(){return Ru()}function PA(){return Ru()}function Ru(){return new No(t=>t.toString(),(t,e)=>t.isEqual(e))}const B6=new rt(de.comparator),z6=new St(de.comparator);function be(...t){let e=z6;for(const n of t)e=e.add(n);return e}const H6=new St(Ae);function W6(){return H6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lf(e)?"-0":e}}function IA(t){return{integerValue:""+t}}function q6(t,e){return y6(e)?IA(e):Pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this._=void 0}}function $6(t,e,n){return t instanceof ff?function(r,o){const a={fields:{[uA]:{stringValue:lA},[hA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Tv(o)&&(o=ip(o)),o&&(a.fields[cA]=o),{mapValue:a}}(n,e):t instanceof cc?AA(t,e):t instanceof hc?bA(t,e):function(r,o){const a=CA(r,o),u=K1(a)+K1(r.Ae);return ay(a)&&ay(r.Ae)?IA(u):Pv(r.serializer,u)}(t,e)}function G6(t,e,n){return t instanceof cc?AA(t,e):t instanceof hc?bA(t,e):n}function CA(t,e){return t instanceof pf?function(i){return ay(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class ff extends lp{}class cc extends lp{constructor(e){super(),this.elements=e}}function AA(t,e){const n=kA(e);for(const i of t.elements)n.some(r=>Fi(r,i))||n.push(i);return{arrayValue:{values:n}}}class hc extends lp{constructor(e){super(),this.elements=e}}function bA(t,e){let n=kA(e);for(const i of t.elements)n=n.filter(r=>!Fi(r,i));return{arrayValue:{values:n}}}class pf extends lp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K1(t){return dt(t.integerValue||t.doubleValue)}function kA(t){return Ev(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function K6(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof cc&&r instanceof cc||i instanceof hc&&r instanceof hc?el(i.elements,r.elements,Fi):i instanceof pf&&r instanceof pf?Fi(i.Ae,r.Ae):i instanceof ff&&r instanceof ff}(t.transform,e.transform)}class Z6{constructor(e,n){this.version=e,this.transformResults=n}}class Di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class up{}function RA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new LA(t.key,Di.none()):new kc(t.key,t.data,Di.none());{const n=t.data,i=gn.empty();let r=new St(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new bs(t.key,i,new Cn(r.toArray()),Di.none())}}function Y6(t,e,n){t instanceof kc?function(r,o,a){const u=r.value.clone(),c=Y1(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(r,o,a){if(!gd(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Y1(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(NA(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Nu(t,e,n,i){return t instanceof kc?function(o,a,u,c){if(!gd(o.precondition,a))return u;const f=o.value.clone(),m=X1(o.fieldTransforms,c,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof bs?function(o,a,u,c){if(!gd(o.precondition,a))return u;const f=X1(o.fieldTransforms,c,a),m=a.data;return m.setAll(NA(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return gd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function X6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=CA(i.transform,r||null);o!=null&&(n===null&&(n=gn.empty()),n.set(i.field,o))}return n||null}function Z1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&el(i,r,(o,a)=>K6(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kc extends up{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bs extends up{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function NA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Y1(t,e,n){const i=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,G6(a,u,n[r]))}return i}function X1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,$6(o,a,e))}return i}class LA extends up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q6 extends up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&Y6(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=PA();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=RA(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(n,i)=>Z1(n,i))&&el(this.baseMutations,e.baseMutations,(n,i)=>Z1(n,i))}}class Iv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Fe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return B6}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Iv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Ne;function nU(t){switch(t){case X.OK:return ge(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function MA(t){if(t===void 0)return vr("GRPC error has no .code"),X.UNKNOWN;switch(t){case _t.OK:return X.OK;case _t.CANCELLED:return X.CANCELLED;case _t.UNKNOWN:return X.UNKNOWN;case _t.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case _t.INTERNAL:return X.INTERNAL;case _t.UNAVAILABLE:return X.UNAVAILABLE;case _t.UNAUTHENTICATED:return X.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case _t.NOT_FOUND:return X.NOT_FOUND;case _t.ALREADY_EXISTS:return X.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return X.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case _t.ABORTED:return X.ABORTED;case _t.OUT_OF_RANGE:return X.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return X.UNIMPLEMENTED;case _t.DATA_LOSS:return X.DATA_LOSS;default:return ge(39323,{code:t})}}(Ne=_t||(_t={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=new ls([4294967295,4294967295],0);function Q1(t){const e=iU().encode(t),n=new KC;return n.update(e),new Uint8Array(n.digest())}function J1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ls([n,i],0),new ls([r,o],0)]}class Cv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new du(`Invalid padding: ${n}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new du(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ls.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ls.fromNumber(i)));return r.compare(rU)===1&&(r=new ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Q1(e),[i,r]=J1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Cv(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Q1(e),[i,r]=J1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cp(we.min(),r,new rt(Ae),wr(),be())}}class Rc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Rc(i,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class DA{constructor(e,n){this.targetId=e,this.Ce=n}}class OA{constructor(e,n,i=Mt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class eE{constructor(){this.ve=0,this.Fe=tE(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),i=be();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge(38017,{changeType:o})}}),new Rc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=tE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sU{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Kh(),this.He=Kh(),this.Ye=new rt(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(uy(o))if(i===0){const a=new de(o.path);this.et(n,a,Kt.newNoDocument(a,we.min()))}else Fe(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),c=u?this.ct(u,e,a):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=vs(i).toUint8Array()}catch(c){if(c instanceof aA)return Eo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Cv(a,r,o)}catch(c){return Eo(c instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&uy(u.target)){const c=new de(u.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Kt.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=be();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new cp(e,n,this.Ye,this.je,i);return this.je=wr(),this.Je=Kh(),this.He=Kh(),this.Ye=new rt(Ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kh(){return new rt(de.comparator)}function tE(){return new rt(de.comparator)}const oU={asc:"ASCENDING",desc:"DESCENDING"},aU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lU={and:"AND",or:"OR"};class uU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hy(t,e){return t.useProto3Json||np(e)?e:{value:e}}function mf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cU(t,e){return mf(t,e.toTimestamp())}function Oi(t){return Fe(!!t,49232),we.fromTimestamp(function(n){const i=_s(n);return new qe(i.seconds,i.nanos)}(t))}function Av(t,e){return dy(t,e).canonicalString()}function dy(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jA(t){const e=et.fromString(t);return Fe(HA(e),10190,{key:e.toString()}),e}function fy(t,e){return Av(t.databaseId,e.path)}function km(t,e){const n=jA(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(UA(n))}function FA(t,e){return Av(t.databaseId,e)}function hU(t){const e=jA(t);return e.length===4?et.emptyPath():UA(e)}function py(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UA(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nE(t,e,n){return{name:fy(t,e),fields:n.value.mapValue.fields}}function dU(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Fe(m===void 0||typeof m=="string",58123),Mt.fromBase64String(m||"")):(Fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Mt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:MA(f.code);return new ue(m,f.message||"")}(a);n=new OA(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=km(t,i.document.name),o=Oi(i.document.updateTime),a=i.document.createTime?Oi(i.document.createTime):we.min(),u=new gn({mapValue:{fields:i.document.fields}}),c=Kt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new yd(f,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=km(t,i.document),o=i.readTime?Oi(i.readTime):we.min(),a=Kt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new yd([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=km(t,i.document),o=i.removedTargetIds||[];n=new yd([],o,r,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new tU(r,o),u=i.targetId;n=new DA(u,a)}}return n}function fU(t,e){let n;if(e instanceof kc)n={update:nE(t,e.key,e.value)};else if(e instanceof LA)n={delete:fy(t,e.key)};else if(e instanceof bs)n={update:nE(t,e.key,e.data),updateMask:EU(e.fieldMask)};else{if(!(e instanceof Q6))return ge(16599,{Vt:e.type});n={verify:fy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof ff)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof cc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof hc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pf)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ge(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:cU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)}(t,e.precondition)),n}function pU(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Oi(r.updateTime):Oi(o);return a.isEqual(we.min())&&(a=Oi(o)),new Z6(a,r.transformResults||[])}(n,e))):[]}function mU(t,e){return{documents:[FA(t,e.path)]}}function gU(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=FA(t,r);const o=function(f){if(f.length!==0)return zA(Ui.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:fa(_.field),direction:vU(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=hy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function yU(t){let e=hU(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Fe(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=BA(g);return _ instanceof Ui&&yA(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(k){return new df(pa(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,np(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,x=g.values||[];return new hf(x,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,x=g.values||[];return new hf(x,_)}(n.endAt)),D6(e,r,a,o,u,"F",c,f)}function _U(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=pa(n.unaryFilter.field);return Et.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pa(n.unaryFilter.field);return Et.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=pa(n.unaryFilter.field);return Et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pa(n.unaryFilter.field);return Et.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return Et.create(pa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ui.create(n.compositeFilter.filters.map(i=>BA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function vU(t){return oU[t]}function wU(t){return aU[t]}function TU(t){return lU[t]}function fa(t){return{fieldPath:t.canonicalString()}}function pa(t){return Nt.fromServerFormat(t.fieldPath)}function zA(t){return t instanceof Et?function(n){if(n.op==="=="){if(H1(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NAN"}};if(z1(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H1(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NAN"}};if(z1(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(n.field),op:wU(n.op),value:n.value}}}(t):t instanceof Ui?function(n){const i=n.getFilters().map(r=>zA(r));return i.length===1?i[0]:{compositeFilter:{op:TU(n.op),filters:i}}}(t):ge(54877,{filter:t})}function EU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,i,r,o=we.min(),a=we.min(),u=Mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.yt=e}}function SU(t){const e=yU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.Cn=new IU}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ys.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class IU{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new St(et.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new St(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WA=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(WA,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rl(0)}static cr(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="LruGarbageCollector",CU=1048576;function sE([t,e],[n,i]){const r=Ae(t,n);return r===0?Ae(e,i):r}class AU{constructor(e){this.Ir=e,this.buffer=new St(sE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();sE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bU{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(rE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gl(n)?re(rE,"Ignoring IndexedDB error during garbage collection: ",n):await ml(n)}await this.Vr(3e5)})}}class kU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(tp.ce);const i=new AU(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(iE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,c,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ha()<=Ce.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function RU(t,e){return new kU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.changes=new No(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Nu(i.mutation,r,Cn.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=be()){const r=ro();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=hu();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ro();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,be()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=wr();const a=Ru(),u=function(){return Ru()}();return n.forEach((c,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof bs)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Nu(m.mutation,f,m.mutation.getFieldMask(),qe.now())):a.set(f.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new LU(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Ru();let r=new rt((a,u)=>a-u),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let m=i.get(c)||Cn.empty();m=u.applyToLocalView(f,m),i.set(c,m);const g=(r.get(u.batchId)||be()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,m=c.value,g=PA();m.forEach(_=>{if(!o.has(_)){const x=RA(n.get(_),i.get(_));x!==null&&g.set(_,x),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(ro());let u=ac,c=o;return a.next(f=>Z.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,be())).next(m=>({batchId:u,changes:SA(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=hu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=hu();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,c=>{const f=function(g,_){return new rp(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Kt.newInvalidDocument(m)))});let u=hu();return a.forEach((c,f)=>{const m=o.get(c);m!==void 0&&Nu(m.mutation,f,Cn.empty(),qe.now()),ap(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:SU(r.bundledQuery),readTime:Oi(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.overlays=new rt(de.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ro();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=ro(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new rt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ro(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=ro(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Z.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new eU(n,i));let o=this.qr.get(n);o===void 0&&(o=be(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.Qr=new St(kt.$r),this.Ur=new St(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new kt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new de(new et([])),i=new kt(n,e),r=new kt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new et([])),i=new kt(n,e),r=new kt(n,e+1);let o=be();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new kt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(kt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new J6(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new kt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?wv:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),r=new kt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(Ae);return n.forEach(r=>{const o=new kt(r,0),a=new kt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new kt(new de(o),0);let u=new St(Ae);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.Yr)),!0)},a),Z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,r=>{const o=new kt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new kt(n,0),r=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.ri=e,this.docs=function(){return new rt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Kt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=wr();const a=n.path,u=new de(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||f6(d6(m),i)<=0||(r.has(m.key)||ap(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new UU(this)}getSize(e){return Z.resolve(this.size)}}class UU extends NU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.persistence=e,this.si=new No(n=>xv(n),Sv),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new bv,this.targetCount=0,this.ai=rl.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new rl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.ui={},this.overlays={},this.ci=new tp(0),this.li=!1,this.li=!0,this.hi=new VU,this.referenceDelegate=e(this),this.Pi=new BU(this),this.indexManager=new PU,this.remoteDocumentCache=function(r){return new FU(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new xU(n),this.Ii=new DU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new jU(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new zU(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class zU extends m6{constructor(e){super(),this.currentSequenceNumber=e}}class kv{constructor(e){this.persistence=e,this.Ri=new bv,this.Vi=null}static mi(e){return new kv(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const r=de.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gf{constructor(e,n){this.persistence=e,this.pi=new No(i=>_6(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=RU(this,n)}static mi(e,n){return new gf(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,we.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=be(),r=be();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Rv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Tj()?8:g6(Qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new HU;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ha()<=Ce.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(ha()<=Ce.DEBUG&&re("QueryEngine","Query:",da(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ha()<=Ce.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):Z.resolve())}ys(e,n){if(G1(n))return Z.resolve(null);let i=Mi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=cy(n,null,"F"),i=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=be(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.Ds(n,u);return this.Cs(n,f,a,c.readTime)?this.ys(e,cy(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,i,r){return G1(n)||r.isEqual(we.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Z.resolve(null):(ha()<=Ce.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),da(n)),this.vs(e,a,n,h6(r,ac)).next(u=>u))})}Ds(e,n){let i=new St(EA(e));return n.forEach((r,o)=>{ap(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ha()<=Ce.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",da(n)),this.ps.getDocumentsMatchingQuery(e,n,ys.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="LocalStore",qU=3e8;class $U{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new rt(Ae),this.xs=new No(o=>xv(o),Sv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function GU(t,e,n,i){return new $U(t,e,n,i)}async function $A(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=be();for(const f of r){a.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function KU(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,f,m){const g=f.batch,_=g.keys();let x=Z.resolve();return _.forEach(k=>{x=x.next(()=>m.getEntry(c,k)).next(A=>{const N=f.docVersions.get(k);Fe(N!==null,48541),A.version.compareTo(N)<0&&(g.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),m.addEntry(A)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function GA(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ZU(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let x=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(Mt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,i)),r=r.insert(g,x),function(A,N,P){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=qU?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,x,m)&&u.push(n.Pi.updateTargetData(o,x))});let c=wr(),f=be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(YU(o,a,e.documentUpdates).next(m=>{c=m.ks,f=m.qs})),!i.isEqual(we.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Ms=r,o))}function YU(t,e,n){let i=be(),r=be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=wr();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):re(Nv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{ks:a,qs:r}})}function XU(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=wv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function QU(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Xr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function my(t,e,n){const i=Ee(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!gl(a))throw a;re(Nv,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function oE(t,e,n){const i=Ee(t);let r=we.min(),o=be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,m){const g=Ee(c),_=g.xs.get(m);return _!==void 0?Z.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Mi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:we.min(),n?o:be())).next(u=>(JU(i,j6(e),u),{documents:u,Qs:o})))}function JU(t,e,n){let i=t.Os.get(e)||we.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class aE{constructor(){this.activeTargetIds=W6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eB{constructor(){this.Mo=new aE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="ConnectivityMonitor";class uE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(lE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function gy(){return Zh===null?Zh=function(){return 268435456+Math.round(2147483648*Math.random())}():Zh++,"0x"+Zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",nB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===uf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=gy(),u=this.zo(e,n.toUriEncodedString());re(Rm,`Sending RPC '${e}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,o);const{host:f}=new URL(u),m=Cs(f);return this.Jo(e,u,c,i,m).then(g=>(re(Rm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Eo(Rm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=nB[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class sB extends iB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=gy();return new Promise((u,c)=>{const f=new ZC;f.setWithCredentials(!0),f.listenOnce(YC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case fd.NO_ERROR:const g=f.getResponseJson();re(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case fd.TIMEOUT:re(Wt,`RPC '${e}' ${a} timed out`),c(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const _=f.getStatus();if(re(Wt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const A=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(E)>=0?E:X.UNKNOWN}(k.status);c(new ue(A,k.message))}else c(new ue(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ue(X.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Wt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);re(Wt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=gy(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JC(),u=QC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");re(Wt,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);this.I_(g);let _=!1,x=!1;const k=new rB({Yo:N=>{x?re(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(_||(re(Wt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),re(Wt,`RPC '${e}' stream ${r} sending:`,N),g.send(N))},Zo:()=>g.close()}),A=(N,P,E)=>{N.listen(P,C=>{try{E(C)}catch(F){setTimeout(()=>{throw F},0)}})};return A(g,cu.EventType.OPEN,()=>{x||(re(Wt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),A(g,cu.EventType.CLOSE,()=>{x||(x=!0,re(Wt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),A(g,cu.EventType.ERROR,N=>{x||(x=!0,Eo(Wt,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new ue(X.UNAVAILABLE,"The operation could not be completed")))}),A(g,cu.EventType.MESSAGE,N=>{var P;if(!x){const E=N.data[0];Fe(!!E,16349);const C=E,F=(C==null?void 0:C.error)||((P=C[0])==null?void 0:P.error);if(F){re(Wt,`RPC '${e}' stream ${r} received error:`,F);const z=F.status;let K=function(M){const D=_t[M];if(D!==void 0)return MA(D)}(z),R=F.message;K===void 0&&(K=X.INTERNAL,R="Unknown error status: "+z+" with message "+F.message),x=!0,k.a_(new ue(K,R)),g.close()}else re(Wt,`RPC '${e}' stream ${r} received:`,E),k.u_(E)}}),A(u,XC.STAT_EVENT,N=>{N.stat===ry.PROXY?re(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===ry.NOPROXY&&re(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){return new uU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class ZA{constructor(e,n,i,r,o,a,u,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ue(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oB extends ZA{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dU(this.serializer,e),i=function(o){if(!("targetChange"in o))return we.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?Oi(a.readTime):we.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=py(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=uy(c)?{documents:mU(o,c)}:{query:gU(o,c).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=VA(o,a.resumeToken);const f=hy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(we.min())>0){u.readTime=mf(o,a.snapshotVersion.toTimestamp());const f=hy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=_U(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=py(this.serializer),n.removeTarget=e,this.q_(n)}}class aB extends ZA{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pU(e.writeResults,e.commitTime),i=Oi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=py(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>fU(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{}class uB extends lB{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,dy(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,dy(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class cB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="RemoteStore";class hB{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Lo(this)&&(re(xo,"Restarting streams for network reachability change."),await async function(c){const f=Ee(c);f.Ea.add(4),await Nc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await dp(f)}(this))})}),this.Ra=new cB(i,r)}}async function dp(t){if(Lo(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function YA(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ov(n)?Dv(n):yl(n).O_()&&Mv(n,e))}function Lv(t,e){const n=Ee(t),i=yl(n);n.Ia.delete(e),i.O_()&&XA(n,e),n.Ia.size===0&&(i.O_()?i.L_():Lo(n)&&n.Ra.set("Unknown"))}function Mv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yl(t).Y_(e)}function XA(t,e){t.Va.Ue(e),yl(t).Z_(e)}function Dv(t){t.Va=new sU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yl(t).start(),t.Ra.ua()}function Ov(t){return Lo(t)&&!yl(t).x_()&&t.Ia.size>0}function Lo(t){return Ee(t).Ea.size===0}function QA(t){t.Va=void 0}async function dB(t){t.Ra.set("Online")}async function fB(t){t.Ia.forEach((e,n)=>{Mv(t,e)})}async function pB(t,e){QA(t),Ov(t)?(t.Ra.ha(e),Dv(t)):t.Ra.set("Unknown")}async function mB(t,e,n){if(t.Ra.set("Online"),e instanceof OA&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yf(t,i)}else if(e instanceof yd?t.Va.Ze(e):e instanceof DA?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await GA(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const m=o.Ia.get(c);if(!m)return;o.Ia.set(c,m.withResumeToken(Mt.EMPTY_BYTE_STRING,m.snapshotVersion)),XA(o,c);const g=new Xr(m.target,c,f,m.sequenceNumber);Mv(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(xo,"Failed to raise snapshot:",i),await yf(t,i)}}async function yf(t,e,n){if(!gl(e))throw e;t.Ea.add(1),await Nc(t),t.Ra.set("Offline"),n||(n=()=>GA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(xo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dp(t)})}function JA(t,e){return e().catch(n=>yf(t,n,e))}async function fp(t){const e=Ee(t),n=Ts(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wv;for(;gB(e);)try{const r=await XU(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,yB(e,r)}catch(r){await yf(e,r)}eb(e)&&tb(e)}function gB(t){return Lo(t)&&t.Ta.length<10}function yB(t,e){t.Ta.push(e);const n=Ts(t);n.O_()&&n.X_&&n.ea(e.mutations)}function eb(t){return Lo(t)&&!Ts(t).x_()&&t.Ta.length>0}function tb(t){Ts(t).start()}async function _B(t){Ts(t).ra()}async function vB(t){const e=Ts(t);for(const n of t.Ta)e.ea(n.mutations)}async function wB(t,e,n){const i=t.Ta.shift(),r=Iv.from(i,e,n);await JA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await fp(t)}async function TB(t,e){e&&Ts(t).X_&&await async function(i,r){if(function(a){return nU(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();Ts(i).B_(),await JA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await fp(i)}}(t,e),eb(t)&&tb(t)}async function hE(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),re(xo,"RemoteStore received new credentials");const i=Lo(n);n.Ea.add(3),await Nc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dp(n)}async function EB(t,e){const n=Ee(t);e?(n.Ea.delete(2),await dp(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function yl(t){return t.ma||(t.ma=function(n,i,r){const o=Ee(n);return o.sa(),new oB(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:dB.bind(null,t),t_:fB.bind(null,t),r_:pB.bind(null,t),H_:mB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ov(t)?Dv(t):t.Ra.set("Unknown")):(await t.ma.stop(),QA(t))})),t.ma}function Ts(t){return t.fa||(t.fa=function(n,i,r){const o=Ee(n);return o.sa(),new aB(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_B.bind(null,t),r_:TB.bind(null,t),ta:vB.bind(null,t),na:wB.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fp(t)):(await t.fa.stop(),t.Ta.length>0&&(re(xo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Vv(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(t,e){if(vr("AsyncQueue",`${e}: ${t}`),gl(t))return new ue(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=hu(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ua;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new rt(de.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class sl{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new sl(e,n,Ua.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class SB{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=fE(),o.forEach((a,u)=>{for(const c of u.Sa)c.onError(i)})})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function fE(){return new No(t=>TA(t),op)}async function nb(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new xB,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=jv(a,`Initialization of query '${da(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Fv(n)}async function ib(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PB(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Fv(n)}function IB(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Fv(t){t.Ca.forEach(e=>{e.next()})}var yy,pE;(pE=yy||(yy={})).Ma="default",pE.Cache="cache";class rb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new sl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.key=e}}class ob{constructor(e){this.key=e}}class CB{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=EA(e),this.tu=new Ua(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new dE,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),x=ap(this.query,g)?g:null,k=!!_&&this.mutatedKeys.has(_.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;_&&x?_.data.isEqual(x.data)?k!==A&&(i.track({type:3,doc:x}),N=!0):this.su(_,x)||(i.track({type:2,doc:x}),N=!0,(c&&this.eu(x,c)>0||f&&this.eu(x,f)<0)&&(u=!0)):!_&&x?(i.track({type:0,doc:x}),N=!0):_&&!x&&(i.track({type:1,doc:_}),N=!0,(c||f)&&(u=!0)),N&&(x?(a=a.add(x),o=A?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(x,k){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:N})}};return A(x)-A(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,f=c!==this.Za;return this.Za=c,a.length!==0||f?{snapshot:new sl(this.query,e.tu,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new ob(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new sb(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Uv="SyncEngine";class AB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class bB{constructor(e){this.key=e,this.hu=!1}}class kB{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new No(u=>TA(u),op),this.Iu=new Map,this.Eu=new Set,this.du=new rt(de.comparator),this.Au=new Map,this.Ru=new bv,this.Vu={},this.mu=new Map,this.fu=rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RB(t,e,n=!0){const i=db(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await ab(i,e,n,!0),r}async function NB(t,e){const n=db(t);await ab(n,e,!0,!1)}async function ab(t,e,n,i){const r=await QU(t.localStore,Mi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await LB(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&YA(t.remoteStore,r),u}async function LB(t,e,n,i,r){t.pu=(g,_,x)=>async function(A,N,P,E){let C=N.view.ru(P);C.Cs&&(C=await oE(A.localStore,N.query,!1).then(({documents:R})=>N.view.ru(R,C)));const F=E&&E.targetChanges.get(N.targetId),z=E&&E.targetMismatches.get(N.targetId)!=null,K=N.view.applyChanges(C,A.isPrimaryClient,F,z);return gE(A,N.targetId,K.au),K.snapshot}(t,g,_,x);const o=await oE(t.localStore,e,!0),a=new CB(e,o.Qs),u=a.ru(o.documents),c=Rc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);gE(t,n,f.au);const m=new AB(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function MB(t,e,n){const i=Ee(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!op(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await my(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Lv(i.remoteStore,r.targetId),_y(i,r.targetId)}).catch(ml)):(_y(i,r.targetId),await my(i.localStore,r.targetId,!0))}async function DB(t,e){const n=Ee(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Lv(n.remoteStore,i.targetId))}async function OB(t,e,n){const i=HB(t);try{const r=await function(a,u){const c=Ee(a),f=qe.now(),m=u.reduce((x,k)=>x.add(k.key),be());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let k=wr(),A=be();return c.Ns.getEntries(x,m).next(N=>{k=N,k.forEach((P,E)=>{E.isValidDocument()||(A=A.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,k)).next(N=>{g=N;const P=[];for(const E of u){const C=X6(E,g.get(E.key).overlayedDocument);C!=null&&P.push(new bs(E.key,C,pA(C.value.mapValue),Di.exists(!0)))}return c.mutationQueue.addMutationBatch(x,f,P,u)}).next(N=>{_=N;const P=N.applyToLocalDocumentSet(g,A);return c.documentOverlayCache.saveOverlays(x,N.batchId,P)})}).then(()=>({batchId:_.batchId,changes:SA(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Vu[a.currentUser.toKey()];f||(f=new rt(Ae)),f=f.insert(u,c),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await Lc(i,r.changes),await fp(i.remoteStore)}catch(r){const o=jv(r,"Failed to persist write");n.reject(o)}}async function lb(t,e){const n=Ee(t);try{const i=await ZU(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Fe(a.hu,14607):r.removedDocuments.size>0&&(Fe(a.hu,42227),a.hu=!1))}),await Lc(n,i,e)}catch(i){await ml(i)}}function mE(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=Ee(a);c.onlineState=u;let f=!1;c.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&Fv(c)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VB(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new rt(de.comparator);a=a.insert(o,Kt.newNoDocument(o,we.min()));const u=be().add(o),c=new cp(we.min(),new Map,new rt(Ae),a,u);await lb(i,c),i.du=i.du.remove(o),i.Au.delete(e),Bv(i)}else await my(i.localStore,e,!1).then(()=>_y(i,e,n)).catch(ml)}async function jB(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await KU(n.localStore,e);cb(n,i,null),ub(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Lc(n,r)}catch(r){await ml(r)}}async function FB(t,e,n){const i=Ee(t);try{const r=await function(a,u){const c=Ee(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Fe(g!==null,37113),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(i.localStore,e);cb(i,e,n),ub(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Lc(i,r)}catch(r){await ml(r)}}function ub(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cb(t,e,n){const i=Ee(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function _y(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||hb(t,i)})}function hb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Bv(t))}function gE(t,e,n){for(const i of n)i instanceof sb?(t.Ru.addReference(i.key,e),UB(t,i)):i instanceof ob?(re(Uv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||hb(t,i.key)):ge(19791,{wu:i})}function UB(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(Uv,"New document in limbo: "+n),t.Eu.add(i),Bv(t))}function Bv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(et.fromString(e)),i=t.fu.next();t.Au.set(i,new bB(n)),t.du=t.du.insert(n,i),YA(t.remoteStore,new Xr(Mi(sp(n.path)),i,"TargetPurposeLimboResolution",tp.ce))}}async function Lc(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,c)=>{a.push(i.pu(c,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=Rv.As(c.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(c,f){const m=Ee(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Z.forEach(f,_=>Z.forEach(_.Es,x=>m.persistence.referenceDelegate.addReference(g,_.targetId,x)).next(()=>Z.forEach(_.ds,x=>m.persistence.referenceDelegate.removeReference(g,_.targetId,x)))))}catch(g){if(!gl(g))throw g;re(Nv,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const x=m.Ms.get(_),k=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(_,A)}}}(i.localStore,o))}async function BB(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){re(Uv,"User change. New user:",e.toKey());const i=await $A(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(c=>{c.reject(new ue(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Lc(n,i.Ls)}}function zB(t,e){const n=Ee(t),i=n.Au.get(e);if(i&&i.hu)return be().add(i.key);{let r=be();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function db(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VB.bind(null,e),e.Pu.H_=PB.bind(null,e.eventManager),e.Pu.yu=IB.bind(null,e.eventManager),e}function HB(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FB.bind(null,e),e}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return GU(this.persistence,new WU,e.initialUser,this.serializer)}Cu(e){return new qA(kv.mi,this.serializer)}Du(e){return new eB}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class WB extends _f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof gf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new bU(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new qA(i=>gf.mi(i,n),this.serializer)}}class vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BB.bind(null,this.syncEngine),await EB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SB}()}createDatastore(e){const n=hp(e.databaseInfo.databaseId),i=function(o){return new sB(o)}(e.databaseInfo);return function(o,a,u,c){return new uB(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new hB(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>mE(this.syncEngine,n,0),function(){return uE.v()?new uE:new tB}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,m){const g=new kB(r,o,a,u,c,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);re(xo,"RemoteStore shutting down."),o.Ea.add(5),await Nc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class qB{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(Es,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(Es,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=jv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lm(t,e){t.asyncQueue.verifyOperationInProgress(),re(Es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $A(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $B(t);re(Es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>hE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>hE(e.remoteStore,r)),t._onlineComponents=e}async function $B(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Es,"Using user provided OfflineComponentProvider");try{await Lm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await Lm(t,new _f)}}else re(Es,"Using default OfflineComponentProvider"),await Lm(t,new WB(void 0));return t._offlineComponents}async function pb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Es,"Using user provided OnlineComponentProvider"),await yE(t,t._uninitializedComponentsProvider._online)):(re(Es,"Using default OnlineComponentProvider"),await yE(t,new vy))),t._onlineComponents}function GB(t){return pb(t).then(e=>e.syncEngine)}async function wy(t){const e=await pb(t),n=e.eventManager;return n.onListen=RB.bind(null,e.syncEngine),n.onUnlisten=MB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DB.bind(null,e.syncEngine),n}function KB(t,e,n={}){const i=new us;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const m=new fb({next:_=>{m.Nu(),a.enqueueAndForget(()=>ib(o,g));const x=_.docs.has(u);!x&&_.fromCache?f.reject(new ue(X.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&_.fromCache&&c&&c.source==="server"?f.reject(new ue(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new rb(sp(u.path),m,{includeMetadataChanges:!0,qa:!0});return nb(o,g)}(await wy(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="firestore.googleapis.com",vE=!0;class wE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gb,this.ssl=vE}else this.host=e.host,this.ssl=e.ssl??vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CU)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mb(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nA;switch(i.type){case"firstParty":return new r6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=_E.get(n);i&&(re("ComponentProvider","Removing Datastore"),_E.delete(n),i.terminate())}(this),Promise.resolve()}}function yb(t,e,n,i={}){var f;t=ui(t,zv);const r=Cs(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(lv(`https://${u}`),uv("Firestore",!0)),o.host!==gb&&o.host!==u&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:r,emulatorOptions:i};if(!_o(c,a)&&(t._setSettings(c),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=$t.MOCK_USER;else{m=PC(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new $t(_)}t._authCredentials=new t6(new tA(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mc(this.firestore,e,this._query)}}class pt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(bc(n,pt._jsonSchema))return new pt(e,i||null,new de(et.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:wt("string",pt._jsonSchemaVersion),referencePath:wt("string")};class ol extends Mc{constructor(e,n,i){super(e,n,sp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new de(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function sn(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=ep.newId()),c6("doc","path",e),t instanceof zv){const i=et.fromString(e,...n);return M1(i),new pt(t,null,new de(i))}{if(!(t instanceof pt||t instanceof ol))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return M1(i),new pt(t.firestore,t instanceof ol?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KA(this,"async_queue_retry"),this._c=()=>{const i=Nm();i&&re(TE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new us;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;re(TE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",xE(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Vv.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:xE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class So extends zv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new EE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function _b(t,e){const n=typeof t=="object"?t:dv(),i=typeof t=="string"?t:uf,r=Jf(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=EC("firestore");o&&yb(r,...o)}return r}function pp(t){if(t._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZB(t),t._firestoreClient}function ZB(t){var i,r,o;const e=t._freezeSettings(),n=function(u,c,f,m){return new T6(u,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,mb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qB(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Mt.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:wt("string",Sn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(bc(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:wt("string",ci._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hi(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:wt("string",hi._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=/^__.*__$/;class XB{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new kc(e,this.data,n,this.fieldTransforms)}}class vb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Hv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wb(this.Ac)&&YB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QB{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hp(e)}Cc(e,n,i,r=!1){return new Hv({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tb(t){const e=t._freezeSettings(),n=hp(t._databaseId);return new QB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JB(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);Wv("Data must be an object, but it was:",a,i);const u=Eb(i,a);let c,f;if(o.merge)c=new Cn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=Ty(e,g,n);if(!a.contains(_))throw new ue(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Sb(m,_)||m.push(_)}c=new Cn(m),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new XB(new gn(u),c,f)}class gp extends mp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gp}}function ez(t,e,n,i){const r=t.Cc(1,e,n);Wv("Data must be an object, but it was:",r,i);const o=[],a=gn.empty();As(i,(c,f)=>{const m=qv(e,c,n);f=Pt(f);const g=r.yc(m);if(f instanceof gp)o.push(m);else{const _=yp(f,g);_!=null&&(o.push(m),a.set(m,_))}});const u=new Cn(o);return new vb(a,u,r.fieldTransforms)}function tz(t,e,n,i,r,o){const a=t.Cc(1,e,n),u=[Ty(e,i,n)],c=[r];if(o.length%2!=0)throw new ue(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(Ty(e,o[_])),c.push(o[_+1]);const f=[],m=gn.empty();for(let _=u.length-1;_>=0;--_)if(!Sb(f,u[_])){const x=u[_];let k=c[_];k=Pt(k);const A=a.yc(x);if(k instanceof gp)f.push(x);else{const N=yp(k,A);N!=null&&(f.push(x),m.set(x,N))}}const g=new Cn(f);return new vb(m,g,a.fieldTransforms)}function yp(t,e){if(xb(t=Pt(t)))return Wv("Unsupported field value:",e,t),Eb(t,e);if(t instanceof mp)return function(i,r){if(!wb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=yp(u,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return q6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=qe.fromDate(i);return{timestampValue:mf(r.serializer,o)}}if(i instanceof qe){const o=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mf(r.serializer,o)}}if(i instanceof ci)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sn)return{bytesValue:VA(r.serializer,i._byteString)};if(i instanceof pt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Av(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof hi)return function(a,u){return{mapValue:{fields:{[dA]:{stringValue:fA},[cf]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Pv(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${vv(i)}`)}(t,e)}function Eb(t,e){const n={};return oA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(i,r)=>{const o=yp(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function xb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ci||t instanceof Sn||t instanceof pt||t instanceof mp||t instanceof hi)}function Wv(t,e,n){if(!xb(n)||!rA(n)){const i=vv(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ty(t,e,n){if((e=Pt(e))instanceof Dc)return e._internalPath;if(typeof e=="string")return qv(t,e);throw vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const nz=new RegExp("[~\\*/\\[\\]]");function qv(t,e,n){if(e.search(nz)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dc(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vf(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new ue(X.INVALID_ARGUMENT,u+t+c)}function Sb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ib("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iz extends Pb{data(){return super.data()}}function Ib(t,e){return typeof e=="string"?qv(t,e):e instanceof Dc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cb{convertValue(e,n="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return As(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[cf].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>dt(a.doubleValue));return new hi(n)}convertGeoPoint(e){return new ci(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ip(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const n=_s(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);Fe(HA(i),9688,{name:e});const r=new tl(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cs extends Pb{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ib("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=cs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",cs._jsonSchema={type:wt("string",cs._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Lu extends cs{data(e={}){return super.data(e)}}class co{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Na(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Lu(this._firestore,this._userDataWriter,i.key,i,new Na(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Lu(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Na(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Lu(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Na(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:oz(u.type),doc:c,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ep.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){t=ui(t,pt);const e=ui(t.firestore,So);return KB(pp(e),t._key).then(n=>bb(e,t,n))}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:wt("string",co._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Ab extends Cb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Po(t,e,n){t=ui(t,pt);const i=ui(t.firestore,So),r=sz(t.converter,e,n);return $v(i,[JB(Tb(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Di.none())])}function _d(t,e,n,...i){t=ui(t,pt);const r=ui(t.firestore,So),o=Tb(r);let a;return a=typeof(e=Pt(e))=="string"||e instanceof Dc?tz(o,"updateDoc",t._key,e,n,i):ez(o,"updateDoc",t._key,e),$v(r,[a.toMutation(t._key,Di.exists(!0))])}function _p(t,...e){var c,f,m;t=Pt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||SE(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SE(e[i])){const g=e[i];e[i]=(c=g.next)==null?void 0:c.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof pt)a=ui(t.firestore,So),u=sp(t._key.path),o={next:g=>{e[i]&&e[i](bb(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=ui(t,Mc);a=ui(g.firestore,So),u=g._query;const _=new Ab(a);o={next:x=>{e[i]&&e[i](new co(a,_,g,x))},error:e[i+1],complete:e[i+2]},rz(t._query)}return function(_,x,k,A){const N=new fb(A),P=new rb(x,N,k);return _.asyncQueue.enqueueAndForget(async()=>nb(await wy(_),P)),()=>{N.Nu(),_.asyncQueue.enqueueAndForget(async()=>ib(await wy(_),P))}}(pp(a),u,r,o)}function $v(t,e){return function(i,r){const o=new us;return i.asyncQueue.enqueueAndForget(async()=>OB(await GB(i),r,o)),o.promise}(pp(t),e)}function bb(t,e,n){const i=n.docs.get(e._key),r=new Ab(t);return new cs(t,r,e._key,i,new Na(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){pl=r})(Ro),vo(new gs("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new So(new n6(i.getProvider("auth-internal")),new s6(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Li(k1,R1,e),Li(k1,R1,"esm2020")})();const az=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Cb,Bytes:Sn,CollectionReference:ol,DocumentReference:pt,DocumentSnapshot:cs,FieldPath:Dc,FieldValue:mp,Firestore:So,FirestoreError:ue,GeoPoint:ci,Query:Mc,QueryDocumentSnapshot:Lu,QuerySnapshot:co,SnapshotMetadata:Na,Timestamp:qe,VectorValue:hi,_AutoId:ep,_ByteString:Mt,_DatabaseId:tl,_DocumentKey:de,_EmptyAuthCredentialsProvider:nA,_FieldPath:Nt,_cast:ui,_logWarn:Eo,_validateIsNotUsedTogether:iA,connectFirestoreEmulator:yb,doc:sn,ensureFirestoreConfigured:pp,executeWrite:$v,getDoc:Ey,getFirestore:_b,onSnapshot:_p,setDoc:Po,updateDoc:_d},Symbol.toStringTag,{value:"Module"}));function kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lz=kb,Rb=new Cc("auth","Firebase",kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new cv("@firebase/auth");function uz(t,...e){wf.logLevel<=Ce.WARN&&wf.warn(`Auth (${Ro}): ${t}`,...e)}function vd(t,...e){wf.logLevel<=Ce.ERROR&&wf.error(`Auth (${Ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,...e){throw Kv(t,...e)}function di(t,...e){return Kv(t,...e)}function Gv(t,e,n){const i={...lz(),[e]:n};return new Cc("auth","Firebase",i).create(e,{appName:t.name})}function ho(t){return Gv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cz(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Bi(t,"argument-error"),Gv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Rb.create(t,...e)}function ye(t,e,...n){if(!t)throw Kv(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vd(e),new Error(e)}function Tr(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function hz(){return PE()==="http:"||PE()==="https:"}function PE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hz()||_j()||"connection"in navigator)?navigator.onLine:!0}function fz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=mj()||vj()}get(){return dz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gz=new Oc(3e4,6e4);function Yv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _l(t,e,n,i,r={}){return Lb(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=Ac({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return yj()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(f.credentials="include"),Nb.fetch()(await Mb(t,t.config.apiHost,n,u),f)})}async function Lb(t,e,n){t._canInitEmulator=!1;const i={...pz,...e};try{const r=new _z(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Yh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Yh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Yh(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Gv(t,m,f);Bi(t,m)}}catch(r){if(r instanceof zi)throw r;Bi(t,"network-request-failed",{message:String(r)})}}async function yz(t,e,n,i,r={}){const o=await _l(t,e,n,i,r);return"mfaPendingCredential"in o&&Bi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function Mb(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Zv(t.config,r):`${t.config.apiScheme}://${r}`;return mz.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class _z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(di(this.auth,"network-request-failed")),gz.get())})}}function Yh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=di(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vz(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function Tf(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wz(t,e=!1){const n=Pt(t),i=await n.getIdToken(e),r=Xv(i);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Mu(Mm(r.auth_time)),issuedAtTime:Mu(Mm(r.iat)),expirationTime:Mu(Mm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function Xv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const r=wC(n);return r?JSON.parse(r):(vd("Failed to decode base64 JWT payload"),null)}catch(r){return vd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function IE(t){const e=Xv(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zi&&Tz(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Tz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t){var g;const e=t.auth,n=await t.getIdToken(),i=await dc(t,Tf(e,{idToken:n}));ye(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?Db(r.providerUserInfo):[],a=Sz(t.providerData,o),u=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Sy(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function xz(t){const e=Pt(t);await Ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sz(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Db(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pz(t,e){const n=await Lb(t,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await Mb(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:i};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(c.credentials="include"),Nb.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Iz(t,e){return _l(t,"POST","/v2/accounts:revokeToken",Yv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=IE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await Pz(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ba;return i&&(ye(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ye(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ye(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Ez(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sy(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await dc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wz(this,e)}reload(){return xz(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ef(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(ho(this.auth));const e=await this.getIdToken();return await dc(this,vz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:x,providerData:k,stsTokenManager:A}=n;ye(g&&A,e,"internal-error");const N=Ba.fromJSON(this.name,A);ye(typeof g=="string",e,"internal-error"),Vr(i,e.name),Vr(r,e.name),ye(typeof _=="boolean",e,"internal-error"),ye(typeof x=="boolean",e,"internal-error"),Vr(o,e.name),Vr(a,e.name),Vr(u,e.name),Vr(c,e.name),Vr(f,e.name),Vr(m,e.name);const P=new oi({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:x,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:N,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(P.providerData=k.map(E=>({...E}))),c&&(P._redirectEventId=c),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ba;r.updateFromServerResponse(n);const o=new oi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ef(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Db(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ba;u.updateFromIdToken(i);const c=new oi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Sy(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;function lr(t){Tr(t instanceof Function,"Expected a class definition");let e=CE.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ob.type="NONE";const AE=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){return`firebase:${t}:${e}:${n}`}class za{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=wd(this.userKey,r.apiKey,o),this.fullPersistenceKey=wd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Tf(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new za(lr(AE),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||lr(AE);const a=wd(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Tf(e,{idToken:m}).catch(()=>{});if(!_)break;g=await oi._fromGetAccountInfoResponse(e,_,m)}else g=oi._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new za(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new za(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ub(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zb(e))return"Blackberry";if(Hb(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Fb(e))&&!e.includes("edge/"))return"Chrome";if(Bb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Vb(t=Qt()){return/firefox\//i.test(t)}function jb(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(t=Qt()){return/crios\//i.test(t)}function Ub(t=Qt()){return/iemobile/i.test(t)}function Bb(t=Qt()){return/android/i.test(t)}function zb(t=Qt()){return/blackberry/i.test(t)}function Hb(t=Qt()){return/webos/i.test(t)}function Qv(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Cz(t=Qt()){var e;return Qv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Az(){return wj()&&document.documentMode===10}function Wb(t=Qt()){return Qv(t)||Bb(t)||Hb(t)||zb(t)||/windows phone/i.test(t)||Ub(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e=[]){let n;switch(t){case"Browser":n=bE(Qt());break;case"Worker":n=`${bE(Qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e={}){return _l(t,"GET","/v2/passwordPolicy",Yv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=6;class Nz{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Rz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new bz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tf(this,{idToken:e}),i=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(qn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ef(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(ho(this));const n=e?Pt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kz(this),n=new Nz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Iz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&uz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vp(t){return Pt(t)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aj(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(t){Jv=t}function Dz(t){return Jv.loadJS(t)}function Oz(){return Jv.gapiScript}function Vz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t,e){const n=Jf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(_o(o,e??{}))return r;Bi(r,"already-initialized")}return n.initialize({options:e})}function Fz(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Uz(t,e,n){const i=vp(t);ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=$b(e),{host:a,port:u}=Bz(e),c=u===null?"":`:${u}`,f={url:`${o}//${a}${c}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ye(_o(f,i.config.emulator)&&_o(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Cs(a)?(lv(`${o}//${a}${c}`),uv("Auth",!0)):zz()}function $b(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Bz(t){const e=$b(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:RE(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:RE(a)}}}function RE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e){return yz(t,"POST","/v1/accounts:signInWithIdp",Yv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="http://localhost";class Io extends Gb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new Io(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ha(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:Hz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends e0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Vc{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Io._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ir.credential(n,i)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Vc{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Vc{constructor(){super("twitter.com")}static credential(e,n){return Io._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await oi._fromIdTokenResponse(e,i,r),a=NE(i);return new al({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=NE(i);return new al({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function NE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends zi{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,xf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new xf(e,n,i,r)}}function Kb(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xf._fromErrorAndOperation(t,o,e,i):o})}async function Wz(t,e,n=!1){const i=await dc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return al._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(t,e,n=!1){const{auth:i}=t;if(qn(i.app))return Promise.reject(ho(i));const r="reauthenticate";try{const o=await dc(t,Kb(i,r,e,t),n);ye(o.idToken,i,"internal-error");const a=Xv(o.idToken);ye(a,i,"internal-error");const{sub:u}=a;return ye(t.uid===u,i,"user-mismatch"),al._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e,n=!1){if(qn(t.app))return Promise.reject(ho(t));const i="signIn",r=await Kb(t,i,e),o=await al._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Gz(t,e,n,i){return Pt(t).onIdTokenChanged(e,n,i)}function Kz(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function Zz(t){return Pt(t).signOut()}const Sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=1e3,Xz=10;class Yb extends Zb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Az()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Xz):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yb.type="LOCAL";const Qz=Yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Zb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xb.type="SESSION";const Qb=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new wp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await Jz(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=t0("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function t9(t){Vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function n9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function r9(){return Jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="firebaseLocalStorageDb",s9=1,Pf="firebaseLocalStorage",tk="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tp(t,e){return t.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function o9(){const t=indexedDB.deleteDatabase(ek);return new jc(t).toPromise()}function Py(){const t=indexedDB.open(ek,s9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Pf,{keyPath:tk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Pf)?e(i):(i.close(),await o9(),e(await Py()))})})}async function LE(t,e,n){const i=Tp(t,!0).put({[tk]:e,value:n});return new jc(i).toPromise()}async function a9(t,e){const n=Tp(t,!1).get(e),i=await new jc(n).toPromise();return i===void 0?null:i.value}function ME(t,e){const n=Tp(t,!0).delete(e);return new jc(n).toPromise()}const l9=800,u9=3;class nk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>u9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wp._getInstance(r9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await n9(),!this.activeServiceWorker)return;this.sender=new e9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Py();return await LE(e,Sf,"1"),await ME(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>LE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>a9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ME(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Tp(r,!1).getAll();return new jc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nk.type="LOCAL";const c9=nk;new Oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t,e){return e?lr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends Gb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h9(t){return $z(t.auth,new n0(t),t.bypassAuthState)}function d9(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),qz(n,new n0(t),t.bypassAuthState)}async function f9(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Wz(n,new n0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return d9;default:Bi(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new Oc(2e3,1e4);async function m9(t,e,n){if(qn(t.app))return Promise.reject(di(t,"operation-not-supported-in-this-environment"));const i=vp(t);cz(t,e,e0);const r=ik(i,n);return new so(i,"signInViaPopup",e,r).executeNotNull()}class so extends rk{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=t0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p9.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="pendingRedirect",Td=new Map;class y9 extends rk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const i=await _9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _9(t,e){const n=T9(e),i=w9(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function v9(t,e){Td.set(t._key(),e)}function w9(t){return lr(t._redirectPersistence)}function T9(t){return wd(g9,t.config.apiKey,t.name)}async function E9(t,e,n=!1){if(qn(t.app))return Promise.reject(ho(t));const i=vp(t),r=ik(i,e),a=await new y9(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=10*60*1e3;class S9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!sk(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(di(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x9&&this.cachedEventUids.clear(),this.cachedEventUids.has(DE(e))}saveEventToCache(e){this.cachedEventUids.add(DE(e)),this.lastProcessedEventTime=Date.now()}}function DE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function P9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e={}){return _l(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A9=/^https?/;async function b9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I9(t);for(const n of e)try{if(k9(n))return}catch{}Bi(t,"unauthorized-domain")}function k9(t){const e=xy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!A9.test(n))return!1;if(C9.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=new Oc(3e4,6e4);function OE(){const t=Vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function N9(t){return new Promise((e,n)=>{var r,o,a;function i(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),n(di(t,"network-request-failed"))},timeout:R9.get()})}if((o=(r=Vi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Vi().gapi)!=null&&a.load)i();else{const u=Vz("iframefcb");return Vi()[u]=()=>{gapi.load?i():n(di(t,"network-request-failed"))},Dz(`${Oz()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function L9(t){return Ed=Ed||N9(t),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=new Oc(5e3,15e3),D9="__/auth/iframe",O9="emulator/auth/iframe",V9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F9(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zv(e,O9):`https://${t.config.authDomain}/${D9}`,i={apiKey:e.apiKey,appName:t.name,v:Ro},r=j9.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Ac(i).slice(1)}`}async function U9(t){const e=await L9(t),n=Vi().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:F9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V9,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=di(t,"network-request-failed"),u=Vi().setTimeout(()=>{o(a)},M9.get());function c(){Vi().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z9=500,H9=600,W9="_blank",q9="http://localhost";class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $9(t,e,n,i=z9,r=H9){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c={...B9,width:i.toString(),height:r.toString(),top:o,left:a},f=Qt().toLowerCase();n&&(u=Fb(f)?W9:n),Vb(f)&&(e=e||q9,c.scrollbars="yes");const m=Object.entries(c).reduce((_,[x,k])=>`${_}${x}=${k},`,"");if(Cz(f)&&u!=="_self")return G9(e||"",u),new VE(null);const g=window.open(e||"",u,m);ye(g,t,"popup-blocked");try{g.focus()}catch{}return new VE(g)}function G9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="__/auth/handler",Z9="emulator/auth/handler",Y9=encodeURIComponent("fac");async function jE(t,e,n,i,r,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ro,eventId:r};if(e instanceof e0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Cj(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Vc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),f=c?`#${Y9}=${encodeURIComponent(c)}`:"";return`${X9(t)}?${Ac(u).slice(1)}${f}`}function X9({config:t}){return t.emulator?Zv(t,Z9):`https://${t.authDomain}/${K9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class Q9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qb,this._completeRedirectFn=E9,this._overrideRedirectResult=v9}async _openPopup(e,n,i,r){var a;Tr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await jE(e,n,i,xy(),r);return $9(e,o,t0())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await jE(e,n,i,xy(),r);return t9(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Tr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await U9(e),i=new S9(e);return n.register("authEvent",r=>(ye(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dm,{type:Dm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Dm];o!==void 0&&n(!!o),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=b9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wb()||jb()||Qv()}}const J9=Q9;var FE="@firebase/auth",UE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n8(t){vo(new gs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qb(t)},f=new Lz(i,r,o,c);return Fz(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),vo(new gs("auth-internal",e=>{const n=vp(e.getProvider("auth").getImmediate());return(i=>new e8(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(FE,UE,t8(t)),Li(FE,UE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=5*60,r8=SC("authIdTokenMaxAge")||i8;let BE=null;const s8=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>r8)return;const r=n==null?void 0:n.token;BE!==r&&(BE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function o8(t=dv()){const e=Jf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jz(t,{popupRedirectResolver:J9,persistence:[c9,Qz,Qb]}),i=SC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=s8(o.toString());Kz(n,a,()=>a(n.currentUser)),Gz(n,u=>a(u))}}const r=TC("auth");return r&&Uz(n,`http://${r}`),n}function a8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Mz({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=di("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",a8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n8("Browser");const l8={apiKey:"AIzaSyCPt2M4p5y-dDjNefu_Hq4vcyiKKN6Nmd8",authDomain:"acsm-trip-2026.firebaseapp.com",projectId:"acsm-trip-2026",storageBucket:"acsm-trip-2026.firebasestorage.app",messagingSenderId:"90847137220",appId:"1:90847137220:web:3f158196c5046666e96891",measurementId:"G-YV63KV6GPT"},i0=AC(l8),on=_b(i0),xd=o8(i0),ok=Z5(i0),ak=new ir,u8=Object.freeze(Object.defineProperty({__proto__:null,auth:xd,db:on,googleProvider:ak,storage:ok},Symbol.toStringTag,{value:"Module"}));function c8(t){try{const e=decodeURIComponent(t),n=e.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(n)return{lat:parseFloat(n[1]),lng:parseFloat(n[2])};const i=e.match(/[?&](?:q|query)=(-?\d+\.\d+),(-?\d+\.\d+)/);if(i)return{lat:parseFloat(i[1]),lng:parseFloat(i[2])};const r=e.match(/[?&]ll=(-?\d+\.\d+),(-?\d+\.\d+)/);if(r)return{lat:parseFloat(r[1]),lng:parseFloat(r[2])};const o=e.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);return o?{lat:parseFloat(o[1]),lng:parseFloat(o[2])}:null}catch(e){return console.error("Error parsing Google Maps URL:",e),null}}const h8=[{value:"flight",label:""},{value:"transport",label:""},{value:"food",label:""},{value:"sightseeing",label:""},{value:"hotel",label:""},{value:"conference",label:""},{value:"other",label:""}];function d8({isOpen:t,onClose:e,onSave:n,initialData:i,availableDays:r,currentDayId:o}){var ke,Dt,Ge;const[a,u]=W.useState({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[]}),[c,f]=W.useState(""),[m,g]=W.useState("(Local)"),[_,x]=W.useState(o),[k,A]=W.useState(!1),[N,P]=W.useState(!1),[E,C]=W.useState(""),[F,z]=W.useState(""),[K,R]=W.useState(!1),I=W.useRef(null);W.useEffect(()=>{if(t)if(x(o),i){u({...i,attachments:i.attachments||[]});const J=i.time.match(/^(\d{2}:\d{2})\s*(\(.*\))?$/);J?(f(J[1]),g(J[2]||"(Local)")):(f(i.time),g("(Local)")),A(!!i.walletItemId)}else u({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[],coordinates:void 0}),f(""),g("(Local)"),A(!1)},[i,t,o]);const M=J=>{J.preventDefault();const $=m==="(Local)"?c:`${c} ${m} `;n({...a,time:$},_,k),e()},D=async J=>{var se;const $=(se=J.target.files)==null?void 0:se[0];if($){P(!0);try{const Q=K5(ok,`trip_images / ${Date.now()}_${$.name} `);await $5(Q,$);const fe=await G5(Q),xe={id:Date.now().toString(),type:"image",url:fe,label:$.name};u(He=>({...He,attachments:[...He.attachments||[],xe]}))}catch(Q){console.error("Upload failed:",Q),alert("")}finally{P(!1),I.current&&(I.current.value="")}}},V=()=>{if(!E)return;const J={id:Date.now().toString(),type:"link",url:E,label:F||E};u($=>({...$,attachments:[...$.attachments||[],J]})),C(""),z(""),R(!1)},U=J=>{u($=>{var se;return{...$,attachments:(se=$.attachments)==null?void 0:se.filter(Q=>Q.id!==J)}})},O=[{value:"(TPE)",label:" (TPE)"},{value:"(SFO)",label:" (SFO)"},{value:"(SLC)",label:" (SLC)"},{value:"(SAN)",label:" (SAN)"},{value:"(LAX)",label:" (LAX)"},{value:"(Local)",label:""}];return T.jsx(Ec,{children:t&&T.jsxs(T.Fragment,{children:[T.jsx(ji.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),T.jsx(ji.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:T.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[T.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i?"":""}),T.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500",children:T.jsx(Ju,{size:20})})]}),T.jsxs("form",{onSubmit:M,className:"p-4 space-y-4 overflow-y-auto",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:_,onChange:J=>x(J.target.value),children:r.map(J=>T.jsxs("option",{value:J.id,children:[J.date," - ",J.cityLabel]},J.id))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("div",{className:"flex gap-2",children:T.jsx("input",{type:"time",required:!0,className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:c,onChange:J=>f(J.target.value)})})]}),T.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:m,onChange:J=>g(J.target.value),children:O.map(J=>T.jsx("option",{value:J.value,children:J.label},J.value))})]}),T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.type,onChange:J=>u({...a,type:J.target.value}),children:h8.map(J=>T.jsx("option",{value:J.value,children:J.label},J.value))})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.title,onChange:J=>u({...a,title:J.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",value:a.description,onChange:J=>u({...a,description:J.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),T.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.location||"",onChange:J=>u({...a,location:J.target.value})})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (USD)"}),T.jsx("input",{type:"number",min:"0",placeholder:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.cost||0,onChange:J=>u({...a,cost:parseFloat(J.target.value)})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"/ ()"}),T.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.tips||"",onChange:J=>u({...a,tips:J.target.value})})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Coordinates)"}),T.jsx("div",{className:"flex gap-2 mb-2",children:T.jsx("input",{type:"text",placeholder:" Google Maps ...",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm",onChange:J=>{const $=c8(J.target.value);$&&(u({...a,coordinates:$}),J.target.value="")}})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lat)"}),T.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((ke=a.coordinates)==null?void 0:ke.lat)||"",onChange:J=>{var se;const $=parseFloat(J.target.value);u({...a,coordinates:{lng:((se=a.coordinates)==null?void 0:se.lng)||0,lat:isNaN($)?0:$}})},placeholder:"e.g. 37.7749"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lng)"}),T.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((Dt=a.coordinates)==null?void 0:Dt.lng)||"",onChange:J=>{var se;const $=parseFloat(J.target.value);u({...a,coordinates:{lat:((se=a.coordinates)==null?void 0:se.lat)||0,lng:isNaN($)?0:$}})},placeholder:"e.g. -122.4194"})]})]}),(a.cost||0)>0&&T.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1 p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[T.jsx("input",{type:"checkbox",id:"syncWallet",className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500",checked:k,onChange:J=>A(J.target.checked)}),T.jsx("label",{htmlFor:"syncWallet",className:"text-sm text-indigo-700 font-medium cursor-pointer select-none flex-1",children:" (Budget)"}),a.walletItemId&&T.jsx("span",{className:"text-xs text-indigo-400 bg-white px-2 py-0.5 rounded border border-indigo-100",children:""})]})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[T.jsx(UN,{size:16})," (/)"]}),T.jsx("div",{className:"space-y-2 mb-3",children:(Ge=a.attachments)==null?void 0:Ge.map(J=>T.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border border-gray-200",children:[T.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[J.type==="image"?T.jsx(Fw,{size:16,className:"text-indigo-500"}):T.jsx(Rg,{size:16,className:"text-blue-500"}),T.jsx("a",{href:J.url,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-700 truncate hover:underline",children:J.label||"Attachment"})]}),T.jsx("button",{type:"button",onClick:()=>U(J.id),className:"text-gray-400 hover:text-red-500",children:T.jsx(wc,{size:16})})]},J.id))}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{type:"button",onClick:()=>{var J;return(J=I.current)==null?void 0:J.click()},disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:N?"...":T.jsxs(T.Fragment,{children:[T.jsx(Fw,{size:16})," "]})}),T.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:D}),T.jsxs("button",{type:"button",onClick:()=>R(!K),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:[T.jsx(Rg,{size:16})," "]})]}),K&&T.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2",children:[T.jsx("input",{type:"text",placeholder:" (https://...)",className:"w-full px-3 py-1.5 border rounded text-sm",value:E,onChange:J=>C(J.target.value)}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:" ()",className:"flex-1 px-3 py-1.5 border rounded text-sm",value:F,onChange:J=>z(J.target.value)}),T.jsx("button",{type:"button",onClick:V,className:"px-3 py-1.5 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700",children:""})]})]})]}),T.jsx("div",{className:"pt-4 border-t",children:T.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[T.jsx(xP,{size:20}),""]})})]})]})})]})})}const f8={flight:Eu,hotel:RN,ticket:KN,insurance:T_,food:PP,transport:SP,shopping:$N,entertainment:jN,other:VN},p8={flight:"",hotel:"",ticket:"",insurance:"",food:"",transport:"",shopping:"",entertainment:"",other:""};function m8({isOpen:t,onClose:e,items:n,onAdd:i,onUpdate:r,onRemove:o,totalCost:a}){const[u,c]=W.useState(!1),[f,m]=W.useState(null),[g,_]=W.useState({category:"other",title:"",reference:"",details:"",cost:0}),x=N=>{N.preventDefault(),f?(r(f,g),m(null)):(i(g),c(!1)),_({category:"other",title:"",reference:"",details:"",cost:0})},k=N=>{_({category:N.category,title:N.title,reference:N.reference,details:N.details,cost:N.cost}),m(N.id),c(!1)},A=()=>{m(null),_({category:"other",title:"",reference:"",details:"",cost:0})};return T.jsx(Ec,{children:t&&T.jsxs(T.Fragment,{children:[T.jsx(ji.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),T.jsx(ji.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:T.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl pointer-events-auto flex flex-col max-h-[90vh]",children:[T.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-t-xl",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("div",{children:[T.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[T.jsx(kg,{className:"text-amber-400"})," & "]}),T.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),T.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:T.jsx(Ju,{size:24})})]}),T.jsxs("div",{className:"bg-white/10 rounded-lg p-4 backdrop-blur-sm border border-white/10",children:[T.jsx("div",{className:"text-xs text-slate-300 uppercase tracking-wider font-medium mb-1",children:" ( + )"}),T.jsxs("div",{className:"text-3xl font-bold text-white font-mono",children:["$",a.toLocaleString()," ",T.jsx("span",{className:"text-lg text-slate-400",children:"USD"})]})]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[u||f?T.jsxs("form",{onSubmit:x,className:"bg-white p-4 rounded-xl shadow-sm border space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsx("h3",{className:"font-bold text-gray-800",children:f?"":""}),T.jsx("button",{type:"button",onClick:()=>f?A():c(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),T.jsx("select",{className:"w-full p-2 border rounded-lg",value:g.category,onChange:N=>_({...g,category:N.target.value}),children:Object.entries(p8).map(([N,P])=>T.jsx("option",{value:N,children:P},N))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (USD)"}),T.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg",value:g.cost,onChange:N=>_({...g,cost:Number(N.target.value)})})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),T.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded-lg",value:g.title,onChange:N=>_({...g,title:N.target.value})})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),T.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.reference,onChange:N=>_({...g,reference:N.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (/)"}),T.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.details,onChange:N=>_({...g,details:N.target.value})})]})]}),T.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 font-medium",children:f?"":""})]}):T.jsxs("button",{onClick:()=>c(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 mb-6",children:[T.jsx(w_,{size:20}),""]}),T.jsxs("div",{className:"space-y-3",children:[n.map(N=>{const P=f8[N.category];return T.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex items-start gap-4 group",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 flex-shrink-0",children:T.jsx(P,{size:20})}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsx("h4",{className:"font-bold text-gray-800 truncate",children:N.title}),N.cost?T.jsxs("span",{className:"font-mono font-medium text-gray-900",children:["$",N.cost]}):null]}),T.jsx("div",{className:"text-sm text-indigo-600 font-mono mt-0.5",children:N.reference}),T.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.details})]}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx("button",{onClick:()=>k(N),className:"p-2 text-gray-300 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:T.jsx(BN,{size:18})}),T.jsx("button",{onClick:()=>o(N.id),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:T.jsx(wc,{size:18})})]})]},N.id)}),n.length===0&&!u&&T.jsxs("div",{className:"text-center py-12 text-gray-400",children:[T.jsx(kg,{size:48,className:"mx-auto mb-3 opacity-20"}),T.jsx("p",{children:""})]})]})]})]})})]})})}var zE;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(zE||(zE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HE;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(HE||(HE={}));var WE;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(WE||(WE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=["user","model","function","system"];var $E;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($E||($E={}));var GE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(GE||(GE={}));var KE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(KE||(KE={}));var ZE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(ZE||(ZE={}));var Du;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Du||(Du={}));var YE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(YE||(YE={}));var XE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(XE||(XE={}));var QE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(QE||(QE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ca extends Zt{constructor(e,n){super(e),this.response=n}}class lk extends Zt{constructor(e,n,i,r){super(e),this.status=n,this.statusText=i,this.errorDetails=r}}class hs extends Zt{}class uk extends Zt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8="https://generativelanguage.googleapis.com",y8="v1beta",_8="0.24.1",v8="genai-js";var Co;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Co||(Co={}));class w8{constructor(e,n,i,r,o){this.model=e,this.task=n,this.apiKey=i,this.stream=r,this.requestOptions=o}toString(){var e,n;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||y8;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||g8}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function T8(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${v8}/${_8}`),e.join(" ")}async function E8(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",T8(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new hs(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,o]of i.entries()){if(r==="x-goog-api-key")throw new hs(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new hs(`Header name ${r} can only be set using the apiClient field`);n.append(r,o)}}return n}async function x8(t,e,n,i,r,o){const a=new w8(t,e,n,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},C8(o)),{method:"POST",headers:await E8(a),body:r})}}async function Fc(t,e,n,i,r,o={},a=fetch){const{url:u,fetchOptions:c}=await x8(t,e,n,i,r,o);return S8(u,c,a)}async function S8(t,e,n=fetch){let i;try{i=await n(t,e)}catch(r){P8(r,t)}return i.ok||await I8(i,t),i}function P8(t,e){let n=t;throw n.name==="AbortError"?(n=new uk(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof lk||t instanceof hs||(n=new Zt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function I8(t,e){let n="",i;try{const r=await t.json();n=r.error.message,r.error.details&&(n+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new lk(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,i)}function C8(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ca(`${Br(t)}`,t);return A8(t)}else if(t.promptFeedback)throw new ca(`Text not available. ${Br(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ca(`${Br(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),JE(t)[0]}else if(t.promptFeedback)throw new ca(`Function call not available. ${Br(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ca(`${Br(t)}`,t);return JE(t)}else if(t.promptFeedback)throw new ca(`Function call not available. ${Br(t)}`,t)},t}function A8(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function JE(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const b8=[Du.RECITATION,Du.SAFETY,Du.LANGUAGE];function Sd(t){return!!t.finishReason&&b8.includes(t.finishReason)}function Br(t){var e,n,i;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){const o=t.candidates[0];Sd(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}function fc(t){return this instanceof fc?(this.v=t,this):new fc(t)}function k8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(_){i[_]&&(r[_]=function(x){return new Promise(function(k,A){o.push([_,x,k,A])>1||u(_,x)})})}function u(_,x){try{c(i[_](x))}catch(k){g(o[0][3],k)}}function c(_){_.value instanceof fc?Promise.resolve(_.value.v).then(f,m):g(o[0][2],_)}function f(_){u("next",_)}function m(_){u("throw",_)}function g(_,x){_(x),o.shift(),o.length&&u(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function R8(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=M8(e),[i,r]=n.tee();return{stream:L8(i),response:N8(r)}}async function N8(t){const e=[],n=t.getReader();for(;;){const{done:i,value:r}=await n.read();if(i)return r0(D8(e));e.push(r)}}function L8(t){return k8(this,arguments,function*(){const n=t.getReader();for(;;){const{value:i,done:r}=yield fc(n.read());if(r)break;yield yield fc(r0(i))}})}function M8(t){const e=t.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:a,done:u})=>{if(u){if(r.trim()){i.error(new Zt("Failed to parse stream"));return}i.close();return}r+=a;let c=r.match(ex),f;for(;c;){try{f=JSON.parse(c[1])}catch{i.error(new Zt(`Error parsing JSON response: "${c[1]}"`));return}i.enqueue(f),r=r.substring(c[0].length),c=r.match(ex)}return o()}).catch(a=>{let u=a;throw u.stack=a.stack,u.name==="AbortError"?u=new uk("Request aborted when reading from the stream"):u=new Zt("Error reading from the stream"),u})}}})}function D8(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of t){if(i.candidates){let r=0;for(const o of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[r]||(n.candidates[r]={index:r}),n.candidates[r].citationMetadata=o.citationMetadata,n.candidates[r].groundingMetadata=o.groundingMetadata,n.candidates[r].finishReason=o.finishReason,n.candidates[r].finishMessage=o.finishMessage,n.candidates[r].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[r].content||(n.candidates[r].content={role:o.content.role||"user",parts:[]});const a={};for(const u of o.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[r].content.parts.push(a)}r++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e,n,i){const r=await Fc(e,Co.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return R8(r)}async function hk(t,e,n,i){const o=await(await Fc(e,Co.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:r0(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function pc(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return O8(e)}function O8(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,r=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),r=!0):(e.parts.push(o),i=!0);if(i&&r)throw new Zt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Zt("No content is provided for sending chat message.");return i?e:n}function V8(t,e){var n;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const r=t.generateContentRequest!=null;if(t.contents){if(r)throw new hs("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=t.contents}else if(r)i=Object.assign(Object.assign({},i),t.generateContentRequest);else{const o=pc(t);i.contents=[o]}return{generateContentRequest:i}}function tx(t){let e;return t.contents?e=t:e={contents:[pc(t)]},t.systemInstruction&&(e.systemInstruction=dk(t.systemInstruction)),e}function j8(t){return typeof t=="string"||Array.isArray(t)?{content:pc(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],F8={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function U8(t){let e=!1;for(const n of t){const{role:i,parts:r}=n;if(!e&&i!=="user")throw new Zt(`First content should be with role 'user', got ${i}`);if(!qE.includes(i))throw new Zt(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(qE)}`);if(!Array.isArray(r))throw new Zt("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Zt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const c of nx)c in u&&(o[c]+=1);const a=F8[i];for(const u of nx)if(!a.includes(u)&&o[u]>0)throw new Zt(`Content with role '${i}' can't contain '${u}' part`);e=!0}}function ix(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="SILENT_ERROR";class B8{constructor(e,n,i,r={}){this.model=n,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(U8(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=pc(e),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n);let _;return this._sendPromise=this._sendPromise.then(()=>hk(this._apiKey,this.model,m,g)).then(x=>{var k;if(ix(x.response)){this._history.push(f);const A=Object.assign({parts:[],role:"model"},(k=x.response.candidates)===null||k===void 0?void 0:k[0].content);this._history.push(A)}else{const A=Br(x.response);A&&console.warn(`sendMessage() was unsuccessful. ${A}. Inspect response object for details.`)}_=x}).catch(x=>{throw this._sendPromise=Promise.resolve(),x}),await this._sendPromise,_}async sendMessageStream(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=pc(e),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n),_=ck(this._apiKey,this.model,m,g);return this._sendPromise=this._sendPromise.then(()=>_).catch(x=>{throw new Error(rx)}).then(x=>x.response).then(x=>{if(ix(x)){this._history.push(f);const k=Object.assign({},x.candidates[0].content);k.role||(k.role="model"),this._history.push(k)}else{const k=Br(x);k&&console.warn(`sendMessageStream() was unsuccessful. ${k}. Inspect response object for details.`)}}).catch(x=>{x.message!==rx&&console.error(x)}),_}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z8(t,e,n,i){return(await Fc(e,Co.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e,n,i){return(await Fc(e,Co.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}async function W8(t,e,n,i){const r=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Fc(e,Co.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i={}){this.apiKey=e,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=dk(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var i;const r=tx(e),o=Object.assign(Object.assign({},this._requestOptions),n);return hk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}async generateContentStream(e,n={}){var i;const r=tx(e),o=Object.assign(Object.assign({},this._requestOptions),n);return ck(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}startChat(e){var n;return new B8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const i=V8(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),n);return z8(this.apiKey,this.model,i,r)}async embedContent(e,n={}){const i=j8(e),r=Object.assign(Object.assign({},this._requestOptions),n);return H8(this.apiKey,this.model,i,r)}async batchEmbedContents(e,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return W8(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Zt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new sx(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,i){if(!e.name)throw new hs("Cached content must contain a `name` field.");if(!e.model)throw new hs("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const a of r)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){const u=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===c)continue}throw new hs(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new sx(this.apiKey,o,i)}}function $8(){const[t,e]=W.useState([]),[n,i]=W.useState(!1),[r,o]=W.useState(null);return{messages:t,loading:n,error:r,sendMessage:async(c,f,m)=>{if(!c){o(" API Key");return}i(!0),o(null);try{const g={role:"user",text:f};e(C=>[...C,g]);const x=new q8(c).getGenerativeModel({model:"gemini-2.0-flash"}),k=`
You are a helpful travel assistant for the 'ACSM Trip 2026'.
Here is the current itinerary data in JSON format:
${JSON.stringify(m,null,2)}

Please answer the user's questions based on this itinerary.
- Be concise and friendly.
- If the user asks about time, location, or details, refer to the JSON data.
- If the answer is not in the data, offer general travel advice for San Francisco, Salt Lake City, or San Diego.
- Reply in Traditional Chinese ().
            `,E=(await x.startChat({history:[{role:"user",parts:[{text:k}]},{role:"model",parts:[{text:""}]},...t.map(C=>({role:C.role,parts:[{text:C.text}]}))]}).sendMessage(f)).response.text();e(C=>[...C,{role:"model",text:E}])}catch(g){console.error("Gemini API Error:",g),o(g.message||" API Key ")}finally{i(!1)}},clearHistory:()=>{e([]),o(null)}}}function G8({itinerary:t}){const[e,n]=W.useState(!1),[i,r]=W.useState(""),[o,a]=W.useState(""),[u,c]=W.useState(!1),{messages:f,loading:m,error:g,sendMessage:_,clearHistory:x}=$8(),k=W.useRef(null);W.useEffect(()=>{const E=localStorage.getItem("gemini_api_key");E?a(E):c(!0)},[]);const A=E=>{a(E),localStorage.setItem("gemini_api_key",E),c(!1)};W.useEffect(()=>{var E;(E=k.current)==null||E.scrollIntoView({behavior:"smooth"})},[f]);const N=()=>{i.trim()&&(_(o,i,t),r(""))},P=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),N())};return T.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[T.jsx(Ec,{children:e&&T.jsxs(ji.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-80 sm:w-96 h-[500px] mb-4 flex flex-col overflow-hidden border border-gray-200",children:[T.jsxs("div",{className:"bg-indigo-600 p-4 flex justify-between items-center text-white",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Bw,{size:18}),T.jsx("h3",{className:"font-bold",children:"AI "})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>c(!u),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:" API Key",children:T.jsx(WN,{size:16})}),T.jsx("button",{onClick:x,className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:"",children:T.jsx(wc,{size:16})}),T.jsx("button",{onClick:()=>n(!1),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",children:T.jsx(Ju,{size:18})})]})]}),u?T.jsxs("div",{className:"flex-1 p-6 bg-gray-50 flex flex-col justify-center",children:[T.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:" Gemini API Key"}),T.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[" Google Gemini API Key  AI ",T.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 hover:underline ml-1",children:" Key"})]}),T.jsx("input",{type:"password",placeholder:"Paste API Key here...",className:"w-full px-3 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-indigo-500 outline-none",value:o,onChange:E=>a(E.target.value)}),T.jsx("button",{onClick:()=>A(o),className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700",children:""})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-50 space-y-4",children:[f.length===0&&T.jsxs("div",{className:"text-center text-gray-400 mt-10 text-sm",children:[T.jsx(Bw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),T.jsx("p",{children:" AI "}),T.jsx("p",{children:""})]}),f.map((E,C)=>T.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:T.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm whitespace-pre-wrap ${E.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-none"}`,children:E.text})},C)),m&&T.jsx("div",{className:"flex justify-start",children:T.jsx("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none shadow-sm border border-gray-100",children:T.jsxs("div",{className:"flex gap-1",children:[T.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),T.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),T.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),g&&T.jsx("div",{className:"text-center text-xs text-red-500 bg-red-50 p-2 rounded-lg",children:g}),T.jsx("div",{ref:k})]}),T.jsxs("div",{className:"p-3 bg-white border-t border-gray-100 flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",value:i,onChange:E=>r(E.target.value),onKeyDown:P,disabled:m}),T.jsx("button",{onClick:N,disabled:m||!i.trim(),className:"p-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T.jsx(HN,{size:18})})]})]})]})}),T.jsx(ji.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!e),className:"bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors flex items-center justify-center",children:e?T.jsx(Ju,{size:24}):T.jsx(DN,{size:24})})]})}function K8({info:t}){const n=(i=>{switch(i){case"fog":return CN;case"sun":return Lg;case"cloud-sun":return AN;default:return Lg}})(t.icon);return T.jsxs(ji.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"sticker p-4 mb-6 flex flex-col sm:flex-row items-start sm:items-center gap-4 relative overflow-hidden",children:[T.jsxs("div",{className:"flex items-center gap-3 min-w-[140px] relative z-10",children:[T.jsx("div",{className:"p-2.5 bg-gray-100 text-gray-800 rounded-full border border-gray-200",children:T.jsx(n,{size:24})}),T.jsxs("div",{children:[T.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-0.5 font-sans",children:"Weather"}),T.jsx("div",{className:"font-bold text-gray-800 text-lg font-heading",children:t.tempRange})]})]}),T.jsx("div",{className:"w-px h-10 bg-gray-200 hidden sm:block relative z-10 border-r border-dashed border-gray-300"}),T.jsxs("div",{className:"flex-1 space-y-1 relative z-10",children:[T.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium font-hand text-lg",children:[T.jsx(GN,{size:16,className:"text-gray-400"}),T.jsx("span",{children:t.description})]}),T.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-500 leading-relaxed font-sans",children:[T.jsx(qN,{size:16,className:"text-gray-400 mt-0.5 flex-shrink-0"}),T.jsx("span",{children:t.clothing})]})]})]})}function Z8({isOpen:t,onClose:e,currentAdmins:n,currentUserEmail:i}){const[r,o]=W.useState(""),[a,u]=W.useState(!1),[c,f]=W.useState("2026-05-20"),[m,g]=W.useState("2026-06-04"),[_,x]=W.useState(!1);W.useEffect(()=>{t&&Ey(sn(on,"trips","settings")).then(P=>{if(P.exists()){const E=P.data();E.startDate&&f(E.startDate),E.endDate&&g(E.endDate)}})},[t]);const k=async P=>{if(P.preventDefault(),!(!r||!r.includes("@"))){if(n.includes(r)){alert(" Email ");return}u(!0);try{const E=[...n,r];await _d(sn(on,"trips","settings"),{adminEmails:E}),o("")}catch(E){console.error("Failed to add admin:",E),alert("")}finally{u(!1)}}},A=async P=>{if(P===i){alert("");return}if(confirm(` ${P} `))try{const E=n.filter(C=>C!==P);await _d(sn(on,"trips","settings"),{adminEmails:E})}catch(E){console.error("Failed to remove admin:",E),alert("")}},N=async()=>{if(confirm(`
${c}
${m}
`)){x(!0);try{await Po(sn(on,"trips","settings"),{startDate:c,endDate:m},{merge:!0});const P=await Ey(sn(on,"trips","main"));if(P.exists()){const E=P.data().days,C=hM(c),F=E.map((z,K)=>{const R=ZN(C,K),I=aM(R,"yyyy/MM/dd"),M=["","","","","","",""][R.getDay()];return{...z,date:`${I} (${M})`}});await _d(sn(on,"trips","main"),{days:F}),alert("")}}catch(P){console.error("Failed to update date:",P),alert("")}finally{x(!1)}}};return t?T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:T.jsxs(ji.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden max-h-[90vh] overflow-y-auto",children:[T.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-slate-800 to-slate-900 text-white",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(T_,{className:"text-emerald-400",size:20}),T.jsx("h2",{className:"text-lg font-bold",children:""})]}),T.jsx("button",{onClick:e,className:"text-white/70 hover:text-white transition-colors",children:T.jsx(Ju,{size:20})})]}),T.jsxs("div",{className:"p-6 space-y-8",children:[T.jsxs("section",{children:[T.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[T.jsx(EN,{size:16,className:"text-indigo-600"}),""]}),T.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:" (Day 1)"}),T.jsx("input",{type:"date",value:c,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:""}),T.jsx("input",{type:"date",value:m,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),T.jsxs("button",{onClick:N,disabled:_,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[T.jsx(xP,{size:16}),""]}),T.jsx("p",{className:"text-xs text-indigo-600 mt-2 opacity-80 text-center",children:"* "})]})]}),T.jsx("hr",{className:"border-gray-100"}),T.jsxs("section",{children:[T.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[T.jsx(zw,{size:16,className:"text-indigo-600"}),""]}),T.jsx("form",{onSubmit:k,className:"mb-4",children:T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"email",value:r,onChange:P=>o(P.target.value),placeholder:" Google Email",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",required:!0}),T.jsxs("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center gap-1",children:[T.jsx(w_,{size:18}),""]})]})}),T.jsx("div",{className:"space-y-2",children:T.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 pr-1",children:T.jsx(Ec,{mode:"popLayout",children:n.map(P=>T.jsxs(ji.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-500 shadow-sm",children:T.jsx(zw,{size:14})}),T.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[180px]",children:P}),P===i&&T.jsx("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold",children:"YOU"})]}),P!==i&&T.jsx("button",{onClick:()=>A(P),className:"text-gray-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"",children:T.jsx(wc,{size:16})})]},P))})})})]})]})]})}):null}function Y8(){const[t,e]=W.useState(Tm),[n,i]=W.useState(!0),r="main";W.useEffect(()=>{const A=_p(sn(on,"trips",r),N=>{N.exists()?e(N.data().days):Po(sn(on,"trips",r),{days:Tm}),i(!1)},N=>{console.error("Firestore sync error:",N),i(!1)});return()=>A()},[]);const o=async A=>{try{await Po(sn(on,"trips",r),{days:A})}catch(N){console.error("Error saving to Firestore:",N),alert("")}},a=A=>[...A].sort((N,P)=>{const E=N.time.split(" ")[0],C=P.time.split(" ")[0];return E.localeCompare(C)});return{itinerary:t,loading:n,addActivity:(A,N)=>{const P=t.map(E=>{if(E.id===A){const C=[...E.activities,N];return{...E,activities:a(C)}}return E});o(P)},removeActivity:(A,N)=>{const P=t.map(E=>{if(E.id===A){const C=[...E.activities];return C.splice(N,1),{...E,activities:C}}return E});o(P)},updateActivity:(A,N,P)=>{const E=t.map(C=>{if(C.id===A){const F=[...C.activities];return F[N]=P,{...C,activities:a(F)}}return C});o(E)},reorderActivity:(A,N,P)=>{console.warn("reorderActivity is deprecated. Activities are now automatically sorted by time.")},moveActivity:(A,N,P,E)=>{const C=t.map(F=>{if(F.id===A){const z=[...F.activities];return typeof E=="number"&&z.splice(E,1),{...F,activities:z}}if(F.id===N){const z=[...F.activities,P];return{...F,activities:a(z)}}return F});o(C)},resetItinerary:()=>{confirm("")&&o(Tm)},exportItinerary:()=>{const A=JSON.stringify(t,null,2),N=new Blob([A],{type:"application/json"}),P=URL.createObjectURL(N),E=document.createElement("a");E.href=P,E.download=`acsm-trip-itinerary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(P)},importItinerary:A=>{const N=new FileReader;N.onload=P=>{var E;try{const C=(E=P.target)==null?void 0:E.result,F=JSON.parse(C);Array.isArray(F)?(o(F),alert("")):alert("")}catch(C){console.error("Import failed:",C),alert("")}},N.readAsText(A)}}}const ox=[{id:"1",category:"flight",title:" JX012 (TPE-SFO)",reference:"PNR: ABC12345",details:"2026/05/20 23:40 , ",cost:1200},{id:"2",category:"hotel",title:"San Francisco Marriott Marquis",reference:"Conf: #8829102",details:"5/20 - 5/25 (5 Nights)",cost:1500}];function X8(){const[t,e]=W.useState(ox),[n,i]=W.useState(!0);W.useEffect(()=>{const f=_p(sn(on,"trips","wallet"),m=>{m.exists()?e(m.data().items):Po(sn(on,"trips","wallet"),{items:ox}),i(!1)},m=>{console.error("Firestore sync error:",m),i(!1)});return()=>f()},[]);const r=async f=>{try{await Po(sn(on,"trips","wallet"),{items:f})}catch(m){console.error("Error saving wallet to Firestore:",m),alert("")}};return{walletItems:t,loading:n,addWalletItem:f=>{const m={...f,id:crypto.randomUUID()},g=[...t,m];return r(g),m.id},removeWalletItem:f=>{const m=t.filter(g=>g.id!==f);r(m)},updateWalletItem:(f,m)=>{const g=t.map(_=>_.id===f?{..._,...m}:_);r(g)},getTotalCost:()=>t.reduce((f,m)=>f+(m.cost||0),0)}}const Om=["weber900127@gmail.com"];function Q8(){const[t,e]=W.useState(null),[n,i]=W.useState(!0),[r,o]=W.useState(!1),[a,u]=W.useState([]);return W.useEffect(()=>xd.onAuthStateChanged(g=>{e(g),g||(o(!1),i(!1))}),[]),W.useEffect(()=>{const m=_p(sn(on,"trips","settings"),g=>{if(g.exists()){const _=g.data().adminEmails;u(_)}else Po(sn(on,"trips","settings"),{adminEmails:Om}),u(Om)},g=>{console.error("Failed to sync admin list:",g),u(Om)});return()=>m()},[]),W.useEffect(()=>{t&&a.length>0?(o(a.includes(t.email||"")),i(!1)):t&&o(!1)},[t,a]),{user:t,isUserAdmin:r,adminList:a,loading:n,login:async()=>{try{await m9(xd,ak)}catch(m){console.error("Login failed:",m),alert("")}},logout:async()=>{try{await Zz(xd)}catch(m){console.error("Logout failed:",m)}}}}const ax={SF:{tempRange:"11C - 18C",description:"",clothing:"",icon:"fog"},SLC:{tempRange:"10C - 24C",description:"",clothing:"",icon:"sun"},SAN:{tempRange:"16C - 22C",description:"",clothing:"",icon:"cloud-sun"},LA:{tempRange:"16C - 24C",description:"",clothing:"",icon:"sun"}};function J8(){var He;const[t,e]=W.useState("ALL"),[n,i]=W.useState({day1:!0}),[r,o]=W.useState(!1),[a,u]=W.useState(!1),[c,f]=W.useState(!1),{user:m,login:g,logout:_,loading:x,isUserAdmin:k,adminList:A}=Q8(),[N,P]=W.useState(!1),[E,C]=W.useState(null),{itinerary:F,addActivity:z,updateActivity:K,removeActivity:R,moveActivity:I,exportItinerary:M,importItinerary:D}=Y8(),{walletItems:V,addWalletItem:U,updateWalletItem:O,removeWalletItem:ke,getTotalCost:Dt}=X8(),Ge=ne=>{i(he=>({...he,[ne]:!he[ne]}))},J=t==="ALL"?F:F.filter(ne=>ne.city===t||t==="LA"&&ne.city==="LA"),se=F.reduce((ne,he)=>ne+he.activities.reduce((ce,Ke)=>ce+(Ke.cost||0),0),0)+Dt(),Q=(ne,he,ce)=>{const Ke={...ne,modifiedBy:(m==null?void 0:m.displayName)||"Anonymous",modifiedAt:new Date().toISOString()};if(ce&&(ne.cost||0)>0){let mt="other";switch(ne.type){case"flight":mt="flight";break;case"transport":mt="transport";break;case"food":mt="food";break;case"hotel":mt="hotel";break;case"sightseeing":mt="ticket";break;default:mt="other"}const xr={category:mt,title:ne.title,reference:"",details:`${ne.time}`,cost:ne.cost};if(ne.walletItemId)O(ne.walletItemId,xr);else{const ks=U(xr);Ke.walletItemId=ks}}E?E.dayId===he?K(E.dayId,E.index,Ke):I(E.dayId,he,Ke,E.index):z(he,Ke),P(!1),C(null)},fe=(ne,he,ce)=>{C({dayId:ne,index:he,activity:ce}),P(!0)},xe=(ne,he)=>{confirm("")&&R(ne,he)};return x?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."}):T.jsxs("div",{className:"min-h-screen pb-12 relative overflow-x-hidden",children:[T.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 opacity-50 mix-blend-multiply",style:{backgroundImage:"var(--paper-texture)"}}),T.jsxs("div",{className:"relative z-10",children:[T.jsx(CM,{isEditing:r,onToggleEdit:()=>o(!r),onExport:M,onImport:D,onOpenWallet:()=>u(!0),onOpenSettings:()=>f(!0),user:m,isAdmin:k,onLogin:g,onLogout:_}),T.jsxs("main",{className:"max-w-3xl mx-auto px-4 -mt-6 relative z-20",children:[T.jsx("div",{className:"flex overflow-x-auto gap-3 pb-4 scrollbar-hide mb-6 no-scrollbar px-2",children:[{id:"ALL",label:"All Trips"},{id:"SF",label:"San Francisco"},{id:"SLC",label:"Salt Lake City"},{id:"SAN",label:"San Diego"}].map(ne=>T.jsxs("button",{onClick:()=>e(ne.id),className:or("px-5 py-2 whitespace-nowrap text-sm font-bold transition-all relative group",t===ne.id?"text-white transform -rotate-1":"text-gray-600 hover:text-gray-900 hover:rotate-1"),children:[T.jsx("div",{className:or("absolute inset-0 border-2 border-dashed rounded-lg -z-10 transition-all",t===ne.id?"bg-gray-800 border-gray-800 shadow-md":"bg-white border-gray-300 group-hover:border-gray-400")}),T.jsx("div",{className:or("absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-r border-gray-300",t===ne.id&&"border-transparent")}),T.jsx("div",{className:or("absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-l border-gray-300",t===ne.id&&"border-transparent")}),T.jsx("span",{className:"font-heading tracking-wide uppercase",children:ne.label})]},ne.id))}),T.jsx(Ec,{mode:"wait",children:t!=="ALL"&&ax[t]&&T.jsx(K8,{city:t,info:ax[t]},t)}),m?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"space-y-6",children:J.map(ne=>T.jsx(nj,{day:ne,isExpanded:!!n[ne.id],onToggle:()=>Ge(ne.id),isEditing:r,onAddActivity:()=>{C({dayId:ne.id,index:-1,activity:{}}),P(!0)},onUpdateActivity:(he,ce)=>fe(ne.id,he,ce),onRemoveActivity:he=>xe(ne.id,he)},ne.id))}),T.jsx(ij,{})]}):T.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm text-center mt-8",children:[T.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:T.jsx("span",{className:"text-2xl",children:""})}),T.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:""}),T.jsx("p",{className:"text-gray-500 mb-6",children:" Google "}),T.jsx("button",{onClick:g,className:"bg-indigo-600 text-white px-6 py-2 rounded-full font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:" Google "})]}),T.jsxs("div",{className:"mt-12 text-center text-xs text-gray-400 pb-8",children:[T.jsx("p",{children:""}),T.jsx("p",{className:"mt-2",children:"Created for 2026 ACSM Trip"})]})]}),T.jsx(d8,{isOpen:N,onClose:()=>{P(!1),C(null)},onSave:Q,initialData:E==null?void 0:E.activity,availableDays:F,currentDayId:(E==null?void 0:E.dayId)||((He=F[0])==null?void 0:He.id)}),T.jsx(m8,{isOpen:a,onClose:()=>u(!1),items:V,onAdd:U,onRemove:ke,onUpdate:O,totalCost:se}),T.jsx(G8,{itinerary:F}),T.jsx(Z8,{isOpen:c,onClose:()=>f(!1),currentAdmins:A,currentUserEmail:m==null?void 0:m.email})]})]})}class e7 extends W.Component{constructor(){super(...arguments);C0(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){var n;return this.state.hasError?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:T.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg w-full border border-red-200",children:[T.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),T.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-60 text-sm font-mono text-gray-800 mb-4",children:(n=this.state.error)==null?void 0:n.toString()}),T.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Vm.createRoot(document.getElementById("root")).render(T.jsx(Pd.StrictMode,{children:T.jsx(e7,{children:T.jsx(J8,{})})}));
