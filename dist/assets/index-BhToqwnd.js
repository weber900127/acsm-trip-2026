var ob=Object.defineProperty;var ab=(t,e,n)=>e in t?ob(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m0=(t,e,n)=>ab(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rx={exports:{}},hf={},Nx={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),ub=Symbol.for("react.portal"),cb=Symbol.for("react.fragment"),hb=Symbol.for("react.strict_mode"),db=Symbol.for("react.profiler"),fb=Symbol.for("react.provider"),pb=Symbol.for("react.context"),mb=Symbol.for("react.forward_ref"),gb=Symbol.for("react.suspense"),yb=Symbol.for("react.memo"),_b=Symbol.for("react.lazy"),g0=Symbol.iterator;function vb(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var Lx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mx=Object.assign,Dx={};function nl(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Lx}nl.prototype.isReactComponent={};nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ox(){}Ox.prototype=nl.prototype;function fy(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Lx}var py=fy.prototype=new Ox;py.constructor=fy;Mx(py,nl.prototype);py.isPureReactComponent=!0;var y0=Array.isArray,Vx=Object.prototype.hasOwnProperty,my={current:null},Fx={key:!0,ref:!0,__self:!0,__source:!0};function jx(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Vx.call(e,i)&&!Fx.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:rc,type:t,key:o,ref:a,props:r,_owner:my.current}}function wb(t,e){return{$$typeof:rc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gy(t){return typeof t=="object"&&t!==null&&t.$$typeof===rc}function Tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function xp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tb(""+t.key):e.toString(36)}function Vh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case rc:case ub:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+xp(a,0):i,y0(r)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),Vh(r,e,n,"",function(f){return f})):r!=null&&(gy(r)&&(r=wb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(_0,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",y0(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+xp(o,u);a+=Vh(o,e,n,h,r)}else if(h=vb(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+xp(o,u++),a+=Vh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function oh(t,e,n){if(t==null)return t;var i=[],r=0;return Vh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function xb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var an={current:null},Fh={transition:null},Eb={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:my};function Ux(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:oh,forEach:function(t,e,n){oh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oh(t,function(){e++}),e},toArray:function(t){return oh(t,function(e){return e})||[]},only:function(t){if(!gy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=nl;Ie.Fragment=cb;Ie.Profiler=db;Ie.PureComponent=fy;Ie.StrictMode=hb;Ie.Suspense=gb;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eb;Ie.act=Ux;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Mx({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=my.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)Vx.call(e,h)&&!Fx.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:rc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:pb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fb,_context:t},t.Consumer=t};Ie.createElement=jx;Ie.createFactory=function(t){var e=jx.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:mb,render:t}};Ie.isValidElement=gy;Ie.lazy=function(t){return{$$typeof:_b,_payload:{_status:-1,_result:t},_init:xb}};Ie.memo=function(t,e){return{$$typeof:yb,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Fh.transition;Fh.transition={};try{t()}finally{Fh.transition=e}};Ie.unstable_act=Ux;Ie.useCallback=function(t,e){return an.current.useCallback(t,e)};Ie.useContext=function(t){return an.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return an.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return an.current.useEffect(t,e)};Ie.useId=function(){return an.current.useId()};Ie.useImperativeHandle=function(t,e,n){return an.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return an.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return an.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return an.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return an.current.useReducer(t,e,n)};Ie.useRef=function(t){return an.current.useRef(t)};Ie.useState=function(t){return an.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return an.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return an.current.useTransition()};Ie.version="18.3.1";Nx.exports=Ie;var q=Nx.exports;const cd=bx(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb=q,Pb=Symbol.for("react.element"),Ib=Symbol.for("react.fragment"),Ab=Object.prototype.hasOwnProperty,Cb=Sb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kb={key:!0,ref:!0,__self:!0,__source:!0};function zx(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Ab.call(e,i)&&!kb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Pb,type:t,key:o,ref:a,props:r,_owner:Cb.current}}hf.Fragment=Ib;hf.jsx=zx;hf.jsxs=zx;Rx.exports=hf;var x=Rx.exports,Sm={},Bx={exports:{}},Rn={},Wx={exports:{}},Hx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,re){var X=G.length;G.push(re);e:for(;0<X;){var fe=X-1>>>1,Ee=G[fe];if(0<r(Ee,re))G[fe]=re,G[X]=Ee,X=fe;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var re=G[0],X=G.pop();if(X!==re){G[0]=X;e:for(var fe=0,Ee=G.length,We=Ee>>>1;fe<We;){var se=2*(fe+1)-1,he=G[se],ce=se+1,Ke=G[ce];if(0>r(he,X))ce<Ee&&0>r(Ke,he)?(G[fe]=Ke,G[ce]=X,fe=ce):(G[fe]=he,G[se]=X,fe=se);else if(ce<Ee&&0>r(Ke,X))G[fe]=Ke,G[ce]=X,fe=ce;else break e}}return re}function r(G,re){var X=G.sortIndex-re.sortIndex;return X!==0?X:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,E=!1,R=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=G)i(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=n(f)}}function j(G){if(k=!1,C(G),!R)if(n(h)!==null)R=!0,Ge(W);else{var re=n(f);re!==null&&ee(j,re.startTime-G)}}function W(G,re){R=!1,k&&(k=!1,P(I),I=-1),E=!0;var X=_;try{for(C(re),g=n(h);g!==null&&(!(g.expirationTime>re)||G&&!V());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,_=g.priorityLevel;var Ee=fe(g.expirationTime<=re);re=t.unstable_now(),typeof Ee=="function"?g.callback=Ee:g===n(h)&&i(h),C(re)}else i(h);g=n(h)}if(g!==null)var We=!0;else{var se=n(f);se!==null&&ee(j,se.startTime-re),We=!1}return We}finally{g=null,_=X,E=!1}}var K=!1,b=null,I=-1,M=5,D=-1;function V(){return!(t.unstable_now()-D<M)}function U(){if(b!==null){var G=t.unstable_now();D=G;var re=!0;try{re=b(!0,G)}finally{re?O():(K=!1,b=null)}}else K=!1}var O;if(typeof T=="function")O=function(){T(U)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Dt=be.port2;be.port1.onmessage=U,O=function(){Dt.postMessage(null)}}else O=function(){N(U,0)};function Ge(G){b=G,K||(K=!0,O())}function ee(G,re){I=N(function(){G(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,Ge(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var X=_;_=re;try{return G()}finally{_=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=_;_=G;try{return re()}finally{_=X}},t.unstable_scheduleCallback=function(G,re,X){var fe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,G){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=X+Ee,G={id:m++,callback:re,priorityLevel:G,startTime:X,expirationTime:Ee,sortIndex:-1},X>fe?(G.sortIndex=X,e(f,G),n(h)===null&&G===n(f)&&(k?(P(I),I=-1):k=!0,ee(j,X-fe))):(G.sortIndex=Ee,e(h,G),R||E||(R=!0,Ge(W))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var re=_;return function(){var X=_;_=re;try{return G.apply(this,arguments)}finally{_=X}}}})(Hx);Wx.exports=Hx;var bb=Wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb=q,kn=bb;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qx=new Set,Cu={};function xo(t,e){Fa(t,e),Fa(t+"Capture",e)}function Fa(t,e){for(Cu[t]=e,t=0;t<e.length;t++)qx.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pm=Object.prototype.hasOwnProperty,Nb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v0={},w0={};function Lb(t){return Pm.call(w0,t)?!0:Pm.call(v0,t)?!1:Nb.test(t)?w0[t]=!0:(v0[t]=!0,!1)}function Mb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Db(t,e,n,i){if(e===null||typeof e>"u"||Mb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new ln(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var yy=/[\-:]([a-z])/g;function _y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yy,_y);Ut[e]=new ln(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yy,_y);Ut[e]=new ln(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yy,_y);Ut[e]=new ln(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function vy(t,e,n,i){var r=Ut.hasOwnProperty(e)?Ut[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Db(e,n,r,i)&&(n=null),i||r===null?Lb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vr=Rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ah=Symbol.for("react.element"),la=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),Gx=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Am=Symbol.for("react.suspense"),Cm=Symbol.for("react.suspense_list"),xy=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Kx=Symbol.for("react.offscreen"),T0=Symbol.iterator;function Ul(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Ep;function Ql(t){if(Ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ep=e&&e[1]||""}return`
`+Ep+t}var Sp=!1;function Pp(t,e){if(!t||Sp)return"";Sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{Sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ql(t):""}function Ob(t){switch(t.tag){case 5:return Ql(t.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return t=Pp(t.type,!1),t;case 11:return t=Pp(t.type.render,!1),t;case 1:return t=Pp(t.type,!0),t;default:return""}}function km(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ua:return"Fragment";case la:return"Portal";case Im:return"Profiler";case wy:return"StrictMode";case Am:return"Suspense";case Cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gx:return(t.displayName||"Context")+".Consumer";case $x:return(t._context.displayName||"Context")+".Provider";case Ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xy:return e=t.displayName||null,e!==null?e:km(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return km(t(e))}catch{}}return null}function Vb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return km(e);case 8:return e===wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fb(t){var e=Zx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lh(t){t._valueTracker||(t._valueTracker=Fb(t))}function Yx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Zx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bm(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function x0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=os(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qx(t,e){e=e.checked,e!=null&&vy(t,"checked",e,!1)}function Rm(t,e){Qx(t,e);var n=os(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nm(t,e.type,os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function E0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nm(t,e,n){(e!=="number"||hd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xl=Array.isArray;function Ia(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+os(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Lm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Xl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:os(n)}}function Xx(t,e){var n=os(e.value),i=os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function P0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uh,eE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uh=uh||document.createElement("div"),uh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ku(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jb=["Webkit","ms","Moz","O"];Object.keys(au).forEach(function(t){jb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),au[e]=au[t]})});function tE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||au.hasOwnProperty(t)&&au[t]?(""+e).trim():e+"px"}function nE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=tE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Ub=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dm(t,e){if(e){if(Ub[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Om(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fm=null,Aa=null,Ca=null;function I0(t){if(t=ac(t)){if(typeof Fm!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gf(e),Fm(t.stateNode,t.type,e))}}function iE(t){Aa?Ca?Ca.push(t):Ca=[t]:Aa=t}function rE(){if(Aa){var t=Aa,e=Ca;if(Ca=Aa=null,I0(t),e)for(t=0;t<e.length;t++)I0(e[t])}}function sE(t,e){return t(e)}function oE(){}var Ip=!1;function aE(t,e,n){if(Ip)return t(e,n);Ip=!0;try{return sE(t,e,n)}finally{Ip=!1,(Aa!==null||Ca!==null)&&(oE(),rE())}}function bu(t,e){var n=t.stateNode;if(n===null)return null;var i=gf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var jm=!1;if(ur)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){jm=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{jm=!1}function zb(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var lu=!1,dd=null,fd=!1,Um=null,Bb={onError:function(t){lu=!0,dd=t}};function Wb(t,e,n,i,r,o,a,u,h){lu=!1,dd=null,zb.apply(Bb,arguments)}function Hb(t,e,n,i,r,o,a,u,h){if(Wb.apply(this,arguments),lu){if(lu){var f=dd;lu=!1,dd=null}else throw Error(J(198));fd||(fd=!0,Um=f)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A0(t){if(Eo(t)!==t)throw Error(J(188))}function qb(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return A0(r),t;if(o===i)return A0(r),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function uE(t){return t=qb(t),t!==null?cE(t):null}function cE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cE(t);if(e!==null)return e;t=t.sibling}return null}var hE=kn.unstable_scheduleCallback,C0=kn.unstable_cancelCallback,$b=kn.unstable_shouldYield,Gb=kn.unstable_requestPaint,ft=kn.unstable_now,Kb=kn.unstable_getCurrentPriorityLevel,Sy=kn.unstable_ImmediatePriority,dE=kn.unstable_UserBlockingPriority,pd=kn.unstable_NormalPriority,Zb=kn.unstable_LowPriority,fE=kn.unstable_IdlePriority,df=null,Ci=null;function Yb(t){if(Ci&&typeof Ci.onCommitFiberRoot=="function")try{Ci.onCommitFiberRoot(df,t,void 0,(t.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:Jb,Qb=Math.log,Xb=Math.LN2;function Jb(t){return t>>>=0,t===0?32:31-(Qb(t)/Xb|0)|0}var ch=64,hh=4194304;function Jl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function md(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Jl(u):(o&=a,o!==0&&(i=Jl(o)))}else a=n&~r,a!==0?i=Jl(a):o!==0&&(i=Jl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-oi(e),r=1<<n,i|=t[n],e&=~r;return i}function e2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t2(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-oi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=e2(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function zm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pE(){var t=ch;return ch<<=1,!(ch&4194240)&&(ch=64),t}function Ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oi(e),t[e]=n}function n2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Be=0;function mE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gE,Iy,yE,_E,vE,Bm=!1,dh=[],Gr=null,Kr=null,Zr=null,Ru=new Map,Nu=new Map,Fr=[],i2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k0(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(e.pointerId)}}function Bl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ac(e),e!==null&&Iy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function r2(t,e,n,i,r){switch(e){case"focusin":return Gr=Bl(Gr,t,e,n,i,r),!0;case"dragenter":return Kr=Bl(Kr,t,e,n,i,r),!0;case"mouseover":return Zr=Bl(Zr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ru.set(o,Bl(Ru.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Nu.set(o,Bl(Nu.get(o)||null,t,e,n,i,r)),!0}return!1}function wE(t){var e=Zs(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=lE(n),e!==null){t.blockedOn=e,vE(t.priority,function(){yE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Vm=i,n.target.dispatchEvent(i),Vm=null}else return e=ac(n),e!==null&&Iy(e),t.blockedOn=n,!1;e.shift()}return!0}function b0(t,e,n){jh(t)&&n.delete(e)}function s2(){Bm=!1,Gr!==null&&jh(Gr)&&(Gr=null),Kr!==null&&jh(Kr)&&(Kr=null),Zr!==null&&jh(Zr)&&(Zr=null),Ru.forEach(b0),Nu.forEach(b0)}function Wl(t,e){t.blockedOn===e&&(t.blockedOn=null,Bm||(Bm=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,s2)))}function Lu(t){function e(r){return Wl(r,t)}if(0<dh.length){Wl(dh[0],t);for(var n=1;n<dh.length;n++){var i=dh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Gr!==null&&Wl(Gr,t),Kr!==null&&Wl(Kr,t),Zr!==null&&Wl(Zr,t),Ru.forEach(e),Nu.forEach(e),n=0;n<Fr.length;n++)i=Fr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)wE(n),n.blockedOn===null&&Fr.shift()}var ka=vr.ReactCurrentBatchConfig,gd=!0;function o2(t,e,n,i){var r=Be,o=ka.transition;ka.transition=null;try{Be=1,Ay(t,e,n,i)}finally{Be=r,ka.transition=o}}function a2(t,e,n,i){var r=Be,o=ka.transition;ka.transition=null;try{Be=4,Ay(t,e,n,i)}finally{Be=r,ka.transition=o}}function Ay(t,e,n,i){if(gd){var r=Wm(t,e,n,i);if(r===null)Vp(t,e,i,yd,n),k0(t,i);else if(r2(r,t,e,n,i))i.stopPropagation();else if(k0(t,i),e&4&&-1<i2.indexOf(t)){for(;r!==null;){var o=ac(r);if(o!==null&&gE(o),o=Wm(t,e,n,i),o===null&&Vp(t,e,i,yd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Vp(t,e,i,null,n)}}var yd=null;function Wm(t,e,n,i){if(yd=null,t=Ey(i),t=Zs(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yd=t,null}function TE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kb()){case Sy:return 1;case dE:return 4;case pd:case Zb:return 16;case fE:return 536870912;default:return 16}default:return 16}}var Hr=null,Cy=null,Uh=null;function xE(){if(Uh)return Uh;var t,e=Cy,n=e.length,i,r="value"in Hr?Hr.value:Hr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Uh=r.slice(t,1<i?1-i:void 0)}function zh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fh(){return!0}function R0(){return!1}function Nn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fh:R0,this.isPropagationStopped=R0,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fh)},persist:function(){},isPersistent:fh}),e}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ky=Nn(il),oc=it({},il,{view:0,detail:0}),l2=Nn(oc),Cp,kp,Hl,ff=it({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:by,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hl&&(Hl&&t.type==="mousemove"?(Cp=t.screenX-Hl.screenX,kp=t.screenY-Hl.screenY):kp=Cp=0,Hl=t),Cp)},movementY:function(t){return"movementY"in t?t.movementY:kp}}),N0=Nn(ff),u2=it({},ff,{dataTransfer:0}),c2=Nn(u2),h2=it({},oc,{relatedTarget:0}),bp=Nn(h2),d2=it({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),f2=Nn(d2),p2=it({},il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),m2=Nn(p2),g2=it({},il,{data:0}),L0=Nn(g2),y2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=v2[t])?!!e[t]:!1}function by(){return w2}var T2=it({},oc,{key:function(t){if(t.key){var e=y2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:by,charCode:function(t){return t.type==="keypress"?zh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),x2=Nn(T2),E2=it({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=Nn(E2),S2=it({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:by}),P2=Nn(S2),I2=it({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),A2=Nn(I2),C2=it({},ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k2=Nn(C2),b2=[9,13,27,32],Ry=ur&&"CompositionEvent"in window,uu=null;ur&&"documentMode"in document&&(uu=document.documentMode);var R2=ur&&"TextEvent"in window&&!uu,EE=ur&&(!Ry||uu&&8<uu&&11>=uu),D0=" ",O0=!1;function SE(t,e){switch(t){case"keyup":return b2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ca=!1;function N2(t,e){switch(t){case"compositionend":return PE(e);case"keypress":return e.which!==32?null:(O0=!0,D0);case"textInput":return t=e.data,t===D0&&O0?null:t;default:return null}}function L2(t,e){if(ca)return t==="compositionend"||!Ry&&SE(t,e)?(t=xE(),Uh=Cy=Hr=null,ca=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EE&&e.locale!=="ko"?null:e.data;default:return null}}var M2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M2[t.type]:e==="textarea"}function IE(t,e,n,i){iE(i),e=_d(e,"onChange"),0<e.length&&(n=new ky("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var cu=null,Mu=null;function D2(t){VE(t,0)}function pf(t){var e=fa(t);if(Yx(e))return t}function O2(t,e){if(t==="change")return e}var AE=!1;if(ur){var Rp;if(ur){var Np="oninput"in document;if(!Np){var F0=document.createElement("div");F0.setAttribute("oninput","return;"),Np=typeof F0.oninput=="function"}Rp=Np}else Rp=!1;AE=Rp&&(!document.documentMode||9<document.documentMode)}function j0(){cu&&(cu.detachEvent("onpropertychange",CE),Mu=cu=null)}function CE(t){if(t.propertyName==="value"&&pf(Mu)){var e=[];IE(e,Mu,t,Ey(t)),aE(D2,e)}}function V2(t,e,n){t==="focusin"?(j0(),cu=e,Mu=n,cu.attachEvent("onpropertychange",CE)):t==="focusout"&&j0()}function F2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pf(Mu)}function j2(t,e){if(t==="click")return pf(e)}function U2(t,e){if(t==="input"||t==="change")return pf(e)}function z2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var di=typeof Object.is=="function"?Object.is:z2;function Du(t,e){if(di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Pm.call(e,r)||!di(t[r],e[r]))return!1}return!0}function U0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z0(t,e){var n=U0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U0(n)}}function kE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bE(){for(var t=window,e=hd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hd(t.document)}return e}function Ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function B2(t){var e=bE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kE(n.ownerDocument.documentElement,n)){if(i!==null&&Ny(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=z0(n,o);var a=z0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W2=ur&&"documentMode"in document&&11>=document.documentMode,ha=null,Hm=null,hu=null,qm=!1;function B0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qm||ha==null||ha!==hd(i)||(i=ha,"selectionStart"in i&&Ny(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hu&&Du(hu,i)||(hu=i,i=_d(Hm,"onSelect"),0<i.length&&(e=new ky("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ha)))}function ph(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var da={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},Lp={},RE={};ur&&(RE=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function mf(t){if(Lp[t])return Lp[t];if(!da[t])return t;var e=da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RE)return Lp[t]=e[n];return t}var NE=mf("animationend"),LE=mf("animationiteration"),ME=mf("animationstart"),DE=mf("transitionend"),OE=new Map,W0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(t,e){OE.set(t,e),xo(e,[t])}for(var Mp=0;Mp<W0.length;Mp++){var Dp=W0[Mp],H2=Dp.toLowerCase(),q2=Dp[0].toUpperCase()+Dp.slice(1);_s(H2,"on"+q2)}_s(NE,"onAnimationEnd");_s(LE,"onAnimationIteration");_s(ME,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(DE,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$2=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function H0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Hb(i,e,void 0,t),t.currentTarget=null}function VE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;H0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;H0(r,u,f),o=h}}}if(fd)throw t=Um,fd=!1,Um=null,t}function Ze(t,e){var n=e[Ym];n===void 0&&(n=e[Ym]=new Set);var i=t+"__bubble";n.has(i)||(FE(e,t,2,!1),n.add(i))}function Op(t,e,n){var i=0;e&&(i|=4),FE(n,t,i,e)}var mh="_reactListening"+Math.random().toString(36).slice(2);function Ou(t){if(!t[mh]){t[mh]=!0,qx.forEach(function(n){n!=="selectionchange"&&($2.has(n)||Op(n,!1,t),Op(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mh]||(e[mh]=!0,Op("selectionchange",!1,e))}}function FE(t,e,n,i){switch(TE(e)){case 1:var r=o2;break;case 4:r=a2;break;default:r=Ay}n=r.bind(null,e,n,t),r=void 0,!jm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Vp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Zs(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}aE(function(){var f=o,m=Ey(n),g=[];e:{var _=OE.get(t);if(_!==void 0){var E=ky,R=t;switch(t){case"keypress":if(zh(n)===0)break e;case"keydown":case"keyup":E=x2;break;case"focusin":R="focus",E=bp;break;case"focusout":R="blur",E=bp;break;case"beforeblur":case"afterblur":E=bp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=N0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=c2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=P2;break;case NE:case LE:case ME:E=f2;break;case DE:E=A2;break;case"scroll":E=l2;break;case"wheel":E=k2;break;case"copy":case"cut":case"paste":E=m2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=M0}var k=(e&4)!==0,N=!k&&t==="scroll",P=k?_!==null?_+"Capture":null:_;k=[];for(var T=f,C;T!==null;){C=T;var j=C.stateNode;if(C.tag===5&&j!==null&&(C=j,P!==null&&(j=bu(T,P),j!=null&&k.push(Vu(T,j,C)))),N)break;T=T.return}0<k.length&&(_=new E(_,R,null,n,m),g.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",_&&n!==Vm&&(R=n.relatedTarget||n.fromElement)&&(Zs(R)||R[cr]))break e;if((E||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=f,R=R?Zs(R):null,R!==null&&(N=Eo(R),R!==N||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=f),E!==R)){if(k=N0,j="onMouseLeave",P="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(k=M0,j="onPointerLeave",P="onPointerEnter",T="pointer"),N=E==null?_:fa(E),C=R==null?_:fa(R),_=new k(j,T+"leave",E,n,m),_.target=N,_.relatedTarget=C,j=null,Zs(m)===f&&(k=new k(P,T+"enter",R,n,m),k.target=C,k.relatedTarget=N,j=k),N=j,E&&R)t:{for(k=E,P=R,T=0,C=k;C;C=na(C))T++;for(C=0,j=P;j;j=na(j))C++;for(;0<T-C;)k=na(k),T--;for(;0<C-T;)P=na(P),C--;for(;T--;){if(k===P||P!==null&&k===P.alternate)break t;k=na(k),P=na(P)}k=null}else k=null;E!==null&&q0(g,_,E,k,!1),R!==null&&N!==null&&q0(g,N,R,k,!0)}}e:{if(_=f?fa(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var W=O2;else if(V0(_))if(AE)W=U2;else{W=F2;var K=V2}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(W=j2);if(W&&(W=W(t,f))){IE(g,W,n,m);break e}K&&K(t,_,f),t==="focusout"&&(K=_._wrapperState)&&K.controlled&&_.type==="number"&&Nm(_,"number",_.value)}switch(K=f?fa(f):window,t){case"focusin":(V0(K)||K.contentEditable==="true")&&(ha=K,Hm=f,hu=null);break;case"focusout":hu=Hm=ha=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,B0(g,n,m);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":B0(g,n,m)}var b;if(Ry)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ca?SE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(EE&&n.locale!=="ko"&&(ca||I!=="onCompositionStart"?I==="onCompositionEnd"&&ca&&(b=xE()):(Hr=m,Cy="value"in Hr?Hr.value:Hr.textContent,ca=!0)),K=_d(f,I),0<K.length&&(I=new L0(I,t,null,n,m),g.push({event:I,listeners:K}),b?I.data=b:(b=PE(n),b!==null&&(I.data=b)))),(b=R2?N2(t,n):L2(t,n))&&(f=_d(f,"onBeforeInput"),0<f.length&&(m=new L0("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=b))}VE(g,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _d(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=bu(t,n),o!=null&&i.unshift(Vu(t,o,r)),o=bu(t,e),o!=null&&i.push(Vu(t,o,r))),t=t.return}return i}function na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=bu(n,o),h!=null&&a.unshift(Vu(n,h,u))):r||(h=bu(n,o),h!=null&&a.push(Vu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var G2=/\r\n?/g,K2=/\u0000|\uFFFD/g;function $0(t){return(typeof t=="string"?t:""+t).replace(G2,`
`).replace(K2,"")}function gh(t,e,n){if(e=$0(e),$0(t)!==e&&n)throw Error(J(425))}function vd(){}var $m=null,Gm=null;function Km(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zm=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,Y2=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(t){return G0.resolve(null).then(t).catch(Q2)}:Zm;function Q2(t){setTimeout(function(){throw t})}function Fp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Lu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Lu(e)}function Yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rl=Math.random().toString(36).slice(2),Si="__reactFiber$"+rl,Fu="__reactProps$"+rl,cr="__reactContainer$"+rl,Ym="__reactEvents$"+rl,X2="__reactListeners$"+rl,J2="__reactHandles$"+rl;function Zs(t){var e=t[Si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K0(t);t!==null;){if(n=t[Si])return n;t=K0(t)}return e}t=n,n=t.parentNode}return null}function ac(t){return t=t[Si]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gf(t){return t[Fu]||null}var Qm=[],pa=-1;function vs(t){return{current:t}}function Ye(t){0>pa||(t.current=Qm[pa],Qm[pa]=null,pa--)}function $e(t,e){pa++,Qm[pa]=t.current,t.current=e}var as={},Yt=vs(as),yn=vs(!1),ao=as;function ja(t,e){var n=t.type.contextTypes;if(!n)return as;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _n(t){return t=t.childContextTypes,t!=null}function wd(){Ye(yn),Ye(Yt)}function Z0(t,e,n){if(Yt.current!==as)throw Error(J(168));$e(Yt,e),$e(yn,n)}function jE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(J(108,Vb(t)||"Unknown",r));return it({},n,i)}function Td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||as,ao=Yt.current,$e(Yt,t),$e(yn,yn.current),!0}function Y0(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=jE(t,e,ao),i.__reactInternalMemoizedMergedChildContext=t,Ye(yn),Ye(Yt),$e(Yt,t)):Ye(yn),$e(yn,n)}var er=null,yf=!1,jp=!1;function UE(t){er===null?er=[t]:er.push(t)}function eR(t){yf=!0,UE(t)}function ws(){if(!jp&&er!==null){jp=!0;var t=0,e=Be;try{var n=er;for(Be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}er=null,yf=!1}catch(r){throw er!==null&&(er=er.slice(t+1)),hE(Sy,ws),r}finally{Be=e,jp=!1}}return null}var ma=[],ga=0,xd=null,Ed=0,Bn=[],Wn=0,lo=null,nr=1,ir="";function Ws(t,e){ma[ga++]=Ed,ma[ga++]=xd,xd=t,Ed=e}function zE(t,e,n){Bn[Wn++]=nr,Bn[Wn++]=ir,Bn[Wn++]=lo,lo=t;var i=nr;t=ir;var r=32-oi(i)-1;i&=~(1<<r),n+=1;var o=32-oi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,nr=1<<32-oi(e)+r|n<<r|i,ir=o+t}else nr=1<<o|n<<r|i,ir=t}function Ly(t){t.return!==null&&(Ws(t,1),zE(t,1,0))}function My(t){for(;t===xd;)xd=ma[--ga],ma[ga]=null,Ed=ma[--ga],ma[ga]=null;for(;t===lo;)lo=Bn[--Wn],Bn[Wn]=null,ir=Bn[--Wn],Bn[Wn]=null,nr=Bn[--Wn],Bn[Wn]=null}var An=null,Sn=null,Xe=!1,ri=null;function BE(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Q0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Sn=Yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lo!==null?{id:nr,overflow:ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Sn=null,!0):!1;default:return!1}}function Xm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jm(t){if(Xe){var e=Sn;if(e){var n=e;if(!Q0(t,e)){if(Xm(t))throw Error(J(418));e=Yr(n.nextSibling);var i=An;e&&Q0(t,e)?BE(i,n):(t.flags=t.flags&-4097|2,Xe=!1,An=t)}}else{if(Xm(t))throw Error(J(418));t.flags=t.flags&-4097|2,Xe=!1,An=t}}}function X0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function yh(t){if(t!==An)return!1;if(!Xe)return X0(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Km(t.type,t.memoizedProps)),e&&(e=Sn)){if(Xm(t))throw WE(),Error(J(418));for(;e;)BE(t,e),e=Yr(e.nextSibling)}if(X0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=Yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=An?Yr(t.stateNode.nextSibling):null;return!0}function WE(){for(var t=Sn;t;)t=Yr(t.nextSibling)}function Ua(){Sn=An=null,Xe=!1}function Dy(t){ri===null?ri=[t]:ri.push(t)}var tR=vr.ReactCurrentBatchConfig;function ql(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function _h(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function J0(t){var e=t._init;return e(t._payload)}function HE(t){function e(P,T){if(t){var C=P.deletions;C===null?(P.deletions=[T],P.flags|=16):C.push(T)}}function n(P,T){if(!t)return null;for(;T!==null;)e(P,T),T=T.sibling;return null}function i(P,T){for(P=new Map;T!==null;)T.key!==null?P.set(T.key,T):P.set(T.index,T),T=T.sibling;return P}function r(P,T){return P=es(P,T),P.index=0,P.sibling=null,P}function o(P,T,C){return P.index=C,t?(C=P.alternate,C!==null?(C=C.index,C<T?(P.flags|=2,T):C):(P.flags|=2,T)):(P.flags|=1048576,T)}function a(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,T,C,j){return T===null||T.tag!==6?(T=$p(C,P.mode,j),T.return=P,T):(T=r(T,C),T.return=P,T)}function h(P,T,C,j){var W=C.type;return W===ua?m(P,T,C.props.children,j,C.key):T!==null&&(T.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Or&&J0(W)===T.type)?(j=r(T,C.props),j.ref=ql(P,T,C),j.return=P,j):(j=Kh(C.type,C.key,C.props,null,P.mode,j),j.ref=ql(P,T,C),j.return=P,j)}function f(P,T,C,j){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=Gp(C,P.mode,j),T.return=P,T):(T=r(T,C.children||[]),T.return=P,T)}function m(P,T,C,j,W){return T===null||T.tag!==7?(T=no(C,P.mode,j,W),T.return=P,T):(T=r(T,C),T.return=P,T)}function g(P,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=$p(""+T,P.mode,C),T.return=P,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ah:return C=Kh(T.type,T.key,T.props,null,P.mode,C),C.ref=ql(P,null,T),C.return=P,C;case la:return T=Gp(T,P.mode,C),T.return=P,T;case Or:var j=T._init;return g(P,j(T._payload),C)}if(Xl(T)||Ul(T))return T=no(T,P.mode,C,null),T.return=P,T;_h(P,T)}return null}function _(P,T,C,j){var W=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return W!==null?null:u(P,T,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ah:return C.key===W?h(P,T,C,j):null;case la:return C.key===W?f(P,T,C,j):null;case Or:return W=C._init,_(P,T,W(C._payload),j)}if(Xl(C)||Ul(C))return W!==null?null:m(P,T,C,j,null);_h(P,C)}return null}function E(P,T,C,j,W){if(typeof j=="string"&&j!==""||typeof j=="number")return P=P.get(C)||null,u(T,P,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ah:return P=P.get(j.key===null?C:j.key)||null,h(T,P,j,W);case la:return P=P.get(j.key===null?C:j.key)||null,f(T,P,j,W);case Or:var K=j._init;return E(P,T,C,K(j._payload),W)}if(Xl(j)||Ul(j))return P=P.get(C)||null,m(T,P,j,W,null);_h(T,j)}return null}function R(P,T,C,j){for(var W=null,K=null,b=T,I=T=0,M=null;b!==null&&I<C.length;I++){b.index>I?(M=b,b=null):M=b.sibling;var D=_(P,b,C[I],j);if(D===null){b===null&&(b=M);break}t&&b&&D.alternate===null&&e(P,b),T=o(D,T,I),K===null?W=D:K.sibling=D,K=D,b=M}if(I===C.length)return n(P,b),Xe&&Ws(P,I),W;if(b===null){for(;I<C.length;I++)b=g(P,C[I],j),b!==null&&(T=o(b,T,I),K===null?W=b:K.sibling=b,K=b);return Xe&&Ws(P,I),W}for(b=i(P,b);I<C.length;I++)M=E(b,P,I,C[I],j),M!==null&&(t&&M.alternate!==null&&b.delete(M.key===null?I:M.key),T=o(M,T,I),K===null?W=M:K.sibling=M,K=M);return t&&b.forEach(function(V){return e(P,V)}),Xe&&Ws(P,I),W}function k(P,T,C,j){var W=Ul(C);if(typeof W!="function")throw Error(J(150));if(C=W.call(C),C==null)throw Error(J(151));for(var K=W=null,b=T,I=T=0,M=null,D=C.next();b!==null&&!D.done;I++,D=C.next()){b.index>I?(M=b,b=null):M=b.sibling;var V=_(P,b,D.value,j);if(V===null){b===null&&(b=M);break}t&&b&&V.alternate===null&&e(P,b),T=o(V,T,I),K===null?W=V:K.sibling=V,K=V,b=M}if(D.done)return n(P,b),Xe&&Ws(P,I),W;if(b===null){for(;!D.done;I++,D=C.next())D=g(P,D.value,j),D!==null&&(T=o(D,T,I),K===null?W=D:K.sibling=D,K=D);return Xe&&Ws(P,I),W}for(b=i(P,b);!D.done;I++,D=C.next())D=E(b,P,I,D.value,j),D!==null&&(t&&D.alternate!==null&&b.delete(D.key===null?I:D.key),T=o(D,T,I),K===null?W=D:K.sibling=D,K=D);return t&&b.forEach(function(U){return e(P,U)}),Xe&&Ws(P,I),W}function N(P,T,C,j){if(typeof C=="object"&&C!==null&&C.type===ua&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ah:e:{for(var W=C.key,K=T;K!==null;){if(K.key===W){if(W=C.type,W===ua){if(K.tag===7){n(P,K.sibling),T=r(K,C.props.children),T.return=P,P=T;break e}}else if(K.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Or&&J0(W)===K.type){n(P,K.sibling),T=r(K,C.props),T.ref=ql(P,K,C),T.return=P,P=T;break e}n(P,K);break}else e(P,K);K=K.sibling}C.type===ua?(T=no(C.props.children,P.mode,j,C.key),T.return=P,P=T):(j=Kh(C.type,C.key,C.props,null,P.mode,j),j.ref=ql(P,T,C),j.return=P,P=j)}return a(P);case la:e:{for(K=C.key;T!==null;){if(T.key===K)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(P,T.sibling),T=r(T,C.children||[]),T.return=P,P=T;break e}else{n(P,T);break}else e(P,T);T=T.sibling}T=Gp(C,P.mode,j),T.return=P,P=T}return a(P);case Or:return K=C._init,N(P,T,K(C._payload),j)}if(Xl(C))return R(P,T,C,j);if(Ul(C))return k(P,T,C,j);_h(P,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(P,T.sibling),T=r(T,C),T.return=P,P=T):(n(P,T),T=$p(C,P.mode,j),T.return=P,P=T),a(P)):n(P,T)}return N}var za=HE(!0),qE=HE(!1),Sd=vs(null),Pd=null,ya=null,Oy=null;function Vy(){Oy=ya=Pd=null}function Fy(t){var e=Sd.current;Ye(Sd),t._currentValue=e}function eg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ba(t,e){Pd=t,Oy=ya=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function Gn(t){var e=t._currentValue;if(Oy!==t)if(t={context:t,memoizedValue:e,next:null},ya===null){if(Pd===null)throw Error(J(308));ya=t,Pd.dependencies={lanes:0,firstContext:t}}else ya=ya.next=t;return e}var Ys=null;function jy(t){Ys===null?Ys=[t]:Ys.push(t)}function $E(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,jy(e)):(n.next=r.next,r.next=n),e.interleaved=n,hr(t,i)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function Uy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,hr(t,n)}return r=i.interleaved,r===null?(e.next=e,jy(i)):(e.next=r.next,r.next=e),i.interleaved=e,hr(t,n)}function Bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Py(t,n)}}function ew(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Id(t,e,n,i){var r=t.updateQueue;Vr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,E=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,k=u;switch(_=e,E=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){g=R.call(E,g,_);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,_=typeof R=="function"?R.call(E,g,_):R,_==null)break e;g=it({},g,_);break e;case 2:Vr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else E={eventTime:E,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=E,h=g):m=m.next=E,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);co|=a,t.lanes=a,t.memoizedState=g}}function tw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(J(191,r));r.call(i)}}}var lc={},ki=vs(lc),ju=vs(lc),Uu=vs(lc);function Qs(t){if(t===lc)throw Error(J(174));return t}function zy(t,e){switch($e(Uu,e),$e(ju,t),$e(ki,lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mm(e,t)}Ye(ki),$e(ki,e)}function Ba(){Ye(ki),Ye(ju),Ye(Uu)}function KE(t){Qs(Uu.current);var e=Qs(ki.current),n=Mm(e,t.type);e!==n&&($e(ju,t),$e(ki,n))}function By(t){ju.current===t&&(Ye(ki),Ye(ju))}var Je=vs(0);function Ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Up=[];function Wy(){for(var t=0;t<Up.length;t++)Up[t]._workInProgressVersionPrimary=null;Up.length=0}var Wh=vr.ReactCurrentDispatcher,zp=vr.ReactCurrentBatchConfig,uo=0,nt=null,Tt=null,Rt=null,Cd=!1,du=!1,zu=0,nR=0;function Bt(){throw Error(J(321))}function Hy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!di(t[n],e[n]))return!1;return!0}function qy(t,e,n,i,r,o){if(uo=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wh.current=t===null||t.memoizedState===null?oR:aR,t=n(i,r),du){o=0;do{if(du=!1,zu=0,25<=o)throw Error(J(301));o+=1,Rt=Tt=null,e.updateQueue=null,Wh.current=lR,t=n(i,r)}while(du)}if(Wh.current=kd,e=Tt!==null&&Tt.next!==null,uo=0,Rt=Tt=nt=null,Cd=!1,e)throw Error(J(300));return t}function $y(){var t=zu!==0;return zu=0,t}function xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Kn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Rt===null?nt.memoizedState:Rt.next;if(e!==null)Rt=e,Tt=t;else{if(t===null)throw Error(J(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Bu(t,e){return typeof e=="function"?e(t):e}function Bp(t){var e=Kn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=Tt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((uo&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,nt.lanes|=m,co|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,di(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,co|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wp(t){var e=Kn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);di(o,e.memoizedState)||(gn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ZE(){}function YE(t,e){var n=nt,i=Kn(),r=e(),o=!di(i.memoizedState,r);if(o&&(i.memoizedState=r,gn=!0),i=i.queue,Gy(JE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Wu(9,XE.bind(null,n,i,r,e),void 0,null),Lt===null)throw Error(J(349));uo&30||QE(n,e,r)}return r}function QE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XE(t,e,n,i){e.value=n,e.getSnapshot=i,eS(e)&&tS(t)}function JE(t,e,n){return n(function(){eS(e)&&tS(t)})}function eS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!di(t,n)}catch{return!0}}function tS(t){var e=hr(t,1);e!==null&&ai(e,t,1,-1)}function nw(t){var e=xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=sR.bind(null,nt,t),[e.memoizedState,t]}function Wu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function nS(){return Kn().memoizedState}function Hh(t,e,n,i){var r=xi();nt.flags|=t,r.memoizedState=Wu(1|e,n,void 0,i===void 0?null:i)}function _f(t,e,n,i){var r=Kn();i=i===void 0?null:i;var o=void 0;if(Tt!==null){var a=Tt.memoizedState;if(o=a.destroy,i!==null&&Hy(i,a.deps)){r.memoizedState=Wu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Wu(1|e,n,o,i)}function iw(t,e){return Hh(8390656,8,t,e)}function Gy(t,e){return _f(2048,8,t,e)}function iS(t,e){return _f(4,2,t,e)}function rS(t,e){return _f(4,4,t,e)}function sS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oS(t,e,n){return n=n!=null?n.concat([t]):null,_f(4,4,sS.bind(null,e,t),n)}function Ky(){}function aS(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Hy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function lS(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Hy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function uS(t,e,n){return uo&21?(di(n,e)||(n=pE(),nt.lanes|=n,co|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function iR(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var i=zp.transition;zp.transition={};try{t(!1),e()}finally{Be=n,zp.transition=i}}function cS(){return Kn().memoizedState}function rR(t,e,n){var i=Jr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hS(t))dS(e,n);else if(n=$E(t,e,n,i),n!==null){var r=on();ai(n,t,i,r),fS(n,e,i)}}function sR(t,e,n){var i=Jr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hS(t))dS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,di(u,a)){var h=e.interleaved;h===null?(r.next=r,jy(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=$E(t,e,r,i),n!==null&&(r=on(),ai(n,t,i,r),fS(n,e,i))}}function hS(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function dS(t,e){du=Cd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Py(t,n)}}var kd={readContext:Gn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},oR={readContext:Gn,useCallback:function(t,e){return xi().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:iw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4194308,4,sS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hh(4,2,t,e)},useMemo:function(t,e){var n=xi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=rR.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=xi();return t={current:t},e.memoizedState=t},useState:nw,useDebugValue:Ky,useDeferredValue:function(t){return xi().memoizedState=t},useTransition:function(){var t=nw(!1),e=t[0];return t=iR.bind(null,t[1]),xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=xi();if(Xe){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Lt===null)throw Error(J(349));uo&30||QE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,iw(JE.bind(null,i,o,t),[t]),i.flags|=2048,Wu(9,XE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=xi(),e=Lt.identifierPrefix;if(Xe){var n=ir,i=nr;n=(i&~(1<<32-oi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aR={readContext:Gn,useCallback:aS,useContext:Gn,useEffect:Gy,useImperativeHandle:oS,useInsertionEffect:iS,useLayoutEffect:rS,useMemo:lS,useReducer:Bp,useRef:nS,useState:function(){return Bp(Bu)},useDebugValue:Ky,useDeferredValue:function(t){var e=Kn();return uS(e,Tt.memoizedState,t)},useTransition:function(){var t=Bp(Bu)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:ZE,useSyncExternalStore:YE,useId:cS,unstable_isNewReconciler:!1},lR={readContext:Gn,useCallback:aS,useContext:Gn,useEffect:Gy,useImperativeHandle:oS,useInsertionEffect:iS,useLayoutEffect:rS,useMemo:lS,useReducer:Wp,useRef:nS,useState:function(){return Wp(Bu)},useDebugValue:Ky,useDeferredValue:function(t){var e=Kn();return Tt===null?e.memoizedState=t:uS(e,Tt.memoizedState,t)},useTransition:function(){var t=Wp(Bu)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:ZE,useSyncExternalStore:YE,useId:cS,unstable_isNewReconciler:!1};function ni(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=on(),r=Jr(t),o=or(i,r);o.payload=e,n!=null&&(o.callback=n),e=Qr(t,o,r),e!==null&&(ai(e,t,r,i),Bh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=on(),r=Jr(t),o=or(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Qr(t,o,r),e!==null&&(ai(e,t,r,i),Bh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),i=Jr(t),r=or(n,i);r.tag=2,e!=null&&(r.callback=e),e=Qr(t,r,i),e!==null&&(ai(e,t,i,n),Bh(e,t,i))}};function rw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Du(n,i)||!Du(r,o):!0}function pS(t,e,n){var i=!1,r=as,o=e.contextType;return typeof o=="object"&&o!==null?o=Gn(o):(r=_n(e)?ao:Yt.current,i=e.contextTypes,o=(i=i!=null)?ja(t,r):as),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function sw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vf.enqueueReplaceState(e,e.state,null)}function ng(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Uy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Gn(o):(o=_n(e)?ao:Yt.current,r.context=ja(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tg(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vf.enqueueReplaceState(r,r.state,null),Id(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Wa(t,e){try{var n="",i=e;do n+=Ob(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Hp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ig(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uR=typeof WeakMap=="function"?WeakMap:Map;function mS(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Rd||(Rd=!0,fg=i),ig(t,e)},n}function gS(t,e,n){n=or(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ig(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ig(t,e),typeof i!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ow(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=ER.bind(null,t,e,n),e.then(t,t))}function aw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,Qr(n,e,1))),n.lanes|=1),t)}var cR=vr.ReactCurrentOwner,gn=!1;function nn(t,e,n,i){e.child=t===null?qE(e,null,n,i):za(e,t.child,n,i)}function uw(t,e,n,i,r){n=n.render;var o=e.ref;return ba(e,r),i=qy(t,e,n,i,o,r),n=$y(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,dr(t,e,r)):(Xe&&n&&Ly(e),e.flags|=1,nn(t,e,i,r),e.child)}function cw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!n_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,yS(t,e,o,i,r)):(t=Kh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(a,i)&&t.ref===e.ref)return dr(t,e,r)}return e.flags|=1,t=es(o,i),t.ref=e.ref,t.return=e,e.child=t}function yS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Du(o,i)&&t.ref===e.ref)if(gn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,dr(t,e,r)}return rg(t,e,n,i,r)}function _S(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(va,xn),xn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(va,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(va,xn),xn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(va,xn),xn|=i;return nn(t,e,r,n),e.child}function vS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rg(t,e,n,i,r){var o=_n(n)?ao:Yt.current;return o=ja(e,o),ba(e,r),n=qy(t,e,n,i,o,r),i=$y(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,dr(t,e,r)):(Xe&&i&&Ly(e),e.flags|=1,nn(t,e,n,r),e.child)}function hw(t,e,n,i,r){if(_n(n)){var o=!0;Td(e)}else o=!1;if(ba(e,r),e.stateNode===null)qh(t,e),pS(e,n,i),ng(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Gn(f):(f=_n(n)?ao:Yt.current,f=ja(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&sw(e,a,i,f),Vr=!1;var _=e.memoizedState;a.state=_,Id(e,i,a,r),h=e.memoizedState,u!==i||_!==h||yn.current||Vr?(typeof m=="function"&&(tg(e,n,m,i),h=e.memoizedState),(u=Vr||rw(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,GE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ni(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Gn(h):(h=_n(n)?ao:Yt.current,h=ja(e,h));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&sw(e,a,i,h),Vr=!1,_=e.memoizedState,a.state=_,Id(e,i,a,r);var R=e.memoizedState;u!==g||_!==R||yn.current||Vr?(typeof E=="function"&&(tg(e,n,E,i),R=e.memoizedState),(f=Vr||rw(e,n,f,i,_,R,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,R,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,R,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=R),a.props=i,a.state=R,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return sg(t,e,n,i,o,r)}function sg(t,e,n,i,r,o){vS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Y0(e,n,!1),dr(t,e,o);i=e.stateNode,cR.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=za(e,t.child,null,o),e.child=za(e,null,u,o)):nn(t,e,u,o),e.memoizedState=i.state,r&&Y0(e,n,!0),e.child}function wS(t){var e=t.stateNode;e.pendingContext?Z0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Z0(t,e.context,!1),zy(t,e.containerInfo)}function dw(t,e,n,i,r){return Ua(),Dy(r),e.flags|=256,nn(t,e,n,i),e.child}var og={dehydrated:null,treeContext:null,retryLane:0};function ag(t){return{baseLanes:t,cachePool:null,transitions:null}}function TS(t,e,n){var i=e.pendingProps,r=Je.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(Je,r&1),t===null)return Jm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=xf(a,i,0,null),t=no(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ag(n),e.memoizedState=og,t):Zy(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return hR(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=es(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=es(u,o):(o=no(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?ag(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=og,i}return o=t.child,t=o.sibling,i=es(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Zy(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vh(t,e,n,i){return i!==null&&Dy(i),za(e,t.child,null,n),t=Zy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hR(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Hp(Error(J(422))),vh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=xf({mode:"visible",children:i.children},r,0,null),o=no(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&za(e,t.child,null,a),e.child.memoizedState=ag(a),e.memoizedState=og,o);if(!(e.mode&1))return vh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(J(419)),i=Hp(o,i,void 0),vh(t,e,a,i)}if(u=(a&t.childLanes)!==0,gn||u){if(i=Lt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,hr(t,r),ai(i,t,r,-1))}return t_(),i=Hp(Error(J(421))),vh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=SR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Sn=Yr(r.nextSibling),An=e,Xe=!0,ri=null,t!==null&&(Bn[Wn++]=nr,Bn[Wn++]=ir,Bn[Wn++]=lo,nr=t.id,ir=t.overflow,lo=e),e=Zy(e,i.children),e.flags|=4096,e)}function fw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),eg(t.return,e,n)}function qp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function xS(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(nn(t,e,i.children,n),i=Je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fw(t,n,e);else if(t.tag===19)fw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(Je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ad(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),qp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ad(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}qp(e,!0,n,null,o);break;case"together":qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),co|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dR(t,e,n){switch(e.tag){case 3:wS(e),Ua();break;case 5:KE(e);break;case 1:_n(e.type)&&Td(e);break;case 4:zy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(Sd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?TS(t,e,n):($e(Je,Je.current&1),t=dr(t,e,n),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return xS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(Je,Je.current),i)break;return null;case 22:case 23:return e.lanes=0,_S(t,e,n)}return dr(t,e,n)}var ES,lg,SS,PS;ES=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lg=function(){};SS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Qs(ki.current);var o=null;switch(n){case"input":r=bm(t,r),i=bm(t,i),o=[];break;case"select":r=it({},r,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":r=Lm(t,r),i=Lm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=vd)}Dm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Cu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Cu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ze("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};PS=function(t,e,n,i){n!==i&&(e.flags|=4)};function $l(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function fR(t,e,n){var i=e.pendingProps;switch(My(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return _n(e.type)&&wd(),Wt(e),null;case 3:return i=e.stateNode,Ba(),Ye(yn),Ye(Yt),Wy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(gg(ri),ri=null))),lg(t,e),Wt(e),null;case 5:By(e);var r=Qs(Uu.current);if(n=e.type,t!==null&&e.stateNode!=null)SS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Wt(e),null}if(t=Qs(ki.current),yh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Si]=e,i[Fu]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(r=0;r<eu.length;r++)Ze(eu[r],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":x0(i,o),Ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",i);break;case"textarea":S0(i,o),Ze("invalid",i)}Dm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&gh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&gh(i.textContent,u,t),r=["children",""+u]):Cu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ze("scroll",i)}switch(n){case"input":lh(i),E0(i,o,!0);break;case"textarea":lh(i),P0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=vd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Si]=e,t[Fu]=i,ES(t,e,!1,!1),e.stateNode=t;e:{switch(a=Om(n,i),n){case"dialog":Ze("cancel",t),Ze("close",t),r=i;break;case"iframe":case"object":case"embed":Ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<eu.length;r++)Ze(eu[r],t);r=i;break;case"source":Ze("error",t),r=i;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),r=i;break;case"details":Ze("toggle",t),r=i;break;case"input":x0(t,i),r=bm(t,i),Ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=it({},i,{value:void 0}),Ze("invalid",t);break;case"textarea":S0(t,i),r=Lm(t,i),Ze("invalid",t);break;default:r=i}Dm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?nE(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&eE(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&ku(t,h):typeof h=="number"&&ku(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ze("scroll",t):h!=null&&vy(t,o,h,a))}switch(n){case"input":lh(t),E0(t,i,!1);break;case"textarea":lh(t),P0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+os(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ia(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ia(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=vd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)PS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=Qs(Uu.current),Qs(ki.current),yh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Si]=e,(o=i.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:gh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Si]=e,e.stateNode=i}return Wt(e),null;case 13:if(Ye(Je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&Sn!==null&&e.mode&1&&!(e.flags&128))WE(),Ua(),e.flags|=98560,o=!1;else if(o=yh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Si]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),o=!1}else ri!==null&&(gg(ri),ri=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?Et===0&&(Et=3):t_())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Ba(),lg(t,e),t===null&&Ou(e.stateNode.containerInfo),Wt(e),null;case 10:return Fy(e.type._context),Wt(e),null;case 17:return _n(e.type)&&wd(),Wt(e),null;case 19:if(Ye(Je),o=e.memoizedState,o===null)return Wt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)$l(o,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ad(t),a!==null){for(e.flags|=128,$l(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Je,Je.current&1|2),e.child}t=t.sibling}o.tail!==null&&ft()>Ha&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ad(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Wt(e),null}else 2*ft()-o.renderingStartTime>Ha&&n!==1073741824&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ft(),e.sibling=null,n=Je.current,$e(Je,i?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return e_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function pR(t,e){switch(My(e),e.tag){case 1:return _n(e.type)&&wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),Ye(yn),Ye(Yt),Wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return By(e),null;case 13:if(Ye(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(Je),null;case 4:return Ba(),null;case 10:return Fy(e.type._context),null;case 22:case 23:return e_(),null;case 24:return null;default:return null}}var wh=!1,Gt=!1,mR=typeof WeakSet=="function"?WeakSet:Set,ae=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function ug(t,e,n){try{n()}catch(i){at(t,e,i)}}var pw=!1;function gR(t,e){if($m=gd,t=bE(),Ny(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var E;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)_=g,g=E;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(E=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=E}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gm={focusedElem:t,selectionRange:n},gd=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,N=R.memoizedState,P=e.stateNode,T=P.getSnapshotBeforeUpdate(e.elementType===e.type?k:ni(e.type,k),N);P.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(j){at(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return R=pw,pw=!1,R}function fu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&ug(e,n,o)}r=r.next}while(r!==i)}}function wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function cg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IS(t){var e=t.alternate;e!==null&&(t.alternate=null,IS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Si],delete e[Fu],delete e[Ym],delete e[X2],delete e[J2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AS(t){return t.tag===5||t.tag===3||t.tag===4}function mw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vd));else if(i!==4&&(t=t.child,t!==null))for(hg(t,e,n),t=t.sibling;t!==null;)hg(t,e,n),t=t.sibling}function dg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(dg(t,e,n),t=t.sibling;t!==null;)dg(t,e,n),t=t.sibling}var Ot=null,ii=!1;function Nr(t,e,n){for(n=n.child;n!==null;)CS(t,e,n),n=n.sibling}function CS(t,e,n){if(Ci&&typeof Ci.onCommitFiberUnmount=="function")try{Ci.onCommitFiberUnmount(df,n)}catch{}switch(n.tag){case 5:Gt||_a(n,e);case 6:var i=Ot,r=ii;Ot=null,Nr(t,e,n),Ot=i,ii=r,Ot!==null&&(ii?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(ii?(t=Ot,n=n.stateNode,t.nodeType===8?Fp(t.parentNode,n):t.nodeType===1&&Fp(t,n),Lu(t)):Fp(Ot,n.stateNode));break;case 4:i=Ot,r=ii,Ot=n.stateNode.containerInfo,ii=!0,Nr(t,e,n),Ot=i,ii=r;break;case 0:case 11:case 14:case 15:if(!Gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ug(n,e,a),r=r.next}while(r!==i)}Nr(t,e,n);break;case 1:if(!Gt&&(_a(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(Gt=(i=Gt)||n.memoizedState!==null,Nr(t,e,n),Gt=i):Nr(t,e,n);break;default:Nr(t,e,n)}}function gw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mR),e.forEach(function(i){var r=PR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ei(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ot=u.stateNode,ii=!1;break e;case 3:Ot=u.stateNode.containerInfo,ii=!0;break e;case 4:Ot=u.stateNode.containerInfo,ii=!0;break e}u=u.return}if(Ot===null)throw Error(J(160));CS(o,a,r),Ot=null,ii=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kS(e,t),e=e.sibling}function kS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ei(e,t),Ti(t),i&4){try{fu(3,t,t.return),wf(3,t)}catch(k){at(t,t.return,k)}try{fu(5,t,t.return)}catch(k){at(t,t.return,k)}}break;case 1:ei(e,t),Ti(t),i&512&&n!==null&&_a(n,n.return);break;case 5:if(ei(e,t),Ti(t),i&512&&n!==null&&_a(n,n.return),t.flags&32){var r=t.stateNode;try{ku(r,"")}catch(k){at(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Qx(r,o),Om(u,a);var f=Om(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?nE(r,g):m==="dangerouslySetInnerHTML"?eE(r,g):m==="children"?ku(r,g):vy(r,m,g,f)}switch(u){case"input":Rm(r,o);break;case"textarea":Xx(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Ia(r,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ia(r,!!o.multiple,o.defaultValue,!0):Ia(r,!!o.multiple,o.multiple?[]:"",!1))}r[Fu]=o}catch(k){at(t,t.return,k)}}break;case 6:if(ei(e,t),Ti(t),i&4){if(t.stateNode===null)throw Error(J(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){at(t,t.return,k)}}break;case 3:if(ei(e,t),Ti(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Lu(e.containerInfo)}catch(k){at(t,t.return,k)}break;case 4:ei(e,t),Ti(t);break;case 13:ei(e,t),Ti(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Xy=ft())),i&4&&gw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(f=Gt)||m,ei(e,t),Gt=f):ei(e,t),Ti(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ae=t,m=t.child;m!==null;){for(g=ae=m;ae!==null;){switch(_=ae,E=_.child,_.tag){case 0:case 11:case 14:case 15:fu(4,_,_.return);break;case 1:_a(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){at(i,n,k)}}break;case 5:_a(_,_.return);break;case 22:if(_.memoizedState!==null){_w(g);continue}}E!==null?(E.return=_,ae=E):_w(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=tE("display",a))}catch(k){at(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){at(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ei(e,t),Ti(t),i&4&&gw(t);break;case 21:break;default:ei(e,t),Ti(t)}}function Ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AS(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ku(r,""),i.flags&=-33);var o=mw(t);dg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=mw(t);hg(t,u,a);break;default:throw Error(J(161))}}catch(h){at(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yR(t,e,n){ae=t,bS(t)}function bS(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var r=ae,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||wh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Gt;u=wh;var f=Gt;if(wh=a,(Gt=h)&&!f)for(ae=r;ae!==null;)a=ae,h=a.child,a.tag===22&&a.memoizedState!==null?vw(r):h!==null?(h.return=a,ae=h):vw(r);for(;o!==null;)ae=o,bS(o),o=o.sibling;ae=r,wh=u,Gt=f}yw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ae=o):yw(t)}}function yw(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||wf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ni(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&tw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Lu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Gt||e.flags&512&&cg(e)}catch(_){at(e,e.return,_)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function _w(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function vw(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wf(4,e)}catch(h){at(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){at(e,r,h)}}var o=e.return;try{cg(e)}catch(h){at(e,o,h)}break;case 5:var a=e.return;try{cg(e)}catch(h){at(e,a,h)}}}catch(h){at(e,e.return,h)}if(e===t){ae=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ae=u;break}ae=e.return}}var _R=Math.ceil,bd=vr.ReactCurrentDispatcher,Yy=vr.ReactCurrentOwner,$n=vr.ReactCurrentBatchConfig,Le=0,Lt=null,vt=null,jt=0,xn=0,va=vs(0),Et=0,Hu=null,co=0,Tf=0,Qy=0,pu=null,pn=null,Xy=0,Ha=1/0,Ji=null,Rd=!1,fg=null,Xr=null,Th=!1,qr=null,Nd=0,mu=0,pg=null,$h=-1,Gh=0;function on(){return Le&6?ft():$h!==-1?$h:$h=ft()}function Jr(t){return t.mode&1?Le&2&&jt!==0?jt&-jt:tR.transition!==null?(Gh===0&&(Gh=pE()),Gh):(t=Be,t!==0||(t=window.event,t=t===void 0?16:TE(t.type)),t):1}function ai(t,e,n,i){if(50<mu)throw mu=0,pg=null,Error(J(185));sc(t,n,i),(!(Le&2)||t!==Lt)&&(t===Lt&&(!(Le&2)&&(Tf|=n),Et===4&&jr(t,jt)),vn(t,i),n===1&&Le===0&&!(e.mode&1)&&(Ha=ft()+500,yf&&ws()))}function vn(t,e){var n=t.callbackNode;t2(t,e);var i=md(t,t===Lt?jt:0);if(i===0)n!==null&&C0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&C0(n),e===1)t.tag===0?eR(ww.bind(null,t)):UE(ww.bind(null,t)),Y2(function(){!(Le&6)&&ws()}),n=null;else{switch(mE(i)){case 1:n=Sy;break;case 4:n=dE;break;case 16:n=pd;break;case 536870912:n=fE;break;default:n=pd}n=FS(n,RS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RS(t,e){if($h=-1,Gh=0,Le&6)throw Error(J(327));var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var i=md(t,t===Lt?jt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ld(t,i);else{e=i;var r=Le;Le|=2;var o=LS();(Lt!==t||jt!==e)&&(Ji=null,Ha=ft()+500,to(t,e));do try{TR();break}catch(u){NS(t,u)}while(!0);Vy(),bd.current=o,Le=r,vt!==null?e=0:(Lt=null,jt=0,e=Et)}if(e!==0){if(e===2&&(r=zm(t),r!==0&&(i=r,e=mg(t,r))),e===1)throw n=Hu,to(t,0),jr(t,i),vn(t,ft()),n;if(e===6)jr(t,i);else{if(r=t.current.alternate,!(i&30)&&!vR(r)&&(e=Ld(t,i),e===2&&(o=zm(t),o!==0&&(i=o,e=mg(t,o))),e===1))throw n=Hu,to(t,0),jr(t,i),vn(t,ft()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:Hs(t,pn,Ji);break;case 3:if(jr(t,i),(i&130023424)===i&&(e=Xy+500-ft(),10<e)){if(md(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){on(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Zm(Hs.bind(null,t,pn,Ji),e);break}Hs(t,pn,Ji);break;case 4:if(jr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_R(i/1960))-i,10<i){t.timeoutHandle=Zm(Hs.bind(null,t,pn,Ji),i);break}Hs(t,pn,Ji);break;case 5:Hs(t,pn,Ji);break;default:throw Error(J(329))}}}return vn(t,ft()),t.callbackNode===n?RS.bind(null,t):null}function mg(t,e){var n=pu;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=Ld(t,e),t!==2&&(e=pn,pn=n,e!==null&&gg(e)),t}function gg(t){pn===null?pn=t:pn.push.apply(pn,t)}function vR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!di(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~Qy,e&=~Tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oi(e),i=1<<n;t[n]=-1,e&=~i}}function ww(t){if(Le&6)throw Error(J(327));Ra();var e=md(t,0);if(!(e&1))return vn(t,ft()),null;var n=Ld(t,e);if(t.tag!==0&&n===2){var i=zm(t);i!==0&&(e=i,n=mg(t,i))}if(n===1)throw n=Hu,to(t,0),jr(t,e),vn(t,ft()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hs(t,pn,Ji),vn(t,ft()),null}function Jy(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Ha=ft()+500,yf&&ws())}}function ho(t){qr!==null&&qr.tag===0&&!(Le&6)&&Ra();var e=Le;Le|=1;var n=$n.transition,i=Be;try{if($n.transition=null,Be=1,t)return t()}finally{Be=i,$n.transition=n,Le=e,!(Le&6)&&ws()}}function e_(){xn=va.current,Ye(va)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z2(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(My(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wd();break;case 3:Ba(),Ye(yn),Ye(Yt),Wy();break;case 5:By(i);break;case 4:Ba();break;case 13:Ye(Je);break;case 19:Ye(Je);break;case 10:Fy(i.type._context);break;case 22:case 23:e_()}n=n.return}if(Lt=t,vt=t=es(t.current,null),jt=xn=e,Et=0,Hu=null,Qy=Tf=co=0,pn=pu=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ys=null}return t}function NS(t,e){do{var n=vt;try{if(Vy(),Wh.current=kd,Cd){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Cd=!1}if(uo=0,Rt=Tt=nt=null,du=!1,zu=0,Yy.current=null,n===null||n.return===null){Et=1,Hu=e,vt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=jt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=aw(a);if(E!==null){E.flags&=-257,lw(E,a,u,o,e),E.mode&1&&ow(o,f,e),e=E,h=f;var R=e.updateQueue;if(R===null){var k=new Set;k.add(h),e.updateQueue=k}else R.add(h);break e}else{if(!(e&1)){ow(o,f,e),t_();break e}h=Error(J(426))}}else if(Xe&&u.mode&1){var N=aw(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),lw(N,a,u,o,e),Dy(Wa(h,u));break e}}o=h=Wa(h,u),Et!==4&&(Et=2),pu===null?pu=[o]:pu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=mS(o,h,e);ew(o,P);break e;case 1:u=h;var T=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Xr===null||!Xr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var j=gS(o,u,e);ew(o,j);break e}}o=o.return}while(o!==null)}DS(n)}catch(W){e=W,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function LS(){var t=bd.current;return bd.current=kd,t===null?kd:t}function t_(){(Et===0||Et===3||Et===2)&&(Et=4),Lt===null||!(co&268435455)&&!(Tf&268435455)||jr(Lt,jt)}function Ld(t,e){var n=Le;Le|=2;var i=LS();(Lt!==t||jt!==e)&&(Ji=null,to(t,e));do try{wR();break}catch(r){NS(t,r)}while(!0);if(Vy(),Le=n,bd.current=i,vt!==null)throw Error(J(261));return Lt=null,jt=0,Et}function wR(){for(;vt!==null;)MS(vt)}function TR(){for(;vt!==null&&!$b();)MS(vt)}function MS(t){var e=VS(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?DS(t):vt=e,Yy.current=null}function DS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pR(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=fR(n,e,xn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function Hs(t,e,n){var i=Be,r=$n.transition;try{$n.transition=null,Be=1,xR(t,e,n,i)}finally{$n.transition=r,Be=i}return null}function xR(t,e,n,i){do Ra();while(qr!==null);if(Le&6)throw Error(J(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(n2(t,o),t===Lt&&(vt=Lt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Th||(Th=!0,FS(pd,function(){return Ra(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$n.transition,$n.transition=null;var a=Be;Be=1;var u=Le;Le|=4,Yy.current=null,gR(t,n),kS(n,t),B2(Gm),gd=!!$m,Gm=$m=null,t.current=n,yR(n),Gb(),Le=u,Be=a,$n.transition=o}else t.current=n;if(Th&&(Th=!1,qr=t,Nd=r),o=t.pendingLanes,o===0&&(Xr=null),Yb(n.stateNode),vn(t,ft()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Rd)throw Rd=!1,t=fg,fg=null,t;return Nd&1&&t.tag!==0&&Ra(),o=t.pendingLanes,o&1?t===pg?mu++:(mu=0,pg=t):mu=0,ws(),null}function Ra(){if(qr!==null){var t=mE(Nd),e=$n.transition,n=Be;try{if($n.transition=null,Be=16>t?16:t,qr===null)var i=!1;else{if(t=qr,qr=null,Nd=0,Le&6)throw Error(J(331));var r=Le;for(Le|=4,ae=t.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ae=f;ae!==null;){var m=ae;switch(m.tag){case 0:case 11:case 15:fu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ae=g;else for(;ae!==null;){m=ae;var _=m.sibling,E=m.return;if(IS(m),m===f){ae=null;break}if(_!==null){_.return=E,ae=_;break}ae=E}}}var R=o.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fu(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,ae=P;break e}ae=o.return}}var T=t.current;for(ae=T;ae!==null;){a=ae;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ae=C;else e:for(a=T;ae!==null;){if(u=ae,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:wf(9,u)}}catch(W){at(u,u.return,W)}if(u===a){ae=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,ae=j;break e}ae=u.return}}if(Le=r,ws(),Ci&&typeof Ci.onPostCommitFiberRoot=="function")try{Ci.onPostCommitFiberRoot(df,t)}catch{}i=!0}return i}finally{Be=n,$n.transition=e}}return!1}function Tw(t,e,n){e=Wa(n,e),e=mS(t,e,1),t=Qr(t,e,1),e=on(),t!==null&&(sc(t,1,e),vn(t,e))}function at(t,e,n){if(t.tag===3)Tw(t,t,n);else for(;e!==null;){if(e.tag===3){Tw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xr===null||!Xr.has(i))){t=Wa(n,t),t=gS(e,t,1),e=Qr(e,t,1),t=on(),e!==null&&(sc(e,1,t),vn(e,t));break}}e=e.return}}function ER(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(jt&n)===n&&(Et===4||Et===3&&(jt&130023424)===jt&&500>ft()-Xy?to(t,0):Qy|=n),vn(t,e)}function OS(t,e){e===0&&(t.mode&1?(e=hh,hh<<=1,!(hh&130023424)&&(hh=4194304)):e=1);var n=on();t=hr(t,e),t!==null&&(sc(t,e,n),vn(t,n))}function SR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OS(t,n)}function PR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),OS(t,n)}var VS;VS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,dR(t,e,n);gn=!!(t.flags&131072)}else gn=!1,Xe&&e.flags&1048576&&zE(e,Ed,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;qh(t,e),t=e.pendingProps;var r=ja(e,Yt.current);ba(e,n),r=qy(null,e,i,t,r,n);var o=$y();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(i)?(o=!0,Td(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Uy(e),r.updater=vf,e.stateNode=r,r._reactInternals=e,ng(e,i,t,n),e=sg(null,e,i,!0,o,n)):(e.tag=0,Xe&&o&&Ly(e),nn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(qh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=AR(i),t=ni(i,t),r){case 0:e=rg(null,e,i,t,n);break e;case 1:e=hw(null,e,i,t,n);break e;case 11:e=uw(null,e,i,t,n);break e;case 14:e=cw(null,e,i,ni(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),rg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),hw(t,e,i,r,n);case 3:e:{if(wS(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,r=o.element,GE(t,e),Id(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Wa(Error(J(423)),e),e=dw(t,e,i,n,r);break e}else if(i!==r){r=Wa(Error(J(424)),e),e=dw(t,e,i,n,r);break e}else for(Sn=Yr(e.stateNode.containerInfo.firstChild),An=e,Xe=!0,ri=null,n=qE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),i===r){e=dr(t,e,n);break e}nn(t,e,i,n)}e=e.child}return e;case 5:return KE(e),t===null&&Jm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Km(i,r)?a=null:o!==null&&Km(i,o)&&(e.flags|=32),vS(t,e),nn(t,e,a,n),e.child;case 6:return t===null&&Jm(e),null;case 13:return TS(t,e,n);case 4:return zy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=za(e,null,i,n):nn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),uw(t,e,i,r,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(Sd,i._currentValue),i._currentValue=a,o!==null)if(di(o.value,a)){if(o.children===r.children&&!yn.current){e=dr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=or(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),eg(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),eg(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}nn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ba(e,n),r=Gn(r),i=i(r),e.flags|=1,nn(t,e,i,n),e.child;case 14:return i=e.type,r=ni(i,e.pendingProps),r=ni(i.type,r),cw(t,e,i,r,n);case 15:return yS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),qh(t,e),e.tag=1,_n(i)?(t=!0,Td(e)):t=!1,ba(e,n),pS(e,i,r),ng(e,i,r,n),sg(null,e,i,!0,t,n);case 19:return xS(t,e,n);case 22:return _S(t,e,n)}throw Error(J(156,e.tag))};function FS(t,e){return hE(t,e)}function IR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,i){return new IR(t,e,n,i)}function n_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AR(t){if(typeof t=="function")return n_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ty)return 11;if(t===xy)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")n_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ua:return no(n.children,r,o,e);case wy:a=8,r|=8;break;case Im:return t=qn(12,n,e,r|2),t.elementType=Im,t.lanes=o,t;case Am:return t=qn(13,n,e,r),t.elementType=Am,t.lanes=o,t;case Cm:return t=qn(19,n,e,r),t.elementType=Cm,t.lanes=o,t;case Kx:return xf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $x:a=10;break e;case Gx:a=9;break e;case Ty:a=11;break e;case xy:a=14;break e;case Or:a=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=qn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function no(t,e,n,i){return t=qn(7,t,i,e),t.lanes=n,t}function xf(t,e,n,i){return t=qn(22,t,i,e),t.elementType=Kx,t.lanes=n,t.stateNode={isHidden:!1},t}function $p(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function Gp(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ap(0),this.expirationTimes=Ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ap(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function i_(t,e,n,i,r,o,a,u,h){return t=new CR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=qn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(o),t}function kR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:la,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function jS(t){if(!t)return as;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(_n(n))return jE(t,n,e)}return e}function US(t,e,n,i,r,o,a,u,h){return t=i_(n,i,!0,t,r,o,a,u,h),t.context=jS(null),n=t.current,i=on(),r=Jr(n),o=or(i,r),o.callback=e??null,Qr(n,o,r),t.current.lanes=r,sc(t,r,i),vn(t,i),t}function Ef(t,e,n,i){var r=e.current,o=on(),a=Jr(r);return n=jS(n),e.context===null?e.context=n:e.pendingContext=n,e=or(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qr(r,e,a),t!==null&&(ai(t,r,a,o),Bh(t,r,a)),a}function Md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function r_(t,e){xw(t,e),(t=t.alternate)&&xw(t,e)}function bR(){return null}var zS=typeof reportError=="function"?reportError:function(t){console.error(t)};function s_(t){this._internalRoot=t}Sf.prototype.render=s_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Ef(t,e,null,null)};Sf.prototype.unmount=s_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ho(function(){Ef(null,t,null,null)}),e[cr]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=_E();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&wE(t)}};function o_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ew(){}function RR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Md(a);o.call(f)}}var a=US(e,i,t,0,null,!1,!1,"",Ew);return t._reactRootContainer=a,t[cr]=a.current,Ou(t.nodeType===8?t.parentNode:t),ho(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Md(h);u.call(f)}}var h=i_(t,0,!1,null,null,!1,!1,"",Ew);return t._reactRootContainer=h,t[cr]=h.current,Ou(t.nodeType===8?t.parentNode:t),ho(function(){Ef(e,h,n,i)}),h}function If(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Md(a);u.call(h)}}Ef(e,a,t,r)}else a=RR(n,e,t,r,i);return Md(a)}gE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jl(e.pendingLanes);n!==0&&(Py(e,n|1),vn(e,ft()),!(Le&6)&&(Ha=ft()+500,ws()))}break;case 13:ho(function(){var i=hr(t,1);if(i!==null){var r=on();ai(i,t,1,r)}}),r_(t,1)}};Iy=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=on();ai(e,t,134217728,n)}r_(t,134217728)}};yE=function(t){if(t.tag===13){var e=Jr(t),n=hr(t,e);if(n!==null){var i=on();ai(n,t,e,i)}r_(t,e)}};_E=function(){return Be};vE=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Fm=function(t,e,n){switch(e){case"input":if(Rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=gf(i);if(!r)throw Error(J(90));Yx(i),Rm(i,r)}}}break;case"textarea":Xx(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};sE=Jy;oE=ho;var NR={usingClientEntryPoint:!1,Events:[ac,fa,gf,iE,rE,Jy]},Gl={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LR={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uE(t),t===null?null:t.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||bR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{df=xh.inject(LR),Ci=xh}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NR;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o_(e))throw Error(J(200));return kR(t,e,null,n)};Rn.createRoot=function(t,e){if(!o_(t))throw Error(J(299));var n=!1,i="",r=zS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=i_(t,1,!1,null,null,n,!1,i,r),t[cr]=e.current,Ou(t.nodeType===8?t.parentNode:t),new s_(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=uE(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return ho(t)};Rn.hydrate=function(t,e,n){if(!Pf(e))throw Error(J(200));return If(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!o_(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=zS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=US(e,null,t,1,n??null,r,!1,o,a),t[cr]=e.current,Ou(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sf(e)};Rn.render=function(t,e,n){if(!Pf(e))throw Error(J(200));return If(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!Pf(t))throw Error(J(40));return t._reactRootContainer?(ho(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};Rn.unstable_batchedUpdates=Jy;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Pf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return If(t,e,n,!1,i)};Rn.version="18.3.1-next-f1338f8080-20240426";function BS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BS)}catch(t){console.error(t)}}BS(),Bx.exports=Rn;var WS=Bx.exports,Sw=WS;Sm.createRoot=Sw.createRoot,Sm.hydrateRoot=Sw.hydrateRoot;const MR="modulepreload",DR=function(t){return"/"+t},Pw={},Iw=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(h=>{if(h=DR(h),h in Pw)return;Pw[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":MR,f||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((_,E)=>{g.addEventListener("load",_),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(t,e)=>{const n=q.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>q.createElement("svg",{ref:m,...OR,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${VR(t)}`,u].join(" "),...f},[...e.map(([g,_])=>q.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=xe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=xe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=xe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=xe("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=xe("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=xe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=xe("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=xe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=xe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=xe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=xe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=xe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=xe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=xe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=xe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=xe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=xe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=xe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=xe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=xe("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=xe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=xe("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=xe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Fe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function fr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function cN(t,e){const n=Fe(t);return isNaN(e)?fr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const ZS=6048e5,hN=864e5,h_=6e4,d_=36e5,Eh=43200,bw=1440;let dN={};function uc(){return dN}function qu(t,e){var u,h,f,m;const n=uc(),i=(e==null?void 0:e.weekStartsOn)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=Fe(t),o=r.getDay(),a=(o<i?7:0)+o-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Dd(t){return qu(t,{weekStartsOn:1})}function YS(t){const e=Fe(t),n=e.getFullYear(),i=fr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=Dd(i),o=fr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Dd(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Rw(t){const e=Fe(t);return e.setHours(0,0,0,0),e}function Od(t){const e=Fe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function QS(t,e){const n=Rw(t),i=Rw(e),r=+n-Od(n),o=+i-Od(i);return Math.round((r-o)/hN)}function fN(t){const e=YS(t),n=fr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Dd(n)}function Zh(t,e){const n=Fe(t),i=Fe(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function pN(t){return fr(t,Date.now())}function mN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gN(t){if(!mN(t)&&typeof t!="number")return!1;const e=Fe(t);return!isNaN(Number(e))}function yN(t,e){const n=Fe(t),i=Fe(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function _N(t,e){const n=Fe(t),i=Fe(e),r=Nw(n,i),o=Math.abs(QS(n,i));n.setDate(n.getDate()-r*o);const a=+(Nw(n,i)===-r),u=r*(o-a);return u===0?0:u}function Nw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function f_(t){return e=>{const n=Math.trunc,i=n(e);return i===0?0:i}}function p_(t,e){return+Fe(t)-+Fe(e)}function vN(t,e,n){const i=p_(t,e)/d_;return f_()(i)}function wN(t,e,n){const i=p_(t,e)/h_;return f_()(i)}function TN(t){const e=Fe(t);return e.setHours(23,59,59,999),e}function xN(t){const e=Fe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function EN(t){const e=Fe(t);return+TN(e)==+xN(e)}function SN(t,e){const n=Fe(t),i=Fe(e),r=Zh(n,i),o=Math.abs(yN(n,i));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);let u=Zh(n,i)===-r;EN(Fe(t))&&o===1&&Zh(t,i)===1&&(u=!1),a=r*(o-Number(u))}return a===0?0:a}function PN(t,e,n){const i=p_(t,e)/1e3;return f_()(i)}function IN(t){const e=Fe(t),n=fr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const AN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CN=(t,e,n)=>{let i;const r=AN[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Na(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const kN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},RN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NN={date:Na({formats:kN,defaultWidth:"full"}),time:Na({formats:bN,defaultWidth:"full"}),dateTime:Na({formats:RN,defaultWidth:"full"})},LN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},MN=(t,e,n,i)=>LN[t];function Pi(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):a;r=t.formattingValues[u]||t.formattingValues[a]}else{const a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[u]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return r[o]}}const DN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ON={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FN={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zN=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},BN={ordinalNumber:zN,era:Pi({values:DN,defaultWidth:"wide"}),quarter:Pi({values:ON,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pi({values:VN,defaultWidth:"wide"}),day:Pi({values:FN,defaultWidth:"wide"}),dayPeriod:Pi({values:jN,defaultWidth:"wide",formattingValues:UN,defaultFormattingWidth:"wide"})};function Ii(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;const a=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?HN(u,g=>g.test(a)):WN(u,g=>g.test(a));let f;f=t.valueCallback?t.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(a.length);return{value:f,rest:m}}}function WN(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function HN(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XS(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const qN=/^(\d+)(th|st|nd|rd)?/i,$N=/\d+/i,GN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},KN={any:[/^b/i,/^(a|c)/i]},ZN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YN={any:[/1/i,/2/i,/3/i,/4/i]},QN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iL={ordinalNumber:XS({matchPattern:qN,parsePattern:$N,valueCallback:t=>parseInt(t,10)}),era:Ii({matchPatterns:GN,defaultMatchWidth:"wide",parsePatterns:KN,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:ZN,defaultMatchWidth:"wide",parsePatterns:YN,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ii({matchPatterns:QN,defaultMatchWidth:"wide",parsePatterns:XN,defaultParseWidth:"any"}),day:Ii({matchPatterns:JN,defaultMatchWidth:"wide",parsePatterns:eL,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:tL,defaultMatchWidth:"any",parsePatterns:nL,defaultParseWidth:"any"})},JS={code:"en-US",formatDistance:CN,formatLong:NN,formatRelative:MN,localize:BN,match:iL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rL(t){const e=Fe(t);return QS(e,IN(e))+1}function sL(t){const e=Fe(t),n=+Dd(e)-+fN(e);return Math.round(n/ZS)+1}function eP(t,e){var m,g,_,E;const n=Fe(t),i=n.getFullYear(),r=uc(),o=(e==null?void 0:e.firstWeekContainsDate)??((g=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(_=r.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,a=fr(t,0);a.setFullYear(i+1,0,o),a.setHours(0,0,0,0);const u=qu(a,e),h=fr(t,0);h.setFullYear(i,0,o),h.setHours(0,0,0,0);const f=qu(h,e);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function oL(t,e){var u,h,f,m;const n=uc(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=eP(t,e),o=fr(t,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),qu(o,e)}function aL(t,e){const n=Fe(t),i=+qu(n,e)-+oL(n,e);return Math.round(i/ZS)+1}function ze(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Lr={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return ze(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ze(n+1,2)},d(t,e){return ze(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ze(t.getHours()%12||12,e.length)},H(t,e){return ze(t.getHours(),e.length)},m(t,e){return ze(t.getMinutes(),e.length)},s(t,e){return ze(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return ze(r,e.length)}},ia={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lw={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return Lr.y(t,e)},Y:function(t,e,n,i){const r=eP(t,i),o=r>0?r:1-r;if(e==="YY"){const a=o%100;return ze(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):ze(o,e.length)},R:function(t,e){const n=YS(t);return ze(n,e.length)},u:function(t,e){const n=t.getFullYear();return ze(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return ze(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return ze(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Lr.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return ze(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=aL(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):ze(r,e.length)},I:function(t,e,n){const i=sL(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):ze(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Lr.d(t,e)},D:function(t,e,n){const i=rL(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):ze(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return ze(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return ze(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return ze(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=ia.noon:i===0?r=ia.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=ia.evening:i>=12?r=ia.afternoon:i>=4?r=ia.morning:r=ia.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Lr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Lr.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):ze(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):ze(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Lr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Lr.s(t,e)},S:function(t,e){return Lr.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Dw(i);case"XXXX":case"XX":return qs(i);case"XXXXX":case"XXX":default:return qs(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return Dw(i);case"xxxx":case"xx":return qs(i);case"xxxxx":case"xxx":default:return qs(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Mw(i,":");case"OOOO":default:return"GMT"+qs(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Mw(i,":");case"zzzz":default:return"GMT"+qs(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return ze(i,e.length)},T:function(t,e,n){const i=t.getTime();return ze(i,e.length)}};function Mw(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return o===0?n+String(r):n+String(r)+e+ze(o,2)}function Dw(t,e){return t%60===0?(t>0?"-":"+")+ze(Math.abs(t)/60,2):qs(t,e)}function qs(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=ze(Math.trunc(i/60),2),o=ze(i%60,2);return n+r+e+o}const Ow=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return Ow(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Ow(i,e)).replace("{{time}}",tP(r,e))},uL={p:tP,P:lL},cL=/^D+$/,hL=/^Y+$/,dL=["D","DD","YY","YYYY"];function fL(t){return cL.test(t)}function pL(t){return hL.test(t)}function mL(t,e,n){const i=gL(t,e,n);if(console.warn(i),dL.includes(t))throw new RangeError(i)}function gL(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_L=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vL=/^'([^]*?)'?$/,wL=/''/g,TL=/[a-zA-Z]/;function xL(t,e,n){var m,g,_,E;const i=uc(),r=i.locale??JS,o=i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=i.weekStartsOn??((E=(_=i.locale)==null?void 0:_.options)==null?void 0:E.weekStartsOn)??0,u=Fe(t);if(!gN(u))throw new RangeError("Invalid time value");let h=e.match(_L).map(R=>{const k=R[0];if(k==="p"||k==="P"){const N=uL[k];return N(R,r.formatLong)}return R}).join("").match(yL).map(R=>{if(R==="''")return{isToken:!1,value:"'"};const k=R[0];if(k==="'")return{isToken:!1,value:EL(R)};if(Lw[k])return{isToken:!0,value:R};if(k.match(TL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:R}});r.localize.preprocessor&&(h=r.localize.preprocessor(u,h));const f={firstWeekContainsDate:o,weekStartsOn:a,locale:r};return h.map(R=>{if(!R.isToken)return R.value;const k=R.value;(pL(k)||fL(k))&&mL(k,e,String(t));const N=Lw[k[0]];return N(u,k,r.localize,f)}).join("")}function EL(t){const e=t.match(vL);return e?e[1].replace(wL,"'"):t}function SL(t,e,n){const i=uc(),r=(n==null?void 0:n.locale)??i.locale??JS,o=2520,a=Zh(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let h,f;a>0?(h=Fe(e),f=Fe(t)):(h=Fe(t),f=Fe(e));const m=PN(f,h),g=(Od(f)-Od(h))/1e3,_=Math.round((m-g)/60);let E;if(_<2)return n!=null&&n.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,u):m<10?r.formatDistance("lessThanXSeconds",10,u):m<20?r.formatDistance("lessThanXSeconds",20,u):m<40?r.formatDistance("halfAMinute",0,u):m<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):_===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",_,u);if(_<45)return r.formatDistance("xMinutes",_,u);if(_<90)return r.formatDistance("aboutXHours",1,u);if(_<bw){const R=Math.round(_/60);return r.formatDistance("aboutXHours",R,u)}else{if(_<o)return r.formatDistance("xDays",1,u);if(_<Eh){const R=Math.round(_/bw);return r.formatDistance("xDays",R,u)}else if(_<Eh*2)return E=Math.round(_/Eh),r.formatDistance("aboutXMonths",E,u)}if(E=SN(f,h),E<12){const R=Math.round(_/Eh);return r.formatDistance("xMonths",R,u)}else{const R=E%12,k=Math.trunc(E/12);return R<3?r.formatDistance("aboutXYears",k,u):R<9?r.formatDistance("overXYears",k,u):r.formatDistance("almostXYears",k+1,u)}}function PL(t,e){return SL(t,pN(t),e)}function IL(t,e){const i=bL(t);let r;if(i.date){const h=RL(i.date,2);r=NL(h.restDateString,h.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let a=0,u;if(i.time&&(a=LL(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(u=ML(i.timezone),isNaN(u))return new Date(NaN)}else{const h=new Date(o+a),f=new Date(0);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}return new Date(o+a+u)}const Sh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},AL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,CL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bL(t){const e={},n=t.split(Sh.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Sh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Sh.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=Sh.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function RL(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function NL(t,e){if(e===null)return new Date(NaN);const n=t.match(AL);if(!n)return new Date(NaN);const i=!!n[4],r=Kl(n[1]),o=Kl(n[2])-1,a=Kl(n[3]),u=Kl(n[4]),h=Kl(n[5])-1;if(i)return jL(e,u,h)?DL(e,u,h):new Date(NaN);{const f=new Date(0);return!VL(e,o,a)||!FL(e,r)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(r,a)),f)}}function Kl(t){return t?parseInt(t):1}function LL(t){const e=t.match(CL);if(!e)return NaN;const n=Kp(e[1]),i=Kp(e[2]),r=Kp(e[3]);return UL(n,i,r)?n*d_+i*h_+r*1e3:NaN}function Kp(t){return t&&parseFloat(t.replace(",","."))||0}function ML(t){if(t==="Z")return 0;const e=t.match(kL);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return zL(i,r)?n*(i*d_+r*h_):NaN}function DL(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,o=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}const OL=[31,null,31,30,31,30,31,31,30,31,30,31];function nP(t){return t%400===0||t%4===0&&t%100!==0}function VL(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(OL[e]||(nP(t)?29:28))}function FL(t,e){return e>=1&&e<=(nP(t)?366:365)}function jL(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function UL(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function zL(t,e){return e>=0&&e<=59}function BL({isEditing:t,onToggleEdit:e,onExport:n,onImport:i,onOpenWallet:r,onOpenSettings:o,user:a,isAdmin:u,onLogin:h,onLogout:f}){const[m,g]=q.useState({days:0,hours:0,minutes:0}),_=q.useRef(null),[E,R]=q.useState(new Date("2026-05-20T00:00:00")),[k,N]=q.useState(new Date("2026-06-04T00:00:00"));q.useEffect(()=>{(async()=>{try{const{doc:C,getDoc:j}=await Iw(async()=>{const{doc:b,getDoc:I}=await Promise.resolve().then(()=>Tz);return{doc:b,getDoc:I}},void 0),{db:W}=await Iw(async()=>{const{db:b}=await Promise.resolve().then(()=>E9);return{db:b}},void 0),K=await j(C(W,"trips","settings"));if(K.exists()){const b=K.data();b.startDate&&R(new Date(b.startDate+"T00:00:00")),b.endDate&&N(new Date(b.endDate+"T00:00:00"))}}catch(C){console.error("Failed to fetch settings:",C)}})()},[]),q.useEffect(()=>{const T=()=>{const j=new Date;g({days:_N(E,j),hours:vN(E,j)%24,minutes:wN(E,j)%60})};T();const C=setInterval(T,6e4);return()=>clearInterval(C)},[E]);const P=T=>{var j;const C=(j=T.target.files)==null?void 0:j[0];C&&i&&i(C),_.current&&(_.current.value="")};return x.jsxs("header",{className:"relative bg-gradient-to-r from-indigo-600 to-purple-600 text-white pt-8 pb-16 px-4 shadow-lg overflow-hidden",children:[x.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-10 pointer-events-none",children:[x.jsx(a_,{className:"absolute top-10 right-10 w-24 h-24 rotate-12"}),x.jsx(HS,{className:"absolute bottom-4 left-10 w-32 h-32 -rotate-12"})]}),x.jsx("div",{className:"max-w-3xl mx-auto relative z-10",children:x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-start gap-6 md:gap-0",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-80",children:[x.jsx("span",{className:"text-xs font-bold tracking-widest uppercase bg-white/20 px-2 py-1 rounded",children:"Trip Plan"}),x.jsxs("span",{className:"text-xs",children:[E.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,".")," -",k.toLocaleDateString("zh-TW",{month:"2-digit",day:"2-digit"}).replace(/\//g,".")]})]}),x.jsx("h1",{className:"text-3xl font-bold mb-1 tracking-tight",children:"ACSM Annual Meeting"}),x.jsxs("div",{className:"flex items-center gap-2 text-indigo-100 text-sm",children:[x.jsx("span",{children:"SF"}),x.jsx("span",{className:"w-1 h-1 bg-indigo-300 rounded-full"}),x.jsx("span",{children:"SLC"}),x.jsx("span",{className:"w-1 h-1 bg-indigo-300 rounded-full"}),x.jsx("span",{children:"SAN"}),x.jsx("span",{className:"w-1 h-1 bg-indigo-300 rounded-full"}),x.jsx("span",{children:"LA"})]})]}),x.jsxs("div",{className:"flex flex-col items-start md:items-end gap-3 w-full md:w-auto",children:[x.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 text-center min-w-[120px] border border-white/30 shadow-xl",children:[x.jsx("div",{className:"text-[10px] uppercase tracking-widest font-bold text-indigo-100 mb-0.5",children:""}),x.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[x.jsx("span",{className:"text-2xl font-bold",children:m.days}),x.jsx("span",{className:"text-[10px] opacity-80",children:""}),x.jsx("span",{className:"text-lg font-bold",children:m.hours}),x.jsx("span",{className:"text-[10px] opacity-80",children:""})]})]}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[a?x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 border border-white/10 mr-2",children:[a.photoURL?x.jsx("img",{src:a.photoURL,alt:a.displayName||"User",className:"w-4 h-4 rounded-full"}):x.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400"}),x.jsx("span",{className:"text-xs font-medium",children:a.displayName||a.email}),x.jsx("button",{onClick:f,className:"ml-1 hover:text-red-200 transition-colors",title:"",children:x.jsx(ZR,{size:12})})]}):x.jsx("button",{onClick:h,className:"px-3 py-1.5 rounded-full bg-white text-indigo-600 hover:bg-indigo-50 text-xs font-bold transition-all shadow-md mr-2",children:"Google "}),x.jsx("input",{type:"file",ref:_,onChange:P,accept:".json",className:"hidden"}),x.jsxs("div",{className:"flex bg-black/20 rounded-full p-1 backdrop-blur-sm",children:[x.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-white/20 text-white/80 hover:text-white transition-colors",title:"",children:x.jsx($R,{size:16})}),x.jsx("button",{onClick:()=>{var T;return(T=_.current)==null?void 0:T.click()},className:"p-2 rounded-full hover:bg-white/20 text-white/80 hover:text-white transition-colors",title:"",children:x.jsx(uN,{size:16})})]}),x.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all border border-white/10",children:[x.jsx(yg,{size:16}),x.jsx("span",{className:"text-xs font-medium",children:""})]}),u&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:o,className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all border border-white/10",title:"",children:x.jsx(u_,{size:16})}),x.jsx("button",{onClick:e,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all shadow-lg ${t?"bg-amber-400 text-amber-900 ring-2 ring-amber-200":"bg-white text-indigo-600 hover:bg-indigo-50"}`,children:t?"":""})]})]})]})]})})]})}const m_=q.createContext({});function g_(t){const e=q.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cf=q.createContext(null),y_=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class WL extends q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HL({children:t,isPresent:e}){const n=q.useId(),i=q.useRef(null),r=q.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=q.useContext(y_);return q.useInsertionEffect(()=>{const{width:a,height:u,top:h,left:f}=r.current;if(e||!i.current||!a||!u)return;i.current.dataset.motionPopId=n;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),x.jsx(WL,{isPresent:e,childRef:i,sizeRef:r,children:q.cloneElement(t,{ref:i})})}const qL=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=g_($L),h=q.useId(),f=q.useCallback(g=>{u.set(g,!0);for(const _ of u.values())if(!_)return;i&&i()},[u,i]),m=q.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:f,register:g=>(u.set(g,!1),()=>u.delete(g))}),o?[Math.random(),f]:[n,f]);return q.useMemo(()=>{u.forEach((g,_)=>u.set(_,!1))},[n]),q.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=x.jsx(HL,{isPresent:n,children:t})),x.jsx(Cf.Provider,{value:m,children:t})};function $L(){return new Map}function iP(t=!0){const e=q.useContext(Cf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=q.useId();q.useEffect(()=>{t&&r(o)},[t]);const a=q.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Ph=t=>t.key||"";function Vw(t){const e=[];return q.Children.forEach(t,n=>{q.isValidElement(n)&&e.push(n)}),e}const __=typeof window<"u",rP=__?q.useLayoutEffect:q.useEffect,kf=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1})=>{const[u,h]=iP(a),f=q.useMemo(()=>Vw(t),[t]),m=a&&!u?[]:f.map(Ph),g=q.useRef(!0),_=q.useRef(f),E=g_(()=>new Map),[R,k]=q.useState(f),[N,P]=q.useState(f);rP(()=>{g.current=!1,_.current=f;for(let j=0;j<N.length;j++){const W=Ph(N[j]);m.includes(W)?E.delete(W):E.get(W)!==!0&&E.set(W,!1)}},[N,m.length,m.join("-")]);const T=[];if(f!==R){let j=[...f];for(let W=0;W<N.length;W++){const K=N[W],b=Ph(K);m.includes(b)||(j.splice(W,0,K),T.push(K))}o==="wait"&&T.length&&(j=T),P(Vw(j)),k(f);return}const{forceRender:C}=q.useContext(m_);return x.jsx(x.Fragment,{children:N.map(j=>{const W=Ph(j),K=a&&!u?!1:f===N||m.includes(W),b=()=>{if(E.has(W))E.set(W,!0);else return;let I=!0;E.forEach(M=>{M||(I=!1)}),I&&(C==null||C(),P(_.current),a&&(h==null||h()),i&&i())};return x.jsx(qL,{isPresent:K,initial:!g.current||n?void 0:!1,custom:K?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:K?void 0:b,children:j},W)})})},Cn=t=>t;let sP=Cn;function v_(t){let e;return()=>(e===void 0&&(e=t()),e)}const qa=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},ar=t=>t*1e3,lr=t=>t/1e3,GL={useManualTiming:!1};function KL(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),t()),f(a)}const h={schedule:(f,m=!1,g=!1)=>{const E=g&&i?e:n;return m&&o.add(f),E.has(f)||E.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,h.process(f))}};return h}const Ih=["read","resolveKeyframes","update","preRender","render","postRender"],ZL=40;function oP(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Ih.reduce((P,T)=>(P[T]=KL(o),P),{}),{read:u,resolveKeyframes:h,update:f,preRender:m,render:g,postRender:_}=a,E=()=>{const P=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(P-r.timestamp,ZL),1),r.timestamp=P,r.isProcessing=!0,u.process(r),h.process(r),f.process(r),m.process(r),g.process(r),_.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(E))},R=()=>{n=!0,i=!0,r.isProcessing||t(E)};return{schedule:Ih.reduce((P,T)=>{const C=a[T];return P[T]=(j,W=!1,K=!1)=>(n||R(),C.schedule(j,W,K)),P},{}),cancel:P=>{for(let T=0;T<Ih.length;T++)a[Ih[T]].cancel(P)},state:r,steps:a}}const{schedule:Qe,cancel:ls,state:Vt,steps:Zp}=oP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0),aP=q.createContext({strict:!1}),Fw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$a={};for(const t in Fw)$a[t]={isEnabled:e=>Fw[t].some(n=>!!e[n])};function YL(t){for(const e in t)$a[e]={...$a[e],...t[e]}}const QL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QL.has(t)}let lP=t=>!Vd(t);function XL(t){t&&(lP=e=>e.startsWith("on")?!Vd(e):t(e))}try{XL(require("@emotion/is-prop-valid").default)}catch{}function JL(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(lP(r)||n===!0&&Vd(r)||!e&&!Vd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function eM(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const bf=q.createContext({});function $u(t){return typeof t=="string"||Array.isArray(t)}function Rf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const w_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T_=["initial",...w_];function Nf(t){return Rf(t.animate)||T_.some(e=>$u(t[e]))}function uP(t){return!!(Nf(t)||t.variants)}function tM(t,e){if(Nf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||$u(n)?n:void 0,animate:$u(i)?i:void 0}}return t.inherit!==!1?e:{}}function nM(t){const{initial:e,animate:n}=tM(t,q.useContext(bf));return q.useMemo(()=>({initial:e,animate:n}),[jw(e),jw(n)])}function jw(t){return Array.isArray(t)?t.join(" "):t}const iM=Symbol.for("motionComponentSymbol");function wa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rM(t,e,n){return q.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):wa(n)&&(n.current=i))},[e])}const x_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sM="framerAppearId",cP="data-"+x_(sM),{schedule:E_}=oP(queueMicrotask,!1),hP=q.createContext({});function oM(t,e,n,i,r){var o,a;const{visualElement:u}=q.useContext(bf),h=q.useContext(aP),f=q.useContext(Cf),m=q.useContext(y_).reducedMotion,g=q.useRef(null);i=i||h.renderer,!g.current&&i&&(g.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const _=g.current,E=q.useContext(hP);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&aM(g.current,n,r,E);const R=q.useRef(!1);q.useInsertionEffect(()=>{_&&R.current&&_.update(n,f)});const k=n[cP],N=q.useRef(!!k&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,k))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,k)));return rP(()=>{_&&(R.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),E_.render(_.render),N.current&&_.animationState&&_.animationState.animateChanges())}),q.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,k)}),N.current=!1))}),_}function aM(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dP(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&wa(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}function dP(t){if(t)return t.options.allowProjection!==!1?t.projection:dP(t.parent)}function lM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&YL(t);function u(f,m){let g;const _={...q.useContext(y_),...f,layoutId:uM(f)},{isStatic:E}=_,R=nM(f),k=i(f,E);if(!E&&__){cM();const N=hM(_);g=N.MeasureLayout,R.visualElement=oM(r,k,_,e,N.ProjectionNode)}return x.jsxs(bf.Provider,{value:R,children:[g&&R.visualElement?x.jsx(g,{visualElement:R.visualElement,..._}):null,n(r,f,rM(k,R.visualElement,m),k,E,R.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const h=q.forwardRef(u);return h[iM]=r,h}function uM({layoutId:t}){const e=q.useContext(m_).id;return e&&t!==void 0?e+"-"+t:t}function cM(t,e){q.useContext(aP).strict}function hM(t){const{drag:e,layout:n}=$a;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const dM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function S_(t){return typeof t!="string"||t.includes("-")?!1:!!(dM.indexOf(t)>-1||/[A-Z]/u.test(t))}function Uw(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function P_(t,e,n,i){if(typeof e=="function"){const[r,o]=Uw(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=Uw(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const Tg=t=>Array.isArray(t),fM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),pM=t=>Tg(t)?t[t.length-1]||0:t,Zt=t=>!!(t&&t.getVelocity);function Yh(t){const e=Zt(t)?t.get():t;return fM(e)?e.toValue():e}function mM({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:gM(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const fP=t=>(e,n)=>{const i=q.useContext(bf),r=q.useContext(Cf),o=()=>mM(t,e,i,r);return n?o():g_(o)};function gM(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Yh(o[_]);let{initial:a,animate:u}=t;const h=Nf(t),f=uP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!Rf(g)){const _=Array.isArray(g)?g:[g];for(let E=0;E<_.length;E++){const R=P_(t,_[E]);if(R){const{transitionEnd:k,transition:N,...P}=R;for(const T in P){let C=P[T];if(Array.isArray(C)){const j=m?C.length-1:0;C=C[j]}C!==null&&(r[T]=C)}for(const T in k)r[T]=k[T]}}}return r}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],So=new Set(sl),pP=t=>e=>typeof e=="string"&&e.startsWith(t),mP=pP("--"),yM=pP("var(--"),I_=t=>yM(t)?_M.test(t.split("/*")[0].trim()):!1,_M=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,pr=(t,e,n)=>n>e?e:n<t?t:n,ol={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gu={...ol,transform:t=>pr(0,1,t)},Ah={...ol,default:1},cc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Dr=cc("deg"),bi=cc("%"),pe=cc("px"),vM=cc("vh"),wM=cc("vw"),zw={...bi,parse:t=>bi.parse(t)/100,transform:t=>bi.transform(t*100)},TM={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe},xM={rotate:Dr,rotateX:Dr,rotateY:Dr,rotateZ:Dr,scale:Ah,scaleX:Ah,scaleY:Ah,scaleZ:Ah,skew:Dr,skewX:Dr,skewY:Dr,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:Gu,originX:zw,originY:zw,originZ:pe},Bw={...ol,transform:Math.round},A_={...TM,...xM,zIndex:Bw,size:pe,fillOpacity:Gu,strokeOpacity:Gu,numOctaves:Bw},EM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SM=sl.length;function PM(t,e,n){let i="",r=!0;for(let o=0;o<SM;o++){const a=sl[o],u=t[a];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(a.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=gP(u,A_[a]);if(!h){r=!1;const m=EM[a]||a;i+=`${m}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function C_(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const h in e){const f=e[h];if(So.has(h)){a=!0;continue}else if(mP(h)){r[h]=f;continue}else{const m=gP(f,A_[h]);h.startsWith("origin")?(u=!0,o[h]=m):i[h]=m}}if(e.transform||(a||n?i.transform=PM(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=o;i.transformOrigin=`${h} ${f} ${m}`}}const IM={offset:"stroke-dashoffset",array:"stroke-dasharray"},AM={offset:"strokeDashoffset",array:"strokeDasharray"};function CM(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?IM:AM;t[o.offset]=pe.transform(-i);const a=pe.transform(e),u=pe.transform(n);t[o.array]=`${a} ${u}`}function Ww(t,e,n){return typeof t=="string"?t:pe.transform(e+n*t)}function kM(t,e,n){const i=Ww(e,t.x,t.width),r=Ww(n,t.y,t.height);return`${i} ${r}`}function k_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g){if(C_(t,f,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:E,dimensions:R}=t;_.transform&&(R&&(E.transform=_.transform),delete _.transform),R&&(r!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=kM(R,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),i!==void 0&&(_.scale=i),a!==void 0&&CM(_,a,u,h,!1)}const b_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),yP=()=>({...b_(),attrs:{}}),R_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _P(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const vP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wP(t,e,n,i){_P(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(vP.has(r)?r:x_(r),e.attrs[r])}const Fd={};function bM(t){Object.assign(Fd,t)}function TP(t,{layout:e,layoutId:n}){return So.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fd[t]||t==="opacity")}function N_(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(Zt(r[a])||e.style&&Zt(e.style[a])||TP(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function xP(t,e,n){const i=N_(t,e,n);for(const r in t)if(Zt(t[r])||Zt(e[r])){const o=sl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function RM(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Hw=["x","y","width","height","cx","cy","r"],NM={useVisualState:fP({scrapeMotionValuesFromProps:xP,createRenderState:yP,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(So.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<Hw.length;u++){const h=Hw[u];t[h]!==e[h]&&(a=!0)}a&&Qe.read(()=>{RM(n,i),Qe.render(()=>{k_(i,r,R_(n.tagName),t.transformTemplate),wP(n,i)})})}})},LM={useVisualState:fP({scrapeMotionValuesFromProps:N_,createRenderState:b_})};function EP(t,e,n){for(const i in e)!Zt(e[i])&&!TP(i,n)&&(t[i]=e[i])}function MM({transformTemplate:t},e){return q.useMemo(()=>{const n=b_();return C_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DM(t,e){const n=t.style||{},i={};return EP(i,n,t),Object.assign(i,MM(t,e)),i}function OM(t,e){const n={},i=DM(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function VM(t,e,n,i){const r=q.useMemo(()=>{const o=yP();return k_(o,e,R_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};EP(o,t.style,t),r.style={...o,...r.style}}return r}function FM(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(S_(n)?VM:OM)(i,o,a,n),f=JL(i,typeof n=="string",t),m=n!==q.Fragment?{...f,...h,ref:r}:{},{children:g}=i,_=q.useMemo(()=>Zt(g)?g.get():g,[g]);return q.createElement(n,{...m,children:_})}}function jM(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...S_(i)?NM:LM,preloadedFeatures:t,useRender:FM(r),createVisualElement:e,Component:i};return lM(a)}}function SP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Lf(t,e,n){const i=t.getProps();return P_(i,e,n!==void 0?n:i.custom,t)}const UM=v_(()=>window.ScrollTimeline!==void 0);class zM{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(UM()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class BM extends zM{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function L_(t,e){return t?t[e]||t.default||t:void 0}const xg=2e4;function PP(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<xg;)e+=n,i=t.next(e);return e>=xg?1/0:e}function M_(t){return typeof t=="function"}function qw(t,e){t.timeline=e,t.onfinish=null}const D_=t=>Array.isArray(t)&&typeof t[0]=="number",WM={linearEasing:void 0};function HM(t,e){const n=v_(t);return()=>{var i;return(i=WM[e])!==null&&i!==void 0?i:n()}}const jd=HM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),IP=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(qa(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function AP(t){return!!(typeof t=="function"&&jd()||!t||typeof t=="string"&&(t in Eg||jd())||D_(t)||Array.isArray(t)&&t.every(AP))}const tu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Eg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tu([0,.65,.55,1]),circOut:tu([.55,0,1,.45]),backIn:tu([.31,.01,.66,-.59]),backOut:tu([.33,1.53,.69,.99])};function CP(t,e){if(t)return typeof t=="function"&&jd()?IP(t,e):D_(t)?tu(t):Array.isArray(t)?t.map(n=>CP(n,e)||Eg.easeOut):Eg[t]}const ti={x:!1,y:!1};function kP(){return ti.x||ti.y}function qM(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function bP(t,e){const n=qM(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function $w(t){return e=>{e.pointerType==="touch"||kP()||t(e)}}function $M(t,e,n={}){const[i,r,o]=bP(t,n),a=$w(u=>{const{target:h}=u,f=e(u);if(typeof f!="function"||!h)return;const m=$w(g=>{f(g),h.removeEventListener("pointerleave",m)});h.addEventListener("pointerleave",m,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const RP=(t,e)=>e?t===e?!0:RP(t,e.parentElement):!1,O_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,GM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function KM(t){return GM.has(t.tagName)||t.tabIndex!==-1}const nu=new WeakSet;function Gw(t){return e=>{e.key==="Enter"&&t(e)}}function Yp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZM=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Gw(()=>{if(nu.has(n))return;Yp(n,"down");const r=Gw(()=>{Yp(n,"up")}),o=()=>Yp(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Kw(t){return O_(t)&&!kP()}function YM(t,e,n={}){const[i,r,o]=bP(t,n),a=u=>{const h=u.currentTarget;if(!Kw(u)||nu.has(h))return;nu.add(h);const f=e(u),m=(E,R)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",_),!(!Kw(E)||!nu.has(h))&&(nu.delete(h),typeof f=="function"&&f(E,{success:R}))},g=E=>{m(E,n.useGlobalTarget||RP(h,E.target))},_=E=>{m(E,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",_,r)};return i.forEach(u=>{!KM(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>ZM(f,r),r)}),o}function QM(t){return t==="x"||t==="y"?ti[t]?null:(ti[t]=!0,()=>{ti[t]=!1}):ti.x||ti.y?null:(ti.x=ti.y=!0,()=>{ti.x=ti.y=!1})}const NP=new Set(["width","height","top","left","right","bottom",...sl]);let Qh;function XM(){Qh=void 0}const Ri={now:()=>(Qh===void 0&&Ri.set(Vt.isProcessing||GL.useManualTiming?Vt.timestamp:performance.now()),Qh),set:t=>{Qh=t,queueMicrotask(XM)}};function V_(t,e){t.indexOf(e)===-1&&t.push(e)}function F_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class j_{constructor(){this.subscriptions=[]}add(e){return V_(this.subscriptions,e),()=>F_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function LP(t,e){return e?t*(1e3/e):0}const Zw=30,JM=t=>!isNaN(parseFloat(t));class eD{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=Ri.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ri.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=JM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new j_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zw);return LP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ku(t,e){return new eD(t,e)}function tD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ku(n))}function nD(t,e){const n=Lf(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=pM(o[a]);tD(t,a,u)}}function iD(t){return!!(Zt(t)&&t.add)}function Sg(t,e){const n=t.getValue("willChange");if(iD(n))return n.add(e)}function MP(t){return t.props[cP]}const DP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rD=1e-7,sD=12;function oD(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=DP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>rD&&++u<sD);return a}function hc(t,e,n,i){if(t===e&&n===i)return Cn;const r=o=>oD(o,0,1,t,n);return o=>o===0||o===1?o:DP(r(o),e,i)}const OP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VP=t=>e=>1-t(1-e),FP=hc(.33,1.53,.69,.99),U_=VP(FP),jP=OP(U_),UP=t=>(t*=2)<1?.5*U_(t):.5*(2-Math.pow(2,-10*(t-1))),z_=t=>1-Math.sin(Math.acos(t)),zP=VP(z_),BP=OP(z_),WP=t=>/^0[^.\s]+$/u.test(t);function aD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WP(t):!0}const gu=t=>Math.round(t*1e5)/1e5,B_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lD(t){return t==null}const uD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,W_=(t,e)=>n=>!!(typeof n=="string"&&uD.test(n)&&n.startsWith(t)||e&&!lD(n)&&Object.prototype.hasOwnProperty.call(n,e)),HP=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(B_);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},cD=t=>pr(0,255,t),Qp={...ol,transform:t=>Math.round(cD(t))},Xs={test:W_("rgb","red"),parse:HP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Qp.transform(t)+", "+Qp.transform(e)+", "+Qp.transform(n)+", "+gu(Gu.transform(i))+")"};function hD(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Pg={test:W_("#"),parse:hD,transform:Xs.transform},Ta={test:W_("hsl","hue"),parse:HP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+bi.transform(gu(e))+", "+bi.transform(gu(n))+", "+gu(Gu.transform(i))+")"},qt={test:t=>Xs.test(t)||Pg.test(t)||Ta.test(t),parse:t=>Xs.test(t)?Xs.parse(t):Ta.test(t)?Ta.parse(t):Pg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xs.transform(t):Ta.transform(t)},dD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(B_))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(dD))===null||n===void 0?void 0:n.length)||0)>0}const qP="number",$P="color",pD="var",mD="var(",Yw="${}",gD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(gD,h=>(qt.test(h)?(i.color.push(o),r.push($P),n.push(qt.parse(h))):h.startsWith(mD)?(i.var.push(o),r.push(pD),n.push(h)):(i.number.push(o),r.push(qP),n.push(parseFloat(h))),++o,Yw)).split(Yw);return{values:n,split:u,indexes:i,types:r}}function GP(t){return Zu(t).values}function KP(t){const{split:e,types:n}=Zu(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===qP?o+=gu(r[a]):u===$P?o+=qt.transform(r[a]):o+=r[a]}return o}}const yD=t=>typeof t=="number"?0:t;function _D(t){const e=GP(t);return KP(t)(e.map(yD))}const us={test:fD,parse:GP,createTransformer:KP,getAnimatableNone:_D},vD=new Set(["brightness","contrast","saturate","opacity"]);function wD(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(B_)||[];if(!i)return t;const r=n.replace(i,"");let o=vD.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const TD=/\b([a-z-]*)\(.*?\)/gu,Ig={...us,getAnimatableNone:t=>{const e=t.match(TD);return e?e.map(wD).join(" "):t}},xD={...A_,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:Ig,WebkitFilter:Ig},H_=t=>xD[t];function ZP(t,e){let n=H_(t);return n!==Ig&&(n=us),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ED=new Set(["auto","none","0"]);function SD(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!ED.has(o)&&Zu(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=ZP(n,r)}const Qw=t=>t===ol||t===pe,Xw=(t,e)=>parseFloat(t.split(", ")[e]),Jw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Xw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?Xw(o[1],t):0}},PD=new Set(["x","y","z"]),ID=sl.filter(t=>!PD.has(t));function AD(t){const e=[];return ID.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ga={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Jw(4,13),y:Jw(5,14)};Ga.translateX=Ga.x;Ga.translateY=Ga.y;const io=new Set;let Ag=!1,Cg=!1;function YP(){if(Cg){const t=Array.from(io).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=AD(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Cg=!1,Ag=!1,io.forEach(t=>t.complete()),io.clear()}function QP(){io.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Cg=!0)})}function CD(){QP(),YP()}class q_{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(io.add(this),Ag||(Ag=!0,Qe.read(QP),Qe.resolveKeyframes(YP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const h=i.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),io.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,io.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),kD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bD(t){const e=kD.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function JP(t,e,n=1){const[i,r]=bD(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return XP(a)?parseFloat(a):a}return I_(r)?JP(r,e,n+1):r}const eI=t=>e=>e.test(t),RD={test:t=>t==="auto",parse:t=>t},tI=[ol,pe,bi,Dr,wM,vM,RD],eT=t=>tI.find(eI(t));class nI extends q_{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),I_(f))){const m=JP(f,n.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!NP.has(i)||e.length!==2)return;const[r,o]=e,a=eT(r),u=eT(o);if(a!==u)if(Qw(a)&&Qw(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)aD(e[r])&&i.push(r);i.length&&SD(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ga[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Ga[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{n.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const tT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(us.test(t)||t==="0")&&!t.startsWith("url("));function ND(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function LD(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=tT(r,e),u=tT(o,e);return!a||!u?!1:ND(t)||(n==="spring"||M_(n))&&i}const MD=t=>t!==null;function Mf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(MD),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const DD=40;class iI{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ri.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CD(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ri.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!LD(e,i,r,o))if(a)this.options.duration=0;else{h&&h(Mf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tt=(t,e,n)=>t+(e-t)*n;function Xp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OD({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Xp(h,u,t+1/3),o=Xp(h,u,t),a=Xp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function Ud(t,e){return n=>n>0?e:t}const Jp=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},VD=[Pg,Xs,Ta],FD=t=>VD.find(e=>e.test(t));function nT(t){const e=FD(t);if(!e)return!1;let n=e.parse(t);return e===Ta&&(n=OD(n)),n}const iT=(t,e)=>{const n=nT(t),i=nT(e);if(!n||!i)return Ud(t,e);const r={...n};return o=>(r.red=Jp(n.red,i.red,o),r.green=Jp(n.green,i.green,o),r.blue=Jp(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),Xs.transform(r))},jD=(t,e)=>n=>e(t(n)),dc=(...t)=>t.reduce(jD),kg=new Set(["none","hidden"]);function UD(t,e){return kg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zD(t,e){return n=>tt(t,e,n)}function $_(t){return typeof t=="number"?zD:typeof t=="string"?I_(t)?Ud:qt.test(t)?iT:HD:Array.isArray(t)?rI:typeof t=="object"?qt.test(t)?iT:BD:Ud}function rI(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>$_(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function BD(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=$_(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function WD(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],h=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=h,r[a]++}return i}const HD=(t,e)=>{const n=us.createTransformer(e),i=Zu(t),r=Zu(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?kg.has(t)&&!r.values.length||kg.has(e)&&!i.values.length?UD(t,e):dc(rI(WD(i,r),r.values),n):Ud(t,e)};function sI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tt(t,e,n):$_(t)(t,e)}const qD=5;function oI(t,e,n){const i=Math.max(e-qD,0);return LP(n-t(i),e-i)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},em=.001;function $D({duration:t=ot.duration,bounce:e=ot.bounce,velocity:n=ot.velocity,mass:i=ot.mass}){let r,o,a=1-e;a=pr(ot.minDamping,ot.maxDamping,a),t=pr(ot.minDuration,ot.maxDuration,lr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,E=bg(f,a),R=Math.exp(-g);return em-_/E*R},o=f=>{const g=f*a*t,_=g*n+n,E=Math.pow(a,2)*Math.pow(f,2)*t,R=Math.exp(-g),k=bg(Math.pow(f,2),a);return(-r(f)+em>0?-1:1)*((_-E)*R)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-em+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=KD(r,o,u);if(t=ar(t),isNaN(h))return{stiffness:ot.stiffness,damping:ot.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const GD=12;function KD(t,e,n){let i=n;for(let r=1;r<GD;r++)i=i-t(i)/e(i);return i}function bg(t,e){return t*Math.sqrt(1-e*e)}const ZD=["duration","bounce"],YD=["stiffness","damping","mass"];function rT(t,e){return e.some(n=>t[n]!==void 0)}function QD(t){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...t};if(!rT(t,YD)&&rT(t,ZD))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*pr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ot.mass,stiffness:r,damping:o}}else{const n=$D(t);e={...e,...n,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function aI(t=ot.visualDuration,e=ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:m,duration:g,velocity:_,isResolvedFromDuration:E}=QD({...n,velocity:-lr(n.velocity||0)}),R=_||0,k=f/(2*Math.sqrt(h*m)),N=a-o,P=lr(Math.sqrt(h/m)),T=Math.abs(N)<5;i||(i=T?ot.restSpeed.granular:ot.restSpeed.default),r||(r=T?ot.restDelta.granular:ot.restDelta.default);let C;if(k<1){const W=bg(P,k);C=K=>{const b=Math.exp(-k*P*K);return a-b*((R+k*P*N)/W*Math.sin(W*K)+N*Math.cos(W*K))}}else if(k===1)C=W=>a-Math.exp(-P*W)*(N+(R+P*N)*W);else{const W=P*Math.sqrt(k*k-1);C=K=>{const b=Math.exp(-k*P*K),I=Math.min(W*K,300);return a-b*((R+k*P*N)*Math.sinh(I)+W*N*Math.cosh(I))/W}}const j={calculatedDuration:E&&g||null,next:W=>{const K=C(W);if(E)u.done=W>=g;else{let b=0;k<1&&(b=W===0?ar(R):oI(C,W,K));const I=Math.abs(b)<=i,M=Math.abs(a-K)<=r;u.done=I&&M}return u.value=u.done?a:K,u},toString:()=>{const W=Math.min(PP(j),xg),K=IP(b=>j.next(W*b).value,W,30);return W+"ms "+K}};return j}function sT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},E=I=>u!==void 0&&I<u||h!==void 0&&I>h,R=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let k=n*e;const N=g+k,P=a===void 0?N:a(N);P!==N&&(k=P-g);const T=I=>-k*Math.exp(-I/i),C=I=>P+T(I),j=I=>{const M=T(I),D=C(I);_.done=Math.abs(M)<=f,_.value=_.done?P:D};let W,K;const b=I=>{E(_.value)&&(W=I,K=aI({keyframes:[_.value,R(_.value)],velocity:oI(C,I,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return b(0),{calculatedDuration:null,next:I=>{let M=!1;return!K&&W===void 0&&(M=!0,j(I),b(I)),W!==void 0&&I>=W?K.next(I-W):(!M&&j(I),_)}}}const XD=hc(.42,0,1,1),JD=hc(0,0,.58,1),lI=hc(.42,0,.58,1),eO=t=>Array.isArray(t)&&typeof t[0]!="number",tO={linear:Cn,easeIn:XD,easeInOut:lI,easeOut:JD,circIn:z_,circInOut:BP,circOut:zP,backIn:U_,backInOut:jP,backOut:FP,anticipate:UP},oT=t=>{if(D_(t)){sP(t.length===4);const[e,n,i,r]=t;return hc(e,n,i,r)}else if(typeof t=="string")return tO[t];return t};function nO(t,e,n){const i=[],r=n||sI,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Cn:e;u=dc(h,u)}i.push(u)}return i}function iO(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(sP(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=nO(e,i,r),h=u.length,f=m=>{if(a&&m<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const _=qa(t[g],t[g+1],m);return u[g](_)};return n?m=>f(pr(t[0],t[o-1],m)):f}function rO(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=qa(0,e,i);t.push(tt(n,1,r))}}function sO(t){const e=[0];return rO(e,t.length-1),e}function oO(t,e){return t.map(n=>n*e)}function aO(t,e){return t.map(()=>e||lI).splice(0,t.length-1)}function zd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=eO(i)?i.map(oT):oT(i),o={done:!1,value:e[0]},a=oO(n&&n.length===e.length?n:sO(e),t),u=iO(a,e,{ease:Array.isArray(r)?r:aO(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const lO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Qe.update(e,!0),stop:()=>ls(e),now:()=>Vt.isProcessing?Vt.timestamp:Ri.now()}},uO={decay:sT,inertia:sT,tween:zd,keyframes:zd,spring:aI},cO=t=>t/100;class G_ extends iI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||q_,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=M_(n)?n:uO[n]||zd;let h,f;u!==zd&&typeof e[0]!="number"&&(h=dc(cO,sI(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=PP(m));const{calculatedDuration:g}=m,_=g+r,E=_*(i+1)-r;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:g,resolvedDuration:_,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=i;if(this.startTime===null)return o.next(0);const{delay:_,repeat:E,repeatType:R,repeatDelay:k,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-_*(this.speed>=0?1:-1),T=this.speed>=0?P<0:P>m;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let C=this.currentTime,j=o;if(E){const I=Math.min(this.currentTime,m)/g;let M=Math.floor(I),D=I%1;!D&&I>=1&&(D=1),D===1&&M--,M=Math.min(M,E+1),!!(M%2)&&(R==="reverse"?(D=1-D,k&&(D-=k/g)):R==="mirror"&&(j=a)),C=pr(0,1,D)*g}const W=T?{done:!1,value:h[0]}:j.next(C);u&&(W.value=u(W.value));let{done:K}=W;!T&&f!==null&&(K=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return b&&r!==void 0&&(W.value=Mf(h,this.options,r)),N&&N(W.value),b&&this.finish(),W}get duration(){const{resolved:e}=this;return e?lr(e.calculatedDuration):0}get time(){return lr(this.currentTime)}set time(e){e=ar(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=lr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=lO,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const hO=new Set(["opacity","clipPath","filter","transform"]);function dO(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=CP(u,r);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const fO=v_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Bd=10,pO=2e4;function mO(t){return M_(t.type)||t.type==="spring"||!AP(t.ease)}function gO(t,e){const n=new G_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<pO;)i=n.sample(o),r.push(i.value),o+=Bd;return{times:void 0,keyframes:r,duration:o-Bd,ease:"linear"}}const uI={anticipate:UP,backInOut:jP,circInOut:BP};function yO(t){return t in uI}class aT extends iI{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new nI(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&jd()&&yO(o)&&(o=uI[o]),mO(this.options)){const{onComplete:g,onUpdate:_,motionValue:E,element:R,...k}=this.options,N=gO(e,k);e=N.keyframes,e.length===1&&(e[1]=e[0]),i=N.duration,r=N.times,o=N.ease,a="keyframes"}const m=dO(u.owner.current,h,e,{...this.options,duration:i,times:r,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(qw(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Mf(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return lr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return lr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=ar(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Cn;const{animation:i}=n;qw(i,e)}return Cn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:_,...E}=this.options,R=new G_({...E,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),k=ar(this.time);f.setWithVelocity(R.sample(k-Bd).value,R.sample(k).value,Bd)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return fO()&&i&&hO.has(i)&&!h&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const _O={type:"spring",stiffness:500,damping:25,restSpeed:10},vO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wO={type:"keyframes",duration:.8},TO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xO=(t,{keyframes:e})=>e.length>2?wO:So.has(t)?t.startsWith("scale")?vO(e[1]):_O:TO;function EO({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}const K_=(t,e,n,i={},r,o)=>a=>{const u=L_(i,t)||{},h=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-ar(h);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};EO(u)||(m={...m,...xO(t,m)}),m.duration&&(m.duration=ar(m.duration)),m.repeatDelay&&(m.repeatDelay=ar(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!o&&e.get()!==void 0){const _=Mf(m.keyframes,u);if(_!==void 0)return Qe.update(()=>{m.onUpdate(_),m.onComplete()}),new BM([])}return!o&&aT.supports(m)?new aT(m):new G_(m)};function SO({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function cI(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...h}=e;i&&(a=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in h){const _=t.getValue(g,(o=t.latestValues[g])!==null&&o!==void 0?o:null),E=h[g];if(E===void 0||m&&SO(m,g))continue;const R={delay:n,...L_(a||{},g)};let k=!1;if(window.MotionHandoffAnimation){const P=MP(t);if(P){const T=window.MotionHandoffAnimation(P,g,Qe);T!==null&&(R.startTime=T,k=!0)}}Sg(t,g),_.start(K_(g,_,E,t.shouldReduceMotion&&NP.has(g)?{type:!1}:R,t,k));const N=_.animation;N&&f.push(N)}return u&&Promise.all(f).then(()=>{Qe.update(()=>{u&&nD(t,u)})}),f}function Rg(t,e,n={}){var i;const r=Lf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(cI(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:_}=o;return PO(t,e,m+f,g,_,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,m]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function PO(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(IO).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Rg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function IO(t,e){return t.sortNodePosition(e)}function AO(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Rg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Rg(t,e,n);else{const r=typeof e=="function"?Lf(t,e,n.custom):e;i=Promise.all(cI(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const CO=T_.length;function hI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?hI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<CO;n++){const i=T_[n],r=t.props[i];($u(r)||r===!1)&&(e[i]=r)}return e}const kO=[...w_].reverse(),bO=w_.length;function RO(t){return e=>Promise.all(e.map(({animation:n,options:i})=>AO(t,n,i)))}function NO(t){let e=RO(t),n=lT(),i=!0;const r=h=>(f,m)=>{var g;const _=Lf(t,m,h==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(_){const{transition:E,transitionEnd:R,...k}=_;f={...f,...k,...R}}return f};function o(h){e=h(t)}function a(h){const{props:f}=t,m=hI(t.parent)||{},g=[],_=new Set;let E={},R=1/0;for(let N=0;N<bO;N++){const P=kO[N],T=n[P],C=f[P]!==void 0?f[P]:m[P],j=$u(C),W=P===h?T.isActive:null;W===!1&&(R=N);let K=C===m[P]&&C!==f[P]&&j;if(K&&i&&t.manuallyAnimateOnMount&&(K=!1),T.protectedKeys={...E},!T.isActive&&W===null||!C&&!T.prevProp||Rf(C)||typeof C=="boolean")continue;const b=LO(T.prevProp,C);let I=b||P===h&&T.isActive&&!K&&j||N>R&&j,M=!1;const D=Array.isArray(C)?C:[C];let V=D.reduce(r(P),{});W===!1&&(V={});const{prevResolvedValues:U={}}=T,O={...U,...V},be=ee=>{I=!0,_.has(ee)&&(M=!0,_.delete(ee)),T.needsAnimating[ee]=!0;const G=t.getValue(ee);G&&(G.liveStyle=!1)};for(const ee in O){const G=V[ee],re=U[ee];if(E.hasOwnProperty(ee))continue;let X=!1;Tg(G)&&Tg(re)?X=!SP(G,re):X=G!==re,X?G!=null?be(ee):_.add(ee):G!==void 0&&_.has(ee)?be(ee):T.protectedKeys[ee]=!0}T.prevProp=C,T.prevResolvedValues=V,T.isActive&&(E={...E,...V}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(K&&b)||M)&&g.push(...D.map(ee=>({animation:ee,options:{type:P}})))}if(_.size){const N={};_.forEach(P=>{const T=t.getBaseTarget(P),C=t.getValue(P);C&&(C.liveStyle=!0),N[P]=T??null}),g.push({animation:N})}let k=!!g.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(k=!1),i=!1,k?e(g):Promise.resolve()}function u(h,f){var m;if(n[h].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(_=>{var E;return(E=_.animationState)===null||E===void 0?void 0:E.setActive(h,f)}),n[h].isActive=f;const g=a(h);for(const _ in n)n[_].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=lT(),i=!0}}}function LO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!SP(e,t):!1}function Bs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lT(){return{animate:Bs(!0),whileInView:Bs(),whileHover:Bs(),whileTap:Bs(),whileDrag:Bs(),whileFocus:Bs(),exit:Bs()}}class Ts{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MO extends Ts{constructor(e){super(e),e.animationState||(e.animationState=NO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let DO=0;class OO extends Ts{constructor(){super(...arguments),this.id=DO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VO={animation:{Feature:MO},exit:{Feature:OO}};function Yu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function fc(t){return{point:{x:t.pageX,y:t.pageY}}}const FO=t=>e=>O_(e)&&t(e,fc(e));function yu(t,e,n,i){return Yu(t,e,FO(n),i)}const uT=(t,e)=>Math.abs(t-e);function jO(t,e){const n=uT(t.x,e.x),i=uT(t.y,e.y);return Math.sqrt(n**2+i**2)}class dI{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=nm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=jO(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:R}=g,{timestamp:k}=Vt;this.history.push({...R,timestamp:k});const{onStart:N,onMove:P}=this.handlers;_||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=tm(_,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:E,onSessionEnd:R,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=nm(g.type==="pointercancel"?this.lastMoveEventInfo:tm(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,N),R&&R(g,N)},!O_(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=fc(e),u=tm(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Vt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,nm(u,this.history)),this.removeListeners=dc(yu(this.contextWindow,"pointermove",this.handlePointerMove),yu(this.contextWindow,"pointerup",this.handlePointerUp),yu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ls(this.updatePoint)}}function tm(t,e){return e?{point:e(t.point)}:t}function cT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nm({point:t},e){return{point:t,delta:cT(t,fI(e)),offset:cT(t,UO(e)),velocity:zO(e,.1)}}function UO(t){return t[0]}function fI(t){return t[t.length-1]}function zO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=fI(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ar(e)));)n--;if(!i)return{x:0,y:0};const o=lr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const pI=1e-4,BO=1-pI,WO=1+pI,mI=.01,HO=0-mI,qO=0+mI;function bn(t){return t.max-t.min}function $O(t,e,n){return Math.abs(t-e)<=n}function hT(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BO&&t.scale<=WO||isNaN(t.scale))&&(t.scale=1),(t.translate>=HO&&t.translate<=qO||isNaN(t.translate))&&(t.translate=0)}function _u(t,e,n,i){hT(t.x,e.x,n.x,i?i.originX:void 0),hT(t.y,e.y,n.y,i?i.originY:void 0)}function dT(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function GO(t,e,n){dT(t.x,e.x,n.x),dT(t.y,e.y,n.y)}function fT(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function vu(t,e,n){fT(t.x,e.x,n.x),fT(t.y,e.y,n.y)}function KO(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function pT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ZO(t,{top:e,left:n,bottom:i,right:r}){return{x:pT(t.x,n,r),y:pT(t.y,e,i)}}function mT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function YO(t,e){return{x:mT(t.x,e.x),y:mT(t.y,e.y)}}function QO(t,e){let n=.5;const i=bn(t),r=bn(e);return r>i?n=qa(e.min,e.max-i,t.min):i>r&&(n=qa(t.min,t.max-r,e.min)),pr(0,1,n)}function XO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ng=.35;function JO(t=Ng){return t===!1?t=0:t===!0&&(t=Ng),{x:gT(t,"left","right"),y:gT(t,"top","bottom")}}function gT(t,e,n){return{min:yT(t,e),max:yT(t,n)}}function yT(t,e){return typeof t=="number"?t:t[e]||0}const _T=()=>({translate:0,scale:1,origin:0,originPoint:0}),xa=()=>({x:_T(),y:_T()}),vT=()=>({min:0,max:0}),ht=()=>({x:vT(),y:vT()});function zn(t){return[t("x"),t("y")]}function gI({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function eV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function im(t){return t===void 0||t===1}function Lg({scale:t,scaleX:e,scaleY:n}){return!im(t)||!im(e)||!im(n)}function $s(t){return Lg(t)||yI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yI(t){return wT(t.x)||wT(t.y)}function wT(t){return t&&t!=="0%"}function Wd(t,e,n){const i=t-n,r=e*i;return n+r}function TT(t,e,n,i,r){return r!==void 0&&(t=Wd(t,r,i)),Wd(t,n,i)+e}function Mg(t,e=0,n=1,i,r){t.min=TT(t.min,e,n,i,r),t.max=TT(t.max,e,n,i,r)}function _I(t,{x:e,y:n}){Mg(t.x,e.translate,e.scale,e.originPoint),Mg(t.y,n.translate,n.scale,n.originPoint)}const xT=.999999999999,ET=1.0000000000001;function nV(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Sa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,_I(t,a)),i&&$s(o.latestValues)&&Sa(t,o.latestValues))}e.x<ET&&e.x>xT&&(e.x=1),e.y<ET&&e.y>xT&&(e.y=1)}function Ea(t,e){t.min=t.min+e,t.max=t.max+e}function ST(t,e,n,i,r=.5){const o=tt(t.min,t.max,r);Mg(t,e,n,o,i)}function Sa(t,e){ST(t.x,e.x,e.scaleX,e.scale,e.originX),ST(t.y,e.y,e.scaleY,e.scale,e.originY)}function vI(t,e){return gI(tV(t.getBoundingClientRect(),e))}function iV(t,e,n){const i=vI(t,n),{scroll:r}=e;return r&&(Ea(i.x,r.offset.x),Ea(i.y,r.offset.y)),i}const wI=({current:t})=>t?t.ownerDocument.defaultView:null,rV=new WeakMap;class sV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(fc(m).point)},o=(m,g)=>{const{drag:_,dragPropagation:E,onDragStart:R}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QM(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(N=>{let P=this.getAxisMotionValue(N).get()||0;if(bi.test(P)){const{projection:T}=this.visualElement;if(T&&T.layout){const C=T.layout.layoutBox[N];C&&(P=bn(C)*(parseFloat(P)/100))}}this.originPoint[N]=P}),R&&Qe.postRender(()=>R(m,g)),Sg(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:R,onDrag:k}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=g;if(E&&this.currentDirection===null){this.currentDirection=oV(N),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),h=()=>zn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new dI(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:wI(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Qe.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Ch(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=KO(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&wa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=ZO(r.layoutBox,n):this.constraints=!1,this.elastic=JO(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=XO(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=iV(i,r.root,this.visualElement.getTransformPagePoint());let a=YO(r.layout.layoutBox,o);if(n){const u=n(eV(a));this.hasMutatedConstraints=!!u,u&&(a=gI(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=zn(m=>{if(!Ch(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,R={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,R)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Sg(this.visualElement,e),i.start(K_(e,i,0,n,this.visualElement,!1))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:i}=this.getProps();if(!Ch(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!wa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};zn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();r[a]=QO({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),zn(a=>{if(!Ch(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(tt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;rV.set(this.visualElement,this);const e=this.visualElement.current,n=yu(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();wa(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Qe.read(i);const a=Yu(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(zn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Ng,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Ch(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function oV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class aV extends Ts{constructor(e){super(e),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new sV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}unmount(){this.removeGroupControls(),this.removeListeners()}}const PT=t=>(e,n)=>{t&&Qe.postRender(()=>t(e,n))};class lV extends Ts{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(e){this.session=new dI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:PT(e),onStart:PT(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Qe.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=yu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=IT(t,e.target.x),i=IT(t,e.target.y);return`${n}% ${i}%`}},uV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=us.parse(t);if(r.length>5)return i;const o=us.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=tt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class cV extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;bM(hV),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Xh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Qe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),E_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TI(t){const[e,n]=iP(),i=q.useContext(m_);return x.jsx(cV,{...t,layoutGroup:i,switchLayoutGroup:q.useContext(hP),isPresent:e,safeToRemove:n})}const hV={borderRadius:{...Zl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zl,borderTopRightRadius:Zl,borderBottomLeftRadius:Zl,borderBottomRightRadius:Zl,boxShadow:uV};function dV(t,e,n){const i=Zt(t)?t:Ku(t);return i.start(K_("",i,e,n)),i.animation}function fV(t){return t instanceof SVGElement&&t.tagName!=="svg"}const pV=(t,e)=>t.depth-e.depth;class mV{constructor(){this.children=[],this.isDirty=!1}add(e){V_(this.children,e),this.isDirty=!0}remove(e){F_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pV),this.isDirty=!1,this.children.forEach(e)}}function gV(t,e){const n=Ri.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ls(i),t(o-e))};return Qe.read(i,!0),()=>ls(i)}const xI=["TopLeft","TopRight","BottomLeft","BottomRight"],yV=xI.length,AT=t=>typeof t=="string"?parseFloat(t):t,CT=t=>typeof t=="number"||pe.test(t);function _V(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,vV(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,wV(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<yV;a++){const u=`border${xI[a]}Radius`;let h=kT(e,u),f=kT(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||CT(h)===CT(f)?(t[u]=Math.max(tt(AT(h),AT(f),i),0),(bi.test(f)||bi.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function kT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const vV=EI(0,.5,zP),wV=EI(.5,.95,Cn);function EI(t,e,n){return i=>i<t?0:i>e?1:n(qa(t,e,i))}function bT(t,e){t.min=e.min,t.max=e.max}function Un(t,e){bT(t.x,e.x),bT(t.y,e.y)}function RT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function NT(t,e,n,i,r){return t-=e,t=Wd(t,1/n,i),r!==void 0&&(t=Wd(t,1/r,i)),t}function TV(t,e=0,n=1,i=.5,r,o=t,a=t){if(bi.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=NT(t.min,e,n,u,r),t.max=NT(t.max,e,n,u,r)}function LT(t,e,[n,i,r],o,a){TV(t,e[n],e[i],e[r],e.scale,o,a)}const xV=["x","scaleX","originX"],EV=["y","scaleY","originY"];function MT(t,e,n,i){LT(t.x,e,xV,n?n.x:void 0,i?i.x:void 0),LT(t.y,e,EV,n?n.y:void 0,i?i.y:void 0)}function DT(t){return t.translate===0&&t.scale===1}function SI(t){return DT(t.x)&&DT(t.y)}function OT(t,e){return t.min===e.min&&t.max===e.max}function SV(t,e){return OT(t.x,e.x)&&OT(t.y,e.y)}function VT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function PI(t,e){return VT(t.x,e.x)&&VT(t.y,e.y)}function FT(t){return bn(t.x)/bn(t.y)}function jT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PV{constructor(){this.members=[]}add(e){V_(this.members,e),e.scheduleRender()}remove(e){if(F_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IV(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:_,skewX:E,skewY:R}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),g&&(i+=`rotateX(${g}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),R&&(i+=`skewY(${R}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const Gs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},iu=typeof window<"u"&&window.MotionDebug!==void 0,rm=["","X","Y","Z"],AV={visibility:"hidden"},UT=1e3;let CV=0;function sm(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function II(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=MP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Qe,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&II(i)}function AI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=CV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,iu&&(Gs.totalNodes=Gs.resolvedTargetDeltas=Gs.recalculatedProjection=0),this.nodes.forEach(RV),this.nodes.forEach(OV),this.nodes.forEach(VV),this.nodes.forEach(NV),iu&&window.MotionDebug.record(Gs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new mV)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new j_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fV(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=gV(_,250),Xh.hasAnimatedSinceResize&&(Xh.hasAnimatedSinceResize=!1,this.nodes.forEach(BT))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:E,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||BV,{onLayoutAnimationStart:N,onLayoutAnimationComplete:P}=m.getProps(),T=!this.targetLayout||!PI(this.targetLayout,R)||E,C=!_&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const j={...L_(k,"layout"),onPlay:N,onComplete:P};(m.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else _||BT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FV),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&II(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zT);return}this.isUpdating||this.nodes.forEach(MV),this.isUpdating=!1,this.nodes.forEach(DV),this.nodes.forEach(kV),this.nodes.forEach(bV),this.clearAllSnapshots();const u=Ri.now();Vt.delta=pr(0,1e3/60,u-Vt.timestamp),Vt.timestamp=u,Vt.isProcessing=!0,Zp.update.process(Vt),Zp.preRender.process(Vt),Zp.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,E_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LV),this.sharedNodes.forEach(jV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!SI(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||$s(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),WV(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return ht();const h=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(HV))){const{scroll:m}=this.root;m&&(Ea(h.x,m.offset.x),Ea(h.y,m.offset.y))}return h}removeElementScroll(a){var u;const h=ht();if(Un(h,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:_}=m;m!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&Un(h,a),Ea(h.x,g.offset.x),Ea(h.y,g.offset.y))}return h}applyTransform(a,u=!1){const h=ht();Un(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Sa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),$s(m.latestValues)&&Sa(h,m.latestValues)}return $s(this.latestValues)&&Sa(h,this.latestValues),h}removeTransform(a){const u=ht();Un(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!$s(f.latestValues))continue;Lg(f.latestValues)&&f.updateSnapshot();const m=ht(),g=f.measurePageBox();Un(m,g),MT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return $s(this.latestValues)&&MT(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),vu(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Un(this.target,this.layout.layoutBox),_I(this.target,this.targetDelta)):Un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),vu(this.relativeTargetOrigin,this.target,E.target),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}iu&&Gs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Lg(this.parent.latestValues)||yI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Un(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;nV(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ht());const{target:R}=u;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RT(this.prevProjectionDelta.x,this.projectionDelta.x),RT(this.prevProjectionDelta.y,this.projectionDelta.y)),_u(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==E||!jT(this.projectionDelta.x,this.prevProjectionDelta.x)||!jT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),iu&&Gs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xa(),this.projectionDelta=xa(),this.projectionDeltaWithTransform=xa()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=xa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=ht(),E=h?h.source:void 0,R=this.layout?this.layout.source:void 0,k=E!==R,N=this.getStack(),P=!N||N.members.length<=1,T=!!(k&&!P&&this.options.crossfade===!0&&!this.path.some(zV));this.animationProgress=0;let C;this.mixTargetDelta=j=>{const W=j/1e3;WT(g.x,a.x,W),WT(g.y,a.y,W),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UV(this.relativeTarget,this.relativeTargetOrigin,_,W),C&&SV(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ht()),Un(C,this.relativeTarget)),k&&(this.animationValues=m,_V(m,f,this.latestValues,W,T,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{Xh.hasAnimatedSinceResize=!0,this.currentAnimation=dV(0,UT,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&CI(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ht();const g=bn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=bn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Un(u,h),Sa(u,m),_u(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new PV),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&sm("z",a,f,this.animationValues);for(let m=0;m<rm.length;m++)sm(`rotate${rm[m]}`,a,f,this.animationValues),sm(`skew${rm[m]}`,a,f,this.animationValues);a.render();for(const m in f)a.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AV;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Yh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Yh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!$s(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=IV(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:E,y:R}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${R.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const k in Fd){if(_[k]===void 0)continue;const{correct:N,applyTo:P}=Fd[k],T=f.transform==="none"?_[k]:N(_[k],g);if(P){const C=P.length;for(let j=0;j<C;j++)f[P[j]]=T}else f[k]=T}return this.options.layoutId&&(f.pointerEvents=g===this?Yh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(zT),this.root.sharedNodes.clear()}}}function kV(t){t.updateLayout()}function bV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=bn(_);_.min=i[g].min,_.max=_.min+E}):CI(o,n.layoutBox,i)&&zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=bn(i[g]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=xa();_u(u,i,n.layoutBox);const h=xa();a?_u(h,t.applyTransform(r,!0),n.measuredBox):_u(h,i,n.layoutBox);const f=!SI(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:E}=g;if(_&&E){const R=ht();vu(R,n.layoutBox,_.layoutBox);const k=ht();vu(k,i,E.layoutBox),PI(R,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=R,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function RV(t){iu&&Gs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function NV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function LV(t){t.clearSnapshot()}function zT(t){t.clearMeasurements()}function MV(t){t.isLayoutDirty=!1}function DV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function BT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OV(t){t.resolveTargetDelta()}function VV(t){t.calcProjection()}function FV(t){t.resetSkewAndRotation()}function jV(t){t.removeLeadSnapshot()}function WT(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function HT(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function UV(t,e,n,i){HT(t.x,e.x,n.x,i),HT(t.y,e.y,n.y,i)}function zV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BV={duration:.45,ease:[.4,0,.1,1]},qT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),$T=qT("applewebkit/")&&!qT("chrome/")?Math.round:Cn;function GT(t){t.min=$T(t.min),t.max=$T(t.max)}function WV(t){GT(t.x),GT(t.y)}function CI(t,e,n){return t==="position"||t==="preserve-aspect"&&!$O(FT(e),FT(n),.2)}function HV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qV=AI({attachResizeListener:(t,e)=>Yu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),om={current:void 0},kI=AI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!om.current){const t=new qV({});t.mount(window),t.setOptions({layoutScroll:!0}),om.current=t}return om.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$V={pan:{Feature:lV},drag:{Feature:aV,ProjectionNode:kI,MeasureLayout:TI}};function KT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Qe.postRender(()=>o(e,fc(e)))}class GV extends Ts{mount(){const{current:e}=this.node;e&&(this.unmount=$M(e,n=>(KT(this.node,n,"Start"),i=>KT(this.node,i,"End"))))}unmount(){}}class KV extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dc(Yu(this.node.current,"focus",()=>this.onFocus()),Yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZT(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Qe.postRender(()=>o(e,fc(e)))}class ZV extends Ts{mount(){const{current:e}=this.node;e&&(this.unmount=YM(e,n=>(ZT(this.node,n,"Start"),(i,{success:r})=>ZT(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dg=new WeakMap,am=new WeakMap,YV=t=>{const e=Dg.get(t.target);e&&e(t)},QV=t=>{t.forEach(YV)};function XV({root:t,...e}){const n=t||document;am.has(n)||am.set(n,{});const i=am.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(QV,{root:t,...e})),i[r]}function JV(t,e,n){const i=XV(e);return Dg.set(t,n),i.observe(t),()=>{Dg.delete(t),i.unobserve(t)}}const e4={some:0,all:1};class t4 extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:e4[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return JV(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(n4(e,n))&&this.startObserver()}unmount(){}}function n4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const i4={inView:{Feature:t4},tap:{Feature:ZV},focus:{Feature:KV},hover:{Feature:GV}},r4={layout:{ProjectionNode:kI,MeasureLayout:TI}},Og={current:null},bI={current:!1};function s4(){if(bI.current=!0,!!__)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Og.current=t.matches;t.addListener(e),e()}else Og.current=!1}const o4=[...tI,qt,us],a4=t=>o4.find(eI(t)),YT=new WeakMap;function l4(t,e,n){for(const i in e){const r=e[i],o=n[i];if(Zt(r))t.addValue(i,r);else if(Zt(o))t.addValue(i,Ku(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Ku(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const QT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class u4{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=q_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Ri.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Qe.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:m}=a;this.onUpdate=m,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Nf(n),this.isVariantNode=uP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in _){const R=_[E];h[E]!==void 0&&Zt(R)&&R.set(h[E],!1)}}mount(e){this.current=e,YT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),bI.current||s4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Og.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){YT.delete(this.current),this.projection&&this.projection.unmount(),ls(this.notifyUpdate),ls(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=So.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Qe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $a){const n=$a[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<QT.length;i++){const r=QT[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=l4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ku(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XP(r)||WP(r))?r=parseFloat(r):!a4(r)&&us.test(n)&&(r=ZP(e,n)),this.setBaseTarget(e,Zt(r)?r.get():r)),Zt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=P_(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Zt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new j_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class RI extends u4{constructor(){super(...arguments),this.KeyframeResolver=nI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function c4(t){return window.getComputedStyle(t)}class h4 extends RI{constructor(){super(...arguments),this.type="html",this.renderInstance=_P}readValueFromInstance(e,n){if(So.has(n)){const i=H_(n);return i&&i.default||0}else{const i=c4(e),r=(mP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vI(e,n)}build(e,n,i){C_(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return N_(e,n,i)}}class d4 extends RI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(So.has(n)){const i=H_(n);return i&&i.default||0}return n=vP.has(n)?n:x_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return xP(e,n,i)}build(e,n,i){k_(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){wP(e,n,i,r)}mount(e){this.isSVGTag=R_(e.tagName),super.mount(e)}}const f4=(t,e)=>S_(t)?new d4(e):new h4(e,{allowProjection:t!==q.Fragment}),p4=jM({...VO,...i4,...$V,...r4},f4),cs=eM(p4),m4={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},g4=(t,e,n)=>{let i;const r=m4[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?i+"":i+"":i},y4={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},_4={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},v4={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},w4={date:Na({formats:y4,defaultWidth:"full"}),time:Na({formats:_4,defaultWidth:"full"}),dateTime:Na({formats:v4,defaultWidth:"full"})},T4={lastWeek:"''eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"''eeee p",other:"P"},x4=(t,e,n,i)=>T4[t],E4={narrow:["",""],abbreviated:["",""],wide:["",""]},S4={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},P4={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},I4={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},A4={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},C4={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},k4=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n+"";case"hour":return n+"";case"minute":return n+"";case"second":return n+"";default:return" "+n}},b4={ordinalNumber:k4,era:Pi({values:E4,defaultWidth:"wide"}),quarter:Pi({values:S4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pi({values:P4,defaultWidth:"wide"}),day:Pi({values:I4,defaultWidth:"wide"}),dayPeriod:Pi({values:A4,defaultWidth:"wide",formattingValues:C4,defaultFormattingWidth:"wide"})},R4=/^(\s*)?\d+(|||)?/i,N4=/\d+/i,L4={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},M4={any:[/^()/i,/^()/i]},D4={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},O4={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},V4={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},F4={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},j4={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},U4={any:[//i,//i,//i,//i,//i,//i,//i]},z4={any:/^(?|?||[]|?||?|)/i},B4={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},W4={ordinalNumber:XS({matchPattern:R4,parsePattern:N4,valueCallback:t=>parseInt(t,10)}),era:Ii({matchPatterns:L4,defaultMatchWidth:"wide",parsePatterns:M4,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:D4,defaultMatchWidth:"wide",parsePatterns:O4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ii({matchPatterns:V4,defaultMatchWidth:"wide",parsePatterns:F4,defaultParseWidth:"any"}),day:Ii({matchPatterns:j4,defaultMatchWidth:"wide",parsePatterns:U4,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:z4,defaultMatchWidth:"any",parsePatterns:B4,defaultParseWidth:"any"})},H4={code:"zh-TW",formatDistance:g4,formatLong:w4,formatRelative:x4,localize:b4,match:W4,options:{weekStartsOn:1,firstWeekContainsDate:4}};function q4({activity:t,isLast:e,isEditing:n,onEdit:i,onDelete:r}){const a=(u=>{switch(u){case"Plane":return a_;case"MapPin":return vg;case"Coffee":return qR;case"Camera":return jR;case"Train":return GS;case"Car":return UR;case"Sun":return wg;case"Moon":return QR;case"Briefcase":return FR;case"Utensils":return KS;case"CheckSquare":return qS;default:return Cw}})(t.iconName);return x.jsxs(cs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative flex gap-4 group/item",children:[!e&&x.jsx("div",{className:"absolute left-[15px] top-8 bottom-[-24px] w-0.5 bg-indigo-100 group-hover/item:bg-indigo-200 transition-colors"}),x.jsx("div",{className:"relative z-10 flex-shrink-0 w-8 h-8 bg-white border-2 border-indigo-100 rounded-full flex items-center justify-center text-indigo-500 shadow-sm group-hover/item:border-indigo-400 group-hover/item:scale-110 group-hover/item:shadow-md transition-all duration-300",children:x.jsx(a,{size:14})}),x.jsxs("div",{className:"flex-1 pb-6",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-2",children:[x.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded w-fit",children:t.time}),x.jsx("h4",{className:"font-semibold text-gray-800 text-base",children:t.title}),t.cost&&x.jsxs("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:["$",t.cost]})]}),n&&x.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[x.jsx("button",{onClick:i,className:"p-1 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded",title:"",children:x.jsx(rN,{size:14})}),x.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"",children:x.jsx(Af,{size:14})})]})]}),x.jsx("p",{className:"text-sm text-gray-600 mt-1.5 leading-relaxed",children:t.description}),t.attachments&&t.attachments.length>0&&x.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.attachments.map(u=>u.type==="image"?x.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"block w-24 h-24 rounded-lg overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors relative group/img",children:[x.jsx("img",{src:u.url,alt:u.label,className:"w-full h-full object-cover"}),x.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/10 transition-colors"})]},u.id):x.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-blue-600 bg-blue-50 px-2.5 py-1.5 rounded-md border border-blue-100 hover:bg-blue-100 transition-colors",children:[x.jsx(_g,{size:12}),u.label||""]},u.id))}),(t.tips||t.location)&&x.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[t.location&&x.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-gray-500 bg-white px-2.5 py-1.5 rounded-md border border-gray-200 w-fit hover:bg-gray-50 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:[x.jsx(vg,{size:12}),t.location]}),t.tips&&x.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100",children:[x.jsx(Cw,{size:14,className:"mt-0.5 flex-shrink-0"}),x.jsx("span",{className:"leading-relaxed",children:t.tips})]})]}),t.modifiedBy&&x.jsx("div",{className:"mt-2 flex justify-end",children:x.jsxs("span",{className:"text-[10px] text-gray-300",children:["Updated by ",t.modifiedBy.split("@")[0],"  ",t.modifiedAt?PL(new Date(t.modifiedAt),{addSuffix:!0,locale:H4}):""]})})]})]})}function NI(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const $4=1;function G4(t){return Object.freeze({__version:$4,map:t})}function LI(t,e){return Object.freeze({...t,...e})}const MI=q.createContext(null),DI=MI.Provider;function Df(){const t=q.useContext(MI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function OI(t){function e(n,i){const{instance:r,context:o}=t(n).current;return q.useImperativeHandle(i,()=>r),n.children==null?null:cd.createElement(DI,{value:o},n.children)}return q.forwardRef(e)}function K4(t){function e(n,i){const[r,o]=q.useState(!1),{instance:a}=t(n,o).current;q.useImperativeHandle(i,()=>a),q.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?WS.createPortal(n.children,u):null}return q.forwardRef(e)}function Z4(t){function e(n,i){const{instance:r}=t(n).current;return q.useImperativeHandle(i,()=>r),null}return q.forwardRef(e)}function Z_(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Of(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Y4(t,e){return function(i,r){const o=Df(),a=t(Of(i,o),o);return NI(o.map,i.attribution),Z_(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Vg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(lb,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,S,F;return F=function(){p=!1,v&&(S.apply(d,v),v=!1)},S=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},S}function m(s,l,d){var p=l[1],v=l[0],S=p-v;return s===p&&d?s:((s-v)%S+S)%S+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function R(s){return E(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function N(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function T(s,l){return s.replace(P,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function j(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var b=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-b));return b=l+d,window.setTimeout(s,d)}var M=window.requestAnimationFrame||K("RequestAnimationFrame")||I,D=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&M===I)s.call(l);else return M.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:E,splitWords:R,setOptions:k,getParamString:N,template:T,isArray:C,indexOf:j,emptyImageUrl:W,requestFn:M,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:U};function be(){}be.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Dt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,F=p._initHooks.length;S<F;S++)p._initHooks[S].call(this)}},l},be.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},be.mergeOptions=function(s){return r(this.prototype.options,s),this},be.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Dt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ge={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=R(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=R(s);for(var v=arguments.length===1,S=0,F=s.length;S<F;S++)v?this._off(s[S]):this._off(s[S],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,S;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,S=p.length;v<S;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var B=p[F];this._firingCount&&(B.fn=g,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var S=0,F=v.length;S<F;S++){var B=v[S],$=B.fn;B.once&&this.off(s,$,B.ctx),$.call(B.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var S=this._events&&this._events[s];if(S&&S.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,S=p.length;v<S;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=R(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ge.addEventListener=Ge.on,Ge.removeEventListener=Ge.clearAllEventListeners=Ge.off,Ge.addOneTimeEventListener=Ge.once,Ge.fireEvent=Ge.fire,Ge.hasEventListeners=Ge.listens;var ee=be.extend(Ge);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var re=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(s){s=X(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function X(s,l,d){return s instanceof G?s:C(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function fe(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}fe.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=X(s);else if(s=Ee(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=X(s):s=Ee(s),s instanceof fe?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return S&&F},overlaps:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return S&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Ee(X(l.x-p,l.y-v),X(d.x+p,d.y+v))},equals:function(s){return s?(s=Ee(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ee(s,l){return!s||s instanceof fe?s:new fe(s,l)}function We(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}We.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof he)p=s,v=s;else if(s instanceof We){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(ce(s)||se(s)):this;return!l&&!d?(this._southWest=new he(p.lat,p.lng),this._northEast=new he(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new We(new he(l.lat-p,l.lng-v),new he(d.lat+p,d.lng+v))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof he||"lat"in s?s=ce(s):s=se(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof We?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=se(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return S&&F},overlaps:function(s){s=se(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return S&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=se(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(s,l){return s instanceof We?s:new We(s,l)}function he(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}he.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return mt.distance(this,ce(s))},wrap:function(){return mt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return se([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ce(s,l,d){return s instanceof he?s:C(s)&&typeof s[0]!="object"?s.length===3?new he(s[0],s[1],s[2]):s.length===2?new he(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new he(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new he(s,l,d)}var Ke={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new fe(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new he(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var S=s.getSouthWest(),F=s.getNorthEast(),B=new he(S.lat-p,S.lng-v),$=new he(F.lat-p,F.lng-v);return new We(B,$)}},mt=r({},Ke,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,S=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),B=S*S+Math.cos(p)*Math.cos(v)*F*F,$=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*$}}),wr=6378137,Ps={R:wr,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new he((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=wr*Math.PI;return new fe([-s,-s],[s,s])}()};function fl(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}fl.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Tr(s,l,d,p){return new fl(s,l,d,p)}var Is=r({},mt,{code:"EPSG:3857",projection:Ps,transformation:function(){var s=.5/(Math.PI*Ps.R);return Tr(s,.5,-s,.5)}()}),Ic=r({},Is,{code:"EPSG:900913"});function Ac(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Co(s,l){var d="",p,v,S,F,B,$;for(p=0,S=s.length;p<S;p++){for(B=s[p],v=0,F=B.length;v<F;v++)$=B[v],d+=(v?"L":"M")+$.x+" "+$.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var As=document.documentElement.style,Cs="ActiveXObject"in window,It=Cs&&!document.addEventListener,At="msLaunchUri"in navigator&&!("documentMode"in document),xr=un("webkit"),Cc=un("android"),pl=un("android 2")||un("android 3"),up=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ks=Cc&&un("Google")&&up<537&&!("AudioNode"in window),ko=!!window.opera,ml=!At&&un("chrome"),bo=un("gecko")&&!xr&&!ko&&!Cs,cp=!ml&&un("safari"),kc=un("phantom"),gl="OTransition"in As,bc=navigator.platform.indexOf("Win")===0,Er=Cs&&"transition"in As,bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!pl,Ro="MozPerspective"in As,zi=!window.L_DISABLE_3D&&(Er||bs||Ro)&&!gl&&!kc,Sr=typeof orientation<"u"||un("mobile"),No=Sr&&xr,Rc=Sr&&bs,Pr=!window.PointerEvent&&window.MSPointerEvent,yl=!!(window.PointerEvent||Pr),Ct="ontouchstart"in window||!!window.TouchEvent,Nc=!window.L_NO_TOUCH&&(Ct||yl),Rs=Sr&&ko,Ns=Sr&&bo,hp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,dp=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),Ir=function(){return!!document.createElement("canvas").getContext}(),_l=!!(document.createElementNS&&Ac("svg").createSVGRect),fp=!!_l&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Lo=!_l&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Lc=navigator.platform.indexOf("Mac")===0,Mc=navigator.platform.indexOf("Linux")===0;function un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:Cs,ielt9:It,edge:At,webkit:xr,android:Cc,android23:pl,androidStock:ks,opera:ko,chrome:ml,gecko:bo,safari:cp,phantom:kc,opera12:gl,win:bc,ie3d:Er,webkit3d:bs,gecko3d:Ro,any3d:zi,mobile:Sr,mobileWebkit:No,mobileWebkit3d:Rc,msPointer:Pr,pointer:yl,touch:Nc,touchNative:Ct,mobileOpera:Rs,mobileGecko:Ns,retina:hp,passiveEvents:dp,canvas:Ir,svg:_l,vml:Lo,inlineSvg:fp,mac:Lc,linux:Mc},Dc=le.msPointer?"MSPointerDown":"pointerdown",Zn=le.msPointer?"MSPointerMove":"pointermove",vl=le.msPointer?"MSPointerUp":"pointerup",wl=le.msPointer?"MSPointerCancel":"pointercancel",Ls={touchstart:Dc,touchmove:Zn,touchend:vl,touchcancel:wl},Mo={touchstart:Tl,touchmove:Ln,touchend:Ln,touchcancel:Ln},Bi={},Oc=!1;function Vc(s,l,d){return l==="touchstart"&&Ms(),Mo[l]?(d=Mo[l].bind(this,d),s.addEventListener(Ls[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function pp(s,l,d){if(!Ls[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ls[l],d,!1)}function Do(s){Bi[s.pointerId]=s}function Fc(s){Bi[s.pointerId]&&(Bi[s.pointerId]=s)}function Oo(s){delete Bi[s.pointerId]}function Ms(){Oc||(document.addEventListener(Dc,Do,!0),document.addEventListener(Zn,Fc,!0),document.addEventListener(vl,Oo,!0),document.addEventListener(wl,Oo,!0),Oc=!0)}function Ln(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Bi)l.touches.push(Bi[d]);l.changedTouches=[l],s(l)}}function Tl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&gt(l),Ln(s,l)}function mp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var jc=200;function Uc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(S){if(S.detail!==1){p=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var F=Il(S);if(!(F.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!F.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var B=Date.now();B-d<=jc?(p++,p===2&&l(mp(S))):p=1,d=B}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function zc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ds=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wi=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xl=Wi==="webkitTransition"||Wi==="OTransition"?Wi+"End":"transitionend";function El(s){return typeof s=="string"?document.getElementById(s):s}function Ar(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Re(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Me(s){var l=s.parentNode;l&&l.removeChild(s)}function Xt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Mn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Dn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Os(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=fi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function oe(s,l){if(s.classList!==void 0)for(var d=R(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Os(s,l)){var S=fi(s);Hi(s,(S?S+" ":"")+l)}}function He(s,l){s.classList!==void 0?s.classList.remove(l):Hi(s,E((" "+fi(s)+" ").replace(" "+l+" "," ")))}function Hi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function fi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function cn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Bc(s,l)}function Bc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Vo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function qi(s,l,d){var p=l||new G(0,0);s.style[Ds]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function st(s,l){s._leaflet_pos=l,le.any3d?qi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function $i(s){return s._leaflet_pos||new G(0,0)}var Yn,wn,Fo;if("onselectstart"in document)Yn=function(){_e(window,"selectstart",gt)},wn=function(){Ue(window,"selectstart",gt)};else{var Cr=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yn=function(){if(Cr){var s=document.documentElement.style;Fo=s[Cr],s[Cr]="none"}},wn=function(){Cr&&(document.documentElement.style[Cr]=Fo,Fo=void 0)}}function jo(){_e(window,"dragstart",gt)}function Uo(){Ue(window,"dragstart",gt)}var Vs,pi;function Sl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(zo(),Vs=s,pi=s.style.outlineStyle,s.style.outlineStyle="none",_e(window,"keydown",zo))}function zo(){Vs&&(Vs.style.outlineStyle=pi,Vs=void 0,pi=void 0,Ue(window,"keydown",zo))}function Wc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function On(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var gp={__proto__:null,TRANSFORM:Ds,TRANSITION:Wi,TRANSITION_END:xl,get:El,getStyle:Ar,create:Re,remove:Me,empty:Xt,toFront:Mn,toBack:Dn,hasClass:Os,addClass:oe,removeClass:He,setClass:Hi,getClass:fi,setOpacity:cn,testProp:Vo,setTransform:qi,setPosition:st,getPosition:$i,get disableTextSelection(){return Yn},get enableTextSelection(){return wn},disableImageDrag:jo,enableImageDrag:Uo,preventOutline:Sl,restoreOutline:zo,getSizedParentNode:Wc,getScale:On};function _e(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Bo(s,v,l[v],d);else{l=R(l);for(var S=0,F=l.length;S<F;S++)Bo(s,l[S],d,p)}return this}var Jt="_leaflet_events";function Ue(s,l,d,p){if(arguments.length===1)kr(s),delete s[Jt];else if(l&&typeof l=="object")for(var v in l)Fs(s,v,l[v],d);else if(l=R(l),arguments.length===2)kr(s,function(B){return j(l,B)!==-1});else for(var S=0,F=l.length;S<F;S++)Fs(s,l[S],d,p);return this}function kr(s,l){for(var d in s[Jt]){var p=d.split(/\d/)[0];(!l||l(p))&&Fs(s,p,null,null,d)}}var Gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[Jt]&&s[Jt][v])return this;var S=function(B){return d.call(p||s,B||window.event)},F=S;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?S=Vc(s,l,S):le.touch&&l==="dblclick"?S=Uc(s,S):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Gi[l]||l,S,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(S=function(B){B=B||window.event,Cl(s,B)&&F(B)},s.addEventListener(Gi[l],S,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,S),s[Jt]=s[Jt]||{},s[Jt][v]=S}function Fs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var S=s[Jt]&&s[Jt][v];if(!S)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?pp(s,l,S):le.touch&&l==="dblclick"?zc(s,S):"removeEventListener"in s?s.removeEventListener(Gi[l]||l,S,!1):s.detachEvent("on"+l,S),s[Jt][v]=null}function Oe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Pl(s){return Bo(s,"wheel",Oe),this}function js(s){return _e(s,"mousedown touchstart dblclick contextmenu",Oe),s._leaflet_disable_click=!0,this}function gt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function mi(s){return gt(s),Oe(s),this}function Il(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Us(s,l){if(!l)return new G(s.clientX,s.clientY);var d=On(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var gi=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Al(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/gi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Cl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var zs={__proto__:null,on:_e,off:Ue,stopPropagation:Oe,disableScrollPropagation:Pl,disableClickPropagation:js,preventDefault:gt,stop:mi,getPropagationPath:Il,getMousePosition:Us,getWheelDelta:Al,isExternalTarget:Cl,addListener:_e,removeListener:Ue},kl=ee.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=$i(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),st(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=ee.extend({options:{crs:Is,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wi&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,xl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),S=s instanceof G?s:this.latLngToContainerPoint(s),F=S.subtract(v).multiplyBy(1-1/p),B=this.containerPointToLatLng(v.add(F));return this.setView(B,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():se(s);var d=X(l.paddingTopLeft||l.padding||[0,0]),p=X(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var S=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),B=this.project(s.getNorthEast(),v),$=this.unproject(F.add(B).divideBy(2).add(S),v);return{center:$,zoom:v}},fitBounds:function(s,l){if(s=se(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=X(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),S=this.getSize(),F=this._zoom;s=ce(s),l=l===void 0?F:l;var B=Math.max(S.x,S.y),$=B*this.getZoomScale(F,l),Y=v.distanceTo(p)||1,ne=1.42,me=ne*ne;function Pe(yt){var sh=yt?-1:1,nb=yt?$:B,ib=$*$-B*B+sh*me*me*Y*Y,rb=2*nb*me*Y,Tp=ib/rb,p0=Math.sqrt(Tp*Tp+1)-Tp,sb=p0<1e-9?-18:Math.log(p0);return sb}function en(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function kt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}function jn(yt){return en(yt)/kt(yt)}var dn=Pe(0);function ta(yt){return B*(kt(dn)/kt(dn+ne*yt))}function Xk(yt){return B*(kt(dn)*jn(dn+ne*yt)-en(dn))/me}function Jk(yt){return 1-Math.pow(1-yt,1.5)}var eb=Date.now(),d0=(Pe(1)-dn)/ne,tb=d.duration?1e3*d.duration:1e3*d0*.8;function f0(){var yt=(Date.now()-eb)/tb,sh=Jk(yt)*d0;yt<=1?(this._flyToFrame=V(f0,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(Xk(sh)/Y)),F),this.getScaleZoom(B/ta(sh),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),f0.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=se(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,se(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=X(l.paddingTopLeft||l.padding||[0,0]),p=X(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),S=this.project(s),F=this.getPixelBounds(),B=Ee([F.min.add(d),F.max.subtract(p)]),$=B.getSize();if(!B.contains(S)){this._enforcingBounds=!0;var Y=S.subtract(B.getCenter()),ne=B.extend(S).getSize().subtract($);v.x+=Y.x<0?-ne.x:ne.x,v.y+=Y.y<0?-ne.y:ne.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),S=p.subtract(v);return!S.x&&!S.y?this:(s.animate&&s.pan?this.panBy(S):(s.pan&&this._rawPanBy(S),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new he(l,d),v=p.toBounds(s.coords.accuracy*2),S=this._locateOptions;if(S.setView){var F=this.getBoundsZoom(v);this.setView(p,S.maxZoom?Math.min(F,S.maxZoom):F)}var B={latlng:p,bounds:v,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(B[$]=s.coords[$]);this.fire("locationfound",B)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Me(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Re("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new We(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=se(s),d=X(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),S=this.getMaxZoom(),F=s.getNorthWest(),B=s.getSouthEast(),$=this.getSize().subtract(d),Y=Ee(this.project(B,p),this.project(F,p)).getSize(),ne=le.any3d?this.options.zoomSnap:1,me=$.x/Y.x,Pe=$.y/Y.y,en=l?Math.max(me,Pe):Math.min(me,Pe);return p=this.getScaleZoom(en,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(v,Math.min(S,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(X(s),l)},layerPointToLatLng:function(s){var l=X(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(se(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Us(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=El(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,oe(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ar(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(s.markerPane,"leaflet-zoom-hide"),oe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){st(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){st(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ue:_e;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",S=s.target||s.srcElement,F=!1;S;){if(p=this._targets[h(S)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!Cl(S,s)||(d.push(p),v))||S===this._container)break;S=S.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Sl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var S=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&S.push(d[F]);v=S.concat(v)}if(v.length){l==="contextmenu"&&gt(s);var B=v[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=B.getLatLng&&(!B._radius||B._radius<=10);$.containerPoint=Y?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Y?B.getLatLng():this.layerPointToLatLng($.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,$,!0),$.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&j(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return $i(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ee([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),S=new fe(p.subtract(v),p.add(v)),F=this._getBoundsOffset(S,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ee(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),S=p.max.subtract(s.max),F=this._rebound(v.x,-S.x),B=this._rebound(v.y,-S.y);return new G(F,B)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){He(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ds,p=this._proxy.style[d];qi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();qi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&He(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wo(s,l){return new Se(s,l)}var hn=be.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return oe(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),yi=function(s){return new hn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Re("div",l+"control-container",this._container);function p(v,S){var F=l+v+" "+l+S;s[v+S]=Re("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Me(this._controlCorners[s]);Me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hc=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return hn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):He(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return He(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Re("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),js(l),Pl(l);var p=this._section=Re("section",s+"-list");d&&(this._map.on("click",this.collapse,this),_e(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Re("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),_e(v,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){gt(S),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Re("div",s+"-base",p),this._separator=Re("div",s+"-separator",p),this._overlaysList=Re("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xt(this._baseLayersList),Xt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),_e(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var S=document.createElement("span");l.appendChild(S),S.appendChild(p),S.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var S=s.length-1;S>=0;S--)l=s[S],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(S=0;S<v.length;S++)this._map.hasLayer(v[S])&&this._map.removeLayer(v[S]);for(S=0;S<p.length;S++)this._map.hasLayer(p[S])||this._map.addLayer(p[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,_e(s,"click",gt),this.expand();var l=this;setTimeout(function(){Ue(s,"click",gt),l._preventClick=!1})}}),qc=function(s,l,d){return new Hc(s,l,d)},Ki=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Re("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var S=Re("a",d,p);return S.innerHTML=s,S.href="#",S.title=l,S.setAttribute("role","button"),S.setAttribute("aria-label",l),js(S),_e(S,"click",mi),_e(S,"click",v,this),_e(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";He(this._zoomInButton,l),He(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ki,this.addControl(this.zoomControl))});var $c=function(s){return new Ki(s)},bl=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Re("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Re("div",l,d)),s.imperial&&(this._iScale=Re("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Rl=function(s){return new bl(s)},Nl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ho=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Nl+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),js(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Ho().addTo(this)});var qo=function(s){return new Ho(s)};hn.Layers=Hc,hn.Zoom=Ki,hn.Scale=bl,hn.Attribution=Ho,yi.layers=qc,yi.zoom=$c,yi.scale=Rl,yi.attribution=qo;var Tn=be.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(s,l){return s.addHandler(l,this),this};var Gc={Events:Ge},_i=le.touch?"touchstart mousedown":"mousedown",Qn=ee.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(_e(this._dragStartTarget,_i,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,_i,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Os(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Qn._dragging===this&&this.finishDrag();return}if(!(Qn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Qn._dragging=this,this._preventOutline&&Sl(this._element),jo(),Yn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Wc(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=$i(this._element),this._parentScale=On(d);var p=s.type==="mousedown";_e(document,p?"mousemove":"touchmove",this._onMove,this),_e(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,gt(s),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),st(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){He(document.body,"leaflet-dragging"),this._lastTarget&&(He(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Uo(),wn();var l=this._moved&&this._moving;this._moving=!1,Qn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ll(s,l,d){var p,v=[1,4,2,8],S,F,B,$,Y,ne,me,Pe;for(S=0,ne=s.length;S<ne;S++)s[S]._code=H(s[S],l);for(B=0;B<4;B++){for(me=v[B],p=[],S=0,ne=s.length,F=ne-1;S<ne;F=S++)$=s[S],Y=s[F],$._code&me?Y._code&me||(Pe=z(Y,$,me,l,d),Pe._code=H(Pe,l),p.push(Pe)):(Y._code&me&&(Pe=z(Y,$,me,l,d),Pe._code=H(Pe,l),p.push(Pe)),p.push($));s=p}return s}function Ml(s,l){var d,p,v,S,F,B,$,Y,ne;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=ce([0,0]),Pe=se(s),en=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());en<1700&&(me=$o(s));var kt=s.length,jn=[];for(d=0;d<kt;d++){var dn=ce(s[d]);jn.push(l.project(ce([dn.lat-me.lat,dn.lng-me.lng])))}for(B=$=Y=0,d=0,p=kt-1;d<kt;p=d++)v=jn[d],S=jn[p],F=v.y*S.x-S.y*v.x,$+=(v.x+S.x)*F,Y+=(v.y+S.y)*F,B+=F*3;B===0?ne=jn[0]:ne=[$/B,Y/B];var ta=l.unproject(X(ne));return ce([ta.lat+me.lat,ta.lng+me.lng])}function $o(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var S=ce(s[v]);l+=S.lat,d+=S.lng,p++}return ce([l/p,d/p])}var Go={__proto__:null,clipPolygon:Ll,polygonCenter:Ml,centroid:$o};function zt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=br(s,d),s}function Dl(s,l,d){return Math.sqrt(ve(s,l,d,!0))}function Kc(s,l,d){return ve(s,l,d)}function br(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var S,F=[];for(S=0;S<d;S++)v[S]&&F.push(s[S]);return F}function c(s,l,d,p,v){var S=0,F,B,$;for(B=p+1;B<=v-1;B++)$=ve(s[B],s[p],s[v],!0),$>S&&(F=B,S=$);S>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,S=s.length;p<S;p++)te(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<S-1&&d.push(s[S-1]),d}var w;function A(s,l,d,p,v){var S=p?w:H(s,d),F=H(l,d),B,$,Y;for(w=F;;){if(!(S|F))return[s,l];if(S&F)return!1;B=S||F,$=z(s,l,B,d,v),Y=H($,d),B===S?(s=$,S=Y):(l=$,F=Y)}}function z(s,l,d,p,v){var S=l.x-s.x,F=l.y-s.y,B=p.min,$=p.max,Y,ne;return d&8?(Y=s.x+S*($.y-s.y)/F,ne=$.y):d&4?(Y=s.x+S*(B.y-s.y)/F,ne=B.y):d&2?(Y=$.x,ne=s.y+F*($.x-s.x)/S):d&1&&(Y=B.x,ne=s.y+F*(B.x-s.x)/S),new G(Y,ne,v)}function H(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function ve(s,l,d,p){var v=l.x,S=l.y,F=d.x-v,B=d.y-S,$=F*F+B*B,Y;return $>0&&(Y=((s.x-v)*F+(s.y-S)*B)/$,Y>1?(v=d.x,S=d.y):Y>0&&(v+=F*Y,S+=B*Y)),F=s.x-v,B=s.y-S,p?F*F+B*B:new G(v,S)}function De(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ve(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),De(s)}function ct(s,l){var d,p,v,S,F,B,$,Y;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ce([0,0]),me=se(s),Pe=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Pe<1700&&(ne=$o(s));var en=s.length,kt=[];for(d=0;d<en;d++){var jn=ce(s[d]);kt.push(l.project(ce([jn.lat-ne.lat,jn.lng-ne.lng])))}for(d=0,p=0;d<en-1;d++)p+=kt[d].distanceTo(kt[d+1])/2;if(p===0)Y=kt[0];else for(d=0,S=0;d<en-1;d++)if(F=kt[d],B=kt[d+1],v=F.distanceTo(B),S+=v,S>p){$=(S-p)/v,Y=[B.x-$*(B.x-F.x),B.y-$*(B.y-F.y)];break}var dn=l.unproject(X(Y));return ce([dn.lat+ne.lat,dn.lng+ne.lng])}var Vn={__proto__:null,simplify:zt,pointToSegmentDistance:Dl,closestPointOnSegment:Kc,clipSegment:A,_getEdgeIntersection:z,_getBitCode:H,_sqClosestPointOnSegment:ve,isFlat:De,_flat:Ve,polylineCenter:ct},Xn={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new he(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},Fn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,S=Math.sqrt(1-v*v),F=S*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),S/2);return p=-d*Math.log(Math.max(B,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),S=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(S),B=0,$=.1,Y;B<15&&Math.abs($)>1e-7;B++)Y=v*Math.sin(F),Y=Math.pow((1-Y)/(1+Y),v/2),$=Math.PI/2-2*Math.atan(S*Y)-F,F+=$;return new he(F*l,s.x*l/d)}},vi={__proto__:null,LonLat:Xn,Mercator:Fn,SphericalMercator:Ps},Ko=r({},mt,{code:"EPSG:3395",projection:Fn,transformation:function(){var s=.5/(Math.PI*Fn.R);return Tr(s,.5,-s,.5)}()}),Zo=r({},mt,{code:"EPSG:4326",projection:Xn,transformation:Tr(1/180,1,-1/180,.5)}),bk=r({},Ke,{projection:Xn,transformation:Tr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ke.Earth=mt,Ke.EPSG3395=Ko,Ke.EPSG3857=Is,Ke.EPSG900913=Ic,Ke.EPSG4326=Zo,Ke.Simple=bk;var Jn=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yo=Jn.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),Rk=function(s,l){return new Yo(s,l)},Zi=Yo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Yo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Yo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new We;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),Nk=function(s,l){return new Zi(s,l)},Qo=be.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=X(p),S=X(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),S&&(s.style.marginLeft=-S.x+"px",s.style.marginTop=-S.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Lk(s){return new Qo(s)}var Ol=Qo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ol.imagePath!="string"&&(Ol.imagePath=this._detectIconPath()),(this.options.imagePath||Ol.imagePath)+Qo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var S=p.exec(d);return S&&S[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),l=Ar(s,"background-image")||Ar(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Gv=Tn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Qn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&He(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,S=$i(l._icon),F=d.getPixelBounds(),B=d.getPixelOrigin(),$=Ee(F.min._subtract(B).add(v),F.max._subtract(B).subtract(v));if(!$.contains(S)){var Y=X((Math.max($.max.x,S.x)-$.max.x)/(F.max.x-$.max.x)-(Math.min($.min.x,S.x)-$.min.x)/(F.min.x-$.min.x),(Math.max($.max.y,S.y)-$.max.y)/(F.max.y-$.max.y)-(Math.min($.min.y,S.y)-$.min.y)/(F.min.y-$.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),st(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=$i(l._icon),v=l._map.layerPointToLatLng(p);d&&st(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Zc=Jn.extend({options:{icon:new Ol,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),oe(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),S=!1;v!==this._shadow&&(this._removeShadow(),S=!0),v&&(oe(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&S&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Me(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&cn(this._icon,s),this._shadow&&cn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?X(l.iconSize):X(0,0),p=l.iconAnchor?X(l.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mk(s,l){return new Zc(s,l)}var Rr=Jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yc=Rr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Rr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Dk(s,l){return new Yc(s,l)}var yp=Yc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new We(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Rr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===mt.distance){var v=Math.PI/180,S=this._mRadius/mt.R/v,F=d.project([l+S,s]),B=d.project([l-S,s]),$=F.add(B).divideBy(2),Y=d.unproject($).lat,ne=Math.acos((Math.cos(S*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(ne)||ne===0)&&(ne=S/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:$.x-d.project([Y,s-ne]).x,this._radiusY=$.y-F.y}else{var me=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(me).x}this._updateBounds()}});function Ok(s,l,d){return new yp(s,l,d)}var Yi=Rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=ve,v,S,F=0,B=this._parts.length;F<B;F++)for(var $=this._parts[F],Y=1,ne=$.length;Y<ne;Y++){v=$[Y-1],S=$[Y];var me=p(s,v,S,!0);me<l&&(l=me,d=p(s,v,S))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ct(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new We,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return De(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=De(s),p=0,v=s.length;p<v;p++)d?(l[p]=ce(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof he,v=s.length,S,F;if(p){for(F=[],S=0;S<v;S++)F[S]=this._map.latLngToLayerPoint(s[S]),d.extend(F[S]);l.push(F)}else for(S=0;S<v;S++)this._projectLatlngs(s[S],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,S,F,B,$;for(d=0,v=0,S=this._rings.length;d<S;d++)for($=this._rings[d],p=0,F=$.length;p<F-1;p++)B=A($[p],$[p+1],s,p,!0),B&&(l[v]=l[v]||[],l[v].push(B[0]),(B[1]!==$[p+1]||p===F-2)&&(l[v].push(B[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=zt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,S,F,B,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,S=this._parts.length;d<S;d++)for(B=this._parts[d],p=0,F=B.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&Dl(s,B[v],B[p])<=$)return!0;return!1}});function Vk(s,l){return new Yi(s,l)}Yi._flat=Ve;var Xo=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ml(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Yi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof he&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Yi.prototype._setLatLngs.call(this,s),De(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return De(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,S;p<v;p++)S=Ll(this._rings[p],s,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,S,F,B,$,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(S=0,$=this._parts.length;S<$;S++)for(d=this._parts[S],F=0,Y=d.length,B=Y-1;F<Y;B=F++)p=d[F],v=d[B],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Yi.prototype._containsPoint.call(this,s,!0)}});function Fk(s,l){return new Xo(s,l)}var Qi=Zi.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var S=this.options;if(S.filter&&!S.filter(s))return this;var F=Qc(s,S);return F?(F.feature=eh(s),F.defaultOptions=F.options,this.resetStyle(F),S.onEachFeature&&S.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Qc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],S=l&&l.pointToLayer,F=l&&l.coordsToLatLng||_p,B,$,Y,ne;if(!p&&!d)return null;switch(d.type){case"Point":return B=F(p),Kv(S,s,B,l);case"MultiPoint":for(Y=0,ne=p.length;Y<ne;Y++)B=F(p[Y]),v.push(Kv(S,s,B,l));return new Zi(v);case"LineString":case"MultiLineString":return $=Xc(p,d.type==="LineString"?0:1,F),new Yi($,l);case"Polygon":case"MultiPolygon":return $=Xc(p,d.type==="Polygon"?1:2,F),new Xo($,l);case"GeometryCollection":for(Y=0,ne=d.geometries.length;Y<ne;Y++){var me=Qc({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);me&&v.push(me)}return new Zi(v);case"FeatureCollection":for(Y=0,ne=d.features.length;Y<ne;Y++){var Pe=Qc(d.features[Y],l);Pe&&v.push(Pe)}return new Zi(v);default:throw new Error("Invalid GeoJSON object.")}}function Kv(s,l,d,p){return s?s(l,d):new Zc(d,p&&p.markersInheritOptions&&p)}function _p(s){return new he(s[1],s[0],s[2])}function Xc(s,l,d){for(var p=[],v=0,S=s.length,F;v<S;v++)F=l?Xc(s[v],l-1,d):(d||_p)(s[v]),p.push(F);return p}function vp(s,l){return s=ce(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Jc(s,l,d,p){for(var v=[],S=0,F=s.length;S<F;S++)v.push(l?Jc(s[S],De(s[S])?0:l-1,d,p):vp(s[S],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Jo(s,l){return s.feature?r({},s.feature,{geometry:l}):eh(l)}function eh(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var wp={toGeoJSON:function(s){return Jo(this,{type:"Point",coordinates:vp(this.getLatLng(),s)})}};Zc.include(wp),yp.include(wp),Yc.include(wp),Yi.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=Jc(this._latlngs,l?1:0,!1,s);return Jo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Xo.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=l&&!De(this._latlngs[0]),p=Jc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Jo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Yo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Jo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var S=v.toGeoJSON(s);if(d)p.push(S.geometry);else{var F=eh(S);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?Jo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Zv(s,l){return new Qi(s,l)}var jk=Zv,th=Jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=se(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Mn(this._image),this},bringToBack:function(){return this._map&&Dn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=se(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Re("img");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;qi(this._image,d,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();st(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Uk=function(s,l,d){return new th(s,l,d)},Yv=th.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Re("video");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var F=Re("source");F.src=this._url[S],l.appendChild(F)}}});function zk(s,l,d){return new Yv(s,l,d)}var Qv=th.extend({_initImage:function(){var s=this._image=this._url;oe(s,"leaflet-image-layer"),this._zoomAnimated&&oe(s,"leaflet-zoom-animated"),this.options.className&&oe(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function Bk(s,l,d){return new Qv(s,l,d)}var wi=Jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof he||C(s))?(this._latlng=ce(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(a(Me,void 0,this._container),200)):Me(this._container),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mn(this._container),this},bringToBack:function(){return this._map&&Dn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Zi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=X(this.options.offset),d=this._getAnchor();this._zoomAnimated?st(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),Jn.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(k(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var nh=wi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,wi.prototype.openOn.call(this,s)},onAdd:function(s){wi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rr||this._source.on("preclick",Oe))},onRemove:function(s){wi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rr||this._source.off("preclick",Oe))},getEvents:function(){var s=wi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Re("div",s+"-content-wrapper",l);if(this._contentNode=Re("div",s+"-content",d),js(l),Pl(this._contentNode),_e(l,"contextmenu",Oe),this._tipContainer=Re("div",s+"-tip-container",l),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Re("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',_e(p,"click",function(v){gt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,S="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",oe(s,S)):He(s,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();st(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Ar(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new G(this._containerLeft,-d-this._containerBottom);v._add($i(this._container));var S=s.layerPointToContainerPoint(v),F=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||F),$=X(this.options.autoPanPaddingBottomRight||F),Y=s.getSize(),ne=0,me=0;S.x+p+$.x>Y.x&&(ne=S.x+p-Y.x+$.x),S.x-ne-B.x<0&&(ne=S.x-B.x),S.y+d+$.y>Y.y&&(me=S.y+d-Y.y+$.y),S.y-me-B.y<0&&(me=S.y-B.y),(ne||me)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,me]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Wk=function(s,l){return new nh(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,d){return this._initOverlay(nh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Jn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(nh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Zi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){mi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ih=wi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){wi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){wi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=wi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,S=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),B=this.options.direction,$=v.offsetWidth,Y=v.offsetHeight,ne=X(this.options.offset),me=this._getAnchor();B==="top"?(l=$/2,d=Y):B==="bottom"?(l=$/2,d=0):B==="center"?(l=$/2,d=Y/2):B==="right"?(l=0,d=Y/2):B==="left"?(l=$,d=Y/2):F.x<S.x?(B="right",l=0,d=Y/2):(B="left",l=$+(ne.x+me.x)*2,d=Y/2),s=s.subtract(X(l,d,!0)).add(ne).add(me),He(v,"leaflet-tooltip-right"),He(v,"leaflet-tooltip-left"),He(v,"leaflet-tooltip-top"),He(v,"leaflet-tooltip-bottom"),oe(v,"leaflet-tooltip-"+B),st(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&cn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Hk=function(s,l){return new ih(s,l)};Se.include({openTooltip:function(s,l,d){return this._initOverlay(ih,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Jn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ih,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Zi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(_e(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),_e(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Xv=Qo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Xt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=X(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function qk(s){return new Xv(s)}Qo.Default=Ol;var Vl=Jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Me(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,S;p<v;p++)S=l[p].style.zIndex,l[p]!==this._container&&S&&(d=s(d,+S));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){cn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var S=Math.min(1,(s-v.loaded)/200);cn(v.el,S),S<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Me(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Me(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),S=Math.floor(l/2),F=d-1,B=new G(+v,+S);B.z=+F;var $=this._tileCoordsToKey(B),Y=this._tiles[$];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),F>p?this._retainParent(v,S,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var S=2*l;S<2*l+2;S++){var F=new G(v,S);F.z=d+1;var B=this._tileCoordsToKey(F),$=this._tiles[B];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(v,S,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var S=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||S)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?qi(s.el,v,p):st(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),S=l.getSize().divideBy(p*2);return new fe(v.subtract(S),v.add(S))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),S=v.getCenter(),F=[],B=this.options.keepBuffer,$=new fe(v.getBottomLeft().subtract([B,-B]),v.getTopRight().add([B,-B]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ne=this._tiles[Y].coords;(ne.z!==this._tileZoom||!$.contains(new G(ne.x,ne.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var me=v.min.y;me<=v.max.y;me++)for(var Pe=v.min.x;Pe<=v.max.x;Pe++){var en=new G(Pe,me);if(en.z=this._tileZoom,!!this._isValidTile(en)){var kt=this._tiles[this._tileCoordsToKey(en)];kt?kt.current=!0:F.push(en)}}if(F.sort(function(dn,ta){return dn.distanceTo(S)-ta.distanceTo(S)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var jn=document.createDocumentFragment();for(Pe=0;Pe<F.length;Pe++)this._addTile(F[Pe],jn);this._level.el.appendChild(jn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return se(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),S=l.unproject(p,s.z),F=l.unproject(v,s.z);return[S,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new We(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Me(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){oe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&cn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,s,null,v)),st(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(cn(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(oe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function $k(s){return new Vl(s)}var ea=Vl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return _e(d,"load",a(this._tileOnLoad,this,l,d)),_e(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return T(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=W;var d=this._tiles[s].coords;Me(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",W),Vl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===W))return Vl.prototype._tileReady.call(this,s,l,d)}});function Jv(s,l){return new ea(s,l)}var e0=ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&le.retina?2:1,S=this.getTileSize();d.width=S.x*v,d.height=S.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ea.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ee(d.project(l[0]),d.project(l[1])),v=p.min,S=p.max,F=(this._wmsVersion>=1.3&&this._crs===Zo?[v.y,v.x,S.y,S.x]:[v.x,v.y,S.x,S.y]).join(","),B=ea.prototype.getTileUrl.call(this,s);return B+N(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function Gk(s,l){return new e0(s,l)}ea.WMS=e0,Jv.wms=Gk;var Xi=Jn.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),S=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?qi(this._container,S,d):st(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),t0=Xi.extend({options:{tolerance:0},getEvents:function(){var s=Xi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");_e(s,"mousemove",this._onMouseMove,this),_e(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Me(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;st(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Xi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,S,F=s._parts,B=F.length,$=this._ctx;if(B){for($.beginPath(),d=0;d<B;d++){for(p=0,v=F[d].length;p<v;p++)S=F[d][p],$[p?"lineTo":"moveTo"](S.x,S.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(He(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(oe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function n0(s){return le.canvas?new t0(s):null}var Fl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Kk={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Xi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Fl("shape");oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Fl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Me(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Fl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Fl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Mn(s._container)},_bringToBack:function(s){Dn(s._container)}},rh=le.vml?Fl:Ac,jl=Xi.extend({_initContainer:function(){this._container=rh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=rh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Me(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),st(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=rh("path");s.options.className&&oe(l,s.options.className),s.options.interactive&&oe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Me(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Co(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",S=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,S)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Mn(s._path)},_bringToBack:function(s){Dn(s._path)}});le.vml&&jl.include(Kk);function i0(s){return le.svg||le.vml?new jl(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&n0(s)||i0(s)}});var r0=Xo.extend({initialize:function(s,l){Xo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=se(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Zk(s,l){return new r0(s,l)}jl.create=rh,jl.pointsToPath=Co,Qi.geometryToLayer=Qc,Qi.coordsToLatLng=_p,Qi.coordsToLatLngs=Xc,Qi.latLngToCoords=vp,Qi.latLngsToCoords=Jc,Qi.getFeature=Jo,Qi.asFeature=eh,Se.mergeOptions({boxZoom:!0});var s0=Tn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yn(),jo(),this._startPoint=this._map.mouseEventToContainerPoint(s),_e(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),d=l.getSize();st(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Me(this._box),He(this._container,"leaflet-crosshair")),wn(),Uo(),Ue(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new We(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",s0),Se.mergeOptions({doubleClickZoom:!0});var o0=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Se.addInitHook("addHandler","doubleClickZoom",o0),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var a0=Tn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Qn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){He(this._map._container,"leaflet-grab"),He(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=se(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,S=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(S+d)?v:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,B=v.multiplyBy(F/S),$=B.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,$),ne=B.multiplyBy(Y/$),me=Y/(d.inertiaDeceleration*F),Pe=ne.multiplyBy(-me/2).round();!Pe.x&&!Pe.y?l.fire("moveend"):(Pe=l._limitOffset(Pe,l.options.maxBounds),V(function(){l.panBy(Pe,{duration:me,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",a0),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var l0=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),_e(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=X(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(X(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;mi(s)}}});Se.addInitHook("addHandler","keyboard",l0),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var u0=Tn.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Al(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),mi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,S=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?S:-S))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Se.addInitHook("addHandler","scrollWheelZoom",u0);var Yk=600;Se.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var c0=Tn.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",gt),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Yk),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ue(document,"touchend",gt),Ue(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Se.addInitHook("addHandler","tapHold",c0),Se.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var h0=Tn.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){He(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),gt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var S=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&S.x===0&&S.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(F,this,!0),gt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",h0),Se.BoxZoom=s0,Se.DoubleClickZoom=o0,Se.Drag=a0,Se.Keyboard=l0,Se.ScrollWheelZoom=u0,Se.TapHold=c0,Se.TouchZoom=h0,n.Bounds=fe,n.Browser=le,n.CRS=Ke,n.Canvas=t0,n.Circle=yp,n.CircleMarker=Yc,n.Class=be,n.Control=hn,n.DivIcon=Xv,n.DivOverlay=wi,n.DomEvent=zs,n.DomUtil=gp,n.Draggable=Qn,n.Evented=ee,n.FeatureGroup=Zi,n.GeoJSON=Qi,n.GridLayer=Vl,n.Handler=Tn,n.Icon=Qo,n.ImageOverlay=th,n.LatLng=he,n.LatLngBounds=We,n.Layer=Jn,n.LayerGroup=Yo,n.LineUtil=Vn,n.Map=Se,n.Marker=Zc,n.Mixin=Gc,n.Path=Rr,n.Point=G,n.PolyUtil=Go,n.Polygon=Xo,n.Polyline=Yi,n.Popup=nh,n.PosAnimation=kl,n.Projection=vi,n.Rectangle=r0,n.Renderer=Xi,n.SVG=jl,n.SVGOverlay=Qv,n.TileLayer=ea,n.Tooltip=ih,n.Transformation=fl,n.Util=O,n.VideoOverlay=Yv,n.bind=a,n.bounds=Ee,n.canvas=n0,n.circle=Ok,n.circleMarker=Dk,n.control=yi,n.divIcon=qk,n.extend=r,n.featureGroup=Nk,n.geoJSON=Zv,n.geoJson=jk,n.gridLayer=$k,n.icon=Lk,n.imageOverlay=Uk,n.latLng=ce,n.latLngBounds=se,n.layerGroup=Rk,n.map=Wo,n.marker=Mk,n.point=X,n.polygon=Fk,n.polyline=Vk,n.popup=Wk,n.rectangle=Zk,n.setOptions=k,n.stamp=h,n.svg=i0,n.svgOverlay=Bk,n.tileLayer=Jv,n.tooltip=Hk,n.transformation=Tr,n.version=i,n.videoOverlay=zk;var Qk=window.L;n.noConflict=function(){return window.L=Qk,this},window.L=n})})(Vg,Vg.exports);var al=Vg.exports;const Y_=bx(al);function Vf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Ff(t,e){return e==null?function(i,r){const o=q.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=q.useRef();o.current||(o.current=t(i,r));const a=q.useRef(i),{instance:u}=o.current;return q.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function VI(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function FI(t){return function(n){const i=Df(),r=t(Of(n,i),i);return NI(i.map,n.attribution),Z_(r.current,n.eventHandlers),VI(r.current,i),r}}function Q4(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function X4(t){return function(n){const i=Df(),r=t(Of(n,i),i);return Z_(r.current,n.eventHandlers),VI(r.current,i),Q4(r.current,n),r}}function J4(t,e){const n=Ff(t,e),i=FI(n);return OI(i)}function e3(t,e){const n=Ff(t),i=Y4(n,e);return K4(i)}function t3(t,e){const n=Ff(t,e),i=X4(n);return OI(i)}function n3(t,e){const n=Ff(t,e),i=FI(n);return Z4(i)}function i3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function r3(){return Df().map}function Fg(){return Fg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fg.apply(this,arguments)}function s3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=q.useState({className:r,id:o,style:u}),[E,R]=q.useState(null);q.useImperativeHandle(g,()=>(E==null?void 0:E.map)??null,[E]);const k=q.useCallback(P=>{if(P!==null&&E===null){const T=new al.Map(P,m);n!=null&&f!=null?T.setView(n,f):t!=null&&T.fitBounds(t,e),h!=null&&T.whenReady(h),R(G4(T))}},[]);q.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const N=E?cd.createElement(DI,{value:E},i):a??null;return cd.createElement("div",Fg({},_,{ref:k}),N)}const o3=q.forwardRef(s3),a3=J4(function({position:e,...n},i){const r=new al.Marker(e,n);return Vf(r,LI(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),l3=t3(function({positions:e,...n},i){const r=new al.Polyline(e,n);return Vf(r,LI(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),u3=e3(function(e,n){const i=new al.Popup(e,n.overlayContainer);return Vf(i,n)},function(e,n,{position:i},r){q.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function h(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),c3=n3(function({url:e,...n},i){const r=new al.TileLayer(e,Of(n,i));return Vf(r,i)},function(e,n,i){i3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),h3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",d3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let f3=Y_.icon({iconUrl:h3,shadowUrl:d3,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Y_.Marker.prototype.options.icon=f3;const p3=({coords:t})=>{const e=r3();return q.useEffect(()=>{if(t.length>0){const n=Y_.latLngBounds(t);e.fitBounds(n,{padding:[50,50]})}},[t,e]),null},m3=({activities:t,className:e="h-[300px] w-full rounded-xl overflow-hidden"})=>{const n=t.filter(o=>o.coordinates),i=n.map(o=>[o.coordinates.lat,o.coordinates.lng]);if(n.length===0)return x.jsxs("div",{className:`${e} bg-gray-100 flex items-center justify-center text-gray-400 flex-col gap-2`,children:[x.jsx(vg,{className:"w-8 h-8 opacity-50"}),x.jsx("span",{className:"text-sm",children:""})]});const r=i.length>0?i[0]:[37.7749,-122.4194];return x.jsx("div",{className:e,children:x.jsxs(o3,{center:r,zoom:13,scrollWheelZoom:!1,className:"h-full w-full z-0",children:[x.jsx(c3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((o,a)=>x.jsx(a3,{position:[o.coordinates.lat,o.coordinates.lng],children:x.jsx(u3,{children:x.jsxs("div",{className:"font-sans",children:[x.jsx("div",{className:"font-bold text-indigo-600",children:o.time}),x.jsx("div",{className:"font-medium",children:o.title}),x.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o.location}),x.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${o.coordinates.lat},${o.coordinates.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-blue-500 mt-2 hover:underline",children:[x.jsx(tN,{className:"w-3 h-3"}),"Google Maps "]})]})})},a)),i.length>1&&x.jsx(l3,{positions:i,color:"#4f46e5",weight:3,opacity:.7,dashArray:"5, 10"}),x.jsx(p3,{coords:i})]})})};function jI(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=jI(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function La(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=jI(t))&&(i&&(i+=" "),i+=e);return i}function g3({day:t,isExpanded:e,onToggle:n,isEditing:i,onAddActivity:r,onUpdateActivity:o,onRemoveActivity:a}){const[u,h]=q.useState(!1),[f,m]=q.useState(!1),g=_=>{switch(_){case"SF":return"border-l-blue-500";case"SLC":return"border-l-purple-500";case"SAN":return"border-l-orange-500";case"LA":return"border-l-slate-500";default:return"border-l-gray-500"}};return x.jsxs("div",{className:La("bg-white rounded-xl shadow-sm border overflow-hidden transition-all duration-300 border-l-4",g(t.city),e?"shadow-md ring-1 ring-indigo-50 border-indigo-100":"hover:shadow-md"),children:[x.jsxs("div",{onClick:n,className:"p-5 cursor-pointer hover:bg-gray-50 flex items-start justify-between group select-none",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:t.cityLabel}),x.jsx("button",{onClick:_=>{_.stopPropagation(),m(!f)},className:`p-1.5 rounded-full transition-colors ${f?"bg-indigo-100 text-indigo-600":"hover:bg-gray-100 text-gray-400"}`,title:f?"":"",children:f?x.jsx(KR,{size:20}):x.jsx(YR,{size:20})}),x.jsx("button",{onClick:_=>{_.stopPropagation(),h(!u)},className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-400 transition-colors",title:"",children:x.jsx(JR,{size:20})}),x.jsx("span",{className:"text-sm text-gray-500 font-mono font-medium",children:t.date})]}),x.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-indigo-600 transition-colors",children:t.title}),x.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-1",children:t.summary})]}),x.jsx("div",{className:La("ml-4 text-gray-400 transition-transform duration-300",e&&"rotate-180 text-indigo-500"),children:x.jsx(BR,{size:20})})]}),e&&x.jsx("div",{className:"border-t border-gray-100",children:x.jsxs("div",{className:"bg-gray-50/50 p-5",children:[f?x.jsx(m3,{activities:t.activities}):x.jsx("div",{className:"space-y-2",children:t.activities.map((_,E)=>x.jsx(q4,{activity:_,isLast:E===t.activities.length-1,isEditing:i,onEdit:()=>o==null?void 0:o(E,_),onDelete:()=>a==null?void 0:a(E)},E))}),i&&x.jsxs("button",{onClick:r,className:"mt-4 w-full py-2 border-2 border-dashed border-indigo-200 rounded-lg text-indigo-500 font-medium hover:bg-indigo-50 hover:border-indigo-300 transition-colors flex items-center justify-center gap-2",children:[x.jsx(l_,{size:18}),""]})]})})]})}const lm=[{id:"day1",date:"2026/05/20 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"14:00 (TPE)",title:"",description:"",type:"flight",iconName:"Plane",coordinates:{lat:25.0797,lng:121.2342}},{time:"16:30 (TPE)",title:"",description:" JX012  ()",type:"flight",iconName:"Plane"},{time:"12:30 (SFO)",title:" SFO ",description:"",type:"transport",iconName:"MapPin",tips:" 1.5-2 ",coordinates:{lat:37.6213,lng:-122.379}},{time:"14:30",title:"",description:" BART ()  Powell St.  Uber/Lyft",type:"transport",iconName:"Train",tips:" Union SquareBART "},{time:"16:00",title:" Check-in & ",description:"",type:"hotel",iconName:"Moon"},{time:"18:00",title:"",description:" Ferry Building Marketplace ",type:"food",iconName:"Utensils",location:"1 Ferry Building, San Francisco",coordinates:{lat:37.7955,lng:-122.3937}}]},{id:"day2",date:"2026/05/21 ()",city:"SF",cityLabel:"/",title:"Apple Park",summary:" Apple ParkGoogle ",activities:[{time:"08:30",title:"",description:" (Turo  Hertz) Cupertino",type:"transport",iconName:"Car",tips:" 50 "},{time:"10:00",title:"Apple Park Visitor Center",description:"AR ",type:"sightseeing",iconName:"MapPin",location:"10600 N Tantau Ave, Cupertino",tips:" T-shirt",coordinates:{lat:37.3349,lng:-122.009}},{time:"12:30",title:"",description:" Main Street Cupertino ",type:"food",iconName:"Utensils"},{time:"14:00",title:"Googleplex & Android Statues",description:" Mountain View  Google ",type:"sightseeing",iconName:"Camera",location:"1600 Amphitheatre Pkwy, Mountain View",coordinates:{lat:37.422,lng:-122.0841}},{time:"16:00",title:"",description:" Main QuadHoover Tower ",type:"sightseeing",iconName:"Briefcase",tips:" Tresidder Parking Lot",coordinates:{lat:37.4275,lng:-122.1697}},{time:"19:00",title:"",description:" Palo Alto ",type:"transport",iconName:"Car"}]},{id:"day3",date:"2026/05/22 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (Golden Gate Bridge)",description:" Welcome Center",type:"sightseeing",iconName:"Camera",tips:" Uber  Battery Spencer",coordinates:{lat:37.8199,lng:-122.4783}},{time:"11:30",title:" (Palace of Fine Arts)",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8029,lng:-122.4484}},{time:"14:00",title:" (Lombard Street)",description:"",type:"sightseeing",iconName:"MapPin",tips:" Uber  (Hyde St)",coordinates:{lat:37.8021,lng:-122.4187}},{time:"16:00",title:"",description:" Westfield ",type:"other",iconName:"Coffee"}]},{id:"day4",date:"2026/05/23 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:30",title:" (Alcatraz) ",description:" 33 ",type:"sightseeing",iconName:"MapPin",tips:" 90 ",coordinates:{lat:37.827,lng:-122.423}},{time:"13:00",title:"39  (Pier 39)",description:" Boudin ",type:"food",iconName:"Utensils",coordinates:{lat:37.8087,lng:-122.4098}},{time:"15:00",title:"",description:" Musee Mecanique ()",type:"sightseeing",iconName:"Camera"}]},{id:"day5",date:"2026/05/24 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" Sausalito",description:" Ferry Building  Golden Gate Ferry",type:"transport",iconName:"Plane"},{time:"10:30",title:"Sausalito ",description:"",type:"sightseeing",iconName:"Sun",coordinates:{lat:37.8591,lng:-122.4853}},{time:"14:00",title:"",description:" Powell-Hyde ",type:"sightseeing",iconName:"Train",tips:""}]},{id:"day6",date:"2026/05/25 ()",city:"SLC",cityLabel:"",title:"",summary:" ACSM ",activities:[{time:"09:00",title:" SFO ",description:"Check-out Uber/BART ",type:"transport",iconName:"Plane"},{time:"12:00",title:" (SLC)",description:" (Delta/United/Southwest) 2 ",type:"flight",iconName:"Plane"},{time:"15:30",title:" SLC & ",description:" TRAX  () ",type:"transport",iconName:"Train",tips:"",coordinates:{lat:40.7899,lng:-111.9791}},{time:"17:00",title:" Check-in",description:" Salt Palace Convention Center ",type:"hotel",iconName:"Moon"}]},{id:"day7",date:"2026/05/26 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 1",summary:"",activities:[{time:"08:00",title:"",description:" Salt Palace Convention Center ",type:"conference",iconName:"Briefcase",coordinates:{lat:40.767,lng:-111.8965}},{time:"09:00",title:" & ",description:"",type:"conference",iconName:"Briefcase"},{time:"17:00",title:" (Temple Square)",description:"",type:"sightseeing",iconName:"Camera"},{time:"19:00",title:"City Creek Center ",description:"",type:"food",iconName:"Utensils"}]},{id:"day8",date:"2026/05/27 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 2",summary:"",activities:[{time:"08:30",title:"",description:" (Poster Session) ",type:"conference",iconName:"Briefcase"},{time:"12:00",title:"",description:"",type:"food",iconName:"Coffee"},{time:"18:00",title:"",description:" Uber  Utah State Capitol ",type:"sightseeing",iconName:"Camera",tips:"",coordinates:{lat:40.7774,lng:-111.8882}}]},{id:"day9",date:"2026/05/28 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 3",summary:"",activities:[{time:"09:00",title:"",description:"",type:"conference",iconName:"Briefcase"},{time:"19:00",title:" (Gala) ",description:" Red Iguana ",type:"food",iconName:"Utensils",tips:"Red Iguana "}]},{id:"day10",date:"2026/05/29 ()",city:"SLC",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:"",description:" (Expo)",type:"conference",iconName:"Briefcase"},{time:"14:00",title:"",description:" The Leonardo ",type:"sightseeing",iconName:"Camera"},{time:"18:00",title:"",description:"",type:"hotel",iconName:"CheckSquare"}]},{id:"day11",date:"2026/05/30 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" SLC ",description:" TRAX ",type:"transport",iconName:"Train"},{time:"11:00",title:" (SAN)",description:" Delta/Southwest 2 ",type:"flight",iconName:"Plane"},{time:"13:00",title:" SAN",description:" Uber  992 ",type:"transport",iconName:"MapPin",tips:" Downtown  Little Italy ",coordinates:{lat:32.7338,lng:-117.1933}},{time:"18:00",title:"Gaslamp Quarter",description:"",type:"food",iconName:"Utensils",coordinates:{lat:32.7114,lng:-117.1599}}]},{id:"day12",date:"2026/05/31 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (San Diego Zoo)",description:" (Skyfari)",type:"sightseeing",iconName:"Camera",location:"2920 Zoo Dr, San Diego",tips:"",coordinates:{lat:32.7353,lng:-117.149}},{time:"14:00",title:" (Balboa Park)",description:"",type:"sightseeing",iconName:"Sun"},{time:"18:00",title:"Little Italy ",description:"",type:"food",iconName:"Utensils"}]},{id:"day13",date:"2026/06/01 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (USS Midway)",description:"",type:"sightseeing",iconName:"Briefcase",tips:"",coordinates:{lat:32.7137,lng:-117.1751}},{time:"13:00",title:"",description:"",type:"sightseeing",iconName:"Camera"},{time:"14:00",title:"Seaport Village",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day14",date:"2026/06/02 ()",city:"SAN",cityLabel:"",title:"",summary:" La Jolla ",activities:[{time:"14:00",title:" La Jolla",description:" Uber/Lyft  ( 20-30 )",type:"transport",iconName:"Car"},{time:"15:00",title:"La Jolla Cove",description:" ()",type:"sightseeing",iconName:"Camera"},{time:"18:30",title:"",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day15",date:"2026/06/03 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (Coronado)",description:" Hotel del Coronado",type:"sightseeing",iconName:"Sun",tips:"",coordinates:{lat:32.6859,lng:-117.1831}},{time:"14:00",title:"Old Town San Diego",description:"",type:"sightseeing",iconName:"MapPin",coordinates:{lat:32.7549,lng:-117.1978}},{time:"18:00",title:"",description:" Old Town  Taco  Margarita",type:"food",iconName:"Utensils"}]},{id:"day16",date:"2026/06/04 ()",city:"LA",cityLabel:"",title:" LAX ",summary:"",activities:[{time:"10:00",title:" & ",description:"",type:"hotel",iconName:"Coffee"},{time:"13:00",title:" (LAX)",description:" (One-way rental)  LAX",type:"transport",iconName:"Car",tips:" 2.5-3  5 "},{time:"20:30",title:" LAX ",description:" Tom Bradley  (TBIT) ",type:"flight",iconName:"Plane",tips:"",coordinates:{lat:33.9416,lng:-118.4085}},{time:"23:50",title:"",description:" JX001/JX005 ()",type:"flight",iconName:"Plane"}]}],XT=["ESTA  ( 72 )","ACSM ","Apple Park Visitor Center "," (90)",""," eSIM"," ( 110V )"," ()",""];function y3(){const[t,e]=q.useState(()=>{const r=localStorage.getItem("trip_checklist");return r?JSON.parse(r):{}});q.useEffect(()=>{localStorage.setItem("trip_checklist",JSON.stringify(t))},[t]);const n=r=>{e(o=>({...o,[r]:!o[r]}))},i=Math.round(Object.values(t).filter(Boolean).length/XT.length*100);return x.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[x.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-100",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsxs("h3",{className:"text-lg font-bold text-emerald-900 flex items-center gap-2",children:[x.jsx(qS,{size:20,className:"text-emerald-600"}),""]}),x.jsxs("span",{className:"text-sm font-bold text-emerald-700",children:[i,"% "]})]}),x.jsx("div",{className:"w-full bg-emerald-200/50 rounded-full h-2",children:x.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${i}%`}})})]}),x.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-3",children:XT.map((r,o)=>x.jsxs("label",{className:La("flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all border",t[r]?"bg-emerald-50 border-emerald-200":"hover:bg-gray-50 border-transparent hover:border-gray-200"),children:[x.jsxs("div",{className:"relative flex items-center mt-0.5",children:[x.jsx("input",{type:"checkbox",className:"peer sr-only",checked:!!t[r],onChange:()=>n(r)}),x.jsx("div",{className:La("w-5 h-5 rounded border flex items-center justify-center transition-colors",t[r]?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"),children:t[r]&&x.jsx(zR,{size:12,className:"text-white"})})]}),x.jsx("span",{className:La("text-sm transition-colors select-none",t[r]?"text-emerald-800 line-through opacity-70":"text-gray-700"),children:r})]},o))})]})}const _3=()=>{};var JT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},v3=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},zI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(_=64)),i.push(n[m],n[g],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new w3;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),g!==64){const R=f<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T3=function(t){const e=UI(t);return zI.encodeByteArray(e,!0)},Hd=function(t){return T3(t).replace(/\./g,"")},BI=function(t){try{return zI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=()=>x3().__FIREBASE_DEFAULTS__,S3=()=>{if(typeof process>"u"||typeof JT>"u")return;const t=JT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BI(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return _3()||E3()||S3()||P3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WI=t=>{var e,n;return(n=(e=jf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},HI=t=>{const e=WI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},qI=()=>{var t;return(t=jf())==null?void 0:t.config},$I=t=>{var e;return(e=jf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hd(JSON.stringify(n)),Hd(JSON.stringify(a)),""].join(".")}const wu={};function A3(){const t={prod:[],emulator:[]};for(const e of Object.keys(wu))wu[e]?t.emulator.push(e):t.prod.push(e);return t}function C3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let e1=!1;function X_(t,e){if(typeof window>"u"||typeof document>"u"||!xs(window.location.host)||wu[t]===e||wu[t]||e1)return;wu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=A3().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{e1=!0,a()},_}function m(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=C3(i),E=n("text"),R=document.getElementById(E)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),P=n("preprendIcon"),T=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(N,k);const j=f();h(T,P),C.append(T,R,N,j),document.body.appendChild(C)}o?(R.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function b3(){var e;const t=(e=jf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function L3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M3(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D3(){return!b3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O3(){try{return typeof indexedDB=="object"}catch{return!1}}function V3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="FirebaseError";class Ui extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=F3,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?j3(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Ui(r,u,i)}}function j3(t,e){return t.replace(U3,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const U3=/\{\$([^}]+)}/g;function z3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(t1(o)&&t1(a)){if(!fo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function t1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function B3(t,e){const n=new W3(t,e);return n.subscribe.bind(n)}class W3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");H3(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=um),r.error===void 0&&(r.error=um),r.complete===void 0&&(r.complete=um);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new I3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G3(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $3(t){return t===Ks?void 0:t}function G3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const Z3={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},Y3=Ae.INFO,Q3={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},X3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Q3[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class J_{constructor(e){this.name=e,this._logLevel=Y3,this._logHandler=X3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const J3=(t,e)=>e.some(n=>t instanceof n);let n1,i1;function eF(){return n1||(n1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tF(){return i1||(i1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KI=new WeakMap,jg=new WeakMap,ZI=new WeakMap,cm=new WeakMap,ev=new WeakMap;function nF(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ts(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&KI.set(n,t)}).catch(()=>{}),ev.set(e,t),e}function iF(t){if(jg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});jg.set(t,e)}let Ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rF(t){Ug=t(Ug)}function sF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(hm(this),e,...n);return ZI.set(i,e.sort?e.sort():[e]),ts(i)}:tF().includes(t)?function(...e){return t.apply(hm(this),e),ts(KI.get(this))}:function(...e){return ts(t.apply(hm(this),e))}}function oF(t){return typeof t=="function"?sF(t):(t instanceof IDBTransaction&&iF(t),J3(t,eF())?new Proxy(t,Ug):t)}function ts(t){if(t instanceof IDBRequest)return nF(t);if(cm.has(t))return cm.get(t);const e=oF(t);return e!==t&&(cm.set(t,e),ev.set(e,t)),e}const hm=t=>ev.get(t);function aF(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ts(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ts(a.result),h.oldVersion,h.newVersion,ts(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const lF=["get","getKey","getAll","getAllKeys","count"],uF=["put","add","delete","clear"],dm=new Map;function r1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=uF.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||lF.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return dm.set(e,o),o}rF(t=>({...t,get:(e,n,i)=>r1(e,n)||t.get(e,n,i),has:(e,n)=>!!r1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hF(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function hF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zg="@firebase/app",s1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new J_("@firebase/app"),dF="@firebase/app-compat",fF="@firebase/analytics-compat",pF="@firebase/analytics",mF="@firebase/app-check-compat",gF="@firebase/app-check",yF="@firebase/auth",_F="@firebase/auth-compat",vF="@firebase/database",wF="@firebase/data-connect",TF="@firebase/database-compat",xF="@firebase/functions",EF="@firebase/functions-compat",SF="@firebase/installations",PF="@firebase/installations-compat",IF="@firebase/messaging",AF="@firebase/messaging-compat",CF="@firebase/performance",kF="@firebase/performance-compat",bF="@firebase/remote-config",RF="@firebase/remote-config-compat",NF="@firebase/storage",LF="@firebase/storage-compat",MF="@firebase/firestore",DF="@firebase/ai",OF="@firebase/firestore-compat",VF="firebase",FF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="[DEFAULT]",jF={[zg]:"fire-core",[dF]:"fire-core-compat",[pF]:"fire-analytics",[fF]:"fire-analytics-compat",[gF]:"fire-app-check",[mF]:"fire-app-check-compat",[yF]:"fire-auth",[_F]:"fire-auth-compat",[vF]:"fire-rtdb",[wF]:"fire-data-connect",[TF]:"fire-rtdb-compat",[xF]:"fire-fn",[EF]:"fire-fn-compat",[SF]:"fire-iid",[PF]:"fire-iid-compat",[IF]:"fire-fcm",[AF]:"fire-fcm-compat",[CF]:"fire-perf",[kF]:"fire-perf-compat",[bF]:"fire-rc",[RF]:"fire-rc-compat",[NF]:"fire-gcs",[LF]:"fire-gcs-compat",[MF]:"fire-fst",[OF]:"fire-fst-compat",[DF]:"fire-vertex","fire-js":"fire-js",[VF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,UF=new Map,Wg=new Map;function o1(t,e){try{t.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function po(t){const e=t.name;if(Wg.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,t);for(const n of qd.values())o1(n,t);for(const n of UF.values())o1(n,t);return!0}function Uf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new pc("app","Firebase",zF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=FF;function YI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Bg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ns.create("bad-app-name",{appName:String(r)});if(n||(n=qI()),!n)throw ns.create("no-options");const o=qd.get(r);if(o){if(fo(n,o.options)&&fo(i,o.config))return o;throw ns.create("duplicate-app",{appName:r})}const a=new K3(r);for(const h of Wg.values())a.addComponent(h);const u=new BF(n,i,a);return qd.set(r,u),u}function tv(t=Bg){const e=qd.get(t);if(!e&&t===Bg&&qI())return YI();if(!e)throw ns.create("no-app",{appName:t});return e}function Ni(t,e,n){let i=jF[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(a.join(" "));return}po(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="firebase-heartbeat-database",HF=1,Qu="firebase-heartbeat-store";let fm=null;function QI(){return fm||(fm=aF(WF,HF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ns.create("idb-open",{originalErrorMessage:t.message})})),fm}async function qF(t){try{const n=(await QI()).transaction(Qu),i=await n.objectStore(Qu).get(XI(t));return await n.done,i}catch(e){if(e instanceof Ui)mr.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function a1(t,e){try{const i=(await QI()).transaction(Qu,"readwrite");await i.objectStore(Qu).put(e,XI(t)),await i.done}catch(n){if(n instanceof Ui)mr.warn(n.message);else{const i=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(i.message)}}}function XI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=1024,GF=30;class KF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=l1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>GF){const a=QF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l1(),{heartbeatsToSend:i,unsentEntries:r}=ZF(this._heartbeatsCache.heartbeats),o=Hd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return mr.warn(n),""}}}function l1(){return new Date().toISOString().substring(0,10)}function ZF(t,e=$F){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),u1(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),u1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class YF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O3()?V3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return a1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return a1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u1(t){return Hd(JSON.stringify({version:2,heartbeats:t})).length}function QF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){po(new hs("platform-logger",e=>new cF(e),"PRIVATE")),po(new hs("heartbeat",e=>new KF(e),"PRIVATE")),Ni(zg,s1,t),Ni(zg,s1,"esm2020"),Ni("fire-js","")}XF("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebasestorage.googleapis.com",eA="storageBucket",JF=2*60*1e3,ej=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends Ui{constructor(e,n,i=0){super(pm(e),`Firebase Storage: ${n} (${pm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function pm(t){return"storage/"+t}function nv(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(lt.UNKNOWN,t)}function tj(t){return new ut(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nj(t){return new ut(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ij(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(lt.UNAUTHENTICATED,t)}function rj(){return new ut(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sj(t){return new ut(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oj(){return new ut(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aj(){return new ut(lt.CANCELED,"User canceled the upload/download.")}function lj(t){return new ut(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function uj(t){return new ut(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cj(){return new ut(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eA+"' property when initializing the app?")}function hj(){return new ut(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dj(){return new ut(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function fj(t){return new ut(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hg(t){return new ut(lt.INVALID_ARGUMENT,t)}function tA(){return new ut(lt.APP_DELETED,"The Firebase app was deleted.")}function pj(t){return new ut(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tu(t,e){return new ut(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yl(t){throw new ut(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Pn.makeFromUrl(e,n)}catch{return new Pn(e,"")}if(i.path==="")return i;throw uj(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(j){j.path_=decodeURIComponent(j.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${m}/b/${r}/o${_}`,"i"),R={bucket:1,path:3},k=n===JI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",P=new RegExp(`^https?://${k}/${r}/${N}`,"i"),C=[{regex:u,indices:h,postModify:o},{regex:E,indices:R,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let j=0;j<C.length;j++){const W=C[j],K=W.regex.exec(e);if(K){const b=K[W.indices.bucket];let I=K[W.indices.path];I||(I=""),i=new Pn(b,I),W.postModify(i);break}}if(i==null)throw lj(e);return i}}class mj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function h(){return u===2}let f=!1;function m(...N){f||(f=!0,e.apply(null,N))}function g(N){r=setTimeout(()=>{r=null,t(E,h())},N)}function _(){o&&clearTimeout(o)}function E(N,...P){if(f){_();return}if(N){_(),m.call(null,N,...P);return}if(h()||a){_(),m.call(null,N,...P);return}i<64&&(i*=2);let C;u===1?(u=2,C=0):C=(i+Math.random())*1e3,g(C)}let R=!1;function k(N){R||(R=!0,_(),!f&&(r!==null?(N||(u=2),clearTimeout(r),g(0)):N||(u=1)))}return g(0),o=setTimeout(()=>{a=!0,k(!0)},n),k}function yj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){return t!==void 0}function vj(t){return typeof t=="object"&&!Array.isArray(t)}function iv(t){return typeof t=="string"||t instanceof String}function c1(t){return rv()&&t instanceof Blob}function rv(){return typeof Blob<"u"}function h1(t,e,n,i){if(i<e)throw Hg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Hg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function nA(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ro;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ro||(ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,i,r,o,a,u,h,f,m,g,_=!0,E=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=_,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,k)=>{this.resolve_=R,this.reject_=k,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new kh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===ro.NO_ERROR,h=o.getStatus();if(!u||wj(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===ro.ABORT;i(!1,new kh(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new kh(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());_j(h)?o(h):o()}catch(h){a(h)}else if(u!==null){const h=nv();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(r.canceled){const h=this.appDelete_?tA():aj();a(h)}else{const h=oj();a(h)}};this.canceled_?n(!1,new kh(!1,null,!0)):this.backoffId_=gj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function xj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ej(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Sj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Pj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ij(t,e,n,i,r,o,a=!0,u=!1){const h=nA(t.urlParams),f=t.url+h,m=Object.assign({},t.headers);return Sj(m,e),xj(m,n),Ej(m,o),Pj(m,i),new Tj(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Cj(...t){const e=Aj();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(rv())return new Blob(t);throw new ut(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){if(typeof atob>"u")throw fj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mm{constructor(e,n){this.data=e,this.contentType=n||null}}function Rj(t,e){switch(t){case Ai.RAW:return new mm(iA(e));case Ai.BASE64:case Ai.BASE64URL:return new mm(rA(t,e));case Ai.DATA_URL:return new mm(Lj(e),Mj(e))}throw nv()}function iA(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Nj(t){let e;try{e=decodeURIComponent(t)}catch{throw Tu(Ai.DATA_URL,"Malformed data URL.")}return iA(e)}function rA(t,e){switch(t){case Ai.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Tu(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Tu(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bj(e)}catch(r){throw r.message.includes("polyfill")?r:Tu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class sA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Tu(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Dj(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Lj(t){const e=new sA(t);return e.base64?rA(Ai.BASE64,e.rest):Nj(e.rest)}function Mj(t){return new sA(t).contentType}function Dj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){let i=0,r="";c1(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(c1(this.data_)){const i=this.data_,r=kj(i,e,n);return r===null?null:new Ur(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ur(i,!0)}}static getBlob(...e){if(rv()){const n=e.map(i=>i instanceof Ur?i.data_:i);return new Ur(Cj.apply(null,n))}else{const n=e.map(a=>iv(a)?Rj(Ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Ur(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){let e;try{e=JSON.parse(t)}catch{return null}return vj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Vj(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function aA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){return e}class tn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||Fj}}let bh=null;function jj(t){return!iv(t)||t.length<2?t:aA(t)}function lA(){if(bh)return bh;const t=[];t.push(new tn("bucket")),t.push(new tn("generation")),t.push(new tn("metageneration")),t.push(new tn("name","fullPath",!0));function e(o,a){return jj(a)}const n=new tn("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new tn("size");return r.xform=i,t.push(r),t.push(new tn("timeCreated")),t.push(new tn("updated")),t.push(new tn("md5Hash",null,!0)),t.push(new tn("cacheControl",null,!0)),t.push(new tn("contentDisposition",null,!0)),t.push(new tn("contentEncoding",null,!0)),t.push(new tn("contentLanguage",null,!0)),t.push(new tn("contentType",null,!0)),t.push(new tn("metadata","customMetadata",!0)),bh=t,bh}function Uj(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Pn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function zj(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return Uj(i,t),i}function uA(t,e,n){const i=oA(e);return i===null?null:zj(t,i,n)}function Bj(t,e,n,i){const r=oA(e);if(r===null||!iv(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,g=t.fullPath,_="/b/"+a(m)+"/o/"+a(g),E=sv(_,n,i),R=nA({alt:"media",token:f});return E+R})[0]}function Wj(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class cA{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){if(!t)throw nv()}function Hj(t,e){function n(i,r){const o=uA(t,r,e);return hA(o!==null),o}return n}function qj(t,e){function n(i,r){const o=uA(t,r,e);return hA(o!==null),Bj(o,r,t.host,t._protocol)}return n}function dA(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=rj():r=ij():n.getStatus()===402?r=nj(t.bucket):n.getStatus()===403?r=sj(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function $j(t){const e=dA(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=tj(t.path)),o.serverResponse=r.serverResponse,o}return n}function Gj(t,e,n){const i=e.fullServerUrl(),r=sv(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new cA(r,o,qj(t,n),a);return u.errorHandler=$j(e),u}function Kj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Zj(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=Kj(null,e)),i}function Yj(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let C="";for(let j=0;j<2;j++)C=C+Math.random().toString().slice(2);return C}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const f=Zj(e,i,r),m=Wj(f,n),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+h+"--",E=Ur.getBlob(g,i,_);if(E===null)throw hj();const R={name:f.fullPath},k=sv(o,t.host,t._protocol),N="POST",P=t.maxUploadRetryTime,T=new cA(k,N,Hj(t,n),P);return T.urlParams=R,T.headers=a,T.body=E.uploadData(),T.errorHandler=dA(e),T}class Qj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Yl("cannot .send() more than once");if(xs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Xj extends Qj{initXhr(){this.xhr_.responseType="text"}}function fA(){return new Xj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this._service=e,n instanceof Pn?this._location=n:this._location=Pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mo(e,n)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aA(this._location.path)}get storage(){return this._service}get parent(){const e=Oj(this._location.path);if(e===null)return null;const n=new Pn(this._location.bucket,e);return new mo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pj(e)}}function Jj(t,e,n){t._throwIfRoot("uploadBytes");const i=Yj(t.storage,t._location,lA(),new Ur(e,!0),n);return t.storage.makeRequestWithTokens(i,fA).then(r=>({metadata:r,ref:t}))}function e6(t){t._throwIfRoot("getDownloadURL");const e=Gj(t.storage,t._location,lA());return t.storage.makeRequestWithTokens(e,fA).then(n=>{if(n===null)throw dj();return n})}function t6(t,e){const n=Vj(t._location.path,e),i=new Pn(t._location.bucket,n);return new mo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){return/^[A-Za-z]+:\/\//.test(t)}function i6(t,e){return new mo(t,e)}function pA(t,e){if(t instanceof ov){const n=t;if(n._bucket==null)throw cj();const i=new mo(n,n._bucket);return e!=null?pA(i,e):i}else return e!==void 0?t6(t,e):t}function r6(t,e){if(e&&n6(e)){if(t instanceof ov)return i6(t,e);throw Hg("To use ref(service, url), the first argument must be a Storage instance.")}else return pA(t,e)}function d1(t,e){const n=e==null?void 0:e[eA];return n==null?null:Pn.makeFromBucketSpec(n,t)}function s6(t,e,n,i={}){t.host=`${e}:${n}`;const r=xs(e);r&&(Q_(`https://${t.host}/b`),X_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:GI(o,t.app.options.projectId))}class ov{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=JI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JF,this._maxUploadRetryTime=ej,this._requests=new Set,r!=null?this._bucket=Pn.makeFromBucketSpec(r,this._host):this._bucket=d1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=d1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){h1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){h1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mo(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new mj(tA());{const a=Ij(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const f1="@firebase/storage",p1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="storage";function o6(t,e,n){return t=Pt(t),Jj(t,e,n)}function a6(t){return t=Pt(t),e6(t)}function l6(t,e){return t=Pt(t),r6(t,e)}function u6(t=tv(),e){t=Pt(t);const i=Uf(t,mA).getImmediate({identifier:e}),r=HI("storage");return r&&c6(i,...r),i}function c6(t,e,n,i={}){s6(t,e,n,i)}function h6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ov(n,i,r,e,Po)}function d6(){po(new hs(mA,h6,"PUBLIC").setMultipleInstances(!0)),Ni(f1,p1,""),Ni(f1,p1,"esm2020")}d6();var f6="firebase",p6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(f6,p6,"app");var m1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,gA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,I){function M(){}M.prototype=I.prototype,b.F=I.prototype,b.prototype=new M,b.prototype.constructor=b,b.D=function(D,V,U){for(var O=Array(arguments.length-2),be=2;be<arguments.length;be++)O[be-2]=arguments[be];return I.prototype[V].apply(D,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,I,M){M||(M=0);const D=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)D[V]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(V=0;V<16;++V)D[V]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=b.g[0],M=b.g[1],V=b.g[2];let U=b.g[3],O;O=I+(U^M&(V^U))+D[0]+3614090360&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[1]+3905402710&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[2]+606105819&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[3]+3250441966&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[4]+4118548399&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[5]+1200080426&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[6]+2821735955&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[7]+4249261313&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[8]+1770035416&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[9]+2336552879&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[10]+4294925233&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[11]+2304563134&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[12]+1804603682&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[13]+4254626195&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[14]+2792965006&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[15]+1236535329&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(V^U&(M^V))+D[1]+4129170786&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[6]+3225465664&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[11]+643717713&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[0]+3921069994&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[5]+3593408605&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[10]+38016083&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[15]+3634488961&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[4]+3889429448&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[9]+568446438&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[14]+3275163606&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[3]+4107603335&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[8]+1163531501&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[13]+2850285829&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[2]+4243563512&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[7]+1735328473&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[12]+2368359562&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(M^V^U)+D[5]+4294588738&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[8]+2272392833&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[11]+1839030562&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[14]+4259657740&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[1]+2763975236&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[4]+1272893353&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[7]+4139469664&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[10]+3200236656&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[13]+681279174&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[0]+3936430074&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[3]+3572445317&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[6]+76029189&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[9]+3654602809&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[12]+3873151461&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[15]+530742520&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[2]+3299628645&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(V^(M|~U))+D[0]+4096336452&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[7]+1126891415&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[14]+2878612391&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[5]+4237533241&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[12]+1700485571&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[3]+2399980690&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[10]+4293915773&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[1]+2240044497&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[8]+1873313359&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[15]+4264355552&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[6]+2734768916&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[13]+1309151649&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[4]+4149444226&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[11]+3174756917&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[2]+718787259&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+U&4294967295}i.prototype.v=function(b,I){I===void 0&&(I=b.length);const M=I-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<I;){if(V==0)for(;U<=M;)r(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<I;)if(D[V++]=b.charCodeAt(U++),V==this.blockSize){r(this,D),V=0;break}}else for(;U<I;)if(D[V++]=b[U++],V==this.blockSize){r(this,D),V=0;break}}this.h=V,this.o+=I},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;I=this.o*8;for(var M=b.length-8;M<b.length;++M)b[M]=I&255,I/=256;for(this.v(b),b=Array(16),I=0,M=0;M<4;++M)for(let D=0;D<32;D+=8)b[I++]=this.g[M]>>>D&255;return b};function o(b,I){var M=u;return Object.prototype.hasOwnProperty.call(M,b)?M[b]:M[b]=I(b)}function a(b,I){this.h=I;const M=[];let D=!0;for(let V=b.length-1;V>=0;V--){const U=b[V]|0;D&&U==I||(M[V]=U,D=!1)}this.g=M}var u={};function h(b){return-128<=b&&b<128?o(b,function(I){return new a([I|0],I<0?-1:0)}):new a([b|0],b<0?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return N(f(-b));const I=[];let M=1;for(let D=0;b>=M;D++)I[D]=b/M|0,M*=4294967296;return new a(I,0)}function m(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return N(m(b.substring(1),I));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(I,8));let D=g;for(let U=0;U<b.length;U+=8){var V=Math.min(8,b.length-U);const O=parseInt(b.substring(U,U+V),I);V<8?(V=f(Math.pow(I,V)),D=D.j(V).add(f(O))):(D=D.j(M),D=D.add(f(O)))}return D}var g=h(0),_=h(1),E=h(16777216);t=a.prototype,t.m=function(){if(k(this))return-N(this).m();let b=0,I=1;for(let M=0;M<this.g.length;M++){const D=this.i(M);b+=(D>=0?D:4294967296+D)*I,I*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(k(this))return"-"+N(this).toString(b);const I=f(Math.pow(b,6));var M=this;let D="";for(;;){const V=j(M,I).g;M=P(M,V.j(I));let U=((M.g.length>0?M.g[0]:M.h)>>>0).toString(b);if(M=V,R(M))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=P(this,b),k(b)?-1:R(b)?0:1};function N(b){const I=b.g.length,M=[];for(let D=0;D<I;D++)M[D]=~b.g[D];return new a(M,~b.h).add(_)}t.abs=function(){return k(this)?N(this):this},t.add=function(b){const I=Math.max(this.g.length,b.g.length),M=[];let D=0;for(let V=0;V<=I;V++){let U=D+(this.i(V)&65535)+(b.i(V)&65535),O=(U>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);D=O>>>16,U&=65535,O&=65535,M[V]=O<<16|U}return new a(M,M[M.length-1]&-2147483648?-1:0)};function P(b,I){return b.add(N(I))}t.j=function(b){if(R(this)||R(b))return g;if(k(this))return k(b)?N(this).j(N(b)):N(N(this).j(b));if(k(b))return N(this.j(N(b)));if(this.l(E)<0&&b.l(E)<0)return f(this.m()*b.m());const I=this.g.length+b.g.length,M=[];for(var D=0;D<2*I;D++)M[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<b.g.length;V++){const U=this.i(D)>>>16,O=this.i(D)&65535,be=b.i(V)>>>16,Dt=b.i(V)&65535;M[2*D+2*V]+=O*Dt,T(M,2*D+2*V),M[2*D+2*V+1]+=U*Dt,T(M,2*D+2*V+1),M[2*D+2*V+1]+=O*be,T(M,2*D+2*V+1),M[2*D+2*V+2]+=U*be,T(M,2*D+2*V+2)}for(b=0;b<I;b++)M[b]=M[2*b+1]<<16|M[2*b];for(b=I;b<2*I;b++)M[b]=0;return new a(M,0)};function T(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function C(b,I){this.g=b,this.h=I}function j(b,I){if(R(I))throw Error("division by zero");if(R(b))return new C(g,g);if(k(b))return I=j(N(b),I),new C(N(I.g),N(I.h));if(k(I))return I=j(b,N(I)),new C(N(I.g),I.h);if(b.g.length>30){if(k(b)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var M=_,D=I;D.l(b)<=0;)M=W(M),D=W(D);var V=K(M,1),U=K(D,1);for(D=K(D,2),M=K(M,2);!R(D);){var O=U.add(D);O.l(b)<=0&&(V=V.add(M),U=O),D=K(D,1),M=K(M,1)}return I=P(b,V.j(I)),new C(V,I)}for(V=g;b.l(I)>=0;){for(M=Math.max(1,Math.floor(b.m()/I.m())),D=Math.ceil(Math.log(M)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(M),O=U.j(I);k(O)||O.l(b)>0;)M-=D,U=f(M),O=U.j(I);R(U)&&(U=_),V=V.add(U),b=P(b,O)}return new C(V,b)}t.B=function(b){return j(this,b).h},t.and=function(b){const I=Math.max(this.g.length,b.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)&b.i(D);return new a(M,this.h&b.h)},t.or=function(b){const I=Math.max(this.g.length,b.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)|b.i(D);return new a(M,this.h|b.h)},t.xor=function(b){const I=Math.max(this.g.length,b.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)^b.i(D);return new a(M,this.h^b.h)};function W(b){const I=b.g.length+1,M=[];for(let D=0;D<I;D++)M[D]=b.i(D)<<1|b.i(D-1)>>>31;return new a(M,b.h)}function K(b,I){const M=I>>5;I%=32;const D=b.g.length-M,V=[];for(let U=0;U<D;U++)V[U]=I>0?b.i(U+M)>>>I|b.i(U+M+1)<<32-I:b.i(U+M);return new a(V,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,is=a}).apply(typeof m1<"u"?m1:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yA,ru,_A,Jh,qg,vA,wA,TA;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in w))break e;w=w[z]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,z,H){for(var te=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)te[ve-2]=arguments[ve];return y.prototype[z].apply(A,te)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function E(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function R(c,y){for(let A=1;A<arguments.length;A++){const z=arguments[A];var w=typeof z;if(w=w!="object"?w:z?Array.isArray(z)?"array":w:"null",w=="array"||w=="object"&&typeof z.length=="number"){w=c.length||0;const H=z.length||0;c.length=w+H;for(let te=0;te<H;te++)c[w+te]=z[te]}else c.push(z)}}class k{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function N(c){a.setTimeout(()=>{throw c},0)}function P(){var c=b;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class T{constructor(){this.h=this.g=null}add(y,w){const A=C.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var C=new k(()=>new j,c=>c.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,b=new T,I=()=>{const c=Promise.resolve(void 0);W=()=>{c.then(M)}};function M(){for(var c;c=P();){try{c.h.call(c.g)}catch(w){N(w)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}K=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function O(c){return/^[\s\xa0]*$/.test(c)}function be(c,y){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(be,V),be.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dt="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function ee(c,y,w,A,z){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=z,this.key=++Ge,this.da=this.fa=!1}function G(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function re(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function X(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function fe(c){const y={};for(const w in c)y[w]=c[w];return y}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(c,y){let w,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(w in A)c[w]=A[w];for(let H=0;H<Ee.length;H++)w=Ee[H],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function se(c){this.src=c,this.g={},this.h=0}se.prototype.add=function(c,y,w,A,z){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const te=ce(c,y,A,z);return te>-1?(y=c[te],w||(y.fa=!1)):(y=new ee(y,this.src,H,!!A,z),y.fa=w,c.push(y)),y};function he(c,y){const w=y.type;if(w in c.g){var A=c.g[w],z=Array.prototype.indexOf.call(A,y,void 0),H;(H=z>=0)&&Array.prototype.splice.call(A,z,1),H&&(G(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ce(c,y,w,A){for(let z=0;z<c.length;++z){const H=c[z];if(!H.da&&H.listener==y&&H.capture==!!w&&H.ha==A)return z}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),mt={};function wr(c,y,w,A,z){if(Array.isArray(y)){for(let H=0;H<y.length;H++)wr(c,y[H],w,A,z);return null}return w=Cs(w),c&&c[Dt]?c.J(y,w,u(A)?!!A.capture:!1,z):Ps(c,y,w,!1,A,z)}function Ps(c,y,w,A,z,H){if(!y)throw Error("Invalid event type");const te=u(z)?!!z.capture:!!z;let ve=Co(c);if(ve||(c[Ke]=ve=new se(c)),w=ve.add(y,w,A,te,H),w.proxy)return w;if(A=fl(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)U||(z=te),z===void 0&&(z=!1),c.addEventListener(y.toString(),A,z);else if(c.attachEvent)c.attachEvent(Ic(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function fl(){function c(w){return y.call(c.src,c.listener,w)}const y=Ac;return c}function Tr(c,y,w,A,z){if(Array.isArray(y))for(var H=0;H<y.length;H++)Tr(c,y[H],w,A,z);else A=u(A)?!!A.capture:!!A,w=Cs(w),c&&c[Dt]?(c=c.i,H=String(y).toString(),H in c.g&&(y=c.g[H],w=ce(y,w,A,z),w>-1&&(G(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[H],c.h--)))):c&&(c=Co(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ce(y,w,A,z)),(w=c>-1?y[c]:null)&&Is(w))}function Is(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Dt])he(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(Ic(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=Co(y))?(he(w,c),w.h==0&&(w.src=null,y[Ke]=null)):G(c)}}}function Ic(c){return c in mt?mt[c]:mt[c]="on"+c}function Ac(c,y){if(c.da)c=!0;else{y=new be(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&Is(c),c=w.call(A,y)}return c}function Co(c){return c=c[Ke],c instanceof se?c:null}var As="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cs(c){return typeof c=="function"?c:(c[As]||(c[As]=function(y){return c.handleEvent(y)}),c[As])}function It(){D.call(this),this.i=new se(this),this.M=this,this.G=null}g(It,D),It.prototype[Dt]=!0,It.prototype.removeEventListener=function(c,y,w,A){Tr(this,c,y,w,A)};function At(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new V(y,c);else if(y instanceof V)y.target=y.target||c;else{var z=y;y=new V(A,c),We(y,z)}z=!0;let H,te;if(w)for(te=w.length-1;te>=0;te--)H=y.g=w[te],z=xr(H,A,!0,y)&&z;if(H=y.g=c,z=xr(H,A,!0,y)&&z,z=xr(H,A,!1,y)&&z,w)for(te=0;te<w.length;te++)H=y.g=w[te],z=xr(H,A,!1,y)&&z}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)G(w[A]);delete c.g[y],c.h--}}this.G=null},It.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},It.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function xr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let H=0;H<y.length;++H){const te=y[H];if(te&&!te.da&&te.capture==w){const ve=te.listener,De=te.ha||te.src;te.fa&&he(c.i,te),z=ve.call(De,A)!==!1&&z}}return z&&!A.defaultPrevented}function Cc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function pl(c){c.g=Cc(()=>{c.g=null,c.i&&(c.i=!1,pl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class up extends D{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:pl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(c){D.call(this),this.h=c,this.g={}}g(ks,D);var ko=[];function ml(c){re(c.g,function(y,w){this.g.hasOwnProperty(w)&&Is(y)},c),c.g={}}ks.prototype.N=function(){ks.Z.N.call(this),ml(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bo=a.JSON.stringify,cp=a.JSON.parse,kc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function gl(){}function bc(){}var Er={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bs(){V.call(this,"d")}g(bs,V);function Ro(){V.call(this,"c")}g(Ro,V);var zi={},Sr=null;function No(){return Sr=Sr||new It}zi.Ia="serverreachability";function Rc(c){V.call(this,zi.Ia,c)}g(Rc,V);function Pr(c){const y=No();At(y,new Rc(y))}zi.STAT_EVENT="statevent";function yl(c,y){V.call(this,zi.STAT_EVENT,c),this.stat=y}g(yl,V);function Ct(c){const y=No();At(y,new yl(y,c))}zi.Ja="timingevent";function Nc(c,y){V.call(this,zi.Ja,c),this.size=y}g(Nc,V);function Rs(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function hp(c,y,w,A,z,H){c.info(function(){if(c.g)if(H){var te="",ve=H.split("&");for(let Ve=0;Ve<ve.length;Ve++){var De=ve[Ve].split("=");if(De.length>1){const ct=De[0];De=De[1];const Vn=ct.split("_");te=Vn.length>=2&&Vn[1]=="type"?te+(ct+"="+De+"&"):te+(ct+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+y+`
`+w+`
`+te})}function dp(c,y,w,A,z,H,te){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+y+`
`+w+`
`+H+" "+te})}function Ir(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+fp(c,w)+(A?" "+A:"")})}function _l(c,y){c.info(function(){return"TIMEOUT: "+y})}Ns.prototype.info=function(){};function fp(c,y){if(!c.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var w=H[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return bo(H)}catch{return y}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function un(){}g(un,gl),un.prototype.g=function(){return new XMLHttpRequest},Mc=new un;function le(c){return encodeURIComponent(String(c))}function Dc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function Zn(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new ks(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var wl={},Ls={};function Mo(c,y,w){c.M=1,c.A=He(Xt(y)),c.u=w,c.R=!0,Bi(c,null)}function Bi(c,y){c.F=Date.now(),Do(c),c.B=Xt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Uo(w.i,"t",A),c.C=0,w=c.j.L,c.h=new vl,c.g=Ml(c.j,w?y:null,!c.u),c.P>0&&(c.O=new up(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(ko[0]=z.toString()),z=ko);for(let H=0;H<z.length;H++){const te=wr(w,z[H],A||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=c.J?fe(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Pr(),hp(c.i,c.v,c.B,c.l,c.S,c.u)}Zn.prototype.ba=function(c){c=c.target;const y=this.O;y&&gi(c)==3?y.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{const ve=gi(this.g),De=this.g.ya(),Ve=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Al(this.g)))){this.K||ve!=4||De==7||(De==8||Ve<=0?Pr(3):Pr(2)),Oo(this);var y=this.g.ca();this.X=y;var w=Oc(this);if(this.o=y==200,dp(this.i,this.v,this.B,this.l,this.S,ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var H=A;break t}}H=null}if(c=H)Ir(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tl(this,c);else{this.o=!1,this.m=3,Ct(12),Ln(this),Ms(this);break e}}if(this.R){c=!0;let ct;for(;!this.K&&this.C<w.length;)if(ct=pp(this,w),ct==Ls){ve==4&&(this.m=4,Ct(14),c=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==wl){this.m=4,Ct(15),Ir(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else Ir(this.i,this.l,ct,null),Tl(this,ct);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||w.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)Ir(this.i,this.l,w,"[Invalid Chunked Response]"),Ln(this),Ms(this);else if(w.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Nl(te),te.P=!0,Ct(11))}}else Ir(this.i,this.l,w,null),Tl(this,w);ve==4&&Ln(this),this.o&&!this.K&&(ve==4?Tn(this.j,this):(this.o=!1,Do(this)))}else Cl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Ln(this),Ms(this)}}}catch{}finally{}};function Oc(c){if(!Vc(c))return c.g.la();const y=Al(c.g);if(y==="")return"";let w="";const A=y.length,z=gi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ln(c),Ms(c),"";c.h.i=new a.TextDecoder}for(let H=0;H<A;H++)c.h.h=!0,w+=c.h.i.decode(y[H],{stream:!(z&&H==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Vc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function pp(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?Ls:(w=Number(y.substring(w,A)),isNaN(w)?wl:(A+=1,A+w>y.length?Ls:(y=y.slice(A,A+w),c.C=A+w,y)))}Zn.prototype.cancel=function(){this.K=!0,Ln(this)};function Do(c){c.T=Date.now()+c.H,Fc(c,c.H)}function Fc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Rs(f(c.aa,c),y)}function Oo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Zn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(_l(this.i,this.B),this.M!=2&&(Pr(),Ct(17)),Ln(this),this.m=2,Ms(this)):Fc(this,this.T-c)};function Ms(c){c.j.I==0||c.K||Tn(c.j,c)}function Ln(c){Oo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ml(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Tl(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||Ds(w.h,c))){if(!c.L&&Ds(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)qo(w),Wo(w);else break e;Rl(w),Ct(18)}}else w.xa=z[1],0<w.xa-w.K&&z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Rs(f(w.Va,w),6e3));zc(w.h)<=1&&w.ta&&(w.ta=void 0)}else _i(w,11)}else if((c.L||w.g==c)&&qo(w),!O(y))for(z=w.Ba.g.parse(y),y=0;y<z.length;y++){let Ve=z[y];const ct=Ve[0];if(!(ct<=w.K))if(w.K=ct,Ve=Ve[1],w.I==2)if(Ve[0]=="c"){w.M=Ve[1],w.ba=Ve[2];const Vn=Ve[3];Vn!=null&&(w.ka=Vn,w.j.info("VER="+w.ka));const Xn=Ve[4];Xn!=null&&(w.za=Xn,w.j.info("SVER="+w.za));const Fn=Ve[5];Fn!=null&&typeof Fn=="number"&&Fn>0&&(A=1.5*Fn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const vi=c.g;if(vi){const Ko=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var H=A.h;H.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Wi(H,H.h),H.h=null))}if(A.G){const Zo=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(A.wa=Zo,oe(A.J,A.G,Zo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var te=c;if(A.na=Ll(A,A.L?A.ba:null,A.W),te.L){xl(A.h,te);var ve=te,De=A.O;De&&(ve.H=De),ve.D&&(Oo(ve),Do(ve)),A.g=te}else bl(A);w.i.length>0&&yi(w)}else Ve[0]!="stop"&&Ve[0]!="close"||_i(w,7);else w.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?_i(w,7):Se(w):Ve[0]!="noop"&&w.l&&w.l.qa(Ve),w.A=0)}}Pr(4)}catch{}}var mp=class{constructor(c,y){this.g=c,this.map=y}};function jc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zc(c){return c.h?1:c.g?c.g.size:0}function Ds(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Wi(c,y){c.g?c.g.add(y):c.h=y}function xl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}jc.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function El(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return E(c.i)}var Ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Re(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let z,H=null;A>=0?(z=c[w].substring(0,A),H=c[w].substring(A+1)):z=c[w],y(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Me(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Me?(this.l=c.l,Mn(this,c.j),this.o=c.o,this.g=c.g,Dn(this,c.u),this.h=c.h,Os(this,Vs(c.i)),this.m=c.m):c&&(y=String(c).match(Ar))?(this.l=!1,Mn(this,y[1]||"",!0),this.o=Hi(y[2]||""),this.g=Hi(y[3]||"",!0),Dn(this,y[4]),this.h=Hi(y[5]||"",!0),Os(this,y[6]||"",!0),this.m=Hi(y[7]||"")):(this.l=!1,this.i=new Yn(null,this.l))}Me.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(fi(y,Bc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(fi(y,Bc,!0),"@"),c.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(fi(w,w.charAt(0)=="/"?qi:Vo,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",fi(w,$i)),c.join("")},Me.prototype.resolve=function(c){const y=Xt(this);let w=!!c.j;w?Mn(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)Dn(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=y.h.lastIndexOf("/");z!=-1&&(A=y.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let te=0;te<z.length;){const ve=z[te++];ve=="."?A&&te==z.length&&H.push(""):ve==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),A&&te==z.length&&H.push("")):(H.push(ve),A=!0)}A=H.join("/")}else A=z}return w?y.h=A:w=c.i.toString()!=="",w?Os(y,Vs(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Xt(c){return new Me(c)}function Mn(c,y,w){c.j=w?Hi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Dn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Os(c,y,w){y instanceof Yn?(c.i=y,Sl(c.i,c.l)):(w||(y=fi(y,st)),c.i=new Yn(y,c.l))}function oe(c,y,w){c.i.set(y,w)}function He(c){return oe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Hi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fi(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,cn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bc=/[#\/\?@]/g,Vo=/[#\?:]/g,qi=/[#\?]/g,st=/[#\?@]/g,$i=/#/g;function Yn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Re(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Yn.prototype,t.add=function(c,y){wn(this),this.i=null,c=pi(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function Fo(c,y){wn(c),y=pi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Cr(c,y){return wn(c),y=pi(c,y),c.g.has(y)}t.forEach=function(c,y){wn(this),this.g.forEach(function(w,A){w.forEach(function(z){c.call(y,z,A,this)},this)},this)};function jo(c,y){wn(c);let w=[];if(typeof y=="string")Cr(c,y)&&(w=w.concat(c.g.get(pi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return wn(this),this.i=null,c=pi(this,c),Cr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=jo(this,c),c.length>0?String(c[0]):y):y};function Uo(c,y,w){Fo(c,y),w.length>0&&(c.i=null,c.g.set(pi(c,y),E(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const z=le(w);w=jo(this,w);for(let H=0;H<w.length;H++){let te=z;w[H]!==""&&(te+="="+le(w[H])),c.push(te)}}return this.i=c.join("&")};function Vs(c){const y=new Yn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function pi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Sl(c,y){y&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(w,A){const z=A.toLowerCase();A!=z&&(Fo(this,A),Uo(this,z,w))},c)),c.j=y}function zo(c,y){const w=new Ns;if(a.Image){const A=new Image;A.onload=m(On,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(On,w,"TestLoadImage: error",!1,y,A),A.onabort=m(On,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(On,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Wc(c,y){const w=new Ns,A=new AbortController,z=setTimeout(()=>{A.abort(),On(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(H=>{clearTimeout(z),H.ok?On(w,"TestPingServer: ok",!0,y):On(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),On(w,"TestPingServer: error",!1,y)})}function On(c,y,w,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(w)}catch{}}function gp(){this.g=new kc}function _e(c){this.i=c.Sb||null,this.h=c.ab||!1}g(_e,gl),_e.prototype.g=function(){return new Jt(this.i,this.h)};function Jt(c,y){It.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Jt,It),t=Jt.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Gi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ue(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ue(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?kr(this):Gi(this),this.readyState==3&&Ue(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,kr(this))},t.Na=function(c){this.g&&(this.response=c,kr(this))},t.ga=function(){this.g&&kr(this)};function kr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Gi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Gi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bo(c){let y="";return re(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Fs(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Bo(w),typeof c=="string"?w!=null&&le(w):oe(c,y,w))}function Oe(c){It.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Oe,It);var Pl=/^https?$/i,js=["POST","PUT"];t=Oe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(H){gt(this,H);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)w.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())w.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),z=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(js,y,void 0)>=0)||A||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of w)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){gt(this,H)}};function gt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,mi(c),Us(c)}function mi(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,At(this,"complete"),At(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Il(this):this.Xa())},t.Xa=function(){Il(this)};function Il(c){if(c.h&&typeof o<"u"){if(c.v&&gi(c)==4)setTimeout(c.Ca.bind(c),0);else if(At(c,"readystatechange"),gi(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=H===0){let te=String(c.D).match(Ar)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),A=!Pl.test(te?te.toLowerCase():"")}w=A}if(w)At(c,"complete"),At(c,"success");else{c.o=6;try{var z=gi(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",mi(c)}}finally{Us(c)}}}}function Us(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||At(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),cp(y)}};function Al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cl(c){const y={};c=(c.g&&gi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(O(c[A]))continue;var w=Dc(c[A]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=y[z]||[];y[z]=H,H.push(w)}X(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function kl(c){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zs("baseRetryDelayMs",5e3,c),this.Za=zs("retryDelaySeedMs",1e4,c),this.Ta=zs("forwardChannelMaxRetries",2,c),this.va=zs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new jc(c&&c.concurrentRequestLimit),this.Ba=new gp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){Ct(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Ll(this,null,this.W),yi(this)};function Se(c){if(hn(c),c.I==3){var y=c.V++,w=Xt(c.J);if(oe(w,"SID",c.M),oe(w,"RID",y),oe(w,"TYPE","terminate"),Ki(c,w),y=new Zn(c,c.j,y),y.M=2,y.A=He(Xt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Ml(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Do(y)}Qn(c)}function Wo(c){c.g&&(Nl(c),c.g.cancel(),c.g=null)}function hn(c){Wo(c),c.v&&(a.clearTimeout(c.v),c.v=null),qo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function yi(c){if(!Uc(c.h)&&!c.m){c.m=!0;var y=c.Ea;W||I(),K||(W(),K=!0),b.add(y,c),c.D=0}}function Hc(c,y){return zc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Rs(f(c.Ea,c,y),Gc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Zn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=fe(H),We(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=$c(this,z,y),w=Xt(this.J),oe(w,"RID",c),oe(w,"CVER",22),this.G&&oe(w,"X-HTTP-Session-Id",this.G),Ki(this,w),H&&(this.R?y="headers="+le(Bo(H))+"&"+y:this.u&&Fs(w,this.u,H)),Wi(this.h,z),this.Ra&&oe(w,"TYPE","init"),this.S?(oe(w,"$req",y),oe(w,"SID","null"),z.U=!0,Mo(z,w,null)):Mo(z,w,y),this.I=2}}else this.I==3&&(c?qc(this,c):this.i.length==0||Uc(this.h)||qc(this))};function qc(c,y){var w;y?w=y.l:w=c.V++;const A=Xt(c.J);oe(A,"SID",c.M),oe(A,"RID",w),oe(A,"AID",c.K),Ki(c,A),c.u&&c.o&&Fs(A,c.u,c.o),w=new Zn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=$c(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Wi(c.h,w),Mo(w,A,y)}function Ki(c,y){c.H&&re(c.H,function(w,A){oe(y,A,w)}),c.l&&re({},function(w,A){oe(y,A,w)})}function $c(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var z=c.i;let ve=-1;for(;;){const De=["count="+w];ve==-1?w>0?(ve=z[0].g,De.push("ofs="+ve)):ve=0:De.push("ofs="+ve);let Ve=!0;for(let ct=0;ct<w;ct++){var H=z[ct].g;const Vn=z[ct].map;if(H-=ve,H<0)ve=Math.max(0,z[ct].g-100),Ve=!1;else try{H="req"+H+"_"||"";try{var te=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Xn,Fn]of te){let vi=Fn;u(Fn)&&(vi=bo(Fn)),De.push(H+Xn+"="+encodeURIComponent(vi))}}catch(Xn){throw De.push(H+"type="+encodeURIComponent("_badmap")),Xn}}catch{A&&A(Vn)}}if(Ve){te=De.join("&");break e}}te=void 0}return c=c.i.splice(0,w),y.G=c,te}function bl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;W||I(),K||(W(),K=!0),b.add(y,c),c.A=0}}function Rl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Rs(f(c.Da,c),Gc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Rs(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Wo(this),Ho(this))};function Nl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Ho(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Xt(c.na);oe(y,"RID","rpc"),oe(y,"SID",c.M),oe(y,"AID",c.K),oe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&oe(y,"TO",c.ia),oe(y,"TYPE","xmlhttp"),Ki(c,y),c.u&&c.o&&Fs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=He(Xt(y)),w.u=null,w.R=!0,Bi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Wo(this),Rl(this),Ct(19))};function qo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Tn(c,y){var w=null;if(c.g==y){qo(c),Nl(c),c.g=null;var A=2}else if(Ds(c.h,y))w=y.G,xl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var z=c.D;A=No(),At(A,new Nc(A,w)),yi(c)}else bl(c);else if(z=y.m,z==3||z==0&&y.X>0||!(A==1&&Hc(c,y)||A==2&&Rl(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),z){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function Gc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function _i(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const z=!A;A=new Me(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mn(A,"https"),He(A),z?zo(A.toString(),w):Wc(A.toString(),w)}else Ct(2);c.I=0,c.l&&c.l.pa(y),Qn(c),hn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Qn(c){if(c.I=0,c.ja=[],c.l){const y=El(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ja,y),R(c.ja,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.oa()}}function Ll(c,y,w){var A=w instanceof Me?Xt(w):new Me(w);if(A.g!="")y&&(A.g=y+"."+A.g),Dn(A,A.u);else{var z=a.location;A=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const H=new Me(null);A&&Mn(H,A),y&&(H.g=y),z&&Dn(H,z),w&&(H.h=w),A=H}return w=c.G,y=c.wa,w&&y&&oe(A,w,y),oe(A,"VER",c.ka),Ki(c,A),A}function Ml(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Oe(new _e({ab:w})):new Oe(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $o(){}t=$o.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Go(){}Go.prototype.g=function(c,y){return new zt(c,y)};function zt(c,y){It.call(this),this.g=new kl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!O(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new br(this)}g(zt,It),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Se(this.g)},zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=bo(c),c=w);y.i.push(new mp(y.Ya++,c)),y.I==3&&yi(y)},zt.prototype.N=function(){this.g.l=null,delete this.j,Se(this.g),delete this.g,zt.Z.N.call(this)};function Dl(c){bs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Dl,bs);function Kc(){Ro.call(this),this.status=1}g(Kc,Ro);function br(c){this.g=c}g(br,$o),br.prototype.ra=function(){At(this.g,"a")},br.prototype.qa=function(c){At(this.g,new Dl(c))},br.prototype.pa=function(c){At(this.g,new Kc)},br.prototype.oa=function(){At(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,TA=function(){return new Go},wA=function(){return No()},vA=zi,qg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Jh=Lo,Lc.COMPLETE="complete",_A=Lc,bc.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",It.prototype.listen=It.prototype.J,ru=bc,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,yA=Oe}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const g1="@firebase/firestore",y1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new J_("@firebase/firestore");function ra(){return go.logLevel}function ie(t,...e){if(go.logLevel<=Ae.DEBUG){const n=e.map(av);go.debug(`Firestore (${ll}): ${t}`,...n)}}function gr(t,...e){if(go.logLevel<=Ae.ERROR){const n=e.map(av);go.error(`Firestore (${ll}): ${t}`,...n)}}function yo(t,...e){if(go.logLevel<=Ae.WARN){const n=e.map(av);go.warn(`Firestore (${ll}): ${t}`,...n)}}function av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,xA(t,i,n)}function xA(t,e,n){let i=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gr(i),new Error(i)}function je(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||xA(e,r,i)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class m6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g6{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new EA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class y6{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new y6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=w6(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ce(t,e){return t<e?-1:t>e?1:0}function $g(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return gm(r)===gm(o)?Ce(r,o):gm(r)?1:-1}return Ce(t.length,e.length)}const T6=55296,x6=57343;function gm(t){const e=t.charCodeAt(0);return e>=T6&&e<=x6}function Ka(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="__name__";class Ei{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ge(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ei?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ei.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ce(e.length,n.length)}static compareSegments(e,n){const i=Ei.isNumericId(e),r=Ei.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ei.extractNumericId(e).compare(Ei.extractNumericId(n)):$g(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class et extends Ei{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const E6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Ei{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return E6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v1}static keyField(){return new Nt([v1])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ue(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(et.fromString(e))}static fromName(e){return new de(et.fromString(e).popFirst(5))}static empty(){return new de(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t,e,n){if(!n)throw new ue(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PA(t,e,n,i){if(e===!0&&i===!0)throw new ue(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w1(t){if(!de.isDocumentKey(t))throw new ue(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lv(t);throw new ue(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function gc(t,e){if(!IA(t))throw new ue(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ue(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=-62135596800,x1=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*x1);return new qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<T1)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x1}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-T1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:wt("string",qe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new qe(0,0))}static max(){return new we(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=-1;function P6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new ds(r,de.empty(),e)}function I6(t){return new ds(t.readTime,t.key,Xu)}class ds{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ds(we.min(),de.empty(),Xu)}static max(){return new ds(we.max(),de.empty(),Xu)}}function A6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==C6)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function b6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=-1;function Wf(t){return t==null}function $d(t){return t===0&&1/t==-1/0}function R6(t){return typeof t=="number"&&Number.isInteger(t)&&!$d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="";function N6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=E1(e)),e=L6(t.get(n),e);return E1(e)}function L6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case AA:n+="";break;default:n+=o}}return n}function E1(t){return t+AA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ft.RED,this.left=r??Ft.EMPTY,this.right=o??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ft(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ft.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P1(this.data.getIterator())}getIteratorFrom(e){return new P1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class P1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new In([])}unionWith(e){let n=new St(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kA("Invalid base64 string: "+o):o}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const M6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=M6.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="server_timestamp",RA="__type__",NA="__previous_value__",LA="__local_write_time__";function cv(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RA])==null?void 0:i.stringValue)===bA}function Hf(t){const e=t.mapValue.fields[NA];return cv(e)?Hf(e):e}function Ju(t){const e=fs(t.mapValue.fields[LA].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Gd="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||Gd}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Gd}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",O6="__max__",Lh={mapValue:{}},DA="__vector__",Kd="value";function ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cv(t)?4:F6(t)?9007199254740991:V6(t)?10:11:ge(28295,{value:t})}function Vi(t,e){if(t===e)return!0;const n=ms(t);if(n!==ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ju(t).isEqual(Ju(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=fs(r.timestampValue),u=fs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ps(r.bytesValue).isEqual(ps(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return dt(r.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return dt(r.integerValue)===dt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=dt(r.doubleValue),u=dt(o.doubleValue);return a===u?$d(a)===$d(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ka(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(S1(a)!==S1(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Vi(a[h],u[h])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function ec(t,e){return(t.values||[]).find(n=>Vi(n,e))!==void 0}function Ya(t,e){if(t===e)return 0;const n=ms(t),i=ms(e);if(n!==i)return Ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=dt(o.integerValue||o.doubleValue),h=dt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return I1(t.timestampValue,e.timestampValue);case 4:return I1(Ju(t),Ju(e));case 5:return $g(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ps(o),h=ps(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Ce(u[f],h[f]);if(m!==0)return m}return Ce(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ce(dt(o.latitude),dt(a.latitude));return u!==0?u:Ce(dt(o.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,E,R,k;const u=o.fields||{},h=a.fields||{},f=(_=u[Kd])==null?void 0:_.arrayValue,m=(E=h[Kd])==null?void 0:E.arrayValue,g=Ce(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return g!==0?g:A1(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Lh.mapValue&&a===Lh.mapValue)return 0;if(o===Lh.mapValue)return 1;if(a===Lh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=$g(h[g],m[g]);if(_!==0)return _;const E=Ya(u[h[g]],f[m[g]]);if(E!==0)return E}return Ce(h.length,m.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function I1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=fs(t),i=fs(e),r=Ce(n.seconds,i.seconds);return r!==0?r:Ce(n.nanos,i.nanos)}function A1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ya(n[r],i[r]);if(o)return o}return Ce(n.length,i.length)}function Qa(t){return Gg(t)}function Gg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=fs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Gg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Gg(n.fields[a])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function ed(t){switch(ms(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(t);return e?16+ed(e):16;case 5:return 2*t.stringValue.length;case 6:return ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+ed(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Es(i.fields,(o,a)=>{r+=o.length+ed(a)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function Kg(t){return!!t&&"integerValue"in t}function hv(t){return!!t&&"arrayValue"in t}function C1(t){return!!t&&"nullValue"in t}function k1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function td(t){return!!t&&"mapValue"in t}function V6(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MA])==null?void 0:i.stringValue)===DA}function xu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xu(t.arrayValue.values[n]);return e}return{...t}}function F6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===O6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=xu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];td(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Es(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new mn(xu(this.value))}}function OA(t){const e=[];return Es(t.fields,(n,i)=>{const r=new Nt([n]);if(td(i)){const o=OA(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Kt(e,0,we.min(),we.min(),we.min(),mn.empty(),0)}static newFoundDocument(e,n,i,r){return new Kt(e,1,n,we.min(),i,r,0)}static newNoDocument(e,n){return new Kt(e,2,n,we.min(),we.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,we.min(),we.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.position=e,this.inclusive=n}}function b1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=Ya(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function R1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n="asc"){this.field=e,this.dir=n}}function j6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class xt extends VA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new z6(e,n,i):n==="array-contains"?new H6(e,i):n==="in"?new q6(e,i):n==="not-in"?new $6(e,i):n==="array-contains-any"?new G6(e,i):new xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new B6(e,i):new W6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&ms(this.value)===ms(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fi extends VA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Fi(e,n)}matches(e){return FA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FA(t){return t.op==="and"}function jA(t){return U6(t)&&FA(t)}function U6(t){for(const e of t.filters)if(e instanceof Fi)return!1;return!0}function Zg(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Qa(t.value);if(jA(t))return t.filters.map(e=>Zg(e)).join(",");{const e=t.filters.map(n=>Zg(n)).join(",");return`${t.op}(${e})`}}function UA(t,e){return t instanceof xt?function(i,r){return r instanceof xt&&i.op===r.op&&i.field.isEqual(r.field)&&Vi(i.value,r.value)}(t,e):t instanceof Fi?function(i,r){return r instanceof Fi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&UA(a,r.filters[u]),!0):!1}(t,e):void ge(19439)}function zA(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Qa(n.value)}`}(t):t instanceof Fi?function(n){return n.op.toString()+" {"+n.getFilters().map(zA).join(" ,")+"}"}(t):"Filter"}class z6 extends xt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class B6 extends xt{constructor(e,n){super(e,"in",n),this.keys=BA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W6 extends xt{constructor(e,n){super(e,"not-in",n),this.keys=BA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class H6 extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hv(n)&&ec(n.arrayValue,this.value)}}class q6 extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class $6 extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ec(this.value.arrayValue,n)}}class G6 extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ec(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function N1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new K6(t,e,n,i,r,o,a)}function dv(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Zg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qa(i)).join(",")),e.Te=n}return e.Te}function fv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!j6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R1(t.startAt,e.startAt)&&R1(t.endAt,e.endAt)}function Yg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z6(t,e,n,i,r,o,a,u){return new qf(t,e,n,i,r,o,a,u)}function $f(t){return new qf(t)}function L1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y6(t){return t.collectionGroup!==null}function Eu(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new St(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yd(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Yd(Nt.keyField(),i))}return e.Ie}function Li(t){const e=Te(t);return e.Ee||(e.Ee=Q6(e,Eu(t))),e.Ee}function Q6(t,e){if(t.limitType==="F")return N1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Yd(r.field,o)});const n=t.endAt?new Zd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Zd(t.startAt.position,t.startAt.inclusive):null;return N1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Qg(t,e,n){return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gf(t,e){return fv(Li(t),Li(e))&&t.limitType===e.limitType}function WA(t){return`${dv(Li(t))}|lt:${t.limitType}`}function sa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>zA(r)).join(", ")}]`),Wf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Qa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Qa(r)).join(",")),`Target(${i})`}(Li(t))}; limitType=${t.limitType})`}function Kf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Eu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=b1(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Eu(i),r)||i.endAt&&!function(a,u,h){const f=b1(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Eu(i),r))}(t,e)}function X6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HA(t){return(e,n)=>{let i=!1;for(const r of Eu(t)){const o=J6(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function J6(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ya(h,f):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=new rt(de.comparator);function yr(){return e5}const qA=new rt(de.comparator);function su(...t){let e=qA;for(const n of t)e=e.insert(n.key,n);return e}function $A(t){let e=qA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Js(){return Su()}function GA(){return Su()}function Su(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const t5=new rt(de.comparator),n5=new St(de.comparator);function ke(...t){let e=n5;for(const n of t)e=e.add(n);return e}const i5=new St(Ce);function r5(){return i5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function KA(t){return{integerValue:""+t}}function s5(t,e){return R6(e)?KA(e):pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function o5(t,e,n){return t instanceof Qd?function(r,o){const a={fields:{[RA]:{stringValue:bA},[LA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&cv(o)&&(o=Hf(o)),o&&(a.fields[NA]=o),{mapValue:a}}(n,e):t instanceof tc?YA(t,e):t instanceof nc?QA(t,e):function(r,o){const a=ZA(r,o),u=M1(a)+M1(r.Ae);return Kg(a)&&Kg(r.Ae)?KA(u):pv(r.serializer,u)}(t,e)}function a5(t,e,n){return t instanceof tc?YA(t,e):t instanceof nc?QA(t,e):n}function ZA(t,e){return t instanceof Xd?function(i){return Kg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Qd extends Zf{}class tc extends Zf{constructor(e){super(),this.elements=e}}function YA(t,e){const n=XA(e);for(const i of t.elements)n.some(r=>Vi(r,i))||n.push(i);return{arrayValue:{values:n}}}class nc extends Zf{constructor(e){super(),this.elements=e}}function QA(t,e){let n=XA(e);for(const i of t.elements)n=n.filter(r=>!Vi(r,i));return{arrayValue:{values:n}}}class Xd extends Zf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function M1(t){return dt(t.integerValue||t.doubleValue)}function XA(t){return hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof tc&&r instanceof tc||i instanceof nc&&r instanceof nc?Ka(i.elements,r.elements,Vi):i instanceof Xd&&r instanceof Xd?Vi(i.Ae,r.Ae):i instanceof Qd&&r instanceof Qd}(t.transform,e.transform)}class u5{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yf{}function JA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tC(t.key,Mi.none()):new yc(t.key,t.data,Mi.none());{const n=t.data,i=mn.empty();let r=new St(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Ss(t.key,i,new In(r.toArray()),Mi.none())}}function c5(t,e,n){t instanceof yc?function(r,o,a){const u=r.value.clone(),h=O1(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(r,o,a){if(!nd(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=O1(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(eC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Pu(t,e,n,i){return t instanceof yc?function(o,a,u,h){if(!nd(o.precondition,a))return u;const f=o.value.clone(),m=V1(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ss?function(o,a,u,h){if(!nd(o.precondition,a))return u;const f=V1(o.fieldTransforms,h,a),m=a.data;return m.setAll(eC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return nd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function h5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=ZA(i.transform,r||null);o!=null&&(n===null&&(n=mn.empty()),n.set(i.field,o))}return n||null}function D1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ka(i,r,(o,a)=>l5(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends Yf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ss extends Yf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function O1(t,e,n){const i=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,a5(a,u,n[r]))}return i}function V1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,o5(o,a,e))}return i}class tC extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d5 extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&c5(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Pu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Pu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=GA();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=JA(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(n,i)=>D1(n,i))&&Ka(this.baseMutations,e.baseMutations,(n,i)=>D1(n,i))}}class mv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return t5}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new mv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Ne;function g5(t){switch(t){case Q.OK:return ge(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function nC(t){if(t===void 0)return gr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case _t.OK:return Q.OK;case _t.CANCELLED:return Q.CANCELLED;case _t.UNKNOWN:return Q.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Q.INTERNAL;case _t.UNAVAILABLE:return Q.UNAVAILABLE;case _t.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case _t.NOT_FOUND:return Q.NOT_FOUND;case _t.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case _t.ABORTED:return Q.ABORTED;case _t.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case _t.DATA_LOSS:return Q.DATA_LOSS;default:return ge(39323,{code:t})}}(Ne=_t||(_t={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new is([4294967295,4294967295],0);function F1(t){const e=y5().encode(t),n=new gA;return n.update(e),new Uint8Array(n.digest())}function j1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new is([n,i],0),new is([r,o],0)]}class gv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(i<0)throw new ou(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=is.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(is.fromNumber(i)));return r.compare(_5)===1&&(r=new is([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=F1(e),[i,r]=j1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new gv(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=F1(e),[i,r]=j1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Qf(we.min(),r,new rt(Ce),yr(),ke())}}class _c{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _c(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class iC{constructor(e,n){this.targetId=e,this.Ce=n}}class rC{constructor(e,n,i=Mt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class U1{constructor(){this.ve=0,this.Fe=z1(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),i=ke();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge(38017,{changeType:o})}}),new _c(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=z1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v5{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=Mh(),this.He=Mh(),this.Ye=new rt(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Yg(o))if(i===0){const a=new de(o.path);this.et(n,a,Kt.newNoDocument(a,we.min()))}else je(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ps(i).toUint8Array()}catch(h){if(h instanceof kA)return yo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new gv(a,r,o)}catch(h){return yo(h instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Yg(u.target)){const h=new de(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Kt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=ke();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Qf(e,n,this.Ye,this.je,i);return this.je=yr(),this.Je=Mh(),this.He=Mh(),this.Ye=new rt(Ce),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new U1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mh(){return new rt(de.comparator)}function z1(){return new rt(de.comparator)}const w5={asc:"ASCENDING",desc:"DESCENDING"},T5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x5={and:"AND",or:"OR"};class E5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xg(t,e){return t.useProto3Json||Wf(e)?e:{value:e}}function Jd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S5(t,e){return Jd(t,e.toTimestamp())}function Di(t){return je(!!t,49232),we.fromTimestamp(function(n){const i=fs(n);return new qe(i.seconds,i.nanos)}(t))}function yv(t,e){return Jg(t,e).canonicalString()}function Jg(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oC(t){const e=et.fromString(t);return je(hC(e),10190,{key:e.toString()}),e}function ey(t,e){return yv(t.databaseId,e.path)}function ym(t,e){const n=oC(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(lC(n))}function aC(t,e){return yv(t.databaseId,e)}function P5(t){const e=oC(t);return e.length===4?et.emptyPath():lC(e)}function ty(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lC(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function B1(t,e,n){return{name:ey(t,e),fields:n.value.mapValue.fields}}function I5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(je(m===void 0||typeof m=="string",58123),Mt.fromBase64String(m||"")):(je(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Mt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Q.UNKNOWN:nC(f.code);return new ue(m,f.message||"")}(a);n=new rC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ym(t,i.document.name),o=Di(i.document.updateTime),a=i.document.createTime?Di(i.document.createTime):we.min(),u=new mn({mapValue:{fields:i.document.fields}}),h=Kt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new id(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ym(t,i.document),o=i.readTime?Di(i.readTime):we.min(),a=Kt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new id([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ym(t,i.document),o=i.removedTargetIds||[];n=new id([],o,r,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new m5(r,o),u=i.targetId;n=new iC(u,a)}}return n}function A5(t,e){let n;if(e instanceof yc)n={update:B1(t,e.key,e.value)};else if(e instanceof tC)n={delete:ey(t,e.key)};else if(e instanceof Ss)n={update:B1(t,e.key,e.data),updateMask:O5(e.fieldMask)};else{if(!(e instanceof d5))return ge(16599,{Vt:e.type});n={verify:ey(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof tc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof nc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Xd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ge(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:S5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)}(t,e.precondition)),n}function C5(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Di(r.updateTime):Di(o);return a.isEqual(we.min())&&(a=Di(o)),new u5(a,r.transformResults||[])}(n,e))):[]}function k5(t,e){return{documents:[aC(t,e.path)]}}function b5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aC(t,r);const o=function(f){if(f.length!==0)return cC(Fi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:oa(_.field),direction:L5(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Xg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function R5(t){let e=P5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){je(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=uC(g);return _ instanceof Fi&&jA(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(R){return new Yd(aa(R.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Wf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,E=g.values||[];return new Zd(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,E=g.values||[];return new Zd(E,_)}(n.endAt)),Z6(e,r,a,o,u,"F",h,f)}function N5(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=aa(n.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=aa(n.unaryFilter.field);return xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=aa(n.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=aa(n.unaryFilter.field);return xt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(aa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fi.create(n.compositeFilter.filters.map(i=>uC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function L5(t){return w5[t]}function M5(t){return T5[t]}function D5(t){return x5[t]}function oa(t){return{fieldPath:t.canonicalString()}}function aa(t){return Nt.fromServerFormat(t.fieldPath)}function cC(t){return t instanceof xt?function(n){if(n.op==="=="){if(k1(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(C1(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k1(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(C1(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:M5(n.op),value:n.value}}}(t):t instanceof Fi?function(n){const i=n.getFilters().map(r=>cC(r));return i.length===1?i[0]:{compositeFilter:{op:D5(n.op),filters:i}}}(t):ge(54877,{filter:t})}function O5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,i,r,o=we.min(),a=we.min(),u=Mt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.yt=e}}function F5(t){const e=R5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.Cn=new U5}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ds.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class U5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new St(et.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new St(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dC=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(dC,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xa(0)}static cr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="LruGarbageCollector",z5=1048576;function q1([t,e],[n,i]){const r=Ce(t,n);return r===0?Ce(e,i):r}class B5{constructor(e){this.Ir=e,this.buffer=new St(q1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();q1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(H1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cl(n)?ie(H1,"Ignoring IndexedDB error during garbage collection: ",n):await ul(n)}await this.Vr(3e5)})}}class H5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Bf.ce);const i=new B5(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(W1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ra()<=Ae.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function q5(t,e){return new H5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Pu(i.mutation,r,In.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=su();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=yr();const a=Su(),u=function(){return Su()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Ss)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Pu(m.mutation,f,m.mutation.getFieldMask(),qe.now())):a.set(f.key,In.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new G5(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Su();let r=new rt((a,u)=>a-u),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||In.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||ke()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=GA();m.forEach(_=>{if(!o.has(_)){const E=JA(n.get(_),i.get(_));E!==null&&g.set(_,E),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(Js());let u=Xu,h=o;return a.next(f=>Z.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ke())).next(m=>({batchId:u,changes:$A(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=su();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,h=>{const f=function(g,_){return new qf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Kt.newInvalidDocument(m)))});let u=su();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Pu(m.mutation,f,In.empty(),qe.now()),Kf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Di(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:F5(r.bundledQuery),readTime:Di(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.overlays=new rt(de.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Js();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=Js(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new rt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Js(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Js(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Z.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new p5(n,i));let o=this.qr.get(n);o===void 0&&(o=ke(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.Qr=new St(bt.$r),this.Ur=new St(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new bt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new bt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new de(new et([])),i=new bt(n,e),r=new bt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new et([])),i=new bt(n,e),r=new bt(n,e+1);let o=ke();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new bt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(bt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new f5(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new bt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?uv:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(Ce);return n.forEach(r=>{const o=new bt(r,0),a=new bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new bt(new de(o),0);let u=new St(Ce);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),Z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,r=>{const o=new bt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new bt(n,0),r=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.ri=e,this.docs=function(){return new rt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let i=yr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Kt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=yr();const a=n.path,u=new de(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||A6(I6(m),i)<=0||(r.has(m.key)||Kf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new eU(this)}getSize(e){return Z.resolve(this.size)}}class eU extends $5{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.persistence=e,this.si=new Io(n=>dv(n),fv),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new _v,this.targetCount=0,this.ai=Xa.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new Q5,this.referenceDelegate=e(this),this.Pi=new tU(this),this.indexManager=new j5,this.remoteDocumentCache=function(r){return new J5(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new V5(n),this.Ii=new Z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new X5(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new nU(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class nU extends k6{constructor(e){super(),this.currentSequenceNumber=e}}class vv{constructor(e){this.persistence=e,this.Ri=new _v,this.Vi=null}static mi(e){return new vv(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const r=de.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ef{constructor(e,n){this.persistence=e,this.pi=new Io(i=>N6(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=q5(this,n)}static mi(e,n){return new ef(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,we.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ed(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ke(),r=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new wv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return D3()?8:b6(Qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new iU;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ra()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(ra()<=Ae.DEBUG&&ie("QueryEngine","Query:",sa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ra()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):Z.resolve())}ys(e,n){if(L1(n))return Z.resolve(null);let i=Li(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Qg(n,null,"F"),i=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ke(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Qg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return L1(n)||r.isEqual(we.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Z.resolve(null):(ra()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sa(n)),this.vs(e,a,n,P6(r,Xu)).next(u=>u))})}Ds(e,n){let i=new St(HA(e));return n.forEach((r,o)=>{Kf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ra()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",sa(n)),this.ps.getDocumentsMatchingQuery(e,n,ds.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LocalStore",sU=3e8;class oU{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new rt(Ce),this.xs=new Io(o=>dv(o),fv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function aU(t,e,n,i){return new oU(t,e,n,i)}async function pC(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=ke();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function lU(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let E=Z.resolve();return _.forEach(R=>{E=E.next(()=>m.getEntry(h,R)).next(k=>{const N=f.docVersions.get(R);je(N!==null,48541),k.version.compareTo(N)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=ke();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function mC(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function uU(t,e){const n=Te(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Mt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(g,E),function(k,N,P){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=sU?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,E,m)&&u.push(n.Pi.updateTargetData(o,E))});let h=yr(),f=ke();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(cU(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(we.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function cU(t,e,n){let i=ke(),r=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=yr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(we.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ie(Tv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function hU(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=uv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function dU(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new $r(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function ny(t,e,n){const i=Te(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!cl(a))throw a;ie(Tv,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function $1(t,e,n){const i=Te(t);let r=we.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Te(h),_=g.xs.get(m);return _!==void 0?Z.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Li(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:we.min(),n?o:ke())).next(u=>(fU(i,X6(e),u),{documents:u,Qs:o})))}function fU(t,e,n){let i=t.Os.get(e)||we.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class G1{constructor(){this.activeTargetIds=r5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pU{constructor(){this.Mo=new G1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new G1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="ConnectivityMonitor";class Z1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(K1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(K1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh=null;function iy(){return Dh===null?Dh=function(){return 268435456+Math.round(2147483648*Math.random())}():Dh++,"0x"+Dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="RestConnection",gU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Gd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=iy(),u=this.zo(e,n.toUriEncodedString());ie(_m,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=xs(f);return this.Jo(e,u,h,i,m).then(g=>(ie(_m,`Received RPC '${e}' ${a}: `,g),g),g=>{throw yo(_m,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=gU[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class vU extends yU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=iy();return new Promise((u,h)=>{const f=new yA;f.setWithCredentials(!0),f.listenOnce(_A.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Jh.NO_ERROR:const g=f.getResponseJson();ie(Ht,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Jh.TIMEOUT:ie(Ht,`RPC '${e}' ${a} timed out`),h(new ue(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const _=f.getStatus();if(ie(Ht,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const R=E==null?void 0:E.error;if(R&&R.status&&R.message){const k=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(T)>=0?T:Q.UNKNOWN}(R.status);h(new ue(k,R.message))}else h(new ue(Q.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ue(Q.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Ht,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Ht,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=iy(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=TA(),u=wA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Ht,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,E=!1;const R=new _U({Yo:N=>{E?ie(Ht,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(_||(ie(Ht,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),ie(Ht,`RPC '${e}' stream ${r} sending:`,N),g.send(N))},Zo:()=>g.close()}),k=(N,P,T)=>{N.listen(P,C=>{try{T(C)}catch(j){setTimeout(()=>{throw j},0)}})};return k(g,ru.EventType.OPEN,()=>{E||(ie(Ht,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),k(g,ru.EventType.CLOSE,()=>{E||(E=!0,ie(Ht,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(g))}),k(g,ru.EventType.ERROR,N=>{E||(E=!0,yo(Ht,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),R.a_(new ue(Q.UNAVAILABLE,"The operation could not be completed")))}),k(g,ru.EventType.MESSAGE,N=>{var P;if(!E){const T=N.data[0];je(!!T,16349);const C=T,j=(C==null?void 0:C.error)||((P=C[0])==null?void 0:P.error);if(j){ie(Ht,`RPC '${e}' stream ${r} received error:`,j);const W=j.status;let K=function(M){const D=_t[M];if(D!==void 0)return nC(D)}(W),b=j.message;K===void 0&&(K=Q.INTERNAL,b="Unknown error status: "+W+" with message "+j.message),E=!0,R.a_(new ue(K,b)),g.close()}else ie(Ht,`RPC '${e}' stream ${r} received:`,T),R.u_(T)}}),k(u,vA.STAT_EVENT,N=>{N.stat===qg.PROXY?ie(Ht,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===qg.NOPROXY&&ie(Ht,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return new E5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="PersistentStream";class yC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ue(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(Y1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(Y1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wU extends yC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=I5(this.serializer,e),i=function(o){if(!("targetChange"in o))return we.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?Di(a.readTime):we.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=ty(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Yg(h)?{documents:k5(o,h)}:{query:b5(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=sC(o,a.resumeToken);const f=Xg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(we.min())>0){u.readTime=Jd(o,a.snapshotVersion.toTimestamp());const f=Xg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=N5(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=ty(this.serializer),n.removeTarget=e,this.q_(n)}}class TU extends yC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C5(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ty(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>A5(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{}class EU extends xU{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Jg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(Q.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Jg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(Q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class SU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class PU{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ao(this)&&(ie(_o,"Restarting streams for network reachability change."),await async function(h){const f=Te(h);f.Ea.add(4),await vc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Jf(f)}(this))})}),this.Ra=new SU(i,r)}}async function Jf(t){if(Ao(t))for(const e of t.da)await e(!0)}async function vc(t){for(const e of t.da)await e(!1)}function _C(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pv(n)?Sv(n):hl(n).O_()&&Ev(n,e))}function xv(t,e){const n=Te(t),i=hl(n);n.Ia.delete(e),i.O_()&&vC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ao(n)&&n.Ra.set("Unknown"))}function Ev(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hl(t).Y_(e)}function vC(t,e){t.Va.Ue(e),hl(t).Z_(e)}function Sv(t){t.Va=new v5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),hl(t).start(),t.Ra.ua()}function Pv(t){return Ao(t)&&!hl(t).x_()&&t.Ia.size>0}function Ao(t){return Te(t).Ea.size===0}function wC(t){t.Va=void 0}async function IU(t){t.Ra.set("Online")}async function AU(t){t.Ia.forEach((e,n)=>{Ev(t,e)})}async function CU(t,e){wC(t),Pv(t)?(t.Ra.ha(e),Sv(t)):t.Ra.set("Unknown")}async function kU(t,e,n){if(t.Ra.set("Online"),e instanceof rC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await tf(t,i)}else if(e instanceof id?t.Va.Ze(e):e instanceof iC?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await mC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Mt.EMPTY_BYTE_STRING,m.snapshotVersion)),vC(o,h);const g=new $r(m.target,h,f,m.sequenceNumber);Ev(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(_o,"Failed to raise snapshot:",i),await tf(t,i)}}async function tf(t,e,n){if(!cl(e))throw e;t.Ea.add(1),await vc(t),t.Ra.set("Offline"),n||(n=()=>mC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(_o,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jf(t)})}function TC(t,e){return e().catch(n=>tf(t,n,e))}async function ep(t){const e=Te(t),n=gs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uv;for(;bU(e);)try{const r=await hU(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,RU(e,r)}catch(r){await tf(e,r)}xC(e)&&EC(e)}function bU(t){return Ao(t)&&t.Ta.length<10}function RU(t,e){t.Ta.push(e);const n=gs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xC(t){return Ao(t)&&!gs(t).x_()&&t.Ta.length>0}function EC(t){gs(t).start()}async function NU(t){gs(t).ra()}async function LU(t){const e=gs(t);for(const n of t.Ta)e.ea(n.mutations)}async function MU(t,e,n){const i=t.Ta.shift(),r=mv.from(i,e,n);await TC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ep(t)}async function DU(t,e){e&&gs(t).X_&&await async function(i,r){if(function(a){return g5(a)&&a!==Q.ABORTED}(r.code)){const o=i.Ta.shift();gs(i).B_(),await TC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await ep(i)}}(t,e),xC(t)&&EC(t)}async function Q1(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ie(_o,"RemoteStore received new credentials");const i=Ao(n);n.Ea.add(3),await vc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jf(n)}async function OU(t,e){const n=Te(t);e?(n.Ea.delete(2),await Jf(n)):e||(n.Ea.add(2),await vc(n),n.Ra.set("Unknown"))}function hl(t){return t.ma||(t.ma=function(n,i,r){const o=Te(n);return o.sa(),new wU(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:IU.bind(null,t),t_:AU.bind(null,t),r_:CU.bind(null,t),H_:kU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Pv(t)?Sv(t):t.Ra.set("Unknown")):(await t.ma.stop(),wC(t))})),t.ma}function gs(t){return t.fa||(t.fa=function(n,i,r){const o=Te(n);return o.sa(),new TU(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:NU.bind(null,t),r_:DU.bind(null,t),ta:LU.bind(null,t),na:MU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ep(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(_o,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Iv(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(t,e){if(gr("AsyncQueue",`${e}: ${t}`),cl(t))return new ue(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=su(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.ga=new rt(de.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ja{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ja(e,n,Ma.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class FU{constructor(){this.queries=J1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Te(n),o=r.queries;r.queries=J1(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new ue(Q.ABORTED,"Firestore shutting down"))}}function J1(){return new Io(t=>WA(t),Gf)}async function SC(t,e){const n=Te(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new VU,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Av(a,`Initialization of query '${sa(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Cv(n)}async function PC(t,e){const n=Te(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function jU(t,e){const n=Te(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Cv(n)}function UU(t,e,n){const i=Te(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Cv(t){t.Ca.forEach(e=>{e.next()})}var ry,ex;(ex=ry||(ry={})).Ma="default",ex.Cache="cache";class IC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ry.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.key=e}}class CC{constructor(e){this.key=e}}class zU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=HA(e),this.tu=new Ma(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new X1,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),E=Kf(this.query,g)?g:null,R=!!_&&this.mutatedKeys.has(_.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;_&&E?_.data.isEqual(E.data)?R!==k&&(i.track({type:3,doc:E}),N=!0):this.su(_,E)||(i.track({type:2,doc:E}),N=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),N=!0):_&&!E&&(i.track({type:1,doc:_}),N=!0,(h||f)&&(u=!0)),N&&(E?(a=a.add(E),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(E,R){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:N})}};return k(E)-k(R)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Ja(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new CC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new AC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kv="SyncEngine";class BU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class WU{constructor(e){this.key=e,this.hu=!1}}class HU{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Io(u=>WA(u),Gf),this.Iu=new Map,this.Eu=new Set,this.du=new rt(de.comparator),this.Au=new Map,this.Ru=new _v,this.Vu={},this.mu=new Map,this.fu=Xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qU(t,e,n=!0){const i=MC(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await kC(i,e,n,!0),r}async function $U(t,e){const n=MC(t);await kC(n,e,!0,!1)}async function kC(t,e,n,i){const r=await dU(t.localStore,Li(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await GU(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&_C(t.remoteStore,r),u}async function GU(t,e,n,i,r){t.pu=(g,_,E)=>async function(k,N,P,T){let C=N.view.ru(P);C.Cs&&(C=await $1(k.localStore,N.query,!1).then(({documents:b})=>N.view.ru(b,C)));const j=T&&T.targetChanges.get(N.targetId),W=T&&T.targetMismatches.get(N.targetId)!=null,K=N.view.applyChanges(C,k.isPrimaryClient,j,W);return nx(k,N.targetId,K.au),K.snapshot}(t,g,_,E);const o=await $1(t.localStore,e,!0),a=new zU(e,o.Qs),u=a.ru(o.documents),h=_c.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);nx(t,n,f.au);const m=new BU(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function KU(t,e,n){const i=Te(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Gf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ny(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xv(i.remoteStore,r.targetId),sy(i,r.targetId)}).catch(ul)):(sy(i,r.targetId),await ny(i.localStore,r.targetId,!0))}async function ZU(t,e){const n=Te(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xv(n.remoteStore,i.targetId))}async function YU(t,e,n){const i=iz(t);try{const r=await function(a,u){const h=Te(a),f=qe.now(),m=u.reduce((E,R)=>E.add(R.key),ke());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=yr(),k=ke();return h.Ns.getEntries(E,m).next(N=>{R=N,R.forEach((P,T)=>{T.isValidDocument()||(k=k.add(P))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,R)).next(N=>{g=N;const P=[];for(const T of u){const C=h5(T,g.get(T.key).overlayedDocument);C!=null&&P.push(new Ss(T.key,C,OA(C.value.mapValue),Mi.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,P,u)}).next(N=>{_=N;const P=N.applyToLocalDocumentSet(g,k);return h.documentOverlayCache.saveOverlays(E,N.batchId,P)})}).then(()=>({batchId:_.batchId,changes:$A(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new rt(Ce)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await wc(i,r.changes),await ep(i.remoteStore)}catch(r){const o=Av(r,"Failed to persist write");n.reject(o)}}async function bC(t,e){const n=Te(t);try{const i=await uU(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?je(a.hu,14607):r.removedDocuments.size>0&&(je(a.hu,42227),a.hu=!1))}),await wc(n,i,e)}catch(i){await ul(i)}}function tx(t,e,n){const i=Te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Te(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&Cv(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function QU(t,e,n){const i=Te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new rt(de.comparator);a=a.insert(o,Kt.newNoDocument(o,we.min()));const u=ke().add(o),h=new Qf(we.min(),new Map,new rt(Ce),a,u);await bC(i,h),i.du=i.du.remove(o),i.Au.delete(e),bv(i)}else await ny(i.localStore,e,!1).then(()=>sy(i,e,n)).catch(ul)}async function XU(t,e){const n=Te(t),i=e.batch.batchId;try{const r=await lU(n.localStore,e);NC(n,i,null),RC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await wc(n,r)}catch(r){await ul(r)}}async function JU(t,e,n){const i=Te(t);try{const r=await function(a,u){const h=Te(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(je(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);NC(i,e,n),RC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await wc(i,r)}catch(r){await ul(r)}}function RC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function NC(t,e,n){const i=Te(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function sy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||LC(t,i)})}function LC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),bv(t))}function nx(t,e,n){for(const i of n)i instanceof AC?(t.Ru.addReference(i.key,e),ez(t,i)):i instanceof CC?(ie(kv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||LC(t,i.key)):ge(19791,{wu:i})}function ez(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(kv,"New document in limbo: "+n),t.Eu.add(i),bv(t))}function bv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(et.fromString(e)),i=t.fu.next();t.Au.set(i,new WU(n)),t.du=t.du.insert(n,i),_C(t.remoteStore,new $r(Li($f(n.path)),i,"TargetPurposeLimboResolution",Bf.ce))}}async function wc(t,e,n){const i=Te(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=wv.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Te(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Z.forEach(f,_=>Z.forEach(_.Es,E=>m.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>Z.forEach(_.ds,E=>m.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!cl(g))throw g;ie(Tv,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const E=m.Ms.get(_),R=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(R);m.Ms=m.Ms.insert(_,k)}}}(i.localStore,o))}async function tz(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ie(kv,"User change. New user:",e.toKey());const i=await pC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new ue(Q.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wc(n,i.Ls)}}function nz(t,e){const n=Te(t),i=n.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let r=ke();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function MC(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QU.bind(null,e),e.Pu.H_=jU.bind(null,e.eventManager),e.Pu.yu=UU.bind(null,e.eventManager),e}function iz(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JU.bind(null,e),e}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aU(this.persistence,new rU,e.initialUser,this.serializer)}Cu(e){return new fC(vv.mi,this.serializer)}Du(e){return new pU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class rz extends nf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof ef,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new W5(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new fC(i=>ef.mi(i,n),this.serializer)}}class oy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tz.bind(null,this.syncEngine),await OU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FU}()}createDatastore(e){const n=Xf(e.databaseInfo.databaseId),i=function(o){return new vU(o)}(e.databaseInfo);return function(o,a,u,h){return new EU(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new PU(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>tx(this.syncEngine,n,0),function(){return Z1.v()?new Z1:new mU}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new HU(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Te(r);ie(_o,"RemoteStore shutting down."),o.Ea.add(5),await vc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}oy.provider={build:()=>new oy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class sz{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(ys,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(ys,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Av(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function wm(t,e){t.asyncQueue.verifyOperationInProgress(),ie(ys,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await pC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ix(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oz(t);ie(ys,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Q1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Q1(e.remoteStore,r)),t._onlineComponents=e}async function oz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(ys,"Using user provided OfflineComponentProvider");try{await wm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await wm(t,new nf)}}else ie(ys,"Using default OfflineComponentProvider"),await wm(t,new rz(void 0));return t._offlineComponents}async function OC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(ys,"Using user provided OnlineComponentProvider"),await ix(t,t._uninitializedComponentsProvider._online)):(ie(ys,"Using default OnlineComponentProvider"),await ix(t,new oy))),t._onlineComponents}function az(t){return OC(t).then(e=>e.syncEngine)}async function ay(t){const e=await OC(t),n=e.eventManager;return n.onListen=qU.bind(null,e.syncEngine),n.onUnlisten=KU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$U.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZU.bind(null,e.syncEngine),n}function lz(t,e,n={}){const i=new rs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new DC({next:_=>{m.Nu(),a.enqueueAndForget(()=>PC(o,g));const E=_.docs.has(u);!E&&_.fromCache?f.reject(new ue(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new ue(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new IC($f(u.path),m,{includeMetadataChanges:!0,qa:!0});return SC(o,g)}(await ay(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firestore.googleapis.com",sx=!0;class ox{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FC,this.ssl=sx}else this.host=e.host,this.ssl=e.ssl??sx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z5)throw new ue(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VC(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SA;switch(i.type){case"firstParty":return new _6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=rx.get(n);i&&(ie("ComponentProvider","Removing Datastore"),rx.delete(n),i.terminate())}(this),Promise.resolve()}}function jC(t,e,n,i={}){var f;t=li(t,Rv);const r=xs(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(Q_(`https://${u}`),X_("Firestore",!0)),o.host!==FC&&o.host!==u&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!fo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=$t.MOCK_USER;else{m=GI(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ue(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new $t(_)}t._authCredentials=new m6(new EA(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tc(this.firestore,e,this._query)}}class pt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(gc(n,pt._jsonSchema))return new pt(e,i||null,new de(et.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:wt("string",pt._jsonSchemaVersion),referencePath:wt("string")};class el extends Tc{constructor(e,n,i){super(e,n,$f(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new de(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=zf.newId()),S6("doc","path",e),t instanceof Rv){const i=et.fromString(e,...n);return w1(i),new pt(t,null,new de(i))}{if(!(t instanceof pt||t instanceof el))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return w1(i),new pt(t.firestore,t instanceof el?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="AsyncQueue";class lx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gC(this,"async_queue_retry"),this._c=()=>{const i=vm();i&&ie(ax,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;ie(ax,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",ux(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Iv.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:ux(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ux(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class vo extends Rv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new lx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lx(e),this._firestoreClient=void 0,await e}}}function UC(t,e){const n=typeof t=="object"?t:tv(),i=typeof t=="string"?t:Gd,r=Uf(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=HI("firestore");o&&jC(r,...o)}return r}function tp(t){if(t._terminated)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uz(t),t._firestoreClient}function uz(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new D6(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VC(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Mt.fromBase64String(e))}catch(n){throw new ue(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new En(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:wt("string",En._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(gc(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:wt("string",ui._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ci(e.vectorValues);throw new ue(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:wt("string",ci._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=/^__.*__$/;class hz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}class zC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Nv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(BC(this.Ac)&&cz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Xf(e)}Cc(e,n,i,r=!1){return new Nv({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function WC(t){const e=t._freezeSettings(),n=Xf(t._databaseId);return new dz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fz(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);Lv("Data must be an object, but it was:",a,i);const u=HC(i,a);let h,f;if(o.merge)h=new In(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=ly(e,g,n);if(!a.contains(_))throw new ue(Q.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);$C(m,_)||m.push(_)}h=new In(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new hz(new mn(u),h,f)}class ip extends np{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ip}}function pz(t,e,n,i){const r=t.Cc(1,e,n);Lv("Data must be an object, but it was:",r,i);const o=[],a=mn.empty();Es(i,(h,f)=>{const m=Mv(e,h,n);f=Pt(f);const g=r.yc(m);if(f instanceof ip)o.push(m);else{const _=rp(f,g);_!=null&&(o.push(m),a.set(m,_))}});const u=new In(o);return new zC(a,u,r.fieldTransforms)}function mz(t,e,n,i,r,o){const a=t.Cc(1,e,n),u=[ly(e,i,n)],h=[r];if(o.length%2!=0)throw new ue(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(ly(e,o[_])),h.push(o[_+1]);const f=[],m=mn.empty();for(let _=u.length-1;_>=0;--_)if(!$C(f,u[_])){const E=u[_];let R=h[_];R=Pt(R);const k=a.yc(E);if(R instanceof ip)f.push(E);else{const N=rp(R,k);N!=null&&(f.push(E),m.set(E,N))}}const g=new In(f);return new zC(m,g,a.fieldTransforms)}function rp(t,e){if(qC(t=Pt(t)))return Lv("Unsupported field value:",e,t),HC(t,e);if(t instanceof np)return function(i,r){if(!BC(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=rp(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return s5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=qe.fromDate(i);return{timestampValue:Jd(r.serializer,o)}}if(i instanceof qe){const o=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jd(r.serializer,o)}}if(i instanceof ui)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof En)return{bytesValue:sC(r.serializer,i._byteString)};if(i instanceof pt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ci)return function(a,u){return{mapValue:{fields:{[MA]:{stringValue:DA},[Kd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return pv(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${lv(i)}`)}(t,e)}function HC(t,e){const n={};return CA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(i,r)=>{const o=rp(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function qC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ui||t instanceof En||t instanceof pt||t instanceof np||t instanceof ci)}function Lv(t,e,n){if(!qC(n)||!IA(n)){const i=lv(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function ly(t,e,n){if((e=Pt(e))instanceof xc)return e._internalPath;if(typeof e=="string")return Mv(t,e);throw rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const gz=new RegExp("[~\\*/\\[\\]]");function Mv(t,e,n){if(e.search(gz)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xc(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rf(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new ue(Q.INVALID_ARGUMENT,u+t+h)}function $C(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(KC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yz extends GC{data(){return super.data()}}function KC(t,e){return typeof e=="string"?Mv(t,e):e instanceof xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _z(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZC{convertValue(e,n="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Es(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Kd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>dt(a.doubleValue));return new ci(n)}convertGeoPoint(e){return new ui(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Hf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const n=fs(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);je(hC(i),9688,{name:e});const r=new Za(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||gr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends GC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(KC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:wt("string",ss._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Iu extends ss{data(e={}){return super.data(e)}}class so{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Pa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Iu(this._firestore,this._userDataWriter,i.key,i,new Pa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Iu(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Pa(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Iu(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Pa(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:wz(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){t=li(t,pt);const e=li(t.firestore,vo);return lz(tp(e),t._key).then(n=>QC(e,t,n))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:wt("string",so._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class YC extends ZC{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function wo(t,e,n){t=li(t,pt);const i=li(t.firestore,vo),r=vz(t.converter,e,n);return Dv(i,[fz(WC(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Mi.none())])}function rd(t,e,n,...i){t=li(t,pt);const r=li(t.firestore,vo),o=WC(r);let a;return a=typeof(e=Pt(e))=="string"||e instanceof xc?mz(o,"updateDoc",t._key,e,n,i):pz(o,"updateDoc",t._key,e),Dv(r,[a.toMutation(t._key,Mi.exists(!0))])}function sp(t,...e){var h,f,m;t=Pt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||cx(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cx(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof pt)a=li(t.firestore,vo),u=$f(t._key.path),o={next:g=>{e[i]&&e[i](QC(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=li(t,Tc);a=li(g.firestore,vo),u=g._query;const _=new YC(a);o={next:E=>{e[i]&&e[i](new so(a,_,g,E))},error:e[i+1],complete:e[i+2]},_z(t._query)}return function(_,E,R,k){const N=new DC(k),P=new IC(E,N,R);return _.asyncQueue.enqueueAndForget(async()=>SC(await ay(_),P)),()=>{N.Nu(),_.asyncQueue.enqueueAndForget(async()=>PC(await ay(_),P))}}(tp(a),u,r,o)}function Dv(t,e){return function(i,r){const o=new rs;return i.asyncQueue.enqueueAndForget(async()=>YU(await az(i),r,o)),o.promise}(tp(t),e)}function QC(t,e,n){const i=n.docs.get(e._key),r=new YC(t);return new ss(t,r,e._key,i,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ll=r})(Po),po(new hs("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new vo(new g6(i.getProvider("auth-internal")),new v6(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ni(g1,y1,e),Ni(g1,y1,"esm2020")})();const Tz=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ZC,Bytes:En,CollectionReference:el,DocumentReference:pt,DocumentSnapshot:ss,FieldPath:xc,FieldValue:np,Firestore:vo,FirestoreError:ue,GeoPoint:ui,Query:Tc,QueryDocumentSnapshot:Iu,QuerySnapshot:so,SnapshotMetadata:Pa,Timestamp:qe,VectorValue:ci,_AutoId:zf,_ByteString:Mt,_DatabaseId:Za,_DocumentKey:de,_EmptyAuthCredentialsProvider:SA,_FieldPath:Nt,_cast:li,_logWarn:yo,_validateIsNotUsedTogether:PA,connectFirestoreEmulator:jC,doc:rn,ensureFirestoreConfigured:tp,executeWrite:Dv,getDoc:uy,getFirestore:UC,onSnapshot:sp,setDoc:wo,updateDoc:rd},Symbol.toStringTag,{value:"Module"}));function XC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xz=XC,JC=new pc("auth","Firebase",XC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new J_("@firebase/auth");function Ez(t,...e){sf.logLevel<=Ae.WARN&&sf.warn(`Auth (${Po}): ${t}`,...e)}function sd(t,...e){sf.logLevel<=Ae.ERROR&&sf.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,...e){throw Vv(t,...e)}function hi(t,...e){return Vv(t,...e)}function Ov(t,e,n){const i={...xz(),[e]:n};return new pc("auth","Firebase",i).create(e,{appName:t.name})}function oo(t){return Ov(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sz(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ji(t,"argument-error"),Ov(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return JC.create(t,...e)}function ye(t,e,...n){if(!t)throw Vv(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sd(e),new Error(e)}function _r(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Pz(){return hx()==="http:"||hx()==="https:"}function hx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pz()||N3()||"connection"in navigator)?navigator.onLine:!0}function Az(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=k3()||L3()}get(){return Iz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e){_r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bz=new Ec(3e4,6e4);function jv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function dl(t,e,n,i,r={}){return tk(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=mc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return R3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&xs(t.emulatorConfig.host)&&(f.credentials="include"),ek.fetch()(await nk(t,t.config.apiHost,n,u),f)})}async function tk(t,e,n){t._canInitEmulator=!1;const i={...Cz,...e};try{const r=new Nz(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Oh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Oh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Ov(t,m,f);ji(t,m)}}catch(r){if(r instanceof Ui)throw r;ji(t,"network-request-failed",{message:String(r)})}}async function Rz(t,e,n,i,r={}){const o=await dl(t,e,n,i,r);return"mfaPendingCredential"in o&&ji(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function nk(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Fv(t.config,r):`${t.config.apiScheme}://${r}`;return kz.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class Nz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(hi(this.auth,"network-request-failed")),bz.get())})}}function Oh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=hi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(t,e){return dl(t,"POST","/v1/accounts:delete",e)}async function of(t,e){return dl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mz(t,e=!1){const n=Pt(t),i=await n.getIdToken(e),r=Uv(i);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Au(Tm(r.auth_time)),issuedAtTime:Au(Tm(r.iat)),expirationTime:Au(Tm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Tm(t){return Number(t)*1e3}function Uv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return sd("JWT malformed, contained fewer than 3 sections"),null;try{const r=BI(n);return r?JSON.parse(r):(sd("Failed to decode base64 JWT payload"),null)}catch(r){return sd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function dx(t){const e=Uv(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ui&&Dz(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Dz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(t){var g;const e=t.auth,n=await t.getIdToken(),i=await ic(t,of(e,{idToken:n}));ye(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?ik(r.providerUserInfo):[],a=Fz(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new hy(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Vz(t){const e=Pt(t);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fz(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ik(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(t,e){const n=await tk(t,{},async()=>{const i=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await nk(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&xs(t.emulatorConfig.host)&&(h.credentials="include"),ek.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Uz(t,e){return dl(t,"POST","/v2/accounts:revokeToken",jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=dx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await jz(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Da;return i&&(ye(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ye(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ye(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Oz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new hy(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ic(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mz(this,e)}reload(){return Vz(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await af(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await ic(this,Lz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:R,stsTokenManager:k}=n;ye(g&&k,e,"internal-error");const N=Da.fromJSON(this.name,k);ye(typeof g=="string",e,"internal-error"),Mr(i,e.name),Mr(r,e.name),ye(typeof _=="boolean",e,"internal-error"),ye(typeof E=="boolean",e,"internal-error"),Mr(o,e.name),Mr(a,e.name),Mr(u,e.name),Mr(h,e.name),Mr(f,e.name),Mr(m,e.name);const P=new si({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:N,createdAt:f,lastLoginAt:m});return R&&Array.isArray(R)&&(P.providerData=R.map(T=>({...T}))),h&&(P._redirectEventId=h),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new Da;r.updateFromServerResponse(n);const o=new si({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await af(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?ik(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Da;u.updateFromIdToken(i);const h=new si({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new hy(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;function sr(t){_r(t instanceof Function,"Expected a class definition");let e=fx.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rk.type="NONE";const px=rk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e,n){return`firebase:${t}:${e}:${n}`}class Oa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=od(this.userKey,r.apiKey,o),this.fullPersistenceKey=od("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await of(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oa(sr(px),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||sr(px);const a=od(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await of(e,{idToken:m}).catch(()=>{});if(!_)break;g=await si._fromGetAccountInfoResponse(e,_,m)}else g=si._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Oa(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Oa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ck(e))return"Blackberry";if(hk(e))return"Webos";if(ok(e))return"Safari";if((e.includes("chrome/")||ak(e))&&!e.includes("edge/"))return"Chrome";if(uk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function sk(t=Qt()){return/firefox\//i.test(t)}function ok(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ak(t=Qt()){return/crios\//i.test(t)}function lk(t=Qt()){return/iemobile/i.test(t)}function uk(t=Qt()){return/android/i.test(t)}function ck(t=Qt()){return/blackberry/i.test(t)}function hk(t=Qt()){return/webos/i.test(t)}function zv(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zz(t=Qt()){var e;return zv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Bz(){return M3()&&document.documentMode===10}function dk(t=Qt()){return zv(t)||uk(t)||hk(t)||ck(t)||/windows phone/i.test(t)||lk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e=[]){let n;switch(t){case"Browser":n=mx(Qt());break;case"Worker":n=`${mx(Qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hz(t,e={}){return dl(t,"GET","/v2/passwordPolicy",jv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=6;class $z{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gx(this),this.idTokenSubscription=new gx(this),this.beforeStateQueue=new Wz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await of(this,{idToken:e}),i=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Hn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Az()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(oo(this));const n=e?Pt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Hz(this),n=new $z(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Uz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Ez(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function op(t){return Pt(t)}class gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=B3(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kz(t){Bv=t}function Zz(t){return Bv.loadJS(t)}function Yz(){return Bv.gapiScript}function Qz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t,e){const n=Uf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(fo(o,e??{}))return r;ji(r,"already-initialized")}return n.initialize({options:e})}function Jz(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function eB(t,e,n){const i=op(t);ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=pk(e),{host:a,port:u}=tB(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ye(fo(f,i.config.emulator)&&fo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,xs(a)?(Q_(`${o}//${a}${h}`),X_("Auth",!0)):nB()}function pk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tB(t){const e=pk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:yx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:yx(a)}}}function yx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e){return Rz(t,"POST","/v1/accounts:signInWithIdp",jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="http://localhost";class To extends mk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new To(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Va(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Va(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Va(e,n)}buildRequest(){const e={requestUri:iB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Wv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Sc{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return To._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return tr.credential(n,i)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Sc{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Sc{constructor(){super("twitter.com")}static credential(e,n){return To._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Wr.credential(n,i)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await si._fromIdTokenResponse(e,i,r),a=_x(i);return new tl({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=_x(i);return new tl({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function _x(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Ui{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new lf(e,n,i,r)}}function gk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(t,o,e,i):o})}async function rB(t,e,n=!1){const i=await ic(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e,n=!1){const{auth:i}=t;if(Hn(i.app))return Promise.reject(oo(i));const r="reauthenticate";try{const o=await ic(t,gk(i,r,e,t),n);ye(o.idToken,i,"internal-error");const a=Uv(o.idToken);ye(a,i,"internal-error");const{sub:u}=a;return ye(t.uid===u,i,"user-mismatch"),tl._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ji(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(t,e,n=!1){if(Hn(t.app))return Promise.reject(oo(t));const i="signIn",r=await gk(t,i,e),o=await tl._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function aB(t,e,n,i){return Pt(t).onIdTokenChanged(e,n,i)}function lB(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function uB(t){return Pt(t).signOut()}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=1e3,hB=10;class _k extends yk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Bz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hB):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},cB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_k.type="LOCAL";const dB=_k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk extends yk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vk.type="SESSION";const wk=vk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ap(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await fB(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=Hv("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function mB(t){Oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function gB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _B(){return Tk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="firebaseLocalStorageDb",vB=1,cf="firebaseLocalStorage",Ek="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lp(t,e){return t.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function wB(){const t=indexedDB.deleteDatabase(xk);return new Pc(t).toPromise()}function dy(){const t=indexedDB.open(xk,vB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(cf,{keyPath:Ek})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(cf)?e(i):(i.close(),await wB(),e(await dy()))})})}async function vx(t,e,n){const i=lp(t,!0).put({[Ek]:e,value:n});return new Pc(i).toPromise()}async function TB(t,e){const n=lp(t,!1).get(e),i=await new Pc(n).toPromise();return i===void 0?null:i.value}function wx(t,e){const n=lp(t,!0).delete(e);return new Pc(n).toPromise()}const xB=800,EB=3;class Sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>EB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(_B()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await gB(),!this.activeServiceWorker)return;this.sender=new pB(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dy();return await vx(e,uf,"1"),await wx(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>vx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>TB(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=lp(r,!1).getAll();return new Pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sk.type="LOCAL";const SB=Sk;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){return e?sr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends mk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PB(t){return oB(t.auth,new qv(t),t.bypassAuthState)}function IB(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),sB(n,new qv(t),t.bypassAuthState)}async function AB(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),rB(n,new qv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PB;case"linkViaPopup":case"linkViaRedirect":return AB;case"reauthViaPopup":case"reauthViaRedirect":return IB;default:ji(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new Ec(2e3,1e4);async function kB(t,e,n){if(Hn(t.app))return Promise.reject(hi(t,"operation-not-supported-in-this-environment"));const i=op(t);Sz(t,e,Wv);const r=Pk(i,n);return new eo(i,"signInViaPopup",e,r).executeNotNull()}class eo extends Ik{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CB.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="pendingRedirect",ad=new Map;class RB extends Ik{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ad.get(this.auth._key());if(!e){try{const i=await NB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ad.set(this.auth._key(),e)}return this.bypassAuthState||ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NB(t,e){const n=DB(e),i=MB(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function LB(t,e){ad.set(t._key(),e)}function MB(t){return sr(t._redirectPersistence)}function DB(t){return od(bB,t.config.apiKey,t.name)}async function OB(t,e,n=!1){if(Hn(t.app))return Promise.reject(oo(t));const i=op(t),r=Pk(i,e),a=await new RB(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=10*60*1e3;class FB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Ak(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VB&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tx(e))}saveEventToCache(e){this.cachedEventUids.add(Tx(e)),this.lastProcessedEventTime=Date.now()}}function Tx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ak({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ak(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e={}){return dl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BB=/^https?/;async function WB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UB(t);for(const n of e)try{if(HB(n))return}catch{}ji(t,"unauthorized-domain")}function HB(t){const e=cy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!BB.test(n))return!1;if(zB.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=new Ec(3e4,6e4);function xx(){const t=Oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $B(t){return new Promise((e,n)=>{var r,o,a;function i(){xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xx(),n(hi(t,"network-request-failed"))},timeout:qB.get()})}if((o=(r=Oi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Oi().gapi)!=null&&a.load)i();else{const u=Qz("iframefcb");return Oi()[u]=()=>{gapi.load?i():n(hi(t,"network-request-failed"))},Zz(`${Yz()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw ld=null,e})}let ld=null;function GB(t){return ld=ld||$B(t),ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=new Ec(5e3,15e3),ZB="__/auth/iframe",YB="emulator/auth/iframe",QB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JB(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fv(e,YB):`https://${t.config.authDomain}/${ZB}`,i={apiKey:e.apiKey,appName:t.name,v:Po},r=XB.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${mc(i).slice(1)}`}async function e9(t){const e=await GB(t),n=Oi().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:JB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QB,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=hi(t,"network-request-failed"),u=Oi().setTimeout(()=>{o(a)},KB.get());function h(){Oi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n9=500,i9=600,r9="_blank",s9="http://localhost";class Ex{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o9(t,e,n,i=n9,r=i9){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...t9,width:i.toString(),height:r.toString(),top:o,left:a},f=Qt().toLowerCase();n&&(u=ak(f)?r9:n),sk(f)&&(e=e||s9,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[E,R])=>`${_}${E}=${R},`,"");if(zz(f)&&u!=="_self")return a9(e||"",u),new Ex(null);const g=window.open(e||"",u,m);ye(g,t,"popup-blocked");try{g.focus()}catch{}return new Ex(g)}function a9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="__/auth/handler",u9="emulator/auth/handler",c9=encodeURIComponent("fac");async function Sx(t,e,n,i,r,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Po,eventId:r};if(e instanceof Wv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",z3(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Sc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${c9}=${encodeURIComponent(h)}`:"";return`${h9(t)}?${mc(u).slice(1)}${f}`}function h9({config:t}){return t.emulator?Fv(t,u9):`https://${t.authDomain}/${l9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class d9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wk,this._completeRedirectFn=OB,this._overrideRedirectResult=LB}async _openPopup(e,n,i,r){var a;_r((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Sx(e,n,i,cy(),r);return o9(e,o,Hv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Sx(e,n,i,cy(),r);return mB(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(_r(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await e9(e),i=new FB(e);return n.register("authEvent",r=>(ye(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[xm];o!==void 0&&n(!!o),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dk()||ok()||zv()}}const f9=d9;var Px="@firebase/auth",Ix="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g9(t){po(new hs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fk(t)},f=new Gz(i,r,o,h);return Jz(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),po(new hs("auth-internal",e=>{const n=op(e.getProvider("auth").getImmediate());return(i=>new p9(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(Px,Ix,m9(t)),Ni(Px,Ix,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=5*60,_9=$I("authIdTokenMaxAge")||y9;let Ax=null;const v9=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_9)return;const r=n==null?void 0:n.token;Ax!==r&&(Ax=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function w9(t=tv()){const e=Uf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xz(t,{popupRedirectResolver:f9,persistence:[SB,dB,wk]}),i=$I("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=v9(o.toString());lB(n,a,()=>a(n.currentUser)),aB(n,u=>a(u))}}const r=WI("auth");return r&&eB(n,`http://${r}`),n}function T9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Kz({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=hi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",T9().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g9("Browser");const x9={apiKey:"AIzaSyCPt2M4p5y-dDjNefu_Hq4vcyiKKN6Nmd8",authDomain:"acsm-trip-2026.firebaseapp.com",projectId:"acsm-trip-2026",storageBucket:"acsm-trip-2026.firebasestorage.app",messagingSenderId:"90847137220",appId:"1:90847137220:web:3f158196c5046666e96891",measurementId:"G-YV63KV6GPT"},$v=YI(x9),sn=UC($v),ud=w9($v),Ck=u6($v),kk=new tr,E9=Object.freeze(Object.defineProperty({__proto__:null,auth:ud,db:sn,googleProvider:kk,storage:Ck},Symbol.toStringTag,{value:"Module"})),S9=[{value:"flight",label:""},{value:"transport",label:""},{value:"food",label:""},{value:"sightseeing",label:""},{value:"hotel",label:""},{value:"conference",label:""},{value:"other",label:""}];function P9({isOpen:t,onClose:e,onSave:n,initialData:i,availableDays:r,currentDayId:o}){var be,Dt,Ge;const[a,u]=q.useState({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[]}),[h,f]=q.useState(""),[m,g]=q.useState("(Local)"),[_,E]=q.useState(o),[R,k]=q.useState(!1),[N,P]=q.useState(!1),[T,C]=q.useState(""),[j,W]=q.useState(""),[K,b]=q.useState(!1),I=q.useRef(null);q.useEffect(()=>{if(t)if(E(o),i){u({...i,attachments:i.attachments||[]});const ee=i.time.match(/^(\d{2}:\d{2})\s*(\(.*\))?$/);ee?(f(ee[1]),g(ee[2]||"(Local)")):(f(i.time),g("(Local)")),k(!!i.walletItemId)}else u({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[],coordinates:void 0}),f(""),g("(Local)"),k(!1)},[i,t,o]);const M=ee=>{ee.preventDefault();const G=m==="(Local)"?h:`${h} ${m} `;n({...a,time:G},_,R),e()},D=async ee=>{var re;const G=(re=ee.target.files)==null?void 0:re[0];if(G){P(!0);try{const X=l6(Ck,`trip_images / ${Date.now()}_${G.name} `);await o6(X,G);const fe=await a6(X),Ee={id:Date.now().toString(),type:"image",url:fe,label:G.name};u(We=>({...We,attachments:[...We.attachments||[],Ee]}))}catch(X){console.error("Upload failed:",X),alert("")}finally{P(!1),I.current&&(I.current.value="")}}},V=()=>{if(!T)return;const ee={id:Date.now().toString(),type:"link",url:T,label:j||T};u(G=>({...G,attachments:[...G.attachments||[],ee]})),C(""),W(""),b(!1)},U=ee=>{u(G=>{var re;return{...G,attachments:(re=G.attachments)==null?void 0:re.filter(X=>X.id!==ee)}})},O=[{value:"(TPE)",label:" (TPE)"},{value:"(SFO)",label:" (SFO)"},{value:"(SLC)",label:" (SLC)"},{value:"(SAN)",label:" (SAN)"},{value:"(LAX)",label:" (LAX)"},{value:"(Local)",label:""}];return x.jsx(kf,{children:t&&x.jsxs(x.Fragment,{children:[x.jsx(cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),x.jsx(cs.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:x.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[x.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i?"":""}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500",children:x.jsx(c_,{size:20})})]}),x.jsxs("form",{onSubmit:M,className:"p-4 space-y-4 overflow-y-auto",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:_,onChange:ee=>E(ee.target.value),children:r.map(ee=>x.jsxs("option",{value:ee.id,children:[ee.date," - ",ee.cityLabel]},ee.id))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("div",{className:"flex gap-2",children:x.jsx("input",{type:"time",required:!0,className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:h,onChange:ee=>f(ee.target.value)})})]}),x.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:m,onChange:ee=>g(ee.target.value),children:O.map(ee=>x.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),x.jsxs("div",{className:"col-span-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.type,onChange:ee=>u({...a,type:ee.target.value}),children:S9.map(ee=>x.jsx("option",{value:ee.value,children:ee.label},ee.value))})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.title,onChange:ee=>u({...a,title:ee.target.value})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),x.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",value:a.description,onChange:ee=>u({...a,description:ee.target.value})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),x.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.location||"",onChange:ee=>u({...a,location:ee.target.value})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (USD)"}),x.jsx("input",{type:"number",min:"0",placeholder:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.cost||0,onChange:ee=>u({...a,cost:parseFloat(ee.target.value)})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"/ ()"}),x.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.tips||"",onChange:ee=>u({...a,tips:ee.target.value})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lat) ()"}),x.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((be=a.coordinates)==null?void 0:be.lat)||"",onChange:ee=>{var re;const G=parseFloat(ee.target.value);u({...a,coordinates:{lng:((re=a.coordinates)==null?void 0:re.lng)||0,lat:isNaN(G)?0:G}})},placeholder:"e.g. 37.7749"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lng) ()"}),x.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((Dt=a.coordinates)==null?void 0:Dt.lng)||"",onChange:ee=>{var re;const G=parseFloat(ee.target.value);u({...a,coordinates:{lat:((re=a.coordinates)==null?void 0:re.lat)||0,lng:isNaN(G)?0:G}})},placeholder:"e.g. -122.4194"})]})]}),(a.cost||0)>0&&x.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1 p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[x.jsx("input",{type:"checkbox",id:"syncWallet",className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500",checked:R,onChange:ee=>k(ee.target.checked)}),x.jsx("label",{htmlFor:"syncWallet",className:"text-sm text-indigo-700 font-medium cursor-pointer select-none flex-1",children:" (Budget)"}),a.walletItemId&&x.jsx("span",{className:"text-xs text-indigo-400 bg-white px-2 py-0.5 rounded border border-indigo-100",children:""})]})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[x.jsx(nN,{size:16})," (/)"]}),x.jsx("div",{className:"space-y-2 mb-3",children:(Ge=a.attachments)==null?void 0:Ge.map(ee=>x.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border border-gray-200",children:[x.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[ee.type==="image"?x.jsx(Aw,{size:16,className:"text-indigo-500"}):x.jsx(_g,{size:16,className:"text-blue-500"}),x.jsx("a",{href:ee.url,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-700 truncate hover:underline",children:ee.label||"Attachment"})]}),x.jsx("button",{type:"button",onClick:()=>U(ee.id),className:"text-gray-400 hover:text-red-500",children:x.jsx(Af,{size:16})})]},ee.id))}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{type:"button",onClick:()=>{var ee;return(ee=I.current)==null?void 0:ee.click()},disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:N?"...":x.jsxs(x.Fragment,{children:[x.jsx(Aw,{size:16})," "]})}),x.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:D}),x.jsxs("button",{type:"button",onClick:()=>b(!K),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:[x.jsx(_g,{size:16})," "]})]}),K&&x.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2",children:[x.jsx("input",{type:"text",placeholder:" (https://...)",className:"w-full px-3 py-1.5 border rounded text-sm",value:T,onChange:ee=>C(ee.target.value)}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",placeholder:" ()",className:"flex-1 px-3 py-1.5 border rounded text-sm",value:j,onChange:ee=>W(ee.target.value)}),x.jsx("button",{type:"button",onClick:V,className:"px-3 py-1.5 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700",children:""})]})]})]}),x.jsx("div",{className:"pt-4 border-t",children:x.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[x.jsx($S,{size:20}),""]})})]})]})})]})})}const I9={flight:a_,hotel:GR,ticket:lN,insurance:u_,food:KS,transport:GS,shopping:oN,entertainment:eN,other:XR},A9={flight:"",hotel:"",ticket:"",insurance:"",food:"",transport:"",shopping:"",entertainment:"",other:""};function C9({isOpen:t,onClose:e,items:n,onAdd:i,onUpdate:r,onRemove:o,totalCost:a}){const[u,h]=q.useState(!1),[f,m]=q.useState(null),[g,_]=q.useState({category:"other",title:"",reference:"",details:"",cost:0}),E=N=>{N.preventDefault(),f?(r(f,g),m(null)):(i(g),h(!1)),_({category:"other",title:"",reference:"",details:"",cost:0})},R=N=>{_({category:N.category,title:N.title,reference:N.reference,details:N.details,cost:N.cost}),m(N.id),h(!1)},k=()=>{m(null),_({category:"other",title:"",reference:"",details:"",cost:0})};return x.jsx(kf,{children:t&&x.jsxs(x.Fragment,{children:[x.jsx(cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),x.jsx(cs.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:x.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl pointer-events-auto flex flex-col max-h-[90vh]",children:[x.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-t-xl",children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[x.jsx(yg,{className:"text-amber-400"})," & "]}),x.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:x.jsx(c_,{size:24})})]}),x.jsxs("div",{className:"bg-white/10 rounded-lg p-4 backdrop-blur-sm border border-white/10",children:[x.jsx("div",{className:"text-xs text-slate-300 uppercase tracking-wider font-medium mb-1",children:" ( + )"}),x.jsxs("div",{className:"text-3xl font-bold text-white font-mono",children:["$",a.toLocaleString()," ",x.jsx("span",{className:"text-lg text-slate-400",children:"USD"})]})]})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[u||f?x.jsxs("form",{onSubmit:E,className:"bg-white p-4 rounded-xl shadow-sm border space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("h3",{className:"font-bold text-gray-800",children:f?"":""}),x.jsx("button",{type:"button",onClick:()=>f?k():h(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),x.jsx("select",{className:"w-full p-2 border rounded-lg",value:g.category,onChange:N=>_({...g,category:N.target.value}),children:Object.entries(A9).map(([N,P])=>x.jsx("option",{value:N,children:P},N))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (USD)"}),x.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg",value:g.cost,onChange:N=>_({...g,cost:Number(N.target.value)})})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),x.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded-lg",value:g.title,onChange:N=>_({...g,title:N.target.value})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),x.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.reference,onChange:N=>_({...g,reference:N.target.value})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (/)"}),x.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.details,onChange:N=>_({...g,details:N.target.value})})]})]}),x.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 font-medium",children:f?"":""})]}):x.jsxs("button",{onClick:()=>h(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 mb-6",children:[x.jsx(l_,{size:20}),""]}),x.jsxs("div",{className:"space-y-3",children:[n.map(N=>{const P=I9[N.category];return x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex items-start gap-4 group",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 flex-shrink-0",children:x.jsx(P,{size:20})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("h4",{className:"font-bold text-gray-800 truncate",children:N.title}),N.cost?x.jsxs("span",{className:"font-mono font-medium text-gray-900",children:["$",N.cost]}):null]}),x.jsx("div",{className:"text-sm text-indigo-600 font-mono mt-0.5",children:N.reference}),x.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.details})]}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>R(N),className:"p-2 text-gray-300 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:x.jsx(iN,{size:18})}),x.jsx("button",{onClick:()=>o(N.id),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:x.jsx(Af,{size:18})})]})]},N.id)}),n.length===0&&!u&&x.jsxs("div",{className:"text-center py-12 text-gray-400",children:[x.jsx(yg,{size:48,className:"mx-auto mb-3 opacity-20"}),x.jsx("p",{children:""})]})]})]})]})})]})})}function k9({info:t}){const n=(i=>{switch(i){case"fog":return WR;case"sun":return wg;case"cloud-sun":return HR;default:return wg}})(t.icon);return x.jsxs(cs.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-gradient-to-br from-sky-50 to-white border border-sky-100 rounded-xl p-4 mb-6 shadow-sm flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[x.jsx("div",{className:"p-2.5 bg-sky-100 text-sky-600 rounded-full",children:x.jsx(n,{size:24})}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs text-sky-600 font-bold uppercase tracking-wider mb-0.5",children:"Weather"}),x.jsx("div",{className:"font-bold text-gray-800 text-lg",children:t.tempRange})]})]}),x.jsx("div",{className:"w-px h-10 bg-sky-100 hidden sm:block"}),x.jsxs("div",{className:"flex-1 space-y-1",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-medium",children:[x.jsx(aN,{size:16,className:"text-sky-400"}),x.jsx("span",{children:t.description})]}),x.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-500 leading-relaxed",children:[x.jsx(sN,{size:16,className:"text-sky-400 mt-0.5 flex-shrink-0"}),x.jsx("span",{children:t.clothing})]})]})]})}function b9({isOpen:t,onClose:e,currentAdmins:n,currentUserEmail:i}){const[r,o]=q.useState(""),[a,u]=q.useState(!1),[h,f]=q.useState("2026-05-20"),[m,g]=q.useState("2026-06-04"),[_,E]=q.useState(!1);q.useEffect(()=>{t&&uy(rn(sn,"trips","settings")).then(P=>{if(P.exists()){const T=P.data();T.startDate&&f(T.startDate),T.endDate&&g(T.endDate)}})},[t]);const R=async P=>{if(P.preventDefault(),!(!r||!r.includes("@"))){if(n.includes(r)){alert(" Email ");return}u(!0);try{const T=[...n,r];await rd(rn(sn,"trips","settings"),{adminEmails:T}),o("")}catch(T){console.error("Failed to add admin:",T),alert("")}finally{u(!1)}}},k=async P=>{if(P===i){alert("");return}if(confirm(` ${P} `))try{const T=n.filter(C=>C!==P);await rd(rn(sn,"trips","settings"),{adminEmails:T})}catch(T){console.error("Failed to remove admin:",T),alert("")}},N=async()=>{if(confirm(`
${h}
${m}
`)){E(!0);try{await wo(rn(sn,"trips","settings"),{startDate:h,endDate:m},{merge:!0});const P=await uy(rn(sn,"trips","main"));if(P.exists()){const T=P.data().days,C=IL(h),j=T.map((W,K)=>{const b=cN(C,K),I=xL(b,"yyyy/MM/dd"),M=["","","","","","",""][b.getDay()];return{...W,date:`${I} (${M})`}});await rd(rn(sn,"trips","main"),{days:j}),alert("")}}catch(P){console.error("Failed to update date:",P),alert("")}finally{E(!1)}}};return t?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:x.jsxs(cs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-slate-800 to-slate-900 text-white",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(u_,{className:"text-emerald-400",size:20}),x.jsx("h2",{className:"text-lg font-bold",children:""})]}),x.jsx("button",{onClick:e,className:"text-white/70 hover:text-white transition-colors",children:x.jsx(c_,{size:20})})]}),x.jsxs("div",{className:"p-6 space-y-8",children:[x.jsxs("section",{children:[x.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[x.jsx(HS,{size:16,className:"text-indigo-600"}),""]}),x.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:" (Day 1)"}),x.jsx("input",{type:"date",value:h,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:""}),x.jsx("input",{type:"date",value:m,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),x.jsxs("button",{onClick:N,disabled:_,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[x.jsx($S,{size:16}),""]}),x.jsx("p",{className:"text-xs text-indigo-600 mt-2 opacity-80 text-center",children:"* "})]})]}),x.jsx("hr",{className:"border-gray-100"}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[x.jsx(kw,{size:16,className:"text-indigo-600"}),""]}),x.jsx("form",{onSubmit:R,className:"mb-4",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"email",value:r,onChange:P=>o(P.target.value),placeholder:" Google Email",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",required:!0}),x.jsxs("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center gap-1",children:[x.jsx(l_,{size:18}),""]})]})}),x.jsx("div",{className:"space-y-2",children:x.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 pr-1",children:x.jsx(kf,{mode:"popLayout",children:n.map(P=>x.jsxs(cs.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-500 shadow-sm",children:x.jsx(kw,{size:14})}),x.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[180px]",children:P}),P===i&&x.jsx("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold",children:"YOU"})]}),P!==i&&x.jsx("button",{onClick:()=>k(P),className:"text-gray-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"",children:x.jsx(Af,{size:16})})]},P))})})})]})]})]})}):null}function R9(){const[t,e]=q.useState(lm),[n,i]=q.useState(!0),r="main";q.useEffect(()=>{const k=sp(rn(sn,"trips",r),N=>{N.exists()?e(N.data().days):wo(rn(sn,"trips",r),{days:lm}),i(!1)},N=>{console.error("Firestore sync error:",N),i(!1)});return()=>k()},[]);const o=async k=>{try{await wo(rn(sn,"trips",r),{days:k})}catch(N){console.error("Error saving to Firestore:",N),alert("")}},a=k=>[...k].sort((N,P)=>{const T=N.time.split(" ")[0],C=P.time.split(" ")[0];return T.localeCompare(C)});return{itinerary:t,loading:n,addActivity:(k,N)=>{const P=t.map(T=>{if(T.id===k){const C=[...T.activities,N];return{...T,activities:a(C)}}return T});o(P)},removeActivity:(k,N)=>{const P=t.map(T=>{if(T.id===k){const C=[...T.activities];return C.splice(N,1),{...T,activities:C}}return T});o(P)},updateActivity:(k,N,P)=>{const T=t.map(C=>{if(C.id===k){const j=[...C.activities];return j[N]=P,{...C,activities:a(j)}}return C});o(T)},reorderActivity:(k,N,P)=>{console.warn("reorderActivity is deprecated. Activities are now automatically sorted by time.")},moveActivity:(k,N,P,T)=>{const C=t.map(j=>{if(j.id===k){const W=[...j.activities];return typeof T=="number"&&W.splice(T,1),{...j,activities:W}}if(j.id===N){const W=[...j.activities,P];return{...j,activities:a(W)}}return j});o(C)},resetItinerary:()=>{confirm("")&&o(lm)},exportItinerary:()=>{const k=JSON.stringify(t,null,2),N=new Blob([k],{type:"application/json"}),P=URL.createObjectURL(N),T=document.createElement("a");T.href=P,T.download=`acsm-trip-itinerary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(P)},importItinerary:k=>{const N=new FileReader;N.onload=P=>{var T;try{const C=(T=P.target)==null?void 0:T.result,j=JSON.parse(C);Array.isArray(j)?(o(j),alert("")):alert("")}catch(C){console.error("Import failed:",C),alert("")}},N.readAsText(k)}}}const Cx=[{id:"1",category:"flight",title:" JX012 (TPE-SFO)",reference:"PNR: ABC12345",details:"2026/05/20 23:40 , ",cost:1200},{id:"2",category:"hotel",title:"San Francisco Marriott Marquis",reference:"Conf: #8829102",details:"5/20 - 5/25 (5 Nights)",cost:1500}];function N9(){const[t,e]=q.useState(Cx),[n,i]=q.useState(!0);q.useEffect(()=>{const f=sp(rn(sn,"trips","wallet"),m=>{m.exists()?e(m.data().items):wo(rn(sn,"trips","wallet"),{items:Cx}),i(!1)},m=>{console.error("Firestore sync error:",m),i(!1)});return()=>f()},[]);const r=async f=>{try{await wo(rn(sn,"trips","wallet"),{items:f})}catch(m){console.error("Error saving wallet to Firestore:",m),alert("")}};return{walletItems:t,loading:n,addWalletItem:f=>{const m={...f,id:crypto.randomUUID()},g=[...t,m];return r(g),m.id},removeWalletItem:f=>{const m=t.filter(g=>g.id!==f);r(m)},updateWalletItem:(f,m)=>{const g=t.map(_=>_.id===f?{..._,...m}:_);r(g)},getTotalCost:()=>t.reduce((f,m)=>f+(m.cost||0),0)}}const Em=["weber900127@gmail.com"];function L9(){const[t,e]=q.useState(null),[n,i]=q.useState(!0),[r,o]=q.useState(!1),[a,u]=q.useState([]);return q.useEffect(()=>ud.onAuthStateChanged(g=>{e(g),g||(o(!1),i(!1))}),[]),q.useEffect(()=>{const m=sp(rn(sn,"trips","settings"),g=>{if(g.exists()){const _=g.data().adminEmails;u(_)}else wo(rn(sn,"trips","settings"),{adminEmails:Em}),u(Em)},g=>{console.error("Failed to sync admin list:",g),u(Em)});return()=>m()},[]),q.useEffect(()=>{t&&a.length>0?(o(a.includes(t.email||"")),i(!1)):t&&o(!1)},[t,a]),{user:t,isUserAdmin:r,adminList:a,loading:n,login:async()=>{try{await kB(ud,kk)}catch(m){console.error("Login failed:",m),alert("")}},logout:async()=>{try{await uB(ud)}catch(m){console.error("Logout failed:",m)}}}}const kx={SF:{tempRange:"11C - 18C",description:"",clothing:"",icon:"fog"},SLC:{tempRange:"10C - 24C",description:"",clothing:"",icon:"sun"},SAN:{tempRange:"16C - 22C",description:"",clothing:"",icon:"cloud-sun"},LA:{tempRange:"16C - 24C",description:"",clothing:"",icon:"sun"}};function M9(){var We;const[t,e]=q.useState("ALL"),[n,i]=q.useState({day1:!0}),[r,o]=q.useState(!1),[a,u]=q.useState(!1),[h,f]=q.useState(!1),{user:m,login:g,logout:_,loading:E,isUserAdmin:R,adminList:k}=L9(),[N,P]=q.useState(!1),[T,C]=q.useState(null),{itinerary:j,addActivity:W,updateActivity:K,removeActivity:b,moveActivity:I,exportItinerary:M,importItinerary:D}=R9(),{walletItems:V,addWalletItem:U,updateWalletItem:O,removeWalletItem:be,getTotalCost:Dt}=N9(),Ge=se=>{i(he=>({...he,[se]:!he[se]}))},ee=t==="ALL"?j:j.filter(se=>se.city===t||t==="LA"&&se.city==="LA"),re=j.reduce((se,he)=>se+he.activities.reduce((ce,Ke)=>ce+(Ke.cost||0),0),0)+Dt(),X=(se,he,ce)=>{const Ke={...se,modifiedBy:(m==null?void 0:m.displayName)||"Anonymous",modifiedAt:new Date().toISOString()};if(ce&&(se.cost||0)>0){let mt="other";switch(se.type){case"flight":mt="flight";break;case"transport":mt="transport";break;case"food":mt="food";break;case"hotel":mt="hotel";break;case"sightseeing":mt="ticket";break;default:mt="other"}const wr={category:mt,title:se.title,reference:"",details:`${se.time}`,cost:se.cost};if(se.walletItemId)O(se.walletItemId,wr);else{const Ps=U(wr);Ke.walletItemId=Ps}}T?T.dayId===he?K(T.dayId,T.index,Ke):I(T.dayId,he,Ke,T.index):W(he,Ke),P(!1),C(null)},fe=(se,he,ce)=>{C({dayId:se,index:he,activity:ce}),P(!0)},Ee=(se,he)=>{confirm("")&&b(se,he)};return E?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."}):x.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12 font-sans text-gray-900",children:[x.jsx(BL,{isEditing:r,onToggleEdit:()=>o(!r),onExport:M,onImport:D,onOpenWallet:()=>u(!0),onOpenSettings:()=>f(!0),user:m,isAdmin:R,onLogin:g,onLogout:_}),x.jsxs("main",{className:"max-w-3xl mx-auto px-4 -mt-6 relative z-20",children:[x.jsx("div",{className:"flex overflow-x-auto gap-2 pb-4 scrollbar-hide mb-4 no-scrollbar",children:[{id:"ALL",label:""},{id:"SF",label:" (5/20-25)"},{id:"SLC",label:" (5/25-30)"},{id:"SAN",label:" (5/30-6/4)"}].map(se=>x.jsx("button",{onClick:()=>e(se.id),className:La("px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all shadow-sm border",t===se.id?"bg-white text-indigo-600 ring-2 ring-indigo-500 border-transparent z-10":"bg-white/80 text-gray-600 hover:bg-white border-transparent hover:border-gray-200"),children:se.label},se.id))}),x.jsx(kf,{mode:"wait",children:t!=="ALL"&&kx[t]&&x.jsx(k9,{city:t,info:kx[t]},t)}),m?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"space-y-6",children:ee.map(se=>x.jsx(g3,{day:se,isExpanded:!!n[se.id],onToggle:()=>Ge(se.id),isEditing:r,onAddActivity:()=>{C({dayId:se.id,index:-1,activity:{}}),P(!0)},onUpdateActivity:(he,ce)=>fe(se.id,he,ce),onRemoveActivity:he=>Ee(se.id,he)},se.id))}),x.jsx(y3,{})]}):x.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm text-center mt-8",children:[x.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:x.jsx("span",{className:"text-2xl",children:""})}),x.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:""}),x.jsx("p",{className:"text-gray-500 mb-6",children:" Google "}),x.jsx("button",{onClick:g,className:"bg-indigo-600 text-white px-6 py-2 rounded-full font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:" Google "})]}),x.jsxs("div",{className:"mt-12 text-center text-xs text-gray-400 pb-8",children:[x.jsx("p",{children:""}),x.jsx("p",{className:"mt-2",children:"Created for 2026 ACSM Trip"})]})]}),x.jsx(P9,{isOpen:N,onClose:()=>{P(!1),C(null)},onSave:X,initialData:T==null?void 0:T.activity,availableDays:j,currentDayId:(T==null?void 0:T.dayId)||((We=j[0])==null?void 0:We.id)}),x.jsx(C9,{isOpen:a,onClose:()=>u(!1),items:V,onAdd:U,onUpdate:O,onRemove:be,totalCost:re}),x.jsx(b9,{isOpen:h,onClose:()=>f(!1),currentAdmins:k,currentUserEmail:m==null?void 0:m.email})]})}class D9 extends q.Component{constructor(){super(...arguments);m0(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){var n;return this.state.hasError?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:x.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg w-full border border-red-200",children:[x.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),x.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-60 text-sm font-mono text-gray-800 mb-4",children:(n=this.state.error)==null?void 0:n.toString()}),x.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Sm.createRoot(document.getElementById("root")).render(x.jsx(cd.StrictMode,{children:x.jsx(D9,{children:x.jsx(M9,{})})}));
