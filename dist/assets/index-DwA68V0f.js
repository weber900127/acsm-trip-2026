var Y2=Object.defineProperty;var Q2=(t,e,n)=>e in t?Y2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var k0=(t,e,n)=>Q2(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var X2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dE={exports:{}},Cf={},fE={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),J2=Symbol.for("react.portal"),ek=Symbol.for("react.fragment"),tk=Symbol.for("react.strict_mode"),nk=Symbol.for("react.profiler"),ik=Symbol.for("react.provider"),rk=Symbol.for("react.context"),sk=Symbol.for("react.forward_ref"),ok=Symbol.for("react.suspense"),ak=Symbol.for("react.memo"),lk=Symbol.for("react.lazy"),R0=Symbol.iterator;function uk(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mE=Object.assign,gE={};function gl(t,e,n){this.props=t,this.context=e,this.refs=gE,this.updater=n||pE}gl.prototype.isReactComponent={};gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yE(){}yE.prototype=gl.prototype;function Py(t,e,n){this.props=t,this.context=e,this.refs=gE,this.updater=n||pE}var Iy=Py.prototype=new yE;Iy.constructor=Py;mE(Iy,gl.prototype);Iy.isPureReactComponent=!0;var N0=Array.isArray,_E=Object.prototype.hasOwnProperty,Cy={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function wE(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)_E.call(e,i)&&!vE.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Tc,type:t,key:o,ref:a,props:r,_owner:Cy.current}}function ck(t,e){return{$$typeof:Tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tc}function hk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var M0=/\/+/g;function Dp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hk(""+t.key):e.toString(36)}function Qh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Tc:case J2:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Dp(a,0):i,N0(r)?(n="",t!=null&&(n=t.replace(M0,"$&/")+"/"),Qh(r,e,n,"",function(f){return f})):r!=null&&(Ay(r)&&(r=ck(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(M0,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",N0(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+Dp(o,u);a+=Qh(o,e,n,c,r)}else if(c=uk(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+Dp(o,u++),a+=Qh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wh(t,e,n){if(t==null)return t;var i=[],r=0;return Qh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function dk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Xh={transition:null},fk={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Xh,ReactCurrentOwner:Cy};function xE(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:wh,forEach:function(t,e,n){wh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wh(t,function(){e++}),e},toArray:function(t){return wh(t,function(e){return e})||[]},only:function(t){if(!Ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=gl;Ae.Fragment=ek;Ae.Profiler=nk;Ae.PureComponent=Py;Ae.StrictMode=tk;Ae.Suspense=ok;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fk;Ae.act=xE;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=mE({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Cy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)_E.call(e,c)&&!vE.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Tc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:rk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ik,_context:t},t.Consumer=t};Ae.createElement=wE;Ae.createFactory=function(t){var e=wE.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:sk,render:t}};Ae.isValidElement=Ay;Ae.lazy=function(t){return{$$typeof:lk,_payload:{_status:-1,_result:t},_init:dk}};Ae.memo=function(t,e){return{$$typeof:ak,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Xh.transition;Xh.transition={};try{t()}finally{Xh.transition=e}};Ae.unstable_act=xE;Ae.useCallback=function(t,e){return dn.current.useCallback(t,e)};Ae.useContext=function(t){return dn.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return dn.current.useEffect(t,e)};Ae.useId=function(){return dn.current.useId()};Ae.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return dn.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};Ae.useRef=function(t){return dn.current.useRef(t)};Ae.useState=function(t){return dn.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return dn.current.useTransition()};Ae.version="18.3.1";fE.exports=Ae;var B=fE.exports;const bd=hE(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=B,mk=Symbol.for("react.element"),gk=Symbol.for("react.fragment"),yk=Object.prototype.hasOwnProperty,_k=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vk={key:!0,ref:!0,__self:!0,__source:!0};function TE(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)yk.call(e,i)&&!vk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:mk,type:t,key:o,ref:a,props:r,_owner:_k.current}}Cf.Fragment=gk;Cf.jsx=TE;Cf.jsxs=TE;dE.exports=Cf;var g=dE.exports,Fm={},EE={exports:{}},On={},SE={exports:{}},bE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ue){var J=K.length;K.push(ue);e:for(;0<J;){var fe=J-1>>>1,Z=K[fe];if(0<r(Z,ue))K[fe]=ue,K[J]=Z,J=fe;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ue=K[0],J=K.pop();if(J!==ue){K[0]=J;e:for(var fe=0,Z=K.length,ce=Z>>>1;fe<ce;){var he=2*(fe+1)-1,me=K[he],ge=he+1,at=K[ge];if(0>r(me,J))ge<Z&&0>r(at,me)?(K[fe]=at,K[ge]=J,fe=ge):(K[fe]=me,K[he]=J,fe=he);else if(ge<Z&&0>r(at,J))K[fe]=at,K[ge]=J,fe=ge;else break e}}return ue}function r(K,ue){var J=K.sortIndex-ue.sortIndex;return J!==0?J:K.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],p=1,y=null,v=3,T=!1,I=!1,R=!1,V=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(K){for(var ue=n(f);ue!==null;){if(ue.callback===null)i(f);else if(ue.startTime<=K)i(f),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=n(f)}}function z(K){if(R=!1,C(K),!I)if(n(c)!==null)I=!0,Oe(H);else{var ue=n(f);ue!==null&&ke(z,ue.startTime-K)}}function H(K,ue){I=!1,R&&(R=!1,b(E),E=-1),T=!0;var J=v;try{for(C(ue),y=n(c);y!==null&&(!(y.expirationTime>ue)||K&&!D());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,v=y.priorityLevel;var Z=fe(y.expirationTime<=ue);ue=t.unstable_now(),typeof Z=="function"?y.callback=Z:y===n(c)&&i(c),C(ue)}else i(c);y=n(c)}if(y!==null)var ce=!0;else{var he=n(f);he!==null&&ke(z,he.startTime-ue),ce=!1}return ce}finally{y=null,v=J,T=!1}}var U=!1,k=null,E=-1,M=5,N=-1;function D(){return!(t.unstable_now()-N<M)}function F(){if(k!==null){var K=t.unstable_now();N=K;var ue=!0;try{ue=k(!0,K)}finally{ue?O():(U=!1,k=null)}}else U=!1}var O;if(typeof S=="function")O=function(){S(F)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Pe=ne.port2;ne.port1.onmessage=F,O=function(){Pe.postMessage(null)}}else O=function(){V(F,0)};function Oe(K){k=K,U||(U=!0,O())}function ke(K,ue){E=V(function(){K(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){I||T||(I=!0,Oe(H))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var J=v;v=ue;try{return K()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ue){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=v;v=K;try{return ue()}finally{v=J}},t.unstable_scheduleCallback=function(K,ue,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,K){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,K={id:p++,callback:ue,priorityLevel:K,startTime:J,expirationTime:Z,sortIndex:-1},J>fe?(K.sortIndex=J,e(f,K),n(c)===null&&K===n(f)&&(R?(b(E),E=-1):R=!0,ke(z,J-fe))):(K.sortIndex=Z,e(c,K),I||T||(I=!0,Oe(H))),K},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(K){var ue=v;return function(){var J=v;v=ue;try{return K.apply(this,arguments)}finally{v=J}}}})(bE);SE.exports=bE;var wk=SE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=B,Ln=wk;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PE=new Set,Uu={};function Mo(t,e){Qa(t,e),Qa(t+"Capture",e)}function Qa(t,e){for(Uu[t]=e,t=0;t<e.length;t++)PE.add(e[t])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zm=Object.prototype.hasOwnProperty,Tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},D0={};function Ek(t){return zm.call(D0,t)?!0:zm.call(L0,t)?!1:Tk.test(t)?D0[t]=!0:(L0[t]=!0,!1)}function Sk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bk(t,e,n,i){if(e===null||typeof e>"u"||Sk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,Ry);$t[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,Ry);$t[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,Ry);$t[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ny(t,e,n,i){var r=$t.hasOwnProperty(e)?$t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bk(e,n,r,i)&&(n=null),i||r===null?Ek(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Lr=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xh=Symbol.for("react.element"),Ta=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),IE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),Ly=Symbol.for("react.forward_ref"),Bm=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),O0=Symbol.iterator;function Xl(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Op;function uu(t){if(Op===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Op=e&&e[1]||""}return`
`+Op+t}var Vp=!1;function jp(t,e){if(!t||Vp)return"";Vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{Vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uu(t):""}function Pk(t){switch(t.tag){case 5:return uu(t.type);case 16:return uu("Lazy");case 13:return uu("Suspense");case 19:return uu("SuspenseList");case 0:case 2:case 15:return t=jp(t.type,!1),t;case 11:return t=jp(t.type.render,!1),t;case 1:return t=jp(t.type,!0),t;default:return""}}function Wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ea:return"Fragment";case Ta:return"Portal";case Um:return"Profiler";case My:return"StrictMode";case Bm:return"Suspense";case Hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CE:return(t.displayName||"Context")+".Consumer";case IE:return(t._context.displayName||"Context")+".Provider";case Ly:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dy:return e=t.displayName||null,e!==null?e:Wm(t.type)||"Memo";case Zr:e=t._payload,t=t._init;try{return Wm(t(e))}catch{}}return null}function Ik(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(e);case 8:return e===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ck(t){var e=kE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Th(t){t._valueTracker||(t._valueTracker=Ck(t))}function RE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=kE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Pd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $m(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function V0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NE(t,e){e=e.checked,e!=null&&Ny(t,"checked",e,!1)}function qm(t,e){NE(t,e);var n=xs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gm(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function j0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gm(t,e,n){(e!=="number"||Pd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cu=Array.isArray;function Fa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function F0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(cu(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function ME(t,e){var n=xs(e.value),i=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function z0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eh,DE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eh=Eh||document.createElement("div"),Eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ak=["Webkit","ms","Moz","O"];Object.keys(wu).forEach(function(t){Ak.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wu[e]=wu[t]})});function OE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wu.hasOwnProperty(t)&&wu[t]?(""+e).trim():e+"px"}function VE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=OE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var kk=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ym(t,e){if(e){if(kk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Qm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xm=null;function Oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jm=null,za=null,Ua=null;function U0(t){if(t=bc(t)){if(typeof Jm!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Mf(e),Jm(t.stateNode,t.type,e))}}function jE(t){za?Ua?Ua.push(t):Ua=[t]:za=t}function FE(){if(za){var t=za,e=Ua;if(Ua=za=null,U0(t),e)for(t=0;t<e.length;t++)U0(e[t])}}function zE(t,e){return t(e)}function UE(){}var Fp=!1;function BE(t,e,n){if(Fp)return t(e,n);Fp=!0;try{return zE(t,e,n)}finally{Fp=!1,(za!==null||Ua!==null)&&(UE(),FE())}}function Hu(t,e){var n=t.stateNode;if(n===null)return null;var i=Mf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var eg=!1;if(Sr)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){eg=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{eg=!1}function Rk(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var xu=!1,Id=null,Cd=!1,tg=null,Nk={onError:function(t){xu=!0,Id=t}};function Mk(t,e,n,i,r,o,a,u,c){xu=!1,Id=null,Rk.apply(Nk,arguments)}function Lk(t,e,n,i,r,o,a,u,c){if(Mk.apply(this,arguments),xu){if(xu){var f=Id;xu=!1,Id=null}else throw Error(ee(198));Cd||(Cd=!0,tg=f)}}function Lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B0(t){if(Lo(t)!==t)throw Error(ee(188))}function Dk(t){var e=t.alternate;if(!e){if(e=Lo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return B0(r),t;if(o===i)return B0(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function WE(t){return t=Dk(t),t!==null?$E(t):null}function $E(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$E(t);if(e!==null)return e;t=t.sibling}return null}var qE=Ln.unstable_scheduleCallback,H0=Ln.unstable_cancelCallback,Ok=Ln.unstable_shouldYield,Vk=Ln.unstable_requestPaint,yt=Ln.unstable_now,jk=Ln.unstable_getCurrentPriorityLevel,Vy=Ln.unstable_ImmediatePriority,GE=Ln.unstable_UserBlockingPriority,Ad=Ln.unstable_NormalPriority,Fk=Ln.unstable_LowPriority,KE=Ln.unstable_IdlePriority,Af=null,Vi=null;function zk(t){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(Af,t,void 0,(t.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:Hk,Uk=Math.log,Bk=Math.LN2;function Hk(t){return t>>>=0,t===0?32:31-(Uk(t)/Bk|0)|0}var Sh=64,bh=4194304;function hu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=hu(u):(o&=a,o!==0&&(i=hu(o)))}else a=n&~r,a!==0?i=hu(a):o!==0&&(i=hu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gi(e),r=1<<n,i|=t[n],e&=~r;return i}function Wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $k(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-gi(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=Wk(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function ng(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZE(){var t=Sh;return Sh<<=1,!(Sh&4194240)&&(Sh=64),t}function zp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gi(e),t[e]=n}function qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-gi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function jy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var qe=0;function YE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QE,Fy,XE,JE,eS,ig=!1,Ph=[],ls=null,us=null,cs=null,Wu=new Map,$u=new Map,Xr=[],Gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W0(t,e){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":Wu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(e.pointerId)}}function eu(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=bc(e),e!==null&&Fy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Kk(t,e,n,i,r){switch(e){case"focusin":return ls=eu(ls,t,e,n,i,r),!0;case"dragenter":return us=eu(us,t,e,n,i,r),!0;case"mouseover":return cs=eu(cs,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Wu.set(o,eu(Wu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,$u.set(o,eu($u.get(o)||null,t,e,n,i,r)),!0}return!1}function tS(t){var e=ao(t.target);if(e!==null){var n=Lo(e);if(n!==null){if(e=n.tag,e===13){if(e=HE(n),e!==null){t.blockedOn=e,eS(t.priority,function(){XE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Xm=i,n.target.dispatchEvent(i),Xm=null}else return e=bc(n),e!==null&&Fy(e),t.blockedOn=n,!1;e.shift()}return!0}function $0(t,e,n){Jh(t)&&n.delete(e)}function Zk(){ig=!1,ls!==null&&Jh(ls)&&(ls=null),us!==null&&Jh(us)&&(us=null),cs!==null&&Jh(cs)&&(cs=null),Wu.forEach($0),$u.forEach($0)}function tu(t,e){t.blockedOn===e&&(t.blockedOn=null,ig||(ig=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,Zk)))}function qu(t){function e(r){return tu(r,t)}if(0<Ph.length){tu(Ph[0],t);for(var n=1;n<Ph.length;n++){var i=Ph[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ls!==null&&tu(ls,t),us!==null&&tu(us,t),cs!==null&&tu(cs,t),Wu.forEach(e),$u.forEach(e),n=0;n<Xr.length;n++)i=Xr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)tS(n),n.blockedOn===null&&Xr.shift()}var Ba=Lr.ReactCurrentBatchConfig,Rd=!0;function Yk(t,e,n,i){var r=qe,o=Ba.transition;Ba.transition=null;try{qe=1,zy(t,e,n,i)}finally{qe=r,Ba.transition=o}}function Qk(t,e,n,i){var r=qe,o=Ba.transition;Ba.transition=null;try{qe=4,zy(t,e,n,i)}finally{qe=r,Ba.transition=o}}function zy(t,e,n,i){if(Rd){var r=rg(t,e,n,i);if(r===null)Yp(t,e,i,Nd,n),W0(t,i);else if(Kk(r,t,e,n,i))i.stopPropagation();else if(W0(t,i),e&4&&-1<Gk.indexOf(t)){for(;r!==null;){var o=bc(r);if(o!==null&&QE(o),o=rg(t,e,n,i),o===null&&Yp(t,e,i,Nd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Yp(t,e,i,null,n)}}var Nd=null;function rg(t,e,n,i){if(Nd=null,t=Oy(i),t=ao(t),t!==null)if(e=Lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nd=t,null}function nS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jk()){case Vy:return 1;case GE:return 4;case Ad:case Fk:return 16;case KE:return 536870912;default:return 16}default:return 16}}var rs=null,Uy=null,ed=null;function iS(){if(ed)return ed;var t,e=Uy,n=e.length,i,r="value"in rs?rs.value:rs.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return ed=r.slice(t,1<i?1-i:void 0)}function td(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ih(){return!0}function q0(){return!1}function Vn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ih:q0,this.isPropagationStopped=q0,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ih)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ih)},persist:function(){},isPersistent:Ih}),e}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},By=Vn(yl),Sc=st({},yl,{view:0,detail:0}),Xk=Vn(Sc),Up,Bp,nu,kf=st({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nu&&(nu&&t.type==="mousemove"?(Up=t.screenX-nu.screenX,Bp=t.screenY-nu.screenY):Bp=Up=0,nu=t),Up)},movementY:function(t){return"movementY"in t?t.movementY:Bp}}),G0=Vn(kf),Jk=st({},kf,{dataTransfer:0}),eR=Vn(Jk),tR=st({},Sc,{relatedTarget:0}),Hp=Vn(tR),nR=st({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),iR=Vn(nR),rR=st({},yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sR=Vn(rR),oR=st({},yl,{data:0}),K0=Vn(oR),aR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uR[t])?!!e[t]:!1}function Hy(){return cR}var hR=st({},Sc,{key:function(t){if(t.key){var e=aR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=td(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?td(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?td(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dR=Vn(hR),fR=st({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z0=Vn(fR),pR=st({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),mR=Vn(pR),gR=st({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yR=Vn(gR),_R=st({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vR=Vn(_R),wR=[9,13,27,32],Wy=Sr&&"CompositionEvent"in window,Tu=null;Sr&&"documentMode"in document&&(Tu=document.documentMode);var xR=Sr&&"TextEvent"in window&&!Tu,rS=Sr&&(!Wy||Tu&&8<Tu&&11>=Tu),Y0=" ",Q0=!1;function sS(t,e){switch(t){case"keyup":return wR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sa=!1;function TR(t,e){switch(t){case"compositionend":return oS(e);case"keypress":return e.which!==32?null:(Q0=!0,Y0);case"textInput":return t=e.data,t===Y0&&Q0?null:t;default:return null}}function ER(t,e){if(Sa)return t==="compositionend"||!Wy&&sS(t,e)?(t=iS(),ed=Uy=rs=null,Sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rS&&e.locale!=="ko"?null:e.data;default:return null}}var SR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SR[t.type]:e==="textarea"}function aS(t,e,n,i){jE(i),e=Md(e,"onChange"),0<e.length&&(n=new By("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Eu=null,Gu=null;function bR(t){_S(t,0)}function Rf(t){var e=Ia(t);if(RE(e))return t}function PR(t,e){if(t==="change")return e}var lS=!1;if(Sr){var Wp;if(Sr){var $p="oninput"in document;if(!$p){var J0=document.createElement("div");J0.setAttribute("oninput","return;"),$p=typeof J0.oninput=="function"}Wp=$p}else Wp=!1;lS=Wp&&(!document.documentMode||9<document.documentMode)}function ew(){Eu&&(Eu.detachEvent("onpropertychange",uS),Gu=Eu=null)}function uS(t){if(t.propertyName==="value"&&Rf(Gu)){var e=[];aS(e,Gu,t,Oy(t)),BE(bR,e)}}function IR(t,e,n){t==="focusin"?(ew(),Eu=e,Gu=n,Eu.attachEvent("onpropertychange",uS)):t==="focusout"&&ew()}function CR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rf(Gu)}function AR(t,e){if(t==="click")return Rf(e)}function kR(t,e){if(t==="input"||t==="change")return Rf(e)}function RR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:RR;function Ku(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!zm.call(e,r)||!vi(t[r],e[r]))return!1}return!0}function tw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nw(t,e){var n=tw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tw(n)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hS(){for(var t=window,e=Pd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pd(t.document)}return e}function $y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NR(t){var e=hS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cS(n.ownerDocument.documentElement,n)){if(i!==null&&$y(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=nw(n,o);var a=nw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MR=Sr&&"documentMode"in document&&11>=document.documentMode,ba=null,sg=null,Su=null,og=!1;function iw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;og||ba==null||ba!==Pd(i)||(i=ba,"selectionStart"in i&&$y(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Su&&Ku(Su,i)||(Su=i,i=Md(sg,"onSelect"),0<i.length&&(e=new By("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ba)))}function Ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pa={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},qp={},dS={};Sr&&(dS=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Nf(t){if(qp[t])return qp[t];if(!Pa[t])return t;var e=Pa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dS)return qp[t]=e[n];return t}var fS=Nf("animationend"),pS=Nf("animationiteration"),mS=Nf("animationstart"),gS=Nf("transitionend"),yS=new Map,rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){yS.set(t,e),Mo(e,[t])}for(var Gp=0;Gp<rw.length;Gp++){var Kp=rw[Gp],LR=Kp.toLowerCase(),DR=Kp[0].toUpperCase()+Kp.slice(1);Ns(LR,"on"+DR)}Ns(fS,"onAnimationEnd");Ns(pS,"onAnimationIteration");Ns(mS,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(gS,"onTransitionEnd");Qa("onMouseEnter",["mouseout","mouseover"]);Qa("onMouseLeave",["mouseout","mouseover"]);Qa("onPointerEnter",["pointerout","pointerover"]);Qa("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OR=new Set("cancel close invalid load scroll toggle".split(" ").concat(du));function sw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Lk(i,e,void 0,t),t.currentTarget=null}function _S(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;sw(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;sw(r,u,f),o=c}}}if(Cd)throw t=tg,Cd=!1,tg=null,t}function Ye(t,e){var n=e[hg];n===void 0&&(n=e[hg]=new Set);var i=t+"__bubble";n.has(i)||(vS(e,t,2,!1),n.add(i))}function Zp(t,e,n){var i=0;e&&(i|=4),vS(n,t,i,e)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Zu(t){if(!t[Ah]){t[Ah]=!0,PE.forEach(function(n){n!=="selectionchange"&&(OR.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ah]||(e[Ah]=!0,Zp("selectionchange",!1,e))}}function vS(t,e,n,i){switch(nS(e)){case 1:var r=Yk;break;case 4:r=Qk;break;default:r=zy}n=r.bind(null,e,n,t),r=void 0,!eg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Yp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=ao(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}BE(function(){var f=o,p=Oy(n),y=[];e:{var v=yS.get(t);if(v!==void 0){var T=By,I=t;switch(t){case"keypress":if(td(n)===0)break e;case"keydown":case"keyup":T=dR;break;case"focusin":I="focus",T=Hp;break;case"focusout":I="blur",T=Hp;break;case"beforeblur":case"afterblur":T=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=eR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=mR;break;case fS:case pS:case mS:T=iR;break;case gS:T=yR;break;case"scroll":T=Xk;break;case"wheel":T=vR;break;case"copy":case"cut":case"paste":T=sR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Z0}var R=(e&4)!==0,V=!R&&t==="scroll",b=R?v!==null?v+"Capture":null:v;R=[];for(var S=f,C;S!==null;){C=S;var z=C.stateNode;if(C.tag===5&&z!==null&&(C=z,b!==null&&(z=Hu(S,b),z!=null&&R.push(Yu(S,z,C)))),V)break;S=S.return}0<R.length&&(v=new T(v,I,null,n,p),y.push({event:v,listeners:R}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==Xm&&(I=n.relatedTarget||n.fromElement)&&(ao(I)||I[br]))break e;if((T||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,T?(I=n.relatedTarget||n.toElement,T=f,I=I?ao(I):null,I!==null&&(V=Lo(I),I!==V||I.tag!==5&&I.tag!==6)&&(I=null)):(T=null,I=f),T!==I)){if(R=G0,z="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(R=Z0,z="onPointerLeave",b="onPointerEnter",S="pointer"),V=T==null?v:Ia(T),C=I==null?v:Ia(I),v=new R(z,S+"leave",T,n,p),v.target=V,v.relatedTarget=C,z=null,ao(p)===f&&(R=new R(b,S+"enter",I,n,p),R.target=C,R.relatedTarget=V,z=R),V=z,T&&I)t:{for(R=T,b=I,S=0,C=R;C;C=ma(C))S++;for(C=0,z=b;z;z=ma(z))C++;for(;0<S-C;)R=ma(R),S--;for(;0<C-S;)b=ma(b),C--;for(;S--;){if(R===b||b!==null&&R===b.alternate)break t;R=ma(R),b=ma(b)}R=null}else R=null;T!==null&&ow(y,v,T,R,!1),I!==null&&V!==null&&ow(y,V,I,R,!0)}}e:{if(v=f?Ia(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var H=PR;else if(X0(v))if(lS)H=kR;else{H=CR;var U=IR}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(H=AR);if(H&&(H=H(t,f))){aS(y,H,n,p);break e}U&&U(t,v,f),t==="focusout"&&(U=v._wrapperState)&&U.controlled&&v.type==="number"&&Gm(v,"number",v.value)}switch(U=f?Ia(f):window,t){case"focusin":(X0(U)||U.contentEditable==="true")&&(ba=U,sg=f,Su=null);break;case"focusout":Su=sg=ba=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,iw(y,n,p);break;case"selectionchange":if(MR)break;case"keydown":case"keyup":iw(y,n,p)}var k;if(Wy)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Sa?sS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(rS&&n.locale!=="ko"&&(Sa||E!=="onCompositionStart"?E==="onCompositionEnd"&&Sa&&(k=iS()):(rs=p,Uy="value"in rs?rs.value:rs.textContent,Sa=!0)),U=Md(f,E),0<U.length&&(E=new K0(E,t,null,n,p),y.push({event:E,listeners:U}),k?E.data=k:(k=oS(n),k!==null&&(E.data=k)))),(k=xR?TR(t,n):ER(t,n))&&(f=Md(f,"onBeforeInput"),0<f.length&&(p=new K0("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:f}),p.data=k))}_S(y,e)})}function Yu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Md(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Hu(t,n),o!=null&&i.unshift(Yu(t,o,r)),o=Hu(t,e),o!=null&&i.push(Yu(t,o,r))),t=t.return}return i}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ow(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=Hu(n,o),c!=null&&a.unshift(Yu(n,c,u))):r||(c=Hu(n,o),c!=null&&a.push(Yu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var VR=/\r\n?/g,jR=/\u0000|\uFFFD/g;function aw(t){return(typeof t=="string"?t:""+t).replace(VR,`
`).replace(jR,"")}function kh(t,e,n){if(e=aw(e),aw(t)!==e&&n)throw Error(ee(425))}function Ld(){}var ag=null,lg=null;function ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cg=typeof setTimeout=="function"?setTimeout:void 0,FR=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(t){return lw.resolve(null).then(t).catch(UR)}:cg;function UR(t){setTimeout(function(){throw t})}function Qp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),qu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);qu(e)}function hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _l=Math.random().toString(36).slice(2),Mi="__reactFiber$"+_l,Qu="__reactProps$"+_l,br="__reactContainer$"+_l,hg="__reactEvents$"+_l,BR="__reactListeners$"+_l,HR="__reactHandles$"+_l;function ao(t){var e=t[Mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[br]||n[Mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uw(t);t!==null;){if(n=t[Mi])return n;t=uw(t)}return e}t=n,n=t.parentNode}return null}function bc(t){return t=t[Mi]||t[br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Mf(t){return t[Qu]||null}var dg=[],Ca=-1;function Ms(t){return{current:t}}function Xe(t){0>Ca||(t.current=dg[Ca],dg[Ca]=null,Ca--)}function Ze(t,e){Ca++,dg[Ca]=t.current,t.current=e}var Ts={},rn=Ms(Ts),Tn=Ms(!1),wo=Ts;function Xa(t,e){var n=t.type.contextTypes;if(!n)return Ts;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function En(t){return t=t.childContextTypes,t!=null}function Dd(){Xe(Tn),Xe(rn)}function cw(t,e,n){if(rn.current!==Ts)throw Error(ee(168));Ze(rn,e),Ze(Tn,n)}function wS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,Ik(t)||"Unknown",r));return st({},n,i)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,wo=rn.current,Ze(rn,t),Ze(Tn,Tn.current),!0}function hw(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=wS(t,e,wo),i.__reactInternalMemoizedMergedChildContext=t,Xe(Tn),Xe(rn),Ze(rn,t)):Xe(Tn),Ze(Tn,n)}var mr=null,Lf=!1,Xp=!1;function xS(t){mr===null?mr=[t]:mr.push(t)}function WR(t){Lf=!0,xS(t)}function Ls(){if(!Xp&&mr!==null){Xp=!0;var t=0,e=qe;try{var n=mr;for(qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mr=null,Lf=!1}catch(r){throw mr!==null&&(mr=mr.slice(t+1)),qE(Vy,Ls),r}finally{qe=e,Xp=!1}}return null}var Aa=[],ka=0,Vd=null,jd=0,Kn=[],Zn=0,xo=null,yr=1,_r="";function to(t,e){Aa[ka++]=jd,Aa[ka++]=Vd,Vd=t,jd=e}function TS(t,e,n){Kn[Zn++]=yr,Kn[Zn++]=_r,Kn[Zn++]=xo,xo=t;var i=yr;t=_r;var r=32-gi(i)-1;i&=~(1<<r),n+=1;var o=32-gi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,yr=1<<32-gi(e)+r|n<<r|i,_r=o+t}else yr=1<<o|n<<r|i,_r=t}function qy(t){t.return!==null&&(to(t,1),TS(t,1,0))}function Gy(t){for(;t===Vd;)Vd=Aa[--ka],Aa[ka]=null,jd=Aa[--ka],Aa[ka]=null;for(;t===xo;)xo=Kn[--Zn],Kn[Zn]=null,_r=Kn[--Zn],Kn[Zn]=null,yr=Kn[--Zn],Kn[Zn]=null}var Nn=null,An=null,et=!1,fi=null;function ES(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,An=hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xo!==null?{id:yr,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,An=null,!0):!1;default:return!1}}function fg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pg(t){if(et){var e=An;if(e){var n=e;if(!dw(t,e)){if(fg(t))throw Error(ee(418));e=hs(n.nextSibling);var i=Nn;e&&dw(t,e)?ES(i,n):(t.flags=t.flags&-4097|2,et=!1,Nn=t)}}else{if(fg(t))throw Error(ee(418));t.flags=t.flags&-4097|2,et=!1,Nn=t}}}function fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Rh(t){if(t!==Nn)return!1;if(!et)return fw(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ug(t.type,t.memoizedProps)),e&&(e=An)){if(fg(t))throw SS(),Error(ee(418));for(;e;)ES(t,e),e=hs(e.nextSibling)}if(fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Nn?hs(t.stateNode.nextSibling):null;return!0}function SS(){for(var t=An;t;)t=hs(t.nextSibling)}function Ja(){An=Nn=null,et=!1}function Ky(t){fi===null?fi=[t]:fi.push(t)}var $R=Lr.ReactCurrentBatchConfig;function iu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Nh(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pw(t){var e=t._init;return e(t._payload)}function bS(t){function e(b,S){if(t){var C=b.deletions;C===null?(b.deletions=[S],b.flags|=16):C.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function i(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function r(b,S){return b=ms(b,S),b.index=0,b.sibling=null,b}function o(b,S,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<S?(b.flags|=2,S):C):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,S,C,z){return S===null||S.tag!==6?(S=sm(C,b.mode,z),S.return=b,S):(S=r(S,C),S.return=b,S)}function c(b,S,C,z){var H=C.type;return H===Ea?p(b,S,C.props.children,z,C.key):S!==null&&(S.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Zr&&pw(H)===S.type)?(z=r(S,C.props),z.ref=iu(b,S,C),z.return=b,z):(z=ld(C.type,C.key,C.props,null,b.mode,z),z.ref=iu(b,S,C),z.return=b,z)}function f(b,S,C,z){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=om(C,b.mode,z),S.return=b,S):(S=r(S,C.children||[]),S.return=b,S)}function p(b,S,C,z,H){return S===null||S.tag!==7?(S=mo(C,b.mode,z,H),S.return=b,S):(S=r(S,C),S.return=b,S)}function y(b,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=sm(""+S,b.mode,C),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xh:return C=ld(S.type,S.key,S.props,null,b.mode,C),C.ref=iu(b,null,S),C.return=b,C;case Ta:return S=om(S,b.mode,C),S.return=b,S;case Zr:var z=S._init;return y(b,z(S._payload),C)}if(cu(S)||Xl(S))return S=mo(S,b.mode,C,null),S.return=b,S;Nh(b,S)}return null}function v(b,S,C,z){var H=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return H!==null?null:u(b,S,""+C,z);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case xh:return C.key===H?c(b,S,C,z):null;case Ta:return C.key===H?f(b,S,C,z):null;case Zr:return H=C._init,v(b,S,H(C._payload),z)}if(cu(C)||Xl(C))return H!==null?null:p(b,S,C,z,null);Nh(b,C)}return null}function T(b,S,C,z,H){if(typeof z=="string"&&z!==""||typeof z=="number")return b=b.get(C)||null,u(S,b,""+z,H);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case xh:return b=b.get(z.key===null?C:z.key)||null,c(S,b,z,H);case Ta:return b=b.get(z.key===null?C:z.key)||null,f(S,b,z,H);case Zr:var U=z._init;return T(b,S,C,U(z._payload),H)}if(cu(z)||Xl(z))return b=b.get(C)||null,p(S,b,z,H,null);Nh(S,z)}return null}function I(b,S,C,z){for(var H=null,U=null,k=S,E=S=0,M=null;k!==null&&E<C.length;E++){k.index>E?(M=k,k=null):M=k.sibling;var N=v(b,k,C[E],z);if(N===null){k===null&&(k=M);break}t&&k&&N.alternate===null&&e(b,k),S=o(N,S,E),U===null?H=N:U.sibling=N,U=N,k=M}if(E===C.length)return n(b,k),et&&to(b,E),H;if(k===null){for(;E<C.length;E++)k=y(b,C[E],z),k!==null&&(S=o(k,S,E),U===null?H=k:U.sibling=k,U=k);return et&&to(b,E),H}for(k=i(b,k);E<C.length;E++)M=T(k,b,E,C[E],z),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?E:M.key),S=o(M,S,E),U===null?H=M:U.sibling=M,U=M);return t&&k.forEach(function(D){return e(b,D)}),et&&to(b,E),H}function R(b,S,C,z){var H=Xl(C);if(typeof H!="function")throw Error(ee(150));if(C=H.call(C),C==null)throw Error(ee(151));for(var U=H=null,k=S,E=S=0,M=null,N=C.next();k!==null&&!N.done;E++,N=C.next()){k.index>E?(M=k,k=null):M=k.sibling;var D=v(b,k,N.value,z);if(D===null){k===null&&(k=M);break}t&&k&&D.alternate===null&&e(b,k),S=o(D,S,E),U===null?H=D:U.sibling=D,U=D,k=M}if(N.done)return n(b,k),et&&to(b,E),H;if(k===null){for(;!N.done;E++,N=C.next())N=y(b,N.value,z),N!==null&&(S=o(N,S,E),U===null?H=N:U.sibling=N,U=N);return et&&to(b,E),H}for(k=i(b,k);!N.done;E++,N=C.next())N=T(k,b,E,N.value,z),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?E:N.key),S=o(N,S,E),U===null?H=N:U.sibling=N,U=N);return t&&k.forEach(function(F){return e(b,F)}),et&&to(b,E),H}function V(b,S,C,z){if(typeof C=="object"&&C!==null&&C.type===Ea&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case xh:e:{for(var H=C.key,U=S;U!==null;){if(U.key===H){if(H=C.type,H===Ea){if(U.tag===7){n(b,U.sibling),S=r(U,C.props.children),S.return=b,b=S;break e}}else if(U.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Zr&&pw(H)===U.type){n(b,U.sibling),S=r(U,C.props),S.ref=iu(b,U,C),S.return=b,b=S;break e}n(b,U);break}else e(b,U);U=U.sibling}C.type===Ea?(S=mo(C.props.children,b.mode,z,C.key),S.return=b,b=S):(z=ld(C.type,C.key,C.props,null,b.mode,z),z.ref=iu(b,S,C),z.return=b,b=z)}return a(b);case Ta:e:{for(U=C.key;S!==null;){if(S.key===U)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(b,S.sibling),S=r(S,C.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=om(C,b.mode,z),S.return=b,b=S}return a(b);case Zr:return U=C._init,V(b,S,U(C._payload),z)}if(cu(C))return I(b,S,C,z);if(Xl(C))return R(b,S,C,z);Nh(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(b,S.sibling),S=r(S,C),S.return=b,b=S):(n(b,S),S=sm(C,b.mode,z),S.return=b,b=S),a(b)):n(b,S)}return V}var el=bS(!0),PS=bS(!1),Fd=Ms(null),zd=null,Ra=null,Zy=null;function Yy(){Zy=Ra=zd=null}function Qy(t){var e=Fd.current;Xe(Fd),t._currentValue=e}function mg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ha(t,e){zd=t,Zy=Ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function ti(t){var e=t._currentValue;if(Zy!==t)if(t={context:t,memoizedValue:e,next:null},Ra===null){if(zd===null)throw Error(ee(308));Ra=t,zd.dependencies={lanes:0,firstContext:t}}else Ra=Ra.next=t;return e}var lo=null;function Xy(t){lo===null?lo=[t]:lo.push(t)}function IS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Xy(e)):(n.next=r.next,r.next=n),e.interleaved=n,Pr(t,i)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function Jy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ds(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Pr(t,n)}return r=i.interleaved,r===null?(e.next=e,Xy(i)):(e.next=r.next,r.next=e),i.interleaved=e,Pr(t,n)}function nd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jy(t,n)}}function mw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ud(t,e,n,i){var r=t.updateQueue;Yr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(o!==null){var y=r.baseState;a=0,p=f=c=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){p!==null&&(p=p.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var I=t,R=u;switch(v=e,T=n,R.tag){case 1:if(I=R.payload,typeof I=="function"){y=I.call(T,y,v);break e}y=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=R.payload,v=typeof I=="function"?I.call(T,y,v):I,v==null)break e;y=st({},y,v);break e;case 2:Yr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=T,c=y):p=p.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(p===null&&(c=y),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Eo|=a,t.lanes=a,t.memoizedState=y}}function gw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Pc={},ji=Ms(Pc),Xu=Ms(Pc),Ju=Ms(Pc);function uo(t){if(t===Pc)throw Error(ee(174));return t}function e_(t,e){switch(Ze(Ju,e),Ze(Xu,t),Ze(ji,Pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zm(e,t)}Xe(ji),Ze(ji,e)}function tl(){Xe(ji),Xe(Xu),Xe(Ju)}function AS(t){uo(Ju.current);var e=uo(ji.current),n=Zm(e,t.type);e!==n&&(Ze(Xu,t),Ze(ji,n))}function t_(t){Xu.current===t&&(Xe(ji),Xe(Xu))}var tt=Ms(0);function Bd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jp=[];function n_(){for(var t=0;t<Jp.length;t++)Jp[t]._workInProgressVersionPrimary=null;Jp.length=0}var id=Lr.ReactCurrentDispatcher,em=Lr.ReactCurrentBatchConfig,To=0,rt=null,It=null,Dt=null,Hd=!1,bu=!1,ec=0,qR=0;function Kt(){throw Error(ee(321))}function i_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function r_(t,e,n,i,r,o){if(To=o,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,id.current=t===null||t.memoizedState===null?YR:QR,t=n(i,r),bu){o=0;do{if(bu=!1,ec=0,25<=o)throw Error(ee(301));o+=1,Dt=It=null,e.updateQueue=null,id.current=XR,t=n(i,r)}while(bu)}if(id.current=Wd,e=It!==null&&It.next!==null,To=0,Dt=It=rt=null,Hd=!1,e)throw Error(ee(300));return t}function s_(){var t=ec!==0;return ec=0,t}function Ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?rt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function ni(){if(It===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Dt===null?rt.memoizedState:Dt.next;if(e!==null)Dt=e,It=t;else{if(t===null)throw Error(ee(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Dt===null?rt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function tc(t,e){return typeof e=="function"?e(t):e}function tm(t){var e=ni(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=It,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var p=f.lane;if((To&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var y={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=y,a=i):c=c.next=y,rt.lanes|=p,Eo|=p}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,vi(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,rt.lanes|=o,Eo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nm(t){var e=ni(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);vi(o,e.memoizedState)||(xn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function kS(){}function RS(t,e){var n=rt,i=ni(),r=e(),o=!vi(i.memoizedState,r);if(o&&(i.memoizedState=r,xn=!0),i=i.queue,o_(LS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,nc(9,MS.bind(null,n,i,r,e),void 0,null),Ot===null)throw Error(ee(349));To&30||NS(n,e,r)}return r}function NS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MS(t,e,n,i){e.value=n,e.getSnapshot=i,DS(e)&&OS(t)}function LS(t,e,n){return n(function(){DS(e)&&OS(t)})}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function OS(t){var e=Pr(t,1);e!==null&&yi(e,t,1,-1)}function yw(t){var e=Ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:t},e.queue=t,t=t.dispatch=ZR.bind(null,rt,t),[e.memoizedState,t]}function nc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function VS(){return ni().memoizedState}function rd(t,e,n,i){var r=Ri();rt.flags|=t,r.memoizedState=nc(1|e,n,void 0,i===void 0?null:i)}function Df(t,e,n,i){var r=ni();i=i===void 0?null:i;var o=void 0;if(It!==null){var a=It.memoizedState;if(o=a.destroy,i!==null&&i_(i,a.deps)){r.memoizedState=nc(e,n,o,i);return}}rt.flags|=t,r.memoizedState=nc(1|e,n,o,i)}function _w(t,e){return rd(8390656,8,t,e)}function o_(t,e){return Df(2048,8,t,e)}function jS(t,e){return Df(4,2,t,e)}function FS(t,e){return Df(4,4,t,e)}function zS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function US(t,e,n){return n=n!=null?n.concat([t]):null,Df(4,4,zS.bind(null,e,t),n)}function a_(){}function BS(t,e){var n=ni();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HS(t,e){var n=ni();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function WS(t,e,n){return To&21?(vi(n,e)||(n=ZE(),rt.lanes|=n,Eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function GR(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var i=em.transition;em.transition={};try{t(!1),e()}finally{qe=n,em.transition=i}}function $S(){return ni().memoizedState}function KR(t,e,n){var i=ps(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qS(t))GS(e,n);else if(n=IS(t,e,n,i),n!==null){var r=hn();yi(n,t,i,r),KS(n,e,i)}}function ZR(t,e,n){var i=ps(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qS(t))GS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,vi(u,a)){var c=e.interleaved;c===null?(r.next=r,Xy(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=IS(t,e,r,i),n!==null&&(r=hn(),yi(n,t,i,r),KS(n,e,i))}}function qS(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function GS(t,e){bu=Hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jy(t,n)}}var Wd={readContext:ti,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},YR={readContext:ti,useCallback:function(t,e){return Ri().memoizedState=[t,e===void 0?null:e],t},useContext:ti,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rd(4194308,4,zS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return rd(4,2,t,e)},useMemo:function(t,e){var n=Ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ri();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=KR.bind(null,rt,t),[i.memoizedState,t]},useRef:function(t){var e=Ri();return t={current:t},e.memoizedState=t},useState:yw,useDebugValue:a_,useDeferredValue:function(t){return Ri().memoizedState=t},useTransition:function(){var t=yw(!1),e=t[0];return t=GR.bind(null,t[1]),Ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=rt,r=Ri();if(et){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Ot===null)throw Error(ee(349));To&30||NS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,_w(LS.bind(null,i,o,t),[t]),i.flags|=2048,nc(9,MS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ri(),e=Ot.identifierPrefix;if(et){var n=_r,i=yr;n=(i&~(1<<32-gi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ec++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QR={readContext:ti,useCallback:BS,useContext:ti,useEffect:o_,useImperativeHandle:US,useInsertionEffect:jS,useLayoutEffect:FS,useMemo:HS,useReducer:tm,useRef:VS,useState:function(){return tm(tc)},useDebugValue:a_,useDeferredValue:function(t){var e=ni();return WS(e,It.memoizedState,t)},useTransition:function(){var t=tm(tc)[0],e=ni().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:RS,useId:$S,unstable_isNewReconciler:!1},XR={readContext:ti,useCallback:BS,useContext:ti,useEffect:o_,useImperativeHandle:US,useInsertionEffect:jS,useLayoutEffect:FS,useMemo:HS,useReducer:nm,useRef:VS,useState:function(){return nm(tc)},useDebugValue:a_,useDeferredValue:function(t){var e=ni();return It===null?e.memoizedState=t:WS(e,It.memoizedState,t)},useTransition:function(){var t=nm(tc)[0],e=ni().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:RS,useId:$S,unstable_isNewReconciler:!1};function hi(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Of={isMounted:function(t){return(t=t._reactInternals)?Lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=ps(t),o=xr(i,r);o.payload=e,n!=null&&(o.callback=n),e=ds(t,o,r),e!==null&&(yi(e,t,r,i),nd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=ps(t),o=xr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ds(t,o,r),e!==null&&(yi(e,t,r,i),nd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=ps(t),r=xr(n,i);r.tag=2,e!=null&&(r.callback=e),e=ds(t,r,i),e!==null&&(yi(e,t,i,n),nd(e,t,i))}};function vw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ku(n,i)||!Ku(r,o):!0}function ZS(t,e,n){var i=!1,r=Ts,o=e.contextType;return typeof o=="object"&&o!==null?o=ti(o):(r=En(e)?wo:rn.current,i=e.contextTypes,o=(i=i!=null)?Xa(t,r):Ts),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Of,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function ww(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Of.enqueueReplaceState(e,e.state,null)}function yg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Jy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=ti(o):(o=En(e)?wo:rn.current,r.context=Xa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(gg(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Of.enqueueReplaceState(r,r.state,null),Ud(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function nl(t,e){try{var n="",i=e;do n+=Pk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function im(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _g(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JR=typeof WeakMap=="function"?WeakMap:Map;function YS(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qd||(qd=!0,Cg=i),_g(t,e)},n}function QS(t,e,n){n=xr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){_g(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){_g(t,e),typeof i!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function xw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new JR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=fN.bind(null,t,e,n),e.then(t,t))}function Tw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ew(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,ds(n,e,1))),n.lanes|=1),t)}var eN=Lr.ReactCurrentOwner,xn=!1;function cn(t,e,n,i){e.child=t===null?PS(e,null,n,i):el(e,t.child,n,i)}function Sw(t,e,n,i,r){n=n.render;var o=e.ref;return Ha(e,r),i=r_(t,e,n,i,o,r),n=s_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ir(t,e,r)):(et&&n&&qy(e),e.flags|=1,cn(t,e,i,r),e.child)}function bw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!m_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,XS(t,e,o,i,r)):(t=ld(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ku,n(a,i)&&t.ref===e.ref)return Ir(t,e,r)}return e.flags|=1,t=ms(o,i),t.ref=e.ref,t.return=e,e.child=t}function XS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Ku(o,i)&&t.ref===e.ref)if(xn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Ir(t,e,r)}return vg(t,e,n,i,r)}function JS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Ma,Cn),Cn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(Ma,Cn),Cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ze(Ma,Cn),Cn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ze(Ma,Cn),Cn|=i;return cn(t,e,r,n),e.child}function eb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vg(t,e,n,i,r){var o=En(n)?wo:rn.current;return o=Xa(e,o),Ha(e,r),n=r_(t,e,n,i,o,r),i=s_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ir(t,e,r)):(et&&i&&qy(e),e.flags|=1,cn(t,e,n,r),e.child)}function Pw(t,e,n,i,r){if(En(n)){var o=!0;Od(e)}else o=!1;if(Ha(e,r),e.stateNode===null)sd(t,e),ZS(e,n,i),yg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=ti(f):(f=En(n)?wo:rn.current,f=Xa(e,f));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&ww(e,a,i,f),Yr=!1;var v=e.memoizedState;a.state=v,Ud(e,i,a,r),c=e.memoizedState,u!==i||v!==c||Tn.current||Yr?(typeof p=="function"&&(gg(e,n,p,i),c=e.memoizedState),(u=Yr||vw(e,n,u,i,v,c,f))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,CS(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:hi(e.type,u),a.props=f,y=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ti(c):(c=En(n)?wo:rn.current,c=Xa(e,c));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==c)&&ww(e,a,i,c),Yr=!1,v=e.memoizedState,a.state=v,Ud(e,i,a,r);var I=e.memoizedState;u!==y||v!==I||Tn.current||Yr?(typeof T=="function"&&(gg(e,n,T,i),I=e.memoizedState),(f=Yr||vw(e,n,f,i,v,I,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,I,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,I,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=I),a.props=i,a.state=I,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return wg(t,e,n,i,o,r)}function wg(t,e,n,i,r,o){eb(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&hw(e,n,!1),Ir(t,e,o);i=e.stateNode,eN.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=el(e,t.child,null,o),e.child=el(e,null,u,o)):cn(t,e,u,o),e.memoizedState=i.state,r&&hw(e,n,!0),e.child}function tb(t){var e=t.stateNode;e.pendingContext?cw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cw(t,e.context,!1),e_(t,e.containerInfo)}function Iw(t,e,n,i,r){return Ja(),Ky(r),e.flags|=256,cn(t,e,n,i),e.child}var xg={dehydrated:null,treeContext:null,retryLane:0};function Tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nb(t,e,n){var i=e.pendingProps,r=tt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ze(tt,r&1),t===null)return pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ff(a,i,0,null),t=mo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Tg(n),e.memoizedState=xg,t):l_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return tN(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=ms(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ms(u,o):(o=mo(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Tg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=xg,i}return o=t.child,t=o.sibling,i=ms(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function l_(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mh(t,e,n,i){return i!==null&&Ky(i),el(e,t.child,null,n),t=l_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tN(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=im(Error(ee(422))),Mh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Ff({mode:"visible",children:i.children},r,0,null),o=mo(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&el(e,t.child,null,a),e.child.memoizedState=Tg(a),e.memoizedState=xg,o);if(!(e.mode&1))return Mh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=im(o,i,void 0),Mh(t,e,a,i)}if(u=(a&t.childLanes)!==0,xn||u){if(i=Ot,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Pr(t,r),yi(i,t,r,-1))}return p_(),i=im(Error(ee(421))),Mh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=pN.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,An=hs(r.nextSibling),Nn=e,et=!0,fi=null,t!==null&&(Kn[Zn++]=yr,Kn[Zn++]=_r,Kn[Zn++]=xo,yr=t.id,_r=t.overflow,xo=e),e=l_(e,i.children),e.flags|=4096,e)}function Cw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),mg(t.return,e,n)}function rm(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function ib(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(cn(t,e,i.children,n),i=tt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cw(t,n,e);else if(t.tag===19)Cw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ze(tt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),rm(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}rm(e,!0,n,null,o);break;case"together":rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nN(t,e,n){switch(e.tag){case 3:tb(e),Ja();break;case 5:AS(e);break;case 1:En(e.type)&&Od(e);break;case 4:e_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ze(Fd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ze(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?nb(t,e,n):(Ze(tt,tt.current&1),t=Ir(t,e,n),t!==null?t.sibling:null);Ze(tt,tt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ib(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ze(tt,tt.current),i)break;return null;case 22:case 23:return e.lanes=0,JS(t,e,n)}return Ir(t,e,n)}var rb,Eg,sb,ob;rb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eg=function(){};sb=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,uo(ji.current);var o=null;switch(n){case"input":r=$m(t,r),i=$m(t,i),o=[];break;case"select":r=st({},r,{value:void 0}),i=st({},i,{value:void 0}),o=[];break;case"textarea":r=Km(t,r),i=Km(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ld)}Ym(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Uu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ye("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};ob=function(t,e,n,i){n!==i&&(e.flags|=4)};function ru(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function iN(t,e,n){var i=e.pendingProps;switch(Gy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return En(e.type)&&Dd(),Zt(e),null;case 3:return i=e.stateNode,tl(),Xe(Tn),Xe(rn),n_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fi!==null&&(Rg(fi),fi=null))),Eg(t,e),Zt(e),null;case 5:t_(e);var r=uo(Ju.current);if(n=e.type,t!==null&&e.stateNode!=null)sb(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Zt(e),null}if(t=uo(ji.current),Rh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Mi]=e,i[Qu]=o,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(r=0;r<du.length;r++)Ye(du[r],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":V0(i,o),Ye("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ye("invalid",i);break;case"textarea":F0(i,o),Ye("invalid",i)}Ym(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&kh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&kh(i.textContent,u,t),r=["children",""+u]):Uu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ye("scroll",i)}switch(n){case"input":Th(i),j0(i,o,!0);break;case"textarea":Th(i),z0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Ld)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Mi]=e,t[Qu]=i,rb(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qm(n,i),n){case"dialog":Ye("cancel",t),Ye("close",t),r=i;break;case"iframe":case"object":case"embed":Ye("load",t),r=i;break;case"video":case"audio":for(r=0;r<du.length;r++)Ye(du[r],t);r=i;break;case"source":Ye("error",t),r=i;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),r=i;break;case"details":Ye("toggle",t),r=i;break;case"input":V0(t,i),r=$m(t,i),Ye("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=st({},i,{value:void 0}),Ye("invalid",t);break;case"textarea":F0(t,i),r=Km(t,i),Ye("invalid",t);break;default:r=i}Ym(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?VE(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&DE(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bu(t,c):typeof c=="number"&&Bu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Uu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ye("scroll",t):c!=null&&Ny(t,o,c,a))}switch(n){case"input":Th(t),j0(t,i,!1);break;case"textarea":Th(t),z0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+xs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Fa(t,!!i.multiple,o,!1):i.defaultValue!=null&&Fa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ld)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)ob(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=uo(Ju.current),uo(ji.current),Rh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Mi]=e,(o=i.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:kh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Mi]=e,e.stateNode=i}return Zt(e),null;case 13:if(Xe(tt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&An!==null&&e.mode&1&&!(e.flags&128))SS(),Ja(),e.flags|=98560,o=!1;else if(o=Rh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Mi]=e}else Ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),o=!1}else fi!==null&&(Rg(fi),fi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?At===0&&(At=3):p_())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return tl(),Eg(t,e),t===null&&Zu(e.stateNode.containerInfo),Zt(e),null;case 10:return Qy(e.type._context),Zt(e),null;case 17:return En(e.type)&&Dd(),Zt(e),null;case 19:if(Xe(tt),o=e.memoizedState,o===null)return Zt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)ru(o,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Bd(t),a!==null){for(e.flags|=128,ru(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(tt,tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&yt()>il&&(e.flags|=128,i=!0,ru(o,!1),e.lanes=4194304)}else{if(!i)if(t=Bd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ru(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!et)return Zt(e),null}else 2*yt()-o.renderingStartTime>il&&n!==1073741824&&(e.flags|=128,i=!0,ru(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=yt(),e.sibling=null,n=tt.current,Ze(tt,i?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return f_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Cn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function rN(t,e){switch(Gy(e),e.tag){case 1:return En(e.type)&&Dd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tl(),Xe(Tn),Xe(rn),n_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return t_(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return tl(),null;case 10:return Qy(e.type._context),null;case 22:case 23:return f_(),null;case 24:return null;default:return null}}var Lh=!1,Jt=!1,sN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ct(t,e,i)}else n.current=null}function Sg(t,e,n){try{n()}catch(i){ct(t,e,i)}}var Aw=!1;function oN(t,e){if(ag=Rd,t=hS(),$y(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,p=0,y=t,v=null;t:for(;;){for(var T;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(c=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(T=y.firstChild)!==null;)v=y,y=T;for(;;){if(y===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++p===i&&(c=a),(T=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=T}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lg={focusedElem:t,selectionRange:n},Rd=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var R=I.memoizedProps,V=I.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:hi(e.type,R),V);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(z){ct(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return I=Aw,Aw=!1,I}function Pu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Sg(e,n,o)}r=r.next}while(r!==i)}}function Vf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function bg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ab(t){var e=t.alternate;e!==null&&(t.alternate=null,ab(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mi],delete e[Qu],delete e[hg],delete e[BR],delete e[HR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lb(t){return t.tag===5||t.tag===3||t.tag===4}function kw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ld));else if(i!==4&&(t=t.child,t!==null))for(Pg(t,e,n),t=t.sibling;t!==null;)Pg(t,e,n),t=t.sibling}function Ig(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ig(t,e,n),t=t.sibling;t!==null;)Ig(t,e,n),t=t.sibling}var zt=null,di=!1;function $r(t,e,n){for(n=n.child;n!==null;)ub(t,e,n),n=n.sibling}function ub(t,e,n){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(Af,n)}catch{}switch(n.tag){case 5:Jt||Na(n,e);case 6:var i=zt,r=di;zt=null,$r(t,e,n),zt=i,di=r,zt!==null&&(di?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(di?(t=zt,n=n.stateNode,t.nodeType===8?Qp(t.parentNode,n):t.nodeType===1&&Qp(t,n),qu(t)):Qp(zt,n.stateNode));break;case 4:i=zt,r=di,zt=n.stateNode.containerInfo,di=!0,$r(t,e,n),zt=i,di=r;break;case 0:case 11:case 14:case 15:if(!Jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Sg(n,e,a),r=r.next}while(r!==i)}$r(t,e,n);break;case 1:if(!Jt&&(Na(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ct(n,e,u)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(Jt=(i=Jt)||n.memoizedState!==null,$r(t,e,n),Jt=i):$r(t,e,n);break;default:$r(t,e,n)}}function Rw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sN),e.forEach(function(i){var r=mN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ui(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:zt=u.stateNode,di=!1;break e;case 3:zt=u.stateNode.containerInfo,di=!0;break e;case 4:zt=u.stateNode.containerInfo,di=!0;break e}u=u.return}if(zt===null)throw Error(ee(160));ub(o,a,r),zt=null,di=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){ct(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cb(e,t),e=e.sibling}function cb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ui(e,t),ki(t),i&4){try{Pu(3,t,t.return),Vf(3,t)}catch(R){ct(t,t.return,R)}try{Pu(5,t,t.return)}catch(R){ct(t,t.return,R)}}break;case 1:ui(e,t),ki(t),i&512&&n!==null&&Na(n,n.return);break;case 5:if(ui(e,t),ki(t),i&512&&n!==null&&Na(n,n.return),t.flags&32){var r=t.stateNode;try{Bu(r,"")}catch(R){ct(t,t.return,R)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&NE(r,o),Qm(u,a);var f=Qm(u,o);for(a=0;a<c.length;a+=2){var p=c[a],y=c[a+1];p==="style"?VE(r,y):p==="dangerouslySetInnerHTML"?DE(r,y):p==="children"?Bu(r,y):Ny(r,p,y,f)}switch(u){case"input":qm(r,o);break;case"textarea":ME(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Fa(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?Fa(r,!!o.multiple,o.defaultValue,!0):Fa(r,!!o.multiple,o.multiple?[]:"",!1))}r[Qu]=o}catch(R){ct(t,t.return,R)}}break;case 6:if(ui(e,t),ki(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(R){ct(t,t.return,R)}}break;case 3:if(ui(e,t),ki(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{qu(e.containerInfo)}catch(R){ct(t,t.return,R)}break;case 4:ui(e,t),ki(t);break;case 13:ui(e,t),ki(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(h_=yt())),i&4&&Rw(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(f=Jt)||p,ui(e,t),Jt=f):ui(e,t),ki(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for(oe=t,p=t.child;p!==null;){for(y=oe=p;oe!==null;){switch(v=oe,T=v.child,v.tag){case 0:case 11:case 14:case 15:Pu(4,v,v.return);break;case 1:Na(v,v.return);var I=v.stateNode;if(typeof I.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(R){ct(i,n,R)}}break;case 5:Na(v,v.return);break;case 22:if(v.memoizedState!==null){Mw(y);continue}}T!==null?(T.return=v,oe=T):Mw(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{r=y.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,c=y.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=OE("display",a))}catch(R){ct(t,t.return,R)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(R){ct(t,t.return,R)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:ui(e,t),ki(t),i&4&&Rw(t);break;case 21:break;default:ui(e,t),ki(t)}}function ki(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lb(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Bu(r,""),i.flags&=-33);var o=kw(t);Ig(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=kw(t);Pg(t,u,a);break;default:throw Error(ee(161))}}catch(c){ct(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aN(t,e,n){oe=t,hb(t)}function hb(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Lh;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Jt;u=Lh;var f=Jt;if(Lh=a,(Jt=c)&&!f)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?Lw(r):c!==null?(c.return=a,oe=c):Lw(r);for(;o!==null;)oe=o,hb(o),o=o.sibling;oe=r,Lh=u,Jt=f}Nw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):Nw(t)}}function Nw(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||Vf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Jt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&qu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Jt||e.flags&512&&bg(e)}catch(v){ct(e,e.return,v)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Mw(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Lw(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vf(4,e)}catch(c){ct(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){ct(e,r,c)}}var o=e.return;try{bg(e)}catch(c){ct(e,o,c)}break;case 5:var a=e.return;try{bg(e)}catch(c){ct(e,a,c)}}}catch(c){ct(e,e.return,c)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var lN=Math.ceil,$d=Lr.ReactCurrentDispatcher,u_=Lr.ReactCurrentOwner,ei=Lr.ReactCurrentBatchConfig,Ve=0,Ot=null,St=null,Wt=0,Cn=0,Ma=Ms(0),At=0,ic=null,Eo=0,jf=0,c_=0,Iu=null,vn=null,h_=0,il=1/0,pr=null,qd=!1,Cg=null,fs=null,Dh=!1,ss=null,Gd=0,Cu=0,Ag=null,od=-1,ad=0;function hn(){return Ve&6?yt():od!==-1?od:od=yt()}function ps(t){return t.mode&1?Ve&2&&Wt!==0?Wt&-Wt:$R.transition!==null?(ad===0&&(ad=ZE()),ad):(t=qe,t!==0||(t=window.event,t=t===void 0?16:nS(t.type)),t):1}function yi(t,e,n,i){if(50<Cu)throw Cu=0,Ag=null,Error(ee(185));Ec(t,n,i),(!(Ve&2)||t!==Ot)&&(t===Ot&&(!(Ve&2)&&(jf|=n),At===4&&Jr(t,Wt)),Sn(t,i),n===1&&Ve===0&&!(e.mode&1)&&(il=yt()+500,Lf&&Ls()))}function Sn(t,e){var n=t.callbackNode;$k(t,e);var i=kd(t,t===Ot?Wt:0);if(i===0)n!==null&&H0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&H0(n),e===1)t.tag===0?WR(Dw.bind(null,t)):xS(Dw.bind(null,t)),zR(function(){!(Ve&6)&&Ls()}),n=null;else{switch(YE(i)){case 1:n=Vy;break;case 4:n=GE;break;case 16:n=Ad;break;case 536870912:n=KE;break;default:n=Ad}n=vb(n,db.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function db(t,e){if(od=-1,ad=0,Ve&6)throw Error(ee(327));var n=t.callbackNode;if(Wa()&&t.callbackNode!==n)return null;var i=kd(t,t===Ot?Wt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Kd(t,i);else{e=i;var r=Ve;Ve|=2;var o=pb();(Ot!==t||Wt!==e)&&(pr=null,il=yt()+500,po(t,e));do try{hN();break}catch(u){fb(t,u)}while(!0);Yy(),$d.current=o,Ve=r,St!==null?e=0:(Ot=null,Wt=0,e=At)}if(e!==0){if(e===2&&(r=ng(t),r!==0&&(i=r,e=kg(t,r))),e===1)throw n=ic,po(t,0),Jr(t,i),Sn(t,yt()),n;if(e===6)Jr(t,i);else{if(r=t.current.alternate,!(i&30)&&!uN(r)&&(e=Kd(t,i),e===2&&(o=ng(t),o!==0&&(i=o,e=kg(t,o))),e===1))throw n=ic,po(t,0),Jr(t,i),Sn(t,yt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:no(t,vn,pr);break;case 3:if(Jr(t,i),(i&130023424)===i&&(e=h_+500-yt(),10<e)){if(kd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=cg(no.bind(null,t,vn,pr),e);break}no(t,vn,pr);break;case 4:if(Jr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-gi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=yt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lN(i/1960))-i,10<i){t.timeoutHandle=cg(no.bind(null,t,vn,pr),i);break}no(t,vn,pr);break;case 5:no(t,vn,pr);break;default:throw Error(ee(329))}}}return Sn(t,yt()),t.callbackNode===n?db.bind(null,t):null}function kg(t,e){var n=Iu;return t.current.memoizedState.isDehydrated&&(po(t,e).flags|=256),t=Kd(t,e),t!==2&&(e=vn,vn=n,e!==null&&Rg(e)),t}function Rg(t){vn===null?vn=t:vn.push.apply(vn,t)}function uN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!vi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~c_,e&=~jf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gi(e),i=1<<n;t[n]=-1,e&=~i}}function Dw(t){if(Ve&6)throw Error(ee(327));Wa();var e=kd(t,0);if(!(e&1))return Sn(t,yt()),null;var n=Kd(t,e);if(t.tag!==0&&n===2){var i=ng(t);i!==0&&(e=i,n=kg(t,i))}if(n===1)throw n=ic,po(t,0),Jr(t,e),Sn(t,yt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,vn,pr),Sn(t,yt()),null}function d_(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(il=yt()+500,Lf&&Ls())}}function So(t){ss!==null&&ss.tag===0&&!(Ve&6)&&Wa();var e=Ve;Ve|=1;var n=ei.transition,i=qe;try{if(ei.transition=null,qe=1,t)return t()}finally{qe=i,ei.transition=n,Ve=e,!(Ve&6)&&Ls()}}function f_(){Cn=Ma.current,Xe(Ma)}function po(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FR(n)),St!==null)for(n=St.return;n!==null;){var i=n;switch(Gy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Dd();break;case 3:tl(),Xe(Tn),Xe(rn),n_();break;case 5:t_(i);break;case 4:tl();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:Qy(i.type._context);break;case 22:case 23:f_()}n=n.return}if(Ot=t,St=t=ms(t.current,null),Wt=Cn=e,At=0,ic=null,c_=jf=Eo=0,vn=Iu=null,lo!==null){for(e=0;e<lo.length;e++)if(n=lo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}lo=null}return t}function fb(t,e){do{var n=St;try{if(Yy(),id.current=Wd,Hd){for(var i=rt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Hd=!1}if(To=0,Dt=It=rt=null,bu=!1,ec=0,u_.current=null,n===null||n.return===null){At=1,ic=e,St=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Wt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=Tw(a);if(T!==null){T.flags&=-257,Ew(T,a,u,o,e),T.mode&1&&xw(o,f,e),e=T,c=f;var I=e.updateQueue;if(I===null){var R=new Set;R.add(c),e.updateQueue=R}else I.add(c);break e}else{if(!(e&1)){xw(o,f,e),p_();break e}c=Error(ee(426))}}else if(et&&u.mode&1){var V=Tw(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Ew(V,a,u,o,e),Ky(nl(c,u));break e}}o=c=nl(c,u),At!==4&&(At=2),Iu===null?Iu=[o]:Iu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=YS(o,c,e);mw(o,b);break e;case 1:u=c;var S=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(fs===null||!fs.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=QS(o,u,e);mw(o,z);break e}}o=o.return}while(o!==null)}gb(n)}catch(H){e=H,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function pb(){var t=$d.current;return $d.current=Wd,t===null?Wd:t}function p_(){(At===0||At===3||At===2)&&(At=4),Ot===null||!(Eo&268435455)&&!(jf&268435455)||Jr(Ot,Wt)}function Kd(t,e){var n=Ve;Ve|=2;var i=pb();(Ot!==t||Wt!==e)&&(pr=null,po(t,e));do try{cN();break}catch(r){fb(t,r)}while(!0);if(Yy(),Ve=n,$d.current=i,St!==null)throw Error(ee(261));return Ot=null,Wt=0,At}function cN(){for(;St!==null;)mb(St)}function hN(){for(;St!==null&&!Ok();)mb(St)}function mb(t){var e=_b(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,e===null?gb(t):St=e,u_.current=null}function gb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rN(n,e),n!==null){n.flags&=32767,St=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,St=null;return}}else if(n=iN(n,e,Cn),n!==null){St=n;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);At===0&&(At=5)}function no(t,e,n){var i=qe,r=ei.transition;try{ei.transition=null,qe=1,dN(t,e,n,i)}finally{ei.transition=r,qe=i}return null}function dN(t,e,n,i){do Wa();while(ss!==null);if(Ve&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(qk(t,o),t===Ot&&(St=Ot=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dh||(Dh=!0,vb(Ad,function(){return Wa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ei.transition,ei.transition=null;var a=qe;qe=1;var u=Ve;Ve|=4,u_.current=null,oN(t,n),cb(n,t),NR(lg),Rd=!!ag,lg=ag=null,t.current=n,aN(n),Vk(),Ve=u,qe=a,ei.transition=o}else t.current=n;if(Dh&&(Dh=!1,ss=t,Gd=r),o=t.pendingLanes,o===0&&(fs=null),zk(n.stateNode),Sn(t,yt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(qd)throw qd=!1,t=Cg,Cg=null,t;return Gd&1&&t.tag!==0&&Wa(),o=t.pendingLanes,o&1?t===Ag?Cu++:(Cu=0,Ag=t):Cu=0,Ls(),null}function Wa(){if(ss!==null){var t=YE(Gd),e=ei.transition,n=qe;try{if(ei.transition=null,qe=16>t?16:t,ss===null)var i=!1;else{if(t=ss,ss=null,Gd=0,Ve&6)throw Error(ee(331));var r=Ve;for(Ve|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(oe=f;oe!==null;){var p=oe;switch(p.tag){case 0:case 11:case 15:Pu(8,p,o)}var y=p.child;if(y!==null)y.return=p,oe=y;else for(;oe!==null;){p=oe;var v=p.sibling,T=p.return;if(ab(p),p===f){oe=null;break}if(v!==null){v.return=T,oe=v;break}oe=T}}}var I=o.alternate;if(I!==null){var R=I.child;if(R!==null){I.child=null;do{var V=R.sibling;R.sibling=null,R=V}while(R!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pu(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,oe=b;break e}oe=o.return}}var S=t.current;for(oe=S;oe!==null;){a=oe;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,oe=C;else e:for(a=S;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Vf(9,u)}}catch(H){ct(u,u.return,H)}if(u===a){oe=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,oe=z;break e}oe=u.return}}if(Ve=r,Ls(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(Af,t)}catch{}i=!0}return i}finally{qe=n,ei.transition=e}}return!1}function Ow(t,e,n){e=nl(n,e),e=YS(t,e,1),t=ds(t,e,1),e=hn(),t!==null&&(Ec(t,1,e),Sn(t,e))}function ct(t,e,n){if(t.tag===3)Ow(t,t,n);else for(;e!==null;){if(e.tag===3){Ow(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fs===null||!fs.has(i))){t=nl(n,t),t=QS(e,t,1),e=ds(e,t,1),t=hn(),e!==null&&(Ec(e,1,t),Sn(e,t));break}}e=e.return}}function fN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(Wt&n)===n&&(At===4||At===3&&(Wt&130023424)===Wt&&500>yt()-h_?po(t,0):c_|=n),Sn(t,e)}function yb(t,e){e===0&&(t.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var n=hn();t=Pr(t,e),t!==null&&(Ec(t,e,n),Sn(t,n))}function pN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yb(t,n)}function mN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),yb(t,n)}var _b;_b=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,nN(t,e,n);xn=!!(t.flags&131072)}else xn=!1,et&&e.flags&1048576&&TS(e,jd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sd(t,e),t=e.pendingProps;var r=Xa(e,rn.current);Ha(e,n),r=r_(null,e,i,t,r,n);var o=s_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(i)?(o=!0,Od(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jy(e),r.updater=Of,e.stateNode=r,r._reactInternals=e,yg(e,i,t,n),e=wg(null,e,i,!0,o,n)):(e.tag=0,et&&o&&qy(e),cn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sd(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=yN(i),t=hi(i,t),r){case 0:e=vg(null,e,i,t,n);break e;case 1:e=Pw(null,e,i,t,n);break e;case 11:e=Sw(null,e,i,t,n);break e;case 14:e=bw(null,e,i,hi(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),vg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Pw(t,e,i,r,n);case 3:e:{if(tb(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,CS(t,e),Ud(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=nl(Error(ee(423)),e),e=Iw(t,e,i,n,r);break e}else if(i!==r){r=nl(Error(ee(424)),e),e=Iw(t,e,i,n,r);break e}else for(An=hs(e.stateNode.containerInfo.firstChild),Nn=e,et=!0,fi=null,n=PS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ja(),i===r){e=Ir(t,e,n);break e}cn(t,e,i,n)}e=e.child}return e;case 5:return AS(e),t===null&&pg(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,ug(i,r)?a=null:o!==null&&ug(i,o)&&(e.flags|=32),eb(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&pg(e),null;case 13:return nb(t,e,n);case 4:return e_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=el(e,null,i,n):cn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Sw(t,e,i,r,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ze(Fd,i._currentValue),i._currentValue=a,o!==null)if(vi(o.value,a)){if(o.children===r.children&&!Tn.current){e=Ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=xr(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),mg(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),mg(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}cn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ha(e,n),r=ti(r),i=i(r),e.flags|=1,cn(t,e,i,n),e.child;case 14:return i=e.type,r=hi(i,e.pendingProps),r=hi(i.type,r),bw(t,e,i,r,n);case 15:return XS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),sd(t,e),e.tag=1,En(i)?(t=!0,Od(e)):t=!1,Ha(e,n),ZS(e,i,r),yg(e,i,r,n),wg(null,e,i,!0,t,n);case 19:return ib(t,e,n);case 22:return JS(t,e,n)}throw Error(ee(156,e.tag))};function vb(t,e){return qE(t,e)}function gN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,i){return new gN(t,e,n,i)}function m_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yN(t){if(typeof t=="function")return m_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ly)return 11;if(t===Dy)return 14}return 2}function ms(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ld(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")m_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ea:return mo(n.children,r,o,e);case My:a=8,r|=8;break;case Um:return t=Xn(12,n,e,r|2),t.elementType=Um,t.lanes=o,t;case Bm:return t=Xn(13,n,e,r),t.elementType=Bm,t.lanes=o,t;case Hm:return t=Xn(19,n,e,r),t.elementType=Hm,t.lanes=o,t;case AE:return Ff(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IE:a=10;break e;case CE:a=9;break e;case Ly:a=11;break e;case Dy:a=14;break e;case Zr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Xn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function mo(t,e,n,i){return t=Xn(7,t,i,e),t.lanes=n,t}function Ff(t,e,n,i){return t=Xn(22,t,i,e),t.elementType=AE,t.lanes=n,t.stateNode={isHidden:!1},t}function sm(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function om(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _N(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zp(0),this.expirationTimes=zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function g_(t,e,n,i,r,o,a,u,c){return t=new _N(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jy(o),t}function vN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ta,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function wb(t){if(!t)return Ts;t=t._reactInternals;e:{if(Lo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(En(n))return wS(t,n,e)}return e}function xb(t,e,n,i,r,o,a,u,c){return t=g_(n,i,!0,t,r,o,a,u,c),t.context=wb(null),n=t.current,i=hn(),r=ps(n),o=xr(i,r),o.callback=e??null,ds(n,o,r),t.current.lanes=r,Ec(t,r,i),Sn(t,i),t}function zf(t,e,n,i){var r=e.current,o=hn(),a=ps(r);return n=wb(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ds(r,e,a),t!==null&&(yi(t,r,a,o),nd(t,r,a)),a}function Zd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function y_(t,e){Vw(t,e),(t=t.alternate)&&Vw(t,e)}function wN(){return null}var Tb=typeof reportError=="function"?reportError:function(t){console.error(t)};function __(t){this._internalRoot=t}Uf.prototype.render=__.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));zf(t,e,null,null)};Uf.prototype.unmount=__.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;So(function(){zf(null,t,null,null)}),e[br]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=JE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xr.length&&e!==0&&e<Xr[n].priority;n++);Xr.splice(n,0,t),n===0&&tS(t)}};function v_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jw(){}function xN(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Zd(a);o.call(f)}}var a=xb(e,i,t,0,null,!1,!1,"",jw);return t._reactRootContainer=a,t[br]=a.current,Zu(t.nodeType===8?t.parentNode:t),So(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Zd(c);u.call(f)}}var c=g_(t,0,!1,null,null,!1,!1,"",jw);return t._reactRootContainer=c,t[br]=c.current,Zu(t.nodeType===8?t.parentNode:t),So(function(){zf(e,c,n,i)}),c}function Hf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Zd(a);u.call(c)}}zf(e,a,t,r)}else a=xN(n,e,t,r,i);return Zd(a)}QE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hu(e.pendingLanes);n!==0&&(jy(e,n|1),Sn(e,yt()),!(Ve&6)&&(il=yt()+500,Ls()))}break;case 13:So(function(){var i=Pr(t,1);if(i!==null){var r=hn();yi(i,t,1,r)}}),y_(t,1)}};Fy=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=hn();yi(e,t,134217728,n)}y_(t,134217728)}};XE=function(t){if(t.tag===13){var e=ps(t),n=Pr(t,e);if(n!==null){var i=hn();yi(n,t,e,i)}y_(t,e)}};JE=function(){return qe};eS=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Jm=function(t,e,n){switch(e){case"input":if(qm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Mf(i);if(!r)throw Error(ee(90));RE(i),qm(i,r)}}}break;case"textarea":ME(t,n);break;case"select":e=n.value,e!=null&&Fa(t,!!n.multiple,e,!1)}};zE=d_;UE=So;var TN={usingClientEntryPoint:!1,Events:[bc,Ia,Mf,jE,FE,d_]},su={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EN={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WE(t),t===null?null:t.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||wN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Af=Oh.inject(EN),Vi=Oh}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TN;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v_(e))throw Error(ee(200));return vN(t,e,null,n)};On.createRoot=function(t,e){if(!v_(t))throw Error(ee(299));var n=!1,i="",r=Tb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=g_(t,1,!1,null,null,n,!1,i,r),t[br]=e.current,Zu(t.nodeType===8?t.parentNode:t),new __(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=WE(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return So(t)};On.hydrate=function(t,e,n){if(!Bf(e))throw Error(ee(200));return Hf(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!v_(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=Tb;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=xb(e,null,t,1,n??null,r,!1,o,a),t[br]=e.current,Zu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Uf(e)};On.render=function(t,e,n){if(!Bf(e))throw Error(ee(200));return Hf(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(ee(40));return t._reactRootContainer?(So(function(){Hf(null,null,t,!1,function(){t._reactRootContainer=null,t[br]=null})}),!0):!1};On.unstable_batchedUpdates=d_;On.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Bf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Hf(t,e,n,!1,i)};On.version="18.3.1-next-f1338f8080-20240426";function Eb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Eb)}catch(t){console.error(t)}}Eb(),EE.exports=On;var Sb=EE.exports,Fw=Sb;Fm.createRoot=Fw.createRoot,Fm.hydrateRoot=Fw.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(t,e)=>{const n=B.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:c,...f},p)=>B.createElement("svg",{ref:p,...SN,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${bN(t)}`,u].join(" "),...f},[...e.map(([y,v])=>B.createElement(y,v)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=pe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=pe("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=pe("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=pe("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=pe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=pe("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=pe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=pe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=pe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=pe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=pe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=pe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=pe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=pe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=pe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=pe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=pe("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=pe("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=pe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=pe("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=pe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=pe("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Be(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Cr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function tM(t,e){const n=Be(t);return isNaN(e)?Cr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const Rb=6048e5,nM=864e5,E_=6e4,S_=36e5,Vh=43200,$w=1440;let iM={};function Ic(){return iM}function sc(t,e){var u,c,f,p;const n=Ic(),i=(e==null?void 0:e.weekStartsOn)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,r=Be(t),o=r.getDay(),a=(o<i?7:0)+o-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Xd(t){return sc(t,{weekStartsOn:1})}function Nb(t){const e=Be(t),n=e.getFullYear(),i=Cr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=Xd(i),o=Cr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Xd(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function qw(t){const e=Be(t);return e.setHours(0,0,0,0),e}function Jd(t){const e=Be(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Mb(t,e){const n=qw(t),i=qw(e),r=+n-Jd(n),o=+i-Jd(i);return Math.round((r-o)/nM)}function rM(t){const e=Nb(t),n=Cr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Xd(n)}function cd(t,e){const n=Be(t),i=Be(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function sM(t){return Cr(t,Date.now())}function oM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function aM(t){if(!oM(t)&&typeof t!="number")return!1;const e=Be(t);return!isNaN(Number(e))}function lM(t,e){const n=Be(t),i=Be(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function uM(t,e){const n=Be(t),i=Be(e),r=Gw(n,i),o=Math.abs(Mb(n,i));n.setDate(n.getDate()-r*o);const a=+(Gw(n,i)===-r),u=r*(o-a);return u===0?0:u}function Gw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function b_(t){return e=>{const n=Math.trunc,i=n(e);return i===0?0:i}}function P_(t,e){return+Be(t)-+Be(e)}function cM(t,e,n){const i=P_(t,e)/S_;return b_()(i)}function hM(t,e,n){const i=P_(t,e)/E_;return b_()(i)}function dM(t){const e=Be(t);return e.setHours(23,59,59,999),e}function fM(t){const e=Be(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function pM(t){const e=Be(t);return+dM(e)==+fM(e)}function mM(t,e){const n=Be(t),i=Be(e),r=cd(n,i),o=Math.abs(lM(n,i));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);let u=cd(n,i)===-r;pM(Be(t))&&o===1&&cd(t,i)===1&&(u=!1),a=r*(o-Number(u))}return a===0?0:a}function gM(t,e,n){const i=P_(t,e)/1e3;return b_()(i)}function yM(t){const e=Be(t),n=Cr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const _M={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vM=(t,e,n)=>{let i;const r=_M[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function $a(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const wM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},EM={date:$a({formats:wM,defaultWidth:"full"}),time:$a({formats:xM,defaultWidth:"full"}),dateTime:$a({formats:TM,defaultWidth:"full"})},SM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bM=(t,e,n,i)=>SM[t];function Li(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):a;r=t.formattingValues[u]||t.formattingValues[a]}else{const a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[u]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return r[o]}}const PM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NM=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},MM={ordinalNumber:NM,era:Li({values:PM,defaultWidth:"wide"}),quarter:Li({values:IM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Li({values:CM,defaultWidth:"wide"}),day:Li({values:AM,defaultWidth:"wide"}),dayPeriod:Li({values:kM,defaultWidth:"wide",formattingValues:RM,defaultFormattingWidth:"wide"})};function Di(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;const a=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(u)?DM(u,y=>y.test(a)):LM(u,y=>y.test(a));let f;f=t.valueCallback?t.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=e.slice(a.length);return{value:f,rest:p}}}function LM(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function DM(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Lb(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const OM=/^(\d+)(th|st|nd|rd)?/i,VM=/\d+/i,jM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FM={any:[/^b/i,/^(a|c)/i]},zM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},UM={any:[/1/i,/2/i,/3/i,/4/i]},BM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$M={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KM={ordinalNumber:Lb({matchPattern:OM,parsePattern:VM,valueCallback:t=>parseInt(t,10)}),era:Di({matchPatterns:jM,defaultMatchWidth:"wide",parsePatterns:FM,defaultParseWidth:"any"}),quarter:Di({matchPatterns:zM,defaultMatchWidth:"wide",parsePatterns:UM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Di({matchPatterns:BM,defaultMatchWidth:"wide",parsePatterns:HM,defaultParseWidth:"any"}),day:Di({matchPatterns:WM,defaultMatchWidth:"wide",parsePatterns:$M,defaultParseWidth:"any"}),dayPeriod:Di({matchPatterns:qM,defaultMatchWidth:"any",parsePatterns:GM,defaultParseWidth:"any"})},Db={code:"en-US",formatDistance:vM,formatLong:EM,formatRelative:bM,localize:MM,match:KM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZM(t){const e=Be(t);return Mb(e,yM(e))+1}function YM(t){const e=Be(t),n=+Xd(e)-+rM(e);return Math.round(n/Rb)+1}function Ob(t,e){var p,y,v,T;const n=Be(t),i=n.getFullYear(),r=Ic(),o=(e==null?void 0:e.firstWeekContainsDate)??((y=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((T=(v=r.locale)==null?void 0:v.options)==null?void 0:T.firstWeekContainsDate)??1,a=Cr(t,0);a.setFullYear(i+1,0,o),a.setHours(0,0,0,0);const u=sc(a,e),c=Cr(t,0);c.setFullYear(i,0,o),c.setHours(0,0,0,0);const f=sc(c,e);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function QM(t,e){var u,c,f,p;const n=Ic(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,r=Ob(t,e),o=Cr(t,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),sc(o,e)}function XM(t,e){const n=Be(t),i=+sc(n,e)-+QM(n,e);return Math.round(i/Rb)+1}function $e(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const qr={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return $e(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$e(n+1,2)},d(t,e){return $e(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $e(t.getHours()%12||12,e.length)},H(t,e){return $e(t.getHours(),e.length)},m(t,e){return $e(t.getMinutes(),e.length)},s(t,e){return $e(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return $e(r,e.length)}},ga={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kw={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return qr.y(t,e)},Y:function(t,e,n,i){const r=Ob(t,i),o=r>0?r:1-r;if(e==="YY"){const a=o%100;return $e(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):$e(o,e.length)},R:function(t,e){const n=Nb(t);return $e(n,e.length)},u:function(t,e){const n=t.getFullYear();return $e(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return $e(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return $e(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return qr.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return $e(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=XM(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):$e(r,e.length)},I:function(t,e,n){const i=YM(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):$e(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):qr.d(t,e)},D:function(t,e,n){const i=ZM(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):$e(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return $e(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return $e(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return $e(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=ga.noon:i===0?r=ga.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=ga.evening:i>=12?r=ga.afternoon:i>=4?r=ga.morning:r=ga.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return qr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):qr.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):$e(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):$e(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):qr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):qr.s(t,e)},S:function(t,e){return qr.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Yw(i);case"XXXX":case"XX":return io(i);case"XXXXX":case"XXX":default:return io(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return Yw(i);case"xxxx":case"xx":return io(i);case"xxxxx":case"xxx":default:return io(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zw(i,":");case"OOOO":default:return"GMT"+io(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zw(i,":");case"zzzz":default:return"GMT"+io(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return $e(i,e.length)},T:function(t,e,n){const i=t.getTime();return $e(i,e.length)}};function Zw(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return o===0?n+String(r):n+String(r)+e+$e(o,2)}function Yw(t,e){return t%60===0?(t>0?"-":"+")+$e(Math.abs(t)/60,2):io(t,e)}function io(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=$e(Math.trunc(i/60),2),o=$e(i%60,2);return n+r+e+o}const Qw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Vb=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JM=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return Qw(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Qw(i,e)).replace("{{time}}",Vb(r,e))},eL={p:Vb,P:JM},tL=/^D+$/,nL=/^Y+$/,iL=["D","DD","YY","YYYY"];function rL(t){return tL.test(t)}function sL(t){return nL.test(t)}function oL(t,e,n){const i=aL(t,e,n);if(console.warn(i),iL.includes(t))throw new RangeError(i)}function aL(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cL=/^'([^]*?)'?$/,hL=/''/g,dL=/[a-zA-Z]/;function fL(t,e,n){var p,y,v,T;const i=Ic(),r=i.locale??Db,o=i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,a=i.weekStartsOn??((T=(v=i.locale)==null?void 0:v.options)==null?void 0:T.weekStartsOn)??0,u=Be(t);if(!aM(u))throw new RangeError("Invalid time value");let c=e.match(uL).map(I=>{const R=I[0];if(R==="p"||R==="P"){const V=eL[R];return V(I,r.formatLong)}return I}).join("").match(lL).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const R=I[0];if(R==="'")return{isToken:!1,value:pL(I)};if(Kw[R])return{isToken:!0,value:I};if(R.match(dL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:I}});r.localize.preprocessor&&(c=r.localize.preprocessor(u,c));const f={firstWeekContainsDate:o,weekStartsOn:a,locale:r};return c.map(I=>{if(!I.isToken)return I.value;const R=I.value;(sL(R)||rL(R))&&oL(R,e,String(t));const V=Kw[R[0]];return V(u,R,r.localize,f)}).join("")}function pL(t){const e=t.match(cL);return e?e[1].replace(hL,"'"):t}function mL(t,e,n){const i=Ic(),r=(n==null?void 0:n.locale)??i.locale??Db,o=2520,a=cd(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,f;a>0?(c=Be(e),f=Be(t)):(c=Be(t),f=Be(e));const p=gM(f,c),y=(Jd(f)-Jd(c))/1e3,v=Math.round((p-y)/60);let T;if(v<2)return n!=null&&n.includeSeconds?p<5?r.formatDistance("lessThanXSeconds",5,u):p<10?r.formatDistance("lessThanXSeconds",10,u):p<20?r.formatDistance("lessThanXSeconds",20,u):p<40?r.formatDistance("halfAMinute",0,u):p<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):v===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",v,u);if(v<45)return r.formatDistance("xMinutes",v,u);if(v<90)return r.formatDistance("aboutXHours",1,u);if(v<$w){const I=Math.round(v/60);return r.formatDistance("aboutXHours",I,u)}else{if(v<o)return r.formatDistance("xDays",1,u);if(v<Vh){const I=Math.round(v/$w);return r.formatDistance("xDays",I,u)}else if(v<Vh*2)return T=Math.round(v/Vh),r.formatDistance("aboutXMonths",T,u)}if(T=mM(f,c),T<12){const I=Math.round(v/Vh);return r.formatDistance("xMonths",I,u)}else{const I=T%12,R=Math.trunc(T/12);return I<3?r.formatDistance("aboutXYears",R,u):I<9?r.formatDistance("overXYears",R,u):r.formatDistance("almostXYears",R+1,u)}}function gL(t,e){return mL(t,sM(t),e)}function yL(t,e){const i=xL(t);let r;if(i.date){const c=TL(i.date,2);r=EL(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let a=0,u;if(i.time&&(a=SL(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(u=bL(i.timezone),isNaN(u))return new Date(NaN)}else{const c=new Date(o+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(o+a+u)}const jh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_L=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,vL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function xL(t){const e={},n=t.split(jh.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],jh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(jh.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=jh.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function TL(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function EL(t,e){if(e===null)return new Date(NaN);const n=t.match(_L);if(!n)return new Date(NaN);const i=!!n[4],r=ou(n[1]),o=ou(n[2])-1,a=ou(n[3]),u=ou(n[4]),c=ou(n[5])-1;if(i)return kL(e,u,c)?PL(e,u,c):new Date(NaN);{const f=new Date(0);return!CL(e,o,a)||!AL(e,r)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(r,a)),f)}}function ou(t){return t?parseInt(t):1}function SL(t){const e=t.match(vL);if(!e)return NaN;const n=am(e[1]),i=am(e[2]),r=am(e[3]);return RL(n,i,r)?n*S_+i*E_+r*1e3:NaN}function am(t){return t&&parseFloat(t.replace(",","."))||0}function bL(t){if(t==="Z")return 0;const e=t.match(wL);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return NL(i,r)?n*(i*S_+r*E_):NaN}function PL(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,o=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}const IL=[31,null,31,30,31,30,31,31,30,31,30,31];function jb(t){return t%400===0||t%4===0&&t%100!==0}function CL(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(IL[e]||(jb(t)?29:28))}function AL(t,e){return e>=1&&e<=(jb(t)?366:365)}function kL(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function RL(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function NL(t,e){return e>=0&&e<=59}function ML({isEditing:t,onToggleEdit:e,onExport:n,onShare:i,onOpenWallet:r,onOpenSettings:o,onOpenIdeaPool:a,user:u,isAdmin:c,onLogin:f,onLogout:p,onUndo:y,canUndo:v}){var b;const[T,I]=B.useState({days:0,hours:0,minutes:0}),[R]=B.useState(new Date("2026-05-21T00:00:00")),[V]=B.useState(new Date("2026-05-31T00:00:00"));return B.useEffect(()=>{const S=()=>{const z=new Date;I({days:uM(R,z),hours:cM(R,z)%24,minutes:hM(R,z)%60})};S();const C=setInterval(S,6e4);return()=>clearInterval(C)},[R]),g.jsx("header",{className:"relative pt-8 pb-12 px-4",children:g.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[g.jsxs("div",{className:"bg-white p-6 md:p-8 shadow-lg transform rotate-1 border-2 border-gray-200 relative mx-4 md:mx-0",style:{backgroundImage:"radial-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[g.jsx("div",{className:"washi-tape"}),g.jsx("div",{className:"absolute left-0 right-0 top-1/2 border-b-2 border-dashed border-gray-300 -z-10 hidden md:block"}),g.jsx("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),g.jsx("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 md:gap-12",children:[g.jsxs("div",{className:"flex-1 text-center md:text-left",children:[g.jsx("div",{className:"inline-block border-2 border-gray-800 px-3 py-1 mb-3 transform -rotate-2",children:g.jsx("span",{className:"font-heading font-bold tracking-widest uppercase text-xs",children:"Boarding Pass"})}),g.jsxs("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-2 text-gray-800 leading-tight",children:["ACSM ",g.jsx("span",{className:"text-gray-400 italic font-serif",children:"2026"})]}),g.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-sm font-bold tracking-wider text-gray-600 font-mono",children:[g.jsx("span",{children:"SF"}),g.jsx(Yd,{size:16,className:"text-gray-400"}),g.jsx("span",{children:"SLC"}),g.jsx(Yd,{size:16,className:"text-gray-400 transform rotate-180"}),g.jsx("span",{children:"SF"})]})]}),g.jsxs("div",{className:"flex flex-col items-center md:items-end gap-4",children:[g.jsxs("div",{className:"text-center md:text-right",children:[g.jsx("div",{className:"font-hand text-2xl text-gray-500 transform -rotate-3 mb-1",children:"Save the date!"}),g.jsxs("div",{className:"font-heading text-xl font-bold border-b-2 border-gray-800 inline-block pb-1",children:[R.toLocaleDateString("en-US",{month:"short",day:"numeric"}),g.jsx("span",{className:"mx-2 text-gray-400",children:""}),V.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),g.jsxs("div",{className:"flex gap-3 mt-2",children:[u?g.jsxs("div",{className:"relative group cursor-pointer",title:u.displayName||u.email||"",children:[g.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 overflow-hidden shadow-sm transition-all",children:u.photoURL?g.jsx("img",{src:u.photoURL,alt:"User",className:"w-full h-full object-cover grayscale-0"}):g.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-gray-500 font-bold",children:((b=u.displayName)==null?void 0:b[0])||"U"})}),g.jsx("button",{onClick:p,className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:g.jsx(VN,{size:10})})]}):g.jsx("button",{onClick:f,className:"sticker px-4 py-2 font-hand text-lg font-bold hover:scale-105 transition-transform",children:"Sign In"}),g.jsxs("div",{className:"flex gap-2",children:[c&&g.jsx("button",{onClick:y,disabled:!v,className:`w-10 h-10 border-2 rounded-full flex items-center justify-center transition-colors ${v?"border-gray-300 text-gray-500 hover:border-indigo-500 hover:text-indigo-600":"border-gray-200 text-gray-300 cursor-not-allowed"}`,title:" (Undo)",children:g.jsx($N,{size:18})}),g.jsx("button",{onClick:i,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-indigo-600 hover:text-indigo-600 transition-colors",title:" (Copy to Clipboard)",children:g.jsx(ZN,{size:18})}),g.jsx("button",{onClick:n,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:" JSON (Export)",children:g.jsx(DN,{size:18})}),g.jsx("button",{onClick:r,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Wallet",children:g.jsx(Ng,{size:18})}),g.jsx("button",{onClick:a,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-amber-400 hover:text-amber-500 transition-colors",title:"Idea Pool",children:g.jsx(Mg,{size:18})}),c&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:e,className:`w-10 h-10 border-2 rounded-full flex items-center justify-center transition-colors ${t?"border-red-400 text-red-500 bg-red-50":"border-gray-300 text-gray-500 hover:border-gray-800 hover:text-gray-800"}`,title:"Toggle Edit Mode",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full opacity-0 transition-opacity",style:{opacity:t?1:0}}),g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),g.jsx("path",{d:"m15 5 4 4"})]})]})}),g.jsx("button",{onClick:o,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Admin Settings",children:g.jsx(x_,{size:18})})]})]})]})]})]})]}),g.jsxs("div",{className:"absolute -bottom-16 -right-6 paper-note p-3 w-28 text-center transform rotate-12 z-20 hidden md:block shadow-md",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400 mx-auto mb-1 shadow-sm"}),g.jsx("div",{className:"font-hand text-lg leading-none mb-0.5 text-gray-600",children:"Countdown"}),g.jsxs("div",{className:"font-heading text-2xl font-bold text-gray-800",children:[T.days,g.jsx("span",{className:"text-xs font-sans font-normal text-gray-500 ml-1",children:"days"})]})]})]})})}const I_=B.createContext({});function C_(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wf=B.createContext(null),A_=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class LL extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DL({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(A_);return B.useInsertionEffect(()=>{const{width:a,height:u,top:c,left:f}=r.current;if(e||!i.current||!a||!u)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${c}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),g.jsx(LL,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const OL=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=C_(VL),c=B.useId(),f=B.useCallback(y=>{u.set(y,!0);for(const v of u.values())if(!v)return;i&&i()},[u,i]),p=B.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:f,register:y=>(u.set(y,!1),()=>u.delete(y))}),o?[Math.random(),f]:[n,f]);return B.useMemo(()=>{u.forEach((y,v)=>u.set(v,!1))},[n]),B.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=g.jsx(DL,{isPresent:n,children:t})),g.jsx(Wf.Provider,{value:p,children:t})};function VL(){return new Map}function Fb(t=!0){const e=B.useContext(Wf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const a=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Fh=t=>t.key||"";function Xw(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const k_=typeof window<"u",zb=k_?B.useLayoutEffect:B.useEffect,Oo=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1})=>{const[u,c]=Fb(a),f=B.useMemo(()=>Xw(t),[t]),p=a&&!u?[]:f.map(Fh),y=B.useRef(!0),v=B.useRef(f),T=C_(()=>new Map),[I,R]=B.useState(f),[V,b]=B.useState(f);zb(()=>{y.current=!1,v.current=f;for(let z=0;z<V.length;z++){const H=Fh(V[z]);p.includes(H)?T.delete(H):T.get(H)!==!0&&T.set(H,!1)}},[V,p.length,p.join("-")]);const S=[];if(f!==I){let z=[...f];for(let H=0;H<V.length;H++){const U=V[H],k=Fh(U);p.includes(k)||(z.splice(H,0,U),S.push(U))}o==="wait"&&S.length&&(z=S),b(Xw(z)),R(f);return}const{forceRender:C}=B.useContext(I_);return g.jsx(g.Fragment,{children:V.map(z=>{const H=Fh(z),U=a&&!u?!1:f===V||p.includes(H),k=()=>{if(T.has(H))T.set(H,!0);else return;let E=!0;T.forEach(M=>{M||(E=!1)}),E&&(C==null||C(),b(v.current),a&&(c==null||c()),i&&i())};return g.jsx(OL,{isPresent:U,initial:!y.current||n?void 0:!1,custom:U?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:U?void 0:k,children:z},H)})})},Mn=t=>t;let Ub=Mn;function R_(t){let e;return()=>(e===void 0&&(e=t()),e)}const sl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Tr=t=>t*1e3,Er=t=>t/1e3,jL={useManualTiming:!1};function FL(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(c.schedule(f),t()),f(a)}const c={schedule:(f,p=!1,y=!1)=>{const T=y&&i?e:n;return p&&o.add(f),T.has(f)||T.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,c.process(f))}};return c}const zh=["read","resolveKeyframes","update","preRender","render","postRender"],zL=40;function Bb(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=zh.reduce((b,S)=>(b[S]=FL(o),b),{}),{read:u,resolveKeyframes:c,update:f,preRender:p,render:y,postRender:v}=a,T=()=>{const b=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(b-r.timestamp,zL),1),r.timestamp=b,r.isProcessing=!0,u.process(r),c.process(r),f.process(r),p.process(r),y.process(r),v.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(T))},I=()=>{n=!0,i=!0,r.isProcessing||t(T)};return{schedule:zh.reduce((b,S)=>{const C=a[S];return b[S]=(z,H=!1,U=!1)=>(n||I(),C.schedule(z,H,U)),b},{}),cancel:b=>{for(let S=0;S<zh.length;S++)a[zh[S]].cancel(b)},state:r,steps:a}}const{schedule:Je,cancel:Es,state:Ut,steps:lm}=Bb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mn,!0),Hb=B.createContext({strict:!1}),Jw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ol={};for(const t in Jw)ol[t]={isEnabled:e=>Jw[t].some(n=>!!e[n])};function UL(t){for(const e in t)ol[e]={...ol[e],...t[e]}}const BL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ef(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BL.has(t)}let Wb=t=>!ef(t);function HL(t){t&&(Wb=e=>e.startsWith("on")?!ef(e):t(e))}try{HL(require("@emotion/is-prop-valid").default)}catch{}function WL(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(Wb(r)||n===!0&&ef(r)||!e&&!ef(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function $L(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const $f=B.createContext({});function oc(t){return typeof t=="string"||Array.isArray(t)}function qf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const N_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M_=["initial",...N_];function Gf(t){return qf(t.animate)||M_.some(e=>oc(t[e]))}function $b(t){return!!(Gf(t)||t.variants)}function qL(t,e){if(Gf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||oc(n)?n:void 0,animate:oc(i)?i:void 0}}return t.inherit!==!1?e:{}}function GL(t){const{initial:e,animate:n}=qL(t,B.useContext($f));return B.useMemo(()=>({initial:e,animate:n}),[ex(e),ex(n)])}function ex(t){return Array.isArray(t)?t.join(" "):t}const KL=Symbol.for("motionComponentSymbol");function La(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ZL(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):La(n)&&(n.current=i))},[e])}const L_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YL="framerAppearId",qb="data-"+L_(YL),{schedule:D_}=Bb(queueMicrotask,!1),Gb=B.createContext({});function QL(t,e,n,i,r){var o,a;const{visualElement:u}=B.useContext($f),c=B.useContext(Hb),f=B.useContext(Wf),p=B.useContext(A_).reducedMotion,y=B.useRef(null);i=i||c.renderer,!y.current&&i&&(y.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const v=y.current,T=B.useContext(Gb);v&&!v.projection&&r&&(v.type==="html"||v.type==="svg")&&XL(y.current,n,r,T);const I=B.useRef(!1);B.useInsertionEffect(()=>{v&&I.current&&v.update(n,f)});const R=n[qb],V=B.useRef(!!R&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,R))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,R)));return zb(()=>{v&&(I.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),D_.render(v.render),V.current&&v.animationState&&v.animationState.animateChanges())}),B.useEffect(()=>{v&&(!V.current&&v.animationState&&v.animationState.animateChanges(),V.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,R)}),V.current=!1))}),v}function XL(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Kb(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&La(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:f})}function Kb(t){if(t)return t.options.allowProjection!==!1?t.projection:Kb(t.parent)}function JL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&UL(t);function u(f,p){let y;const v={...B.useContext(A_),...f,layoutId:eD(f)},{isStatic:T}=v,I=GL(f),R=i(f,T);if(!T&&k_){tD();const V=nD(v);y=V.MeasureLayout,I.visualElement=QL(r,R,v,e,V.ProjectionNode)}return g.jsxs($f.Provider,{value:I,children:[y&&I.visualElement?g.jsx(y,{visualElement:I.visualElement,...v}):null,n(r,f,ZL(R,I.visualElement,p),R,T,I.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const c=B.forwardRef(u);return c[KL]=r,c}function eD({layoutId:t}){const e=B.useContext(I_).id;return e&&t!==void 0?e+"-"+t:t}function tD(t,e){B.useContext(Hb).strict}function nD(t){const{drag:e,layout:n}=ol;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const iD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O_(t){return typeof t!="string"||t.includes("-")?!1:!!(iD.indexOf(t)>-1||/[A-Z]/u.test(t))}function tx(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function V_(t,e,n,i){if(typeof e=="function"){const[r,o]=tx(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=tx(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const Dg=t=>Array.isArray(t),rD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),sD=t=>Dg(t)?t[t.length-1]||0:t,nn=t=>!!(t&&t.getVelocity);function hd(t){const e=nn(t)?t.get():t;return rD(e)?e.toValue():e}function oD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:aD(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const Zb=t=>(e,n)=>{const i=B.useContext($f),r=B.useContext(Wf),o=()=>oD(t,e,i,r);return n?o():C_(o)};function aD(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=hd(o[v]);let{initial:a,animate:u}=t;const c=Gf(t),f=$b(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const y=p?u:a;if(y&&typeof y!="boolean"&&!qf(y)){const v=Array.isArray(y)?y:[y];for(let T=0;T<v.length;T++){const I=V_(t,v[T]);if(I){const{transitionEnd:R,transition:V,...b}=I;for(const S in b){let C=b[S];if(Array.isArray(C)){const z=p?C.length-1:0;C=C[z]}C!==null&&(r[S]=C)}for(const S in R)r[S]=R[S]}}}return r}const vl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(vl),Yb=t=>e=>typeof e=="string"&&e.startsWith(t),Qb=Yb("--"),lD=Yb("var(--"),j_=t=>lD(t)?uD.test(t.split("/*")[0].trim()):!1,uD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xb=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ar=(t,e,n)=>n>e?e:n<t?t:n,wl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ac={...wl,transform:t=>Ar(0,1,t)},Uh={...wl,default:1},Cc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kr=Cc("deg"),Fi=Cc("%"),_e=Cc("px"),cD=Cc("vh"),hD=Cc("vw"),nx={...Fi,parse:t=>Fi.parse(t)/100,transform:t=>Fi.transform(t*100)},dD={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,backgroundPositionX:_e,backgroundPositionY:_e},fD={rotate:Kr,rotateX:Kr,rotateY:Kr,rotateZ:Kr,scale:Uh,scaleX:Uh,scaleY:Uh,scaleZ:Uh,skew:Kr,skewX:Kr,skewY:Kr,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:ac,originX:nx,originY:nx,originZ:_e},ix={...wl,transform:Math.round},F_={...dD,...fD,zIndex:ix,size:_e,fillOpacity:ac,strokeOpacity:ac,numOctaves:ix},pD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mD=vl.length;function gD(t,e,n){let i="",r=!0;for(let o=0;o<mD;o++){const a=vl[o],u=t[a];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(a.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const f=Xb(u,F_[a]);if(!c){r=!1;const p=pD[a]||a;i+=`${p}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function z_(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const c in e){const f=e[c];if(Vo.has(c)){a=!0;continue}else if(Qb(c)){r[c]=f;continue}else{const p=Xb(f,F_[c]);c.startsWith("origin")?(u=!0,o[c]=p):i[c]=p}}if(e.transform||(a||n?i.transform=gD(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${c} ${f} ${p}`}}const yD={offset:"stroke-dashoffset",array:"stroke-dasharray"},_D={offset:"strokeDashoffset",array:"strokeDasharray"};function vD(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?yD:_D;t[o.offset]=_e.transform(-i);const a=_e.transform(e),u=_e.transform(n);t[o.array]=`${a} ${u}`}function rx(t,e,n){return typeof t=="string"?t:_e.transform(e+n*t)}function wD(t,e,n){const i=rx(e,t.x,t.width),r=rx(n,t.y,t.height);return`${i} ${r}`}function U_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},p,y){if(z_(t,f,y),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:T,dimensions:I}=t;v.transform&&(I&&(T.transform=v.transform),delete v.transform),I&&(r!==void 0||o!==void 0||T.transform)&&(T.transformOrigin=wD(I,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),i!==void 0&&(v.scale=i),a!==void 0&&vD(v,a,u,c,!1)}const B_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Jb=()=>({...B_(),attrs:{}}),H_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const tP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nP(t,e,n,i){eP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(tP.has(r)?r:L_(r),e.attrs[r])}const tf={};function xD(t){Object.assign(tf,t)}function iP(t,{layout:e,layoutId:n}){return Vo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!tf[t]||t==="opacity")}function W_(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(nn(r[a])||e.style&&nn(e.style[a])||iP(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function rP(t,e,n){const i=W_(t,e,n);for(const r in t)if(nn(t[r])||nn(e[r])){const o=vl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function TD(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const sx=["x","y","width","height","cx","cy","r"],ED={useVisualState:Zb({scrapeMotionValuesFromProps:rP,createRenderState:Jb,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(Vo.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<sx.length;u++){const c=sx[u];t[c]!==e[c]&&(a=!0)}a&&Je.read(()=>{TD(n,i),Je.render(()=>{U_(i,r,H_(n.tagName),t.transformTemplate),nP(n,i)})})}})},SD={useVisualState:Zb({scrapeMotionValuesFromProps:W_,createRenderState:B_})};function sP(t,e,n){for(const i in e)!nn(e[i])&&!iP(i,n)&&(t[i]=e[i])}function bD({transformTemplate:t},e){return B.useMemo(()=>{const n=B_();return z_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function PD(t,e){const n=t.style||{},i={};return sP(i,n,t),Object.assign(i,bD(t,e)),i}function ID(t,e){const n={},i=PD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function CD(t,e,n,i){const r=B.useMemo(()=>{const o=Jb();return U_(o,e,H_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};sP(o,t.style,t),r.style={...o,...r.style}}return r}function AD(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(O_(n)?CD:ID)(i,o,a,n),f=WL(i,typeof n=="string",t),p=n!==B.Fragment?{...f,...c,ref:r}:{},{children:y}=i,v=B.useMemo(()=>nn(y)?y.get():y,[y]);return B.createElement(n,{...p,children:v})}}function kD(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...O_(i)?ED:SD,preloadedFeatures:t,useRender:AD(r),createVisualElement:e,Component:i};return JL(a)}}function oP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Kf(t,e,n){const i=t.getProps();return V_(i,e,n!==void 0?n:i.custom,t)}const RD=R_(()=>window.ScrollTimeline!==void 0);class ND{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(RD()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class MD extends ND{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function $_(t,e){return t?t[e]||t.default||t:void 0}const Og=2e4;function aP(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Og;)e+=n,i=t.next(e);return e>=Og?1/0:e}function q_(t){return typeof t=="function"}function ox(t,e){t.timeline=e,t.onfinish=null}const G_=t=>Array.isArray(t)&&typeof t[0]=="number",LD={linearEasing:void 0};function DD(t,e){const n=R_(t);return()=>{var i;return(i=LD[e])!==null&&i!==void 0?i:n()}}const nf=DD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lP=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(sl(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function uP(t){return!!(typeof t=="function"&&nf()||!t||typeof t=="string"&&(t in Vg||nf())||G_(t)||Array.isArray(t)&&t.every(uP))}const fu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Vg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fu([0,.65,.55,1]),circOut:fu([.55,0,1,.45]),backIn:fu([.31,.01,.66,-.59]),backOut:fu([.33,1.53,.69,.99])};function cP(t,e){if(t)return typeof t=="function"&&nf()?lP(t,e):G_(t)?fu(t):Array.isArray(t)?t.map(n=>cP(n,e)||Vg.easeOut):Vg[t]}const ci={x:!1,y:!1};function hP(){return ci.x||ci.y}function OD(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function dP(t,e){const n=OD(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function ax(t){return e=>{e.pointerType==="touch"||hP()||t(e)}}function VD(t,e,n={}){const[i,r,o]=dP(t,n),a=ax(u=>{const{target:c}=u,f=e(u);if(typeof f!="function"||!c)return;const p=ax(y=>{f(y),c.removeEventListener("pointerleave",p)});c.addEventListener("pointerleave",p,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const fP=(t,e)=>e?t===e?!0:fP(t,e.parentElement):!1,K_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function FD(t){return jD.has(t.tagName)||t.tabIndex!==-1}const pu=new WeakSet;function lx(t){return e=>{e.key==="Enter"&&t(e)}}function um(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zD=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=lx(()=>{if(pu.has(n))return;um(n,"down");const r=lx(()=>{um(n,"up")}),o=()=>um(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function ux(t){return K_(t)&&!hP()}function UD(t,e,n={}){const[i,r,o]=dP(t,n),a=u=>{const c=u.currentTarget;if(!ux(u)||pu.has(c))return;pu.add(c);const f=e(u),p=(T,I)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),!(!ux(T)||!pu.has(c))&&(pu.delete(c),typeof f=="function"&&f(T,{success:I}))},y=T=>{p(T,n.useGlobalTarget||fP(c,T.target))},v=T=>{p(T,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",v,r)};return i.forEach(u=>{!FD(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>zD(f,r),r)}),o}function BD(t){return t==="x"||t==="y"?ci[t]?null:(ci[t]=!0,()=>{ci[t]=!1}):ci.x||ci.y?null:(ci.x=ci.y=!0,()=>{ci.x=ci.y=!1})}const pP=new Set(["width","height","top","left","right","bottom",...vl]);let dd;function HD(){dd=void 0}const zi={now:()=>(dd===void 0&&zi.set(Ut.isProcessing||jL.useManualTiming?Ut.timestamp:performance.now()),dd),set:t=>{dd=t,queueMicrotask(HD)}};function Z_(t,e){t.indexOf(e)===-1&&t.push(e)}function Y_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Q_{constructor(){this.subscriptions=[]}add(e){return Z_(this.subscriptions,e),()=>Y_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function mP(t,e){return e?t*(1e3/e):0}const cx=30,WD=t=>!isNaN(parseFloat(t));class $D{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=zi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Q_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cx);return mP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lc(t,e){return new $D(t,e)}function qD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,lc(n))}function GD(t,e){const n=Kf(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=sD(o[a]);qD(t,a,u)}}function KD(t){return!!(nn(t)&&t.add)}function jg(t,e){const n=t.getValue("willChange");if(KD(n))return n.add(e)}function gP(t){return t.props[qb]}const yP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ZD=1e-7,YD=12;function QD(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=yP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>ZD&&++u<YD);return a}function Ac(t,e,n,i){if(t===e&&n===i)return Mn;const r=o=>QD(o,0,1,t,n);return o=>o===0||o===1?o:yP(r(o),e,i)}const _P=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vP=t=>e=>1-t(1-e),wP=Ac(.33,1.53,.69,.99),X_=vP(wP),xP=_P(X_),TP=t=>(t*=2)<1?.5*X_(t):.5*(2-Math.pow(2,-10*(t-1))),J_=t=>1-Math.sin(Math.acos(t)),EP=vP(J_),SP=_P(J_),bP=t=>/^0[^.\s]+$/u.test(t);function XD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||bP(t):!0}const Au=t=>Math.round(t*1e5)/1e5,ev=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JD(t){return t==null}const eO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tv=(t,e)=>n=>!!(typeof n=="string"&&eO.test(n)&&n.startsWith(t)||e&&!JD(n)&&Object.prototype.hasOwnProperty.call(n,e)),PP=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(ev);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},tO=t=>Ar(0,255,t),cm={...wl,transform:t=>Math.round(tO(t))},co={test:tv("rgb","red"),parse:PP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+cm.transform(t)+", "+cm.transform(e)+", "+cm.transform(n)+", "+Au(ac.transform(i))+")"};function nO(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Fg={test:tv("#"),parse:nO,transform:co.transform},Da={test:tv("hsl","hue"),parse:PP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Fi.transform(Au(e))+", "+Fi.transform(Au(n))+", "+Au(ac.transform(i))+")"},Qt={test:t=>co.test(t)||Fg.test(t)||Da.test(t),parse:t=>co.test(t)?co.parse(t):Da.test(t)?Da.parse(t):Fg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?co.transform(t):Da.transform(t)},iO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ev))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iO))===null||n===void 0?void 0:n.length)||0)>0}const IP="number",CP="color",sO="var",oO="var(",hx="${}",aO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uc(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(aO,c=>(Qt.test(c)?(i.color.push(o),r.push(CP),n.push(Qt.parse(c))):c.startsWith(oO)?(i.var.push(o),r.push(sO),n.push(c)):(i.number.push(o),r.push(IP),n.push(parseFloat(c))),++o,hx)).split(hx);return{values:n,split:u,indexes:i,types:r}}function AP(t){return uc(t).values}function kP(t){const{split:e,types:n}=uc(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===IP?o+=Au(r[a]):u===CP?o+=Qt.transform(r[a]):o+=r[a]}return o}}const lO=t=>typeof t=="number"?0:t;function uO(t){const e=AP(t);return kP(t)(e.map(lO))}const Ss={test:rO,parse:AP,createTransformer:kP,getAnimatableNone:uO},cO=new Set(["brightness","contrast","saturate","opacity"]);function hO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(ev)||[];if(!i)return t;const r=n.replace(i,"");let o=cO.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const dO=/\b([a-z-]*)\(.*?\)/gu,zg={...Ss,getAnimatableNone:t=>{const e=t.match(dO);return e?e.map(hO).join(" "):t}},fO={...F_,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:zg,WebkitFilter:zg},nv=t=>fO[t];function RP(t,e){let n=nv(t);return n!==zg&&(n=Ss),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const pO=new Set(["auto","none","0"]);function mO(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!pO.has(o)&&uc(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=RP(n,r)}const dx=t=>t===wl||t===_e,fx=(t,e)=>parseFloat(t.split(", ")[e]),px=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return fx(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?fx(o[1],t):0}},gO=new Set(["x","y","z"]),yO=vl.filter(t=>!gO.has(t));function _O(t){const e=[];return yO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const al={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:px(4,13),y:px(5,14)};al.translateX=al.x;al.translateY=al.y;const go=new Set;let Ug=!1,Bg=!1;function NP(){if(Bg){const t=Array.from(go).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=_O(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Bg=!1,Ug=!1,go.forEach(t=>t.complete()),go.clear()}function MP(){go.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Bg=!0)})}function vO(){MP(),NP()}class iv{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(go.add(this),Ug||(Ug=!0,Je.read(MP),Je.resolveKeyframes(NP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const c=i.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),go.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,go.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const LP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xO(t){const e=wO.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function DP(t,e,n=1){const[i,r]=xO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return LP(a)?parseFloat(a):a}return j_(r)?DP(r,e,n+1):r}const OP=t=>e=>e.test(t),TO={test:t=>t==="auto",parse:t=>t},VP=[wl,_e,Fi,Kr,hD,cD,TO],mx=t=>VP.find(OP(t));class jP extends iv{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),j_(f))){const p=DP(f,n.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!pP.has(i)||e.length!==2)return;const[r,o]=e,a=mx(r),u=mx(o);if(a!==u)if(dx(a)&&dx(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)XD(e[r])&&i.push(r);i.length&&mO(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=al[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=al[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const gx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ss.test(t)||t==="0")&&!t.startsWith("url("));function EO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function SO(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=gx(r,e),u=gx(o,e);return!a||!u?!1:EO(t)||(n==="spring"||q_(n))&&i}const bO=t=>t!==null;function Zf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(bO),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const PO=40;class FP{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=zi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>PO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&vO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=zi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:c,isGenerator:f}=this.options;if(!f&&!SO(e,i,r,o))if(a)this.options.duration=0;else{c&&c(Zf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const it=(t,e,n)=>t+(e-t)*n;function hm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IO({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=hm(c,u,t+1/3),o=hm(c,u,t),a=hm(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function rf(t,e){return n=>n>0?e:t}const dm=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},CO=[Fg,co,Da],AO=t=>CO.find(e=>e.test(t));function yx(t){const e=AO(t);if(!e)return!1;let n=e.parse(t);return e===Da&&(n=IO(n)),n}const _x=(t,e)=>{const n=yx(t),i=yx(e);if(!n||!i)return rf(t,e);const r={...n};return o=>(r.red=dm(n.red,i.red,o),r.green=dm(n.green,i.green,o),r.blue=dm(n.blue,i.blue,o),r.alpha=it(n.alpha,i.alpha,o),co.transform(r))},kO=(t,e)=>n=>e(t(n)),kc=(...t)=>t.reduce(kO),Hg=new Set(["none","hidden"]);function RO(t,e){return Hg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function NO(t,e){return n=>it(t,e,n)}function rv(t){return typeof t=="number"?NO:typeof t=="string"?j_(t)?rf:Qt.test(t)?_x:DO:Array.isArray(t)?zP:typeof t=="object"?Qt.test(t)?_x:MO:rf}function zP(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>rv(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function MO(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=rv(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function LO(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],c=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=c,r[a]++}return i}const DO=(t,e)=>{const n=Ss.createTransformer(e),i=uc(t),r=uc(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Hg.has(t)&&!r.values.length||Hg.has(e)&&!i.values.length?RO(t,e):kc(zP(LO(i,r),r.values),n):rf(t,e)};function UP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?it(t,e,n):rv(t)(t,e)}const OO=5;function BP(t,e,n){const i=Math.max(e-OO,0);return mP(n-t(i),e-i)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fm=.001;function VO({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:i=ut.mass}){let r,o,a=1-e;a=Ar(ut.minDamping,ut.maxDamping,a),t=Ar(ut.minDuration,ut.maxDuration,Er(t)),a<1?(r=f=>{const p=f*a,y=p*t,v=p-n,T=Wg(f,a),I=Math.exp(-y);return fm-v/T*I},o=f=>{const y=f*a*t,v=y*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,I=Math.exp(-y),R=Wg(Math.pow(f,2),a);return(-r(f)+fm>0?-1:1)*((v-T)*I)/R}):(r=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-fm+p*y},o=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const u=5/t,c=FO(r,o,u);if(t=Tr(t),isNaN(c))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const jO=12;function FO(t,e,n){let i=n;for(let r=1;r<jO;r++)i=i-t(i)/e(i);return i}function Wg(t,e){return t*Math.sqrt(1-e*e)}const zO=["duration","bounce"],UO=["stiffness","damping","mass"];function vx(t,e){return e.some(n=>t[n]!==void 0)}function BO(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!vx(t,UO)&&vx(t,zO))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Ar(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ut.mass,stiffness:r,damping:o}}else{const n=VO(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function HP(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:p,duration:y,velocity:v,isResolvedFromDuration:T}=BO({...n,velocity:-Er(n.velocity||0)}),I=v||0,R=f/(2*Math.sqrt(c*p)),V=a-o,b=Er(Math.sqrt(c/p)),S=Math.abs(V)<5;i||(i=S?ut.restSpeed.granular:ut.restSpeed.default),r||(r=S?ut.restDelta.granular:ut.restDelta.default);let C;if(R<1){const H=Wg(b,R);C=U=>{const k=Math.exp(-R*b*U);return a-k*((I+R*b*V)/H*Math.sin(H*U)+V*Math.cos(H*U))}}else if(R===1)C=H=>a-Math.exp(-b*H)*(V+(I+b*V)*H);else{const H=b*Math.sqrt(R*R-1);C=U=>{const k=Math.exp(-R*b*U),E=Math.min(H*U,300);return a-k*((I+R*b*V)*Math.sinh(E)+H*V*Math.cosh(E))/H}}const z={calculatedDuration:T&&y||null,next:H=>{const U=C(H);if(T)u.done=H>=y;else{let k=0;R<1&&(k=H===0?Tr(I):BP(C,H,U));const E=Math.abs(k)<=i,M=Math.abs(a-U)<=r;u.done=E&&M}return u.value=u.done?a:U,u},toString:()=>{const H=Math.min(aP(z),Og),U=lP(k=>z.next(H*k).value,H,30);return H+"ms "+U}};return z}function wx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:p}){const y=t[0],v={done:!1,value:y},T=E=>u!==void 0&&E<u||c!==void 0&&E>c,I=E=>u===void 0?c:c===void 0||Math.abs(u-E)<Math.abs(c-E)?u:c;let R=n*e;const V=y+R,b=a===void 0?V:a(V);b!==V&&(R=b-y);const S=E=>-R*Math.exp(-E/i),C=E=>b+S(E),z=E=>{const M=S(E),N=C(E);v.done=Math.abs(M)<=f,v.value=v.done?b:N};let H,U;const k=E=>{T(v.value)&&(H=E,U=HP({keyframes:[v.value,I(v.value)],velocity:BP(C,E,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return k(0),{calculatedDuration:null,next:E=>{let M=!1;return!U&&H===void 0&&(M=!0,z(E),k(E)),H!==void 0&&E>=H?U.next(E-H):(!M&&z(E),v)}}}const HO=Ac(.42,0,1,1),WO=Ac(0,0,.58,1),WP=Ac(.42,0,.58,1),$O=t=>Array.isArray(t)&&typeof t[0]!="number",qO={linear:Mn,easeIn:HO,easeInOut:WP,easeOut:WO,circIn:J_,circInOut:SP,circOut:EP,backIn:X_,backInOut:xP,backOut:wP,anticipate:TP},xx=t=>{if(G_(t)){Ub(t.length===4);const[e,n,i,r]=t;return Ac(e,n,i,r)}else if(typeof t=="string")return qO[t];return t};function GO(t,e,n){const i=[],r=n||UP,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Mn:e;u=kc(c,u)}i.push(u)}return i}function KO(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(Ub(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=GO(e,i,r),c=u.length,f=p=>{if(a&&p<t[0])return e[0];let y=0;if(c>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const v=sl(t[y],t[y+1],p);return u[y](v)};return n?p=>f(Ar(t[0],t[o-1],p)):f}function ZO(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=sl(0,e,i);t.push(it(n,1,r))}}function YO(t){const e=[0];return ZO(e,t.length-1),e}function QO(t,e){return t.map(n=>n*e)}function XO(t,e){return t.map(()=>e||WP).splice(0,t.length-1)}function sf({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=$O(i)?i.map(xx):xx(i),o={done:!1,value:e[0]},a=QO(n&&n.length===e.length?n:YO(e),t),u=KO(a,e,{ease:Array.isArray(r)?r:XO(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const JO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Je.update(e,!0),stop:()=>Es(e),now:()=>Ut.isProcessing?Ut.timestamp:zi.now()}},eV={decay:wx,inertia:wx,tween:sf,keyframes:sf,spring:HP},tV=t=>t/100;class sv extends FP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||iv,u=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=q_(n)?n:eV[n]||sf;let c,f;u!==sf&&typeof e[0]!="number"&&(c=kc(tV,UP(e[0],e[1])),e=[0,100]);const p=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),p.calculatedDuration===null&&(p.calculatedDuration=aP(p));const{calculatedDuration:y}=p,v=y+r,T=v*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:y,resolvedDuration:v,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:f,totalDuration:p,resolvedDuration:y}=i;if(this.startTime===null)return o.next(0);const{delay:v,repeat:T,repeatType:I,repeatDelay:R,onUpdate:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-v*(this.speed>=0?1:-1),S=this.speed>=0?b<0:b>p;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let C=this.currentTime,z=o;if(T){const E=Math.min(this.currentTime,p)/y;let M=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&M--,M=Math.min(M,T+1),!!(M%2)&&(I==="reverse"?(N=1-N,R&&(N-=R/y)):I==="mirror"&&(z=a)),C=Ar(0,1,N)*y}const H=S?{done:!1,value:c[0]}:z.next(C);u&&(H.value=u(H.value));let{done:U}=H;!S&&f!==null&&(U=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return k&&r!==void 0&&(H.value=Zf(c,this.options,r)),V&&V(H.value),k&&this.finish(),H}get duration(){const{resolved:e}=this;return e?Er(e.calculatedDuration):0}get time(){return Er(this.currentTime)}set time(e){e=Tr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Er(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=JO,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const nV=new Set(["opacity","clipPath","filter","transform"]);function iV(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const p=cP(u,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const rV=R_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),of=10,sV=2e4;function oV(t){return q_(t.type)||t.type==="spring"||!uP(t.ease)}function aV(t,e){const n=new sv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<sV;)i=n.sample(o),r.push(i.value),o+=of;return{times:void 0,keyframes:r,duration:o-of,ease:"linear"}}const $P={anticipate:TP,backInOut:xP,circInOut:SP};function lV(t){return t in $P}class Tx extends FP{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new jP(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:c,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&nf()&&lV(o)&&(o=$P[o]),oV(this.options)){const{onComplete:y,onUpdate:v,motionValue:T,element:I,...R}=this.options,V=aV(e,R);e=V.keyframes,e.length===1&&(e[1]=e[0]),i=V.duration,r=V.times,o=V.ease,a="keyframes"}const p=iV(u.owner.current,c,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(ox(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:y}=this.options;u.set(Zf(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Er(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Er(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Tr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mn;const{animation:i}=n;ox(i,e)}return Mn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:y,element:v,...T}=this.options,I=new sv({...T,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),R=Tr(this.time);f.setWithVelocity(I.sample(R-of).value,I.sample(R).value,of)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return rV()&&i&&nV.has(i)&&!c&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const uV={type:"spring",stiffness:500,damping:25,restSpeed:10},cV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hV={type:"keyframes",duration:.8},dV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fV=(t,{keyframes:e})=>e.length>2?hV:Vo.has(t)?t.startsWith("scale")?cV(e[1]):uV:dV;function pV({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...p}){return!!Object.keys(p).length}const ov=(t,e,n,i={},r,o)=>a=>{const u=$_(i,t)||{},c=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Tr(c);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};pV(u)||(p={...p,...fV(t,p)}),p.duration&&(p.duration=Tr(p.duration)),p.repeatDelay&&(p.repeatDelay=Tr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),y&&!o&&e.get()!==void 0){const v=Zf(p.keyframes,u);if(v!==void 0)return Je.update(()=>{p.onUpdate(v),p.onComplete()}),new MD([])}return!o&&Tx.supports(p)?new Tx(p):new sv(p)};function mV({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function qP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...c}=e;i&&(a=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const y in c){const v=t.getValue(y,(o=t.latestValues[y])!==null&&o!==void 0?o:null),T=c[y];if(T===void 0||p&&mV(p,y))continue;const I={delay:n,...$_(a||{},y)};let R=!1;if(window.MotionHandoffAnimation){const b=gP(t);if(b){const S=window.MotionHandoffAnimation(b,y,Je);S!==null&&(I.startTime=S,R=!0)}}jg(t,y),v.start(ov(y,v,T,t.shouldReduceMotion&&pP.has(y)?{type:!1}:I,t,R));const V=v.animation;V&&f.push(V)}return u&&Promise.all(f).then(()=>{Je.update(()=>{u&&GD(t,u)})}),f}function $g(t,e,n={}){var i;const r=Kf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(qP(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:v}=o;return gV(t,e,p+f,y,v,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,p]=c==="beforeChildren"?[a,u]:[u,a];return f().then(()=>p())}else return Promise.all([a(),u(n.delay)])}function gV(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(yV).forEach((f,p)=>{f.notify("AnimationStart",e),a.push($g(f,e,{...o,delay:n+c(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function yV(t,e){return t.sortNodePosition(e)}function _V(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>$g(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=$g(t,e,n);else{const r=typeof e=="function"?Kf(t,e,n.custom):e;i=Promise.all(qP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const vV=M_.length;function GP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?GP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vV;n++){const i=M_[n],r=t.props[i];(oc(r)||r===!1)&&(e[i]=r)}return e}const wV=[...N_].reverse(),xV=N_.length;function TV(t){return e=>Promise.all(e.map(({animation:n,options:i})=>_V(t,n,i)))}function EV(t){let e=TV(t),n=Ex(),i=!0;const r=c=>(f,p)=>{var y;const v=Kf(t,p,c==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(v){const{transition:T,transitionEnd:I,...R}=v;f={...f,...R,...I}}return f};function o(c){e=c(t)}function a(c){const{props:f}=t,p=GP(t.parent)||{},y=[],v=new Set;let T={},I=1/0;for(let V=0;V<xV;V++){const b=wV[V],S=n[b],C=f[b]!==void 0?f[b]:p[b],z=oc(C),H=b===c?S.isActive:null;H===!1&&(I=V);let U=C===p[b]&&C!==f[b]&&z;if(U&&i&&t.manuallyAnimateOnMount&&(U=!1),S.protectedKeys={...T},!S.isActive&&H===null||!C&&!S.prevProp||qf(C)||typeof C=="boolean")continue;const k=SV(S.prevProp,C);let E=k||b===c&&S.isActive&&!U&&z||V>I&&z,M=!1;const N=Array.isArray(C)?C:[C];let D=N.reduce(r(b),{});H===!1&&(D={});const{prevResolvedValues:F={}}=S,O={...F,...D},ne=ke=>{E=!0,v.has(ke)&&(M=!0,v.delete(ke)),S.needsAnimating[ke]=!0;const K=t.getValue(ke);K&&(K.liveStyle=!1)};for(const ke in O){const K=D[ke],ue=F[ke];if(T.hasOwnProperty(ke))continue;let J=!1;Dg(K)&&Dg(ue)?J=!oP(K,ue):J=K!==ue,J?K!=null?ne(ke):v.add(ke):K!==void 0&&v.has(ke)?ne(ke):S.protectedKeys[ke]=!0}S.prevProp=C,S.prevResolvedValues=D,S.isActive&&(T={...T,...D}),i&&t.blockInitialAnimation&&(E=!1),E&&(!(U&&k)||M)&&y.push(...N.map(ke=>({animation:ke,options:{type:b}})))}if(v.size){const V={};v.forEach(b=>{const S=t.getBaseTarget(b),C=t.getValue(b);C&&(C.liveStyle=!0),V[b]=S??null}),y.push({animation:V})}let R=!!y.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(R=!1),i=!1,R?e(y):Promise.resolve()}function u(c,f){var p;if(n[c].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(v=>{var T;return(T=v.animationState)===null||T===void 0?void 0:T.setActive(c,f)}),n[c].isActive=f;const y=a(c);for(const v in n)n[v].protectedKeys={};return y}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Ex(),i=!0}}}function SV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oP(e,t):!1}function eo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ex(){return{animate:eo(!0),whileInView:eo(),whileHover:eo(),whileTap:eo(),whileDrag:eo(),whileFocus:eo(),exit:eo()}}class Ds{constructor(e){this.isMounted=!1,this.node=e}update(){}}class bV extends Ds{constructor(e){super(e),e.animationState||(e.animationState=EV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let PV=0;class IV extends Ds{constructor(){super(...arguments),this.id=PV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const CV={animation:{Feature:bV},exit:{Feature:IV}};function cc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Rc(t){return{point:{x:t.pageX,y:t.pageY}}}const AV=t=>e=>K_(e)&&t(e,Rc(e));function ku(t,e,n,i){return cc(t,e,AV(n),i)}const Sx=(t,e)=>Math.abs(t-e);function kV(t,e){const n=Sx(t.x,e.x),i=Sx(t.y,e.y);return Math.sqrt(n**2+i**2)}class KP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=mm(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=kV(y.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:I}=y,{timestamp:R}=Ut;this.history.push({...I,timestamp:R});const{onStart:V,onMove:b}=this.handlers;v||(V&&V(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=pm(v,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:T,onSessionEnd:I,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=mm(y.type==="pointercancel"?this.lastMoveEventInfo:pm(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(y,V),I&&I(y,V)},!K_(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Rc(e),u=pm(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=Ut;this.history=[{...c,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,mm(u,this.history)),this.removeListeners=kc(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Es(this.updatePoint)}}function pm(t,e){return e?{point:e(t.point)}:t}function bx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mm({point:t},e){return{point:t,delta:bx(t,ZP(e)),offset:bx(t,RV(e)),velocity:NV(e,.1)}}function RV(t){return t[0]}function ZP(t){return t[t.length-1]}function NV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=ZP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Tr(e)));)n--;if(!i)return{x:0,y:0};const o=Er(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const YP=1e-4,MV=1-YP,LV=1+YP,QP=.01,DV=0-QP,OV=0+QP;function Dn(t){return t.max-t.min}function VV(t,e,n){return Math.abs(t-e)<=n}function Px(t,e,n,i=.5){t.origin=i,t.originPoint=it(e.min,e.max,t.origin),t.scale=Dn(n)/Dn(e),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(t.scale>=MV&&t.scale<=LV||isNaN(t.scale))&&(t.scale=1),(t.translate>=DV&&t.translate<=OV||isNaN(t.translate))&&(t.translate=0)}function Ru(t,e,n,i){Px(t.x,e.x,n.x,i?i.originX:void 0),Px(t.y,e.y,n.y,i?i.originY:void 0)}function Ix(t,e,n){t.min=n.min+e.min,t.max=t.min+Dn(e)}function jV(t,e,n){Ix(t.x,e.x,n.x),Ix(t.y,e.y,n.y)}function Cx(t,e,n){t.min=e.min-n.min,t.max=t.min+Dn(e)}function Nu(t,e,n){Cx(t.x,e.x,n.x),Cx(t.y,e.y,n.y)}function FV(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?it(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?it(n,t,i.max):Math.min(t,n)),t}function Ax(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function zV(t,{top:e,left:n,bottom:i,right:r}){return{x:Ax(t.x,n,r),y:Ax(t.y,e,i)}}function kx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function UV(t,e){return{x:kx(t.x,e.x),y:kx(t.y,e.y)}}function BV(t,e){let n=.5;const i=Dn(t),r=Dn(e);return r>i?n=sl(e.min,e.max-i,t.min):i>r&&(n=sl(t.min,t.max-r,e.min)),Ar(0,1,n)}function HV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qg=.35;function WV(t=qg){return t===!1?t=0:t===!0&&(t=qg),{x:Rx(t,"left","right"),y:Rx(t,"top","bottom")}}function Rx(t,e,n){return{min:Nx(t,e),max:Nx(t,n)}}function Nx(t,e){return typeof t=="number"?t:t[e]||0}const Mx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oa=()=>({x:Mx(),y:Mx()}),Lx=()=>({min:0,max:0}),mt=()=>({x:Lx(),y:Lx()});function Gn(t){return[t("x"),t("y")]}function XP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function $V({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function qV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function gm(t){return t===void 0||t===1}function Gg({scale:t,scaleX:e,scaleY:n}){return!gm(t)||!gm(e)||!gm(n)}function ro(t){return Gg(t)||JP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function JP(t){return Dx(t.x)||Dx(t.y)}function Dx(t){return t&&t!=="0%"}function af(t,e,n){const i=t-n,r=e*i;return n+r}function Ox(t,e,n,i,r){return r!==void 0&&(t=af(t,r,i)),af(t,n,i)+e}function Kg(t,e=0,n=1,i,r){t.min=Ox(t.min,e,n,i,r),t.max=Ox(t.max,e,n,i,r)}function eI(t,{x:e,y:n}){Kg(t.x,e.translate,e.scale,e.originPoint),Kg(t.y,n.translate,n.scale,n.originPoint)}const Vx=.999999999999,jx=1.0000000000001;function GV(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ja(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,eI(t,a)),i&&ro(o.latestValues)&&ja(t,o.latestValues))}e.x<jx&&e.x>Vx&&(e.x=1),e.y<jx&&e.y>Vx&&(e.y=1)}function Va(t,e){t.min=t.min+e,t.max=t.max+e}function Fx(t,e,n,i,r=.5){const o=it(t.min,t.max,r);Kg(t,e,n,o,i)}function ja(t,e){Fx(t.x,e.x,e.scaleX,e.scale,e.originX),Fx(t.y,e.y,e.scaleY,e.scale,e.originY)}function tI(t,e){return XP(qV(t.getBoundingClientRect(),e))}function KV(t,e,n){const i=tI(t,n),{scroll:r}=e;return r&&(Va(i.x,r.offset.x),Va(i.y,r.offset.y)),i}const nI=({current:t})=>t?t.ownerDocument.defaultView:null,ZV=new WeakMap;class YV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rc(p).point)},o=(p,y)=>{const{drag:v,dragPropagation:T,onDragStart:I}=this.getProps();if(v&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=BD(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gn(V=>{let b=this.getAxisMotionValue(V).get()||0;if(Fi.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[V];C&&(b=Dn(C)*(parseFloat(b)/100))}}this.originPoint[V]=b}),I&&Je.postRender(()=>I(p,y)),jg(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(p,y)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:I,onDrag:R}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:V}=y;if(T&&this.currentDirection===null){this.currentDirection=QV(V),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",y.point,V),this.updateAxis("y",y.point,V),this.visualElement.render(),R&&R(p,y)},u=(p,y)=>this.stop(p,y),c=()=>Gn(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new KP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:nI(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Je.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Bh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=FV(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&La(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=zV(r.layoutBox,n):this.constraints=!1,this.elastic=WV(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=HV(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!La(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=KV(i,r.root,this.visualElement.getTransformPagePoint());let a=UV(r.layout.layoutBox,o);if(n){const u=n($V(a));this.hasMutatedConstraints=!!u,u&&(a=XP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Gn(p=>{if(!Bh(p,n,this.currentDirection))return;let y=c&&c[p]||{};a&&(y={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,I={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(p,I)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return jg(this.visualElement,e),i.start(ov(e,i,0,n,this.visualElement,!1))}stopAnimation(){Gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Gn(n=>{const{drag:i}=this.getProps();if(!Bh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-it(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!La(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Gn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const c=u.get();r[a]=BV({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Gn(a=>{if(!Bh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(it(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;ZV.set(this.visualElement,this);const e=this.visualElement.current,n=ku(e,"pointerdown",c=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();La(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Je.read(i);const a=cc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Gn(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=c[p].translate,y.set(y.get()+c[p].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=qg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Bh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function QV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class XV extends Ds{constructor(e){super(e),this.removeGroupControls=Mn,this.removeListeners=Mn,this.controls=new YV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const zx=t=>(e,n)=>{t&&Je.postRender(()=>t(e,n))};class JV extends Ds{constructor(){super(...arguments),this.removePointerDownListener=Mn}onPointerDown(e){this.session=new KP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:zx(e),onStart:zx(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Je.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ux(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const au={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(_e.test(t))t=parseFloat(t);else return t;const n=Ux(t,e.target.x),i=Ux(t,e.target.y);return`${n}% ${i}%`}},e4={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ss.parse(t);if(r.length>5)return i;const o=Ss.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=it(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class t4 extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;xD(n4),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Je.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),D_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iI(t){const[e,n]=Fb(),i=B.useContext(I_);return g.jsx(t4,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(Gb),isPresent:e,safeToRemove:n})}const n4={borderRadius:{...au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:au,borderTopRightRadius:au,borderBottomLeftRadius:au,borderBottomRightRadius:au,boxShadow:e4};function i4(t,e,n){const i=nn(t)?t:lc(t);return i.start(ov("",i,e,n)),i.animation}function r4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const s4=(t,e)=>t.depth-e.depth;class o4{constructor(){this.children=[],this.isDirty=!1}add(e){Z_(this.children,e),this.isDirty=!0}remove(e){Y_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(s4),this.isDirty=!1,this.children.forEach(e)}}function a4(t,e){const n=zi.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Es(i),t(o-e))};return Je.read(i,!0),()=>Es(i)}const rI=["TopLeft","TopRight","BottomLeft","BottomRight"],l4=rI.length,Bx=t=>typeof t=="string"?parseFloat(t):t,Hx=t=>typeof t=="number"||_e.test(t);function u4(t,e,n,i,r,o){r?(t.opacity=it(0,n.opacity!==void 0?n.opacity:1,c4(i)),t.opacityExit=it(e.opacity!==void 0?e.opacity:1,0,h4(i))):o&&(t.opacity=it(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<l4;a++){const u=`border${rI[a]}Radius`;let c=Wx(e,u),f=Wx(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||Hx(c)===Hx(f)?(t[u]=Math.max(it(Bx(c),Bx(f),i),0),(Fi.test(f)||Fi.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,i))}function Wx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const c4=sI(0,.5,EP),h4=sI(.5,.95,Mn);function sI(t,e,n){return i=>i<t?0:i>e?1:n(sl(t,e,i))}function $x(t,e){t.min=e.min,t.max=e.max}function qn(t,e){$x(t.x,e.x),$x(t.y,e.y)}function qx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Gx(t,e,n,i,r){return t-=e,t=af(t,1/n,i),r!==void 0&&(t=af(t,1/r,i)),t}function d4(t,e=0,n=1,i=.5,r,o=t,a=t){if(Fi.test(e)&&(e=parseFloat(e),e=it(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=it(o.min,o.max,i);t===o&&(u-=e),t.min=Gx(t.min,e,n,u,r),t.max=Gx(t.max,e,n,u,r)}function Kx(t,e,[n,i,r],o,a){d4(t,e[n],e[i],e[r],e.scale,o,a)}const f4=["x","scaleX","originX"],p4=["y","scaleY","originY"];function Zx(t,e,n,i){Kx(t.x,e,f4,n?n.x:void 0,i?i.x:void 0),Kx(t.y,e,p4,n?n.y:void 0,i?i.y:void 0)}function Yx(t){return t.translate===0&&t.scale===1}function oI(t){return Yx(t.x)&&Yx(t.y)}function Qx(t,e){return t.min===e.min&&t.max===e.max}function m4(t,e){return Qx(t.x,e.x)&&Qx(t.y,e.y)}function Xx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function aI(t,e){return Xx(t.x,e.x)&&Xx(t.y,e.y)}function Jx(t){return Dn(t.x)/Dn(t.y)}function e1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class g4{constructor(){this.members=[]}add(e){Z_(this.members,e),e.scheduleRender()}remove(e){if(Y_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function y4(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:v,skewX:T,skewY:I}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),T&&(i+=`skewX(${T}deg) `),I&&(i+=`skewY(${I}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(i+=`scale(${u}, ${c})`),i||"none"}const so={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},mu=typeof window<"u"&&window.MotionDebug!==void 0,ym=["","X","Y","Z"],_4={visibility:"hidden"},t1=1e3;let v4=0;function _m(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function lI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Je,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&lI(i)}function uI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=v4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,mu&&(so.totalNodes=so.resolvedTargetDeltas=so.recalculatedProjection=0),this.nodes.forEach(T4),this.nodes.forEach(I4),this.nodes.forEach(C4),this.nodes.forEach(E4),mu&&window.MotionDebug.record(so)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new o4)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Q_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=r4(a),this.instance=a;const{layoutId:c,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let y;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=a4(v,250),fd.hasAnimatedSinceResize&&(fd.hasAnimatedSinceResize=!1,this.nodes.forEach(i1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||p.getDefaultTransition()||M4,{onLayoutAnimationStart:V,onLayoutAnimationComplete:b}=p.getProps(),S=!this.targetLayout||!aI(this.targetLayout,I)||T,C=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||v&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,C);const z={...$_(R,"layout"),onPlay:V,onComplete:b};(p.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else v||i1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Es(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n1);return}this.isUpdating||this.nodes.forEach(b4),this.isUpdating=!1,this.nodes.forEach(P4),this.nodes.forEach(w4),this.nodes.forEach(x4),this.clearAllSnapshots();const u=zi.now();Ut.delta=Ar(0,1e3/60,u-Ut.timestamp),Ut.timestamp=u,Ut.isProcessing=!0,lm.update.process(Ut),lm.preRender.process(Ut),lm.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(S4),this.sharedNodes.forEach(k4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!oI(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&(u||ro(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),L4(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return mt();const c=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(D4))){const{scroll:p}=this.root;p&&(Va(c.x,p.offset.x),Va(c.y,p.offset.y))}return c}removeElementScroll(a){var u;const c=mt();if(qn(c,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:v}=p;p!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&qn(c,a),Va(c.x,y.offset.x),Va(c.y,y.offset.y))}return c}applyTransform(a,u=!1){const c=mt();qn(c,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ja(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ro(p.latestValues)&&ja(c,p.latestValues)}return ro(this.latestValues)&&ja(c,this.latestValues),c}removeTransform(a){const u=mt();qn(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!ro(f.latestValues))continue;Gg(f.latestValues)&&f.updateSnapshot();const p=mt(),y=f.measurePageBox();qn(p,y),Zx(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ro(this.latestValues)&&Zx(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!(!this.layout||!(y||v))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Nu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qn(this.target,this.layout.layoutBox),eI(this.target,this.targetDelta)):qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Nu(this.relativeTargetOrigin,this.target,T.target),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mu&&so.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Gg(this.parent.latestValues)||JP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;qn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;GV(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=mt());const{target:I}=u;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qx(this.prevProjectionDelta.x,this.projectionDelta.x),qx(this.prevProjectionDelta.y,this.projectionDelta.y)),Ru(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==T||!e1(this.projectionDelta.x,this.prevProjectionDelta.x)||!e1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I)),mu&&so.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oa(),this.projectionDelta=Oa(),this.projectionDeltaWithTransform=Oa()}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},p={...this.latestValues},y=Oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=mt(),T=c?c.source:void 0,I=this.layout?this.layout.source:void 0,R=T!==I,V=this.getStack(),b=!V||V.members.length<=1,S=!!(R&&!b&&this.options.crossfade===!0&&!this.path.some(N4));this.animationProgress=0;let C;this.mixTargetDelta=z=>{const H=z/1e3;r1(y.x,a.x,H),r1(y.y,a.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R4(this.relativeTarget,this.relativeTargetOrigin,v,H),C&&m4(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=mt()),qn(C,this.relativeTarget)),R&&(this.animationValues=p,u4(p,f,this.latestValues,H,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Es(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{fd.hasAnimatedSinceResize=!0,this.currentAnimation=i4(0,t1,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(t1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:p}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&cI(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||mt();const y=Dn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+y;const v=Dn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}qn(u,c),ja(u,p),Ru(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new g4),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&_m("z",a,f,this.animationValues);for(let p=0;p<ym.length;p++)_m(`rotate${ym[p]}`,a,f,this.animationValues),_m(`skew${ym[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _4;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=hd(a==null?void 0:a.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=hd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ro(this.latestValues)&&(R.transform=p?p({},""):"none",this.hasProjected=!1),R}const v=y.animationValues||y.latestValues;this.applyTransformsToTarget(),f.transform=y4(this.projectionDeltaWithTransform,this.treeScale,v),p&&(f.transform=p(v,f.transform));const{x:T,y:I}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${I.origin*100}% 0`,y.animationValues?f.opacity=y===this?(c=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=y===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const R in tf){if(v[R]===void 0)continue;const{correct:V,applyTo:b}=tf[R],S=f.transform==="none"?v[R]:V(v[R],y);if(b){const C=b.length;for(let z=0;z<C;z++)f[b[z]]=S}else f[R]=S}return this.options.layoutId&&(f.pointerEvents=y===this?hd(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(n1),this.root.sharedNodes.clear()}}}function w4(t){t.updateLayout()}function x4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Gn(y=>{const v=a?n.measuredBox[y]:n.layoutBox[y],T=Dn(v);v.min=i[y].min,v.max=v.min+T}):cI(o,n.layoutBox,i)&&Gn(y=>{const v=a?n.measuredBox[y]:n.layoutBox[y],T=Dn(i[y]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+T)});const u=Oa();Ru(u,i,n.layoutBox);const c=Oa();a?Ru(c,t.applyTransform(r,!0),n.measuredBox):Ru(c,i,n.layoutBox);const f=!oI(u);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:T}=y;if(v&&T){const I=mt();Nu(I,n.layoutBox,v.layoutBox);const R=mt();Nu(R,i,T.layoutBox),aI(I,R)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=I,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function T4(t){mu&&so.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function S4(t){t.clearSnapshot()}function n1(t){t.clearMeasurements()}function b4(t){t.isLayoutDirty=!1}function P4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function i1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function I4(t){t.resolveTargetDelta()}function C4(t){t.calcProjection()}function A4(t){t.resetSkewAndRotation()}function k4(t){t.removeLeadSnapshot()}function r1(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function s1(t,e,n,i){t.min=it(e.min,n.min,i),t.max=it(e.max,n.max,i)}function R4(t,e,n,i){s1(t.x,e.x,n.x,i),s1(t.y,e.y,n.y,i)}function N4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const M4={duration:.45,ease:[.4,0,.1,1]},o1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),a1=o1("applewebkit/")&&!o1("chrome/")?Math.round:Mn;function l1(t){t.min=a1(t.min),t.max=a1(t.max)}function L4(t){l1(t.x),l1(t.y)}function cI(t,e,n){return t==="position"||t==="preserve-aspect"&&!VV(Jx(e),Jx(n),.2)}function D4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const O4=uI({attachResizeListener:(t,e)=>cc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vm={current:void 0},hI=uI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vm.current){const t=new O4({});t.mount(window),t.setOptions({layoutScroll:!0}),vm.current=t}return vm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),V4={pan:{Feature:JV},drag:{Feature:XV,ProjectionNode:hI,MeasureLayout:iI}};function u1(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Je.postRender(()=>o(e,Rc(e)))}class j4 extends Ds{mount(){const{current:e}=this.node;e&&(this.unmount=VD(e,n=>(u1(this.node,n,"Start"),i=>u1(this.node,i,"End"))))}unmount(){}}class F4 extends Ds{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kc(cc(this.node.current,"focus",()=>this.onFocus()),cc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function c1(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Je.postRender(()=>o(e,Rc(e)))}class z4 extends Ds{mount(){const{current:e}=this.node;e&&(this.unmount=UD(e,n=>(c1(this.node,n,"Start"),(i,{success:r})=>c1(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zg=new WeakMap,wm=new WeakMap,U4=t=>{const e=Zg.get(t.target);e&&e(t)},B4=t=>{t.forEach(U4)};function H4({root:t,...e}){const n=t||document;wm.has(n)||wm.set(n,{});const i=wm.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(B4,{root:t,...e})),i[r]}function W4(t,e,n){const i=H4(e);return Zg.set(t,n),i.observe(t),()=>{Zg.delete(t),i.unobserve(t)}}const $4={some:0,all:1};class q4 extends Ds{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:$4[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),v=f?p:y;v&&v(c)};return W4(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(G4(e,n))&&this.startObserver()}unmount(){}}function G4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const K4={inView:{Feature:q4},tap:{Feature:z4},focus:{Feature:F4},hover:{Feature:j4}},Z4={layout:{ProjectionNode:hI,MeasureLayout:iI}},Yg={current:null},dI={current:!1};function Y4(){if(dI.current=!0,!!k_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=t.matches;t.addListener(e),e()}else Yg.current=!1}const Q4=[...VP,Qt,Ss],X4=t=>Q4.find(OP(t)),h1=new WeakMap;function J4(t,e,n){for(const i in e){const r=e[i],o=n[i];if(nn(r))t.addValue(i,r);else if(nn(o))t.addValue(i,lc(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,lc(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const d1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ej{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=zi.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,Je.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:p}=a;this.onUpdate=p,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Gf(n),this.isVariantNode=$b(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in v){const I=v[T];c[T]!==void 0&&nn(I)&&I.set(c[T],!1)}}mount(e){this.current=e,h1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),dI.current||Y4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){h1.delete(this.current),this.projection&&this.projection.unmount(),Es(this.notifyUpdate),Es(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Vo.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Je.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ol){const n=ol[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<d1.length;i++){const r=d1[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=J4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=lc(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LP(r)||bP(r))?r=parseFloat(r):!X4(r)&&Ss.test(n)&&(r=RP(e,n)),this.setBaseTarget(e,nn(r)?r.get():r)),nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=V_(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!nn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Q_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class fI extends ej{constructor(){super(...arguments),this.KeyframeResolver=jP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function tj(t){return window.getComputedStyle(t)}class nj extends fI{constructor(){super(...arguments),this.type="html",this.renderInstance=eP}readValueFromInstance(e,n){if(Vo.has(n)){const i=nv(n);return i&&i.default||0}else{const i=tj(e),r=(Qb(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return tI(e,n)}build(e,n,i){z_(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return W_(e,n,i)}}class ij extends fI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vo.has(n)){const i=nv(n);return i&&i.default||0}return n=tP.has(n)?n:L_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return rP(e,n,i)}build(e,n,i){U_(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){nP(e,n,i,r)}mount(e){this.isSVGTag=H_(e.tagName),super.mount(e)}}const rj=(t,e)=>O_(t)?new ij(e):new nj(e,{allowProjection:t!==B.Fragment}),sj=kD({...CV,...K4,...V4,...Z4},rj),bn=$L(sj),oj={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},aj=(t,e,n)=>{let i;const r=oj[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?i+"":i+"":i},lj={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},uj={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},cj={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},hj={date:$a({formats:lj,defaultWidth:"full"}),time:$a({formats:uj,defaultWidth:"full"}),dateTime:$a({formats:cj,defaultWidth:"full"})},dj={lastWeek:"''eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"''eeee p",other:"P"},fj=(t,e,n,i)=>dj[t],pj={narrow:["",""],abbreviated:["",""],wide:["",""]},mj={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},gj={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},yj={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},_j={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},vj={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},wj=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n+"";case"hour":return n+"";case"minute":return n+"";case"second":return n+"";default:return" "+n}},xj={ordinalNumber:wj,era:Li({values:pj,defaultWidth:"wide"}),quarter:Li({values:mj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Li({values:gj,defaultWidth:"wide"}),day:Li({values:yj,defaultWidth:"wide"}),dayPeriod:Li({values:_j,defaultWidth:"wide",formattingValues:vj,defaultFormattingWidth:"wide"})},Tj=/^(\s*)?\d+(|||)?/i,Ej=/\d+/i,Sj={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},bj={any:[/^()/i,/^()/i]},Pj={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},Ij={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},Cj={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},Aj={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},kj={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},Rj={any:[//i,//i,//i,//i,//i,//i,//i]},Nj={any:/^(?|?||[]|?||?|)/i},Mj={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},Lj={ordinalNumber:Lb({matchPattern:Tj,parsePattern:Ej,valueCallback:t=>parseInt(t,10)}),era:Di({matchPatterns:Sj,defaultMatchWidth:"wide",parsePatterns:bj,defaultParseWidth:"any"}),quarter:Di({matchPatterns:Pj,defaultMatchWidth:"wide",parsePatterns:Ij,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Di({matchPatterns:Cj,defaultMatchWidth:"wide",parsePatterns:Aj,defaultParseWidth:"any"}),day:Di({matchPatterns:kj,defaultMatchWidth:"wide",parsePatterns:Rj,defaultParseWidth:"any"}),dayPeriod:Di({matchPatterns:Nj,defaultMatchWidth:"any",parsePatterns:Mj,defaultParseWidth:"any"})},Dj={code:"zh-TW",formatDistance:aj,formatLong:hj,formatRelative:fj,localize:xj,match:Lj,options:{weekStartsOn:1,firstWeekContainsDate:4}};function Oj({id:t,activity:e,isLast:n,isEditing:i,isHighlighted:r,onEdit:o,onDelete:a,onFocus:u}){const f=(p=>{switch(p){case"Plane":return Yd;case"MapPin":return rc;case"Coffee":return LN;case"Camera":return IN;case"Train":return Ab;case"Car":return CN;case"Sun":return Qd;case"Moon":return Cb;case"Briefcase":return PN;case"Utensils":return kb;case"CheckSquare":return ud;default:return Uw}})(e.iconName);return g.jsxs(bn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`relative flex gap-4 group/item p-3 rounded-xl transition-colors duration-300 ${r?"bg-yellow-50 ring-1 ring-yellow-200":"hover:bg-gray-50"}`,onViewportEnter:()=>{t&&u&&u(t)},viewport:{amount:.2,margin:"-10% 0px -40% 0px"},children:[!n&&g.jsx("div",{className:"absolute left-[15px] top-8 bottom-[-24px] w-0.5 bg-indigo-100 group-hover/item:bg-indigo-200 transition-colors"}),g.jsx("div",{className:"relative z-10 flex-shrink-0 w-8 h-8 bg-white border-2 border-indigo-100 rounded-full flex items-center justify-center text-indigo-500 shadow-sm group-hover/item:border-indigo-400 group-hover/item:scale-110 group-hover/item:shadow-md transition-all duration-300",children:g.jsx(f,{size:14})}),g.jsxs("div",{className:"flex-1 pb-6",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-2",children:[g.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded w-fit",children:e.time}),g.jsx("h4",{className:"font-semibold text-gray-800 text-base",children:e.title}),e.cost&&g.jsxs("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:["$",e.cost]})]}),i&&g.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[g.jsx("button",{onClick:o,className:"p-1 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded",title:"",children:g.jsx(WN,{size:14})}),g.jsx("button",{onClick:a,className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"",children:g.jsx(Do,{size:14})})]})]}),g.jsx("p",{className:"text-sm text-gray-600 mt-1.5 leading-relaxed",children:e.description}),e.attachments&&e.attachments.length>0&&g.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.attachments.map(p=>p.type==="image"?g.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"block w-24 h-24 rounded-lg overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors relative group/img",children:[g.jsx("img",{src:p.url,alt:p.label,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/10 transition-colors"})]},p.id):g.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-blue-600 bg-blue-50 px-2.5 py-1.5 rounded-md border border-blue-100 hover:bg-blue-100 transition-colors",children:[g.jsx(Lg,{size:12}),p.label||""]},p.id))}),(e.tips||e.location)&&g.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[e.location&&g.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.location)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-gray-500 bg-white px-2.5 py-1.5 rounded-md border border-gray-200 w-fit hover:bg-gray-50 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:[g.jsx(rc,{size:12}),e.location]}),e.tips&&g.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100",children:[g.jsx(Uw,{size:14,className:"mt-0.5 flex-shrink-0"}),g.jsx("span",{className:"leading-relaxed",children:e.tips})]})]}),e.modifiedBy&&g.jsx("div",{className:"mt-2 flex justify-end",children:g.jsxs("span",{className:"text-[10px] text-gray-300",children:["Updated by ",e.modifiedBy.split("@")[0],"  ",e.modifiedAt?gL(new Date(e.modifiedAt),{addSuffix:!0,locale:Dj}):""]})})]})]})}function pI(t,e){const n=B.useRef(e);B.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Vj=1;function jj(t){return Object.freeze({__version:Vj,map:t})}function mI(t,e){return Object.freeze({...t,...e})}const gI=B.createContext(null),yI=gI.Provider;function Yf(){const t=B.useContext(gI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function _I(t){function e(n,i){const{instance:r,context:o}=t(n).current;return B.useImperativeHandle(i,()=>r),n.children==null?null:bd.createElement(yI,{value:o},n.children)}return B.forwardRef(e)}function Fj(t){function e(n,i){const[r,o]=B.useState(!1),{instance:a}=t(n,o).current;B.useImperativeHandle(i,()=>a),B.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?Sb.createPortal(n.children,u):null}return B.forwardRef(e)}function zj(t){function e(n,i){const{instance:r}=t(n).current;return B.useImperativeHandle(i,()=>r),null}return B.forwardRef(e)}function av(t,e){const n=B.useRef();B.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Qf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Uj(t,e){return function(i,r){const o=Yf(),a=t(Qf(i,o),o);return pI(o.map,i.attribution),av(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Qg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(X2,function(n){var i="1.9.4";function r(s){var l,d,m,w;for(d=1,m=arguments.length;d<m;d++){w=arguments[d];for(l in w)s[l]=w[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var m=d.call(arguments,2);return function(){return s.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var m,w,P,j;return j=function(){m=!1,w&&(P.apply(d,w),w=!1)},P=function(){m?w=arguments:(s.apply(d,arguments),setTimeout(j,l),m=!0)},P}function p(s,l,d){var m=l[1],w=l[0],P=m-w;return s===m&&d?s:((s-w)%P+P)%P+w}function y(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function I(s){return T(s).split(/\s+/)}function R(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var m=[];for(var w in s)m.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function S(s,l){return s.replace(b,function(d,m){var w=l[m];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var k=0;function E(s){var l=+new Date,d=Math.max(0,16-(l-k));return k=l+d,window.setTimeout(s,d)}var M=window.requestAnimationFrame||U("RequestAnimationFrame")||E,N=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,d){if(d&&M===E)s.call(l);else return M.call(window,a(s,l))}function F(s){s&&N.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:p,falseFn:y,formatNum:v,trim:T,splitWords:I,setOptions:R,getParamString:V,template:S,isArray:C,indexOf:z,emptyImageUrl:H,requestFn:M,cancelFn:N,requestAnimFrame:D,cancelAnimFrame:F};function ne(){}ne.extend=function(s){var l=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=o(d);m.constructor=l,l.prototype=m;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return s.statics&&r(l,s.statics),s.includes&&(Pe(s.includes),r.apply(null,[m].concat(s.includes))),r(m,s),delete m.statics,delete m.includes,m.options&&(m.options=d.options?o(d.options):{},r(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,j=m._initHooks.length;P<j;P++)m._initHooks[P].call(this)}},l},ne.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ne.mergeOptions=function(s){return r(this.prototype.options,s),this},ne.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Pe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Oe={on:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l);else{s=I(s);for(var w=0,P=s.length;w<P;w++)this._on(s[w],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],l);else{s=I(s);for(var w=arguments.length===1,P=0,j=s.length;P<j;P++)w?this._off(s[P]):this._off(s[P],l,d)}return this},_on:function(s,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};m&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,l,d){var m,w,P;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(w=0,P=m.length;w<P;w++)m[w].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(s,l,d);if(j!==!1){var $=m[j];this._firingCount&&($.fn=y,this._events[s]=m=m.slice()),m.splice(j,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var m=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var P=0,j=w.length;P<j;P++){var $=w[P],G=$.fn;$.once&&this.off(s,G,$.ctx),G.call($.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(s,l,d,m){typeof s!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(m=!!l,w=void 0,d=void 0);var P=this._events&&this._events[s];if(P&&P.length&&this._listens(s,w,d)!==!1)return!0;if(m){for(var j in this._eventParents)if(this._eventParents[j].listens(s,l,d,m))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var m=this._events[s]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var w=0,P=m.length;w<P;w++)if(m[w].fn===l&&m[w].ctx===d)return w;return!1},once:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l,!0);else{s=I(s);for(var w=0,P=s.length;w<P;w++)this._on(s[w],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Oe.addEventListener=Oe.on,Oe.removeEventListener=Oe.clearAllEventListeners=Oe.off,Oe.addOneTimeEventListener=Oe.once,Oe.fireEvent=Oe.fire,Oe.hasEventListeners=Oe.listens;var ke=ne.extend(Oe);function K(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ue=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new K(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new K(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof K?s:C(s)?new K(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new K(s.x,s.y):new K(s,l,d)}function fe(s,l){if(s)for(var d=l?[s,l]:s,m=0,w=d.length;m<w;m++)this.extend(d[m])}fe.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof K||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Z(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof K?s=J(s):s=Z(s),s instanceof fe?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Z(s);var l=this.min,d=this.max,m=s.min,w=s.max,P=w.x>=l.x&&m.x<=d.x,j=w.y>=l.y&&m.y<=d.y;return P&&j},overlaps:function(s){s=Z(s);var l=this.min,d=this.max,m=s.min,w=s.max,P=w.x>l.x&&m.x<d.x,j=w.y>l.y&&m.y<d.y;return P&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*s,w=Math.abs(l.y-d.y)*s;return Z(J(l.x-m,l.y-w),J(d.x+m,d.y+w))},equals:function(s){return s?(s=Z(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Z(s,l){return!s||s instanceof fe?s:new fe(s,l)}function ce(s,l){if(s)for(var d=l?[s,l]:s,m=0,w=d.length;m<w;m++)this.extend(d[m])}ce.prototype={extend:function(s){var l=this._southWest,d=this._northEast,m,w;if(s instanceof me)m=s,w=s;else if(s instanceof ce){if(m=s._southWest,w=s._northEast,!m||!w)return this}else return s?this.extend(ge(s)||he(s)):this;return!l&&!d?(this._southWest=new me(m.lat,m.lng),this._northEast=new me(w.lat,w.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*s,w=Math.abs(l.lng-d.lng)*s;return new ce(new me(l.lat-m,l.lng-w),new me(d.lat+m,d.lng+w))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof me||"lat"in s?s=ge(s):s=he(s);var l=this._southWest,d=this._northEast,m,w;return s instanceof ce?(m=s.getSouthWest(),w=s.getNorthEast()):m=w=s,m.lat>=l.lat&&w.lat<=d.lat&&m.lng>=l.lng&&w.lng<=d.lng},intersects:function(s){s=he(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),w=s.getNorthEast(),P=w.lat>=l.lat&&m.lat<=d.lat,j=w.lng>=l.lng&&m.lng<=d.lng;return P&&j},overlaps:function(s){s=he(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),w=s.getNorthEast(),P=w.lat>l.lat&&m.lat<d.lat,j=w.lng>l.lng&&m.lng<d.lng;return P&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=he(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(s,l){return s instanceof ce?s:new ce(s,l)}function me(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}me.prototype={equals:function(s,l){if(!s)return!1;s=ge(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Vt.distance(this,ge(s))},wrap:function(){return Vt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return he([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function ge(s,l,d){return s instanceof me?s:C(s)&&typeof s[0]!="object"?s.length===3?new me(s[0],s[1],s[2]):s.length===2?new me(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new me(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new me(s,l,d)}var at={latLngToPoint:function(s,l){var d=this.projection.project(s),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(s,l){var d=this.scale(l),m=this.transformation.untransform(s,d);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),m=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new fe(m,w)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?p(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?p(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new me(d,l,m)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,w=l.lng-d.lng;if(m===0&&w===0)return s;var P=s.getSouthWest(),j=s.getNorthEast(),$=new me(P.lat-m,P.lng-w),G=new me(j.lat-m,j.lng-w);return new ce($,G)}},Vt=r({},at,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,m=s.lat*d,w=l.lat*d,P=Math.sin((l.lat-s.lat)*d/2),j=Math.sin((l.lng-s.lng)*d/2),$=P*P+Math.cos(m)*Math.cos(w)*j*j,G=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*G}}),Ji=6378137,Uo={R:Ji,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,s.lat),-d),w=Math.sin(m*l);return new K(this.R*s.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var l=180/Math.PI;return new me((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ji*Math.PI;return new fe([-s,-s],[s,s])}()};function Fs(s,l,d,m){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=m}Fs.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new K((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function wi(s,l,d,m){return new Fs(s,l,d,m)}var er=r({},Vt,{code:"EPSG:3857",projection:Uo,transformation:function(){var s=.5/(Math.PI*Uo.R);return wi(s,.5,-s,.5)}()}),Bo=r({},er,{code:"EPSG:900913"});function zs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Dr(s,l){var d="",m,w,P,j,$,G;for(m=0,P=s.length;m<P;m++){for($=s[m],w=0,j=$.length;w<j;w++)G=$[w],d+=(w?"L":"M")+G.x+" "+G.y;d+=l?ae.svg?"z":"x":""}return d||"M0 0"}var tr=document.documentElement.style,xi="ActiveXObject"in window,_t=xi&&!document.addEventListener,ft="msLaunchUri"in navigator&&!("documentMode"in document),de=pn("webkit"),Ge=pn("android"),jt=pn("android 2")||pn("android 3"),jn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ft=Ge&&pn("Google")&&jn<537&&!("AudioNode"in window),ii=!!window.opera,Us=!ft&&pn("chrome"),Ho=pn("gecko")&&!de&&!ii&&!xi,Ep=!Us&&pn("safari"),Hc=pn("phantom"),Cl="OTransition"in tr,Wc=navigator.platform.indexOf("Win")===0,Or=xi&&"transition"in tr,Bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jt,Wo="MozPerspective"in tr,nr=!window.L_DISABLE_3D&&(Or||Bs||Wo)&&!Cl&&!Hc,Vr=typeof orientation<"u"||pn("mobile"),$o=Vr&&de,$c=Vr&&Bs,jr=!window.PointerEvent&&window.MSPointerEvent,Al=!!(window.PointerEvent||jr),Nt="ontouchstart"in window||!!window.TouchEvent,qc=!window.L_NO_TOUCH&&(Nt||Al),Hs=Vr&&ii,Ws=Vr&&Ho,Sp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,bp=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),Fr=function(){return!!document.createElement("canvas").getContext}(),kl=!!(document.createElementNS&&zs("svg").createSVGRect),Pp=!!kl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qo=!kl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Gc=navigator.platform.indexOf("Mac")===0,Kc=navigator.platform.indexOf("Linux")===0;function pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:xi,ielt9:_t,edge:ft,webkit:de,android:Ge,android23:jt,androidStock:Ft,opera:ii,chrome:Us,gecko:Ho,safari:Ep,phantom:Hc,opera12:Cl,win:Wc,ie3d:Or,webkit3d:Bs,gecko3d:Wo,any3d:nr,mobile:Vr,mobileWebkit:$o,mobileWebkit3d:$c,msPointer:jr,pointer:Al,touch:qc,touchNative:Nt,mobileOpera:Hs,mobileGecko:Ws,retina:Sp,passiveEvents:bp,canvas:Fr,svg:kl,vml:qo,inlineSvg:Pp,mac:Gc,linux:Kc},Zc=ae.msPointer?"MSPointerDown":"pointerdown",ri=ae.msPointer?"MSPointerMove":"pointermove",Rl=ae.msPointer?"MSPointerUp":"pointerup",Nl=ae.msPointer?"MSPointerCancel":"pointercancel",$s={touchstart:Zc,touchmove:ri,touchend:Rl,touchcancel:Nl},Go={touchstart:Ml,touchmove:Fn,touchend:Fn,touchcancel:Fn},ir={},Yc=!1;function Qc(s,l,d){return l==="touchstart"&&qs(),Go[l]?(d=Go[l].bind(this,d),s.addEventListener($s[l],d,!1),d):(console.warn("wrong event specified:",l),y)}function Ip(s,l,d){if(!$s[l]){console.warn("wrong event specified:",l);return}s.removeEventListener($s[l],d,!1)}function Ko(s){ir[s.pointerId]=s}function Xc(s){ir[s.pointerId]&&(ir[s.pointerId]=s)}function Zo(s){delete ir[s.pointerId]}function qs(){Yc||(document.addEventListener(Zc,Ko,!0),document.addEventListener(ri,Xc,!0),document.addEventListener(Rl,Zo,!0),document.addEventListener(Nl,Zo,!0),Yc=!0)}function Fn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in ir)l.touches.push(ir[d]);l.changedTouches=[l],s(l)}}function Ml(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&vt(l),Fn(s,l)}function Cp(s){var l={},d,m;for(m in s)d=s[m],l[m]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Jc=200;function eh(s,l){s.addEventListener("dblclick",l);var d=0,m;function w(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var j=jl(P);if(!(j.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!j.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Jc?(m++,m===2&&l(Cp(P))):m=1,d=$}}}return s.addEventListener("click",w),{dblclick:l,simDblclick:w}}function th(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Gs=Yo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),rr=Yo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ll=rr==="webkitTransition"||rr==="OTransition"?rr+"End":"transitionend";function Dl(s){return typeof s=="string"?document.getElementById(s):s}function zr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);d=m?m[l]:null}return d==="auto"?null:d}function Le(s,l,d){var m=document.createElement(s);return m.className=l||"",d&&d.appendChild(m),m}function je(s){var l=s.parentNode;l&&l.removeChild(s)}function on(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function zn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Un(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ks(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=Ti(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=I(l),m=0,w=d.length;m<w;m++)s.classList.add(d[m]);else if(!Ks(s,l)){var P=Ti(s);sr(s,(P?P+" ":"")+l)}}function Ke(s,l){s.classList!==void 0?s.classList.remove(l):sr(s,T((" "+Ti(s)+" ").replace(" "+l+" "," ")))}function sr(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Ti(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function mn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&nh(s,l)}function nh(s,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+m+"(opacity="+l+")"}function Yo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function or(s,l,d){var m=l||new K(0,0);s.style[Gs]=(ae.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function lt(s,l){s._leaflet_pos=l,ae.any3d?or(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function ar(s){return s._leaflet_pos||new K(0,0)}var si,Pn,Qo;if("onselectstart"in document)si=function(){Te(window,"selectstart",vt)},Pn=function(){We(window,"selectstart",vt)};else{var Ur=Yo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);si=function(){if(Ur){var s=document.documentElement.style;Qo=s[Ur],s[Ur]="none"}},Pn=function(){Ur&&(document.documentElement.style[Ur]=Qo,Qo=void 0)}}function Xo(){Te(window,"dragstart",vt)}function Jo(){We(window,"dragstart",vt)}var Zs,Ei;function Ol(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ea(),Zs=s,Ei=s.style.outlineStyle,s.style.outlineStyle="none",Te(window,"keydown",ea))}function ea(){Zs&&(Zs.style.outlineStyle=Ei,Zs=void 0,Ei=void 0,We(window,"keydown",ea))}function ih(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Bn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Ap={__proto__:null,TRANSFORM:Gs,TRANSITION:rr,TRANSITION_END:Ll,get:Dl,getStyle:zr,create:Le,remove:je,empty:on,toFront:zn,toBack:Un,hasClass:Ks,addClass:se,removeClass:Ke,setClass:sr,getClass:Ti,setOpacity:mn,testProp:Yo,setTransform:or,setPosition:lt,getPosition:ar,get disableTextSelection(){return si},get enableTextSelection(){return Pn},disableImageDrag:Xo,enableImageDrag:Jo,preventOutline:Ol,restoreOutline:ea,getSizedParentNode:ih,getScale:Bn};function Te(s,l,d,m){if(l&&typeof l=="object")for(var w in l)ta(s,w,l[w],d);else{l=I(l);for(var P=0,j=l.length;P<j;P++)ta(s,l[P],d,m)}return this}var an="_leaflet_events";function We(s,l,d,m){if(arguments.length===1)Br(s),delete s[an];else if(l&&typeof l=="object")for(var w in l)Ys(s,w,l[w],d);else if(l=I(l),arguments.length===2)Br(s,function($){return z(l,$)!==-1});else for(var P=0,j=l.length;P<j;P++)Ys(s,l[P],d,m);return this}function Br(s,l){for(var d in s[an]){var m=d.split(/\d/)[0];(!l||l(m))&&Ys(s,m,null,null,d)}}var lr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ta(s,l,d,m){var w=l+c(d)+(m?"_"+c(m):"");if(s[an]&&s[an][w])return this;var P=function($){return d.call(m||s,$||window.event)},j=P;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?P=Qc(s,l,P):ae.touch&&l==="dblclick"?P=eh(s,P):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(lr[l]||l,P,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function($){$=$||window.event,zl(s,$)&&j($)},s.addEventListener(lr[l],P,!1)):s.addEventListener(l,j,!1):s.attachEvent("on"+l,P),s[an]=s[an]||{},s[an][w]=P}function Ys(s,l,d,m,w){w=w||l+c(d)+(m?"_"+c(m):"");var P=s[an]&&s[an][w];if(!P)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?Ip(s,l,P):ae.touch&&l==="dblclick"?th(s,P):"removeEventListener"in s?s.removeEventListener(lr[l]||l,P,!1):s.detachEvent("on"+l,P),s[an][w]=null}function ze(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Vl(s){return ta(s,"wheel",ze),this}function Qs(s){return Te(s,"mousedown touchstart dblclick contextmenu",ze),s._leaflet_disable_click=!0,this}function vt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Si(s){return vt(s),ze(s),this}function jl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Xs(s,l){if(!l)return new K(s.clientX,s.clientY);var d=Bn(l),m=d.boundingClientRect;return new K((s.clientX-m.left)/d.x-l.clientLeft,(s.clientY-m.top)/d.y-l.clientTop)}var bi=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fl(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/bi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function zl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Js={__proto__:null,on:Te,off:We,stopPropagation:ze,disableScrollPropagation:Vl,disableClickPropagation:Qs,preventDefault:vt,stop:Si,getPropagationPath:jl,getMousePosition:Xs,getWheelDelta:Fl,isExternalTarget:zl,addListener:Te,removeListener:We},Ul=ke.extend({run:function(s,l,d,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ar(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),lt(this._el,d),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ie=ke.extend({options:{crs:er,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=R(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ge(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=rr&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,Ll,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ge(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var m=this.getZoomScale(l),w=this.getSize().divideBy(2),P=s instanceof K?s:this.latLngToContainerPoint(s),j=P.subtract(w).multiplyBy(1-1/m),$=this.containerPointToLatLng(w.add(j));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():he(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),m=J(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(s,!1,d.add(m));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var P=m.subtract(d).divideBy(2),j=this.project(s.getSouthWest(),w),$=this.project(s.getNorthEast(),w),G=this.unproject(j.add($).divideBy(2).add(P),w);return{center:G,zoom:w}},fitBounds:function(s,l){if(s=he(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ul,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ae.any3d)return this.setView(s,l,d);this._stop();var m=this.project(this.getCenter()),w=this.project(s),P=this.getSize(),j=this._zoom;s=ge(s),l=l===void 0?j:l;var $=Math.max(P.x,P.y),G=$*this.getZoomScale(j,l),Q=w.distanceTo(m)||1,ie=1.42,ve=ie*ie;function Ce(wt){var vh=wt?-1:1,q2=wt?G:$,G2=G*G-$*$+vh*ve*ve*Q*Q,K2=2*q2*ve*Q,Lp=G2/K2,A0=Math.sqrt(Lp*Lp+1)-Lp,Z2=A0<1e-9?-18:Math.log(A0);return Z2}function ln(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Mt(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function $n(wt){return ln(wt)/Mt(wt)}var yn=Ce(0);function pa(wt){return $*(Mt(yn)/Mt(yn+ie*wt))}function B2(wt){return $*(Mt(yn)*$n(yn+ie*wt)-ln(yn))/ve}function H2(wt){return 1-Math.pow(1-wt,1.5)}var W2=Date.now(),I0=(Ce(1)-yn)/ie,$2=d.duration?1e3*d.duration:1e3*I0*.8;function C0(){var wt=(Date.now()-W2)/$2,vh=H2(wt)*I0;wt<=1?(this._flyToFrame=D(C0,this),this._move(this.unproject(m.add(w.subtract(m).multiplyBy(B2(vh)/Q)),j),this.getScaleZoom($/pa(vh),j),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),C0.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=he(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,he(s));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),m=J(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),P=this.project(s),j=this.getPixelBounds(),$=Z([j.min.add(d),j.max.subtract(m)]),G=$.getSize();if(!$.contains(P)){this._enforcingBounds=!0;var Q=P.subtract($.getCenter()),ie=$.extend(P).getSize().subtract(G);w.x+=Q.x<0?-ie.x:ie.x,w.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),w=d.divideBy(2).round(),P=m.subtract(w);return!P.x&&!P.y?this:(s.animate&&s.pan?this.panBy(P):(s.pan&&this._rawPanBy(P),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,m=new me(l,d),w=m.toBounds(s.coords.accuracy*2),P=this._locateOptions;if(P.setView){var j=this.getBoundsZoom(w);this.setView(m,P.maxZoom?Math.min(j,P.maxZoom):j)}var $={latlng:m,bounds:w,timestamp:s.timestamp};for(var G in s.coords)typeof s.coords[G]=="number"&&($[G]=s.coords[G]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Le("div",d,l||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new ce(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=he(s),d=J(d||[0,0]);var m=this.getZoom()||0,w=this.getMinZoom(),P=this.getMaxZoom(),j=s.getNorthWest(),$=s.getSouthEast(),G=this.getSize().subtract(d),Q=Z(this.project($,m),this.project(j,m)).getSize(),ie=ae.any3d?this.options.zoomSnap:1,ve=G.x/Q.x,Ce=G.y/Q.y,ln=l?Math.max(ve,Ce):Math.min(ve,Ce);return m=this.getScaleZoom(ln,m),ie&&(m=Math.round(m/(ie/100))*(ie/100),m=l?Math.ceil(m/ie)*ie:Math.floor(m/ie)*ie),Math.max(w,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(s*d.scale(l));return isNaN(m)?1/0:m},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ge(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ge(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(he(s))},distance:function(s,l){return this.options.crs.distance(ge(s),ge(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return Xs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Dl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Te(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=zr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),lt(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){lt(this._mapPane,new K(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(s,l)._moveEnd(w),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,m){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){lt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?We:Te;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],m,w=l==="mouseout"||l==="mouseover",P=s.target||s.srcElement,j=!1;P;){if(m=this._targets[c(P)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){j=!0;break}if(m&&m.listens(l,!0)&&(w&&!zl(P,s)||(d.push(m),w))||P===this._container)break;P=P.parentNode}return!d.length&&!j&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Ol(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var m=r({},s);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var w=this._findEventTargets(s,l);if(d){for(var P=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&P.push(d[j]);w=P.concat(w)}if(w.length){l==="contextmenu"&&vt(s);var $=w[0],G={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=$.getLatLng&&(!$._radius||$._radius<=10);G.containerPoint=Q?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=Q?$.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(j=0;j<w.length;j++)if(w[j].fire(l,G,!0),G.originalEvent._stopped||w[j].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return ar(this._mapPane)||new K(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return Z([this.project(s.getSouthWest(),l)._subtract(m),this.project(s.getNorthWest(),l)._subtract(m),this.project(s.getSouthEast(),l)._subtract(m),this.project(s.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var m=this.project(s,l),w=this.getSize().divideBy(2),P=new fe(m.subtract(w),m.add(w)),j=this._getBoundsOffset(P,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?s:this.unproject(m.add(j),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),m=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(s,l,d){var m=Z(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=m.min.subtract(s.min),P=m.max.subtract(s.max),j=this._rebound(w.x,-P.x),$=this._rebound(w.y,-P.y);return new K(j,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),m=ae.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Gs,m=this._proxy.style[d];or(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();or(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),w=this._getCenterOffset(s)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(w)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function na(s,l){return new Ie(s,l)}var gn=ne.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),m=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Pi=function(s){return new gn(s)};Ie.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Le("div",l+"control-container",this._container);function m(w,P){var j=l+w+" "+l+P;s[w+P]=Le("div",j,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)je(this._controlCorners[s]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rh=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(s,l,d){R(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Le("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Qs(l),Vl(l);var m=this._section=Le("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Te(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Le("a",s+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),Te(w,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){vt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Le("div",s+"-base",m),this._separator=Le("div",s+"-separator",m),this._overlaysList=Le("div",s+"-overlays",m),l.appendChild(m)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(m,w){return this.options.sortFunction(m.layer,w.layer,m.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var s,l,d,m,w=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,s=s||!m.overlay,w+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(m),m.layerId=c(s.layer),Te(m,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(m),P.appendChild(w);var j=s.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,m=[],w=[];this._handlingClick=!0;for(var P=s.length-1;P>=0;P--)l=s[P],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||w.push(d);for(P=0;P<w.length;P++)this._map.hasLayer(w[P])&&this._map.removeLayer(w[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,m=this._map.getZoom(),w=s.length-1;w>=0;w--)l=s[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Te(s,"click",vt),this.expand();var l=this;setTimeout(function(){We(s,"click",vt),l._preventClick=!1})}}),sh=function(s,l,d){return new rh(s,l,d)},ur=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Le("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,m,w){var P=Le("a",d,m);return P.innerHTML=s,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),Qs(P),Te(P,"click",Si),Te(P,"click",w,this),Te(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ke(this._zoomInButton,l),Ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ur,this.addControl(this.zoomControl))});var oh=function(s){return new ur(s)},Bl=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Le("div",l),m=this.options;return this._addScales(m,l+"-line",d),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Le("div",l,d)),s.imperial&&(this._iScale=Le("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,m,w;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Hl=function(s){return new Bl(s)},Wl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ia=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Wl+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),Qs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new ia().addTo(this)});var ra=function(s){return new ia(s)};gn.Layers=rh,gn.Zoom=ur,gn.Scale=Bl,gn.Attribution=ia,Pi.layers=sh,Pi.zoom=oh,Pi.scale=Hl,Pi.attribution=ra;var In=ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(s,l){return s.addHandler(l,this),this};var ah={Events:Oe},Ii=ae.touch?"touchstart mousedown":"mousedown",oi=ke.extend({options:{clickTolerance:3},initialize:function(s,l,d,m){R(this,m),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Te(this._dragStartTarget,Ii,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(!0),We(this._dragStartTarget,Ii,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ks(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){oi._dragging===this&&this.finishDrag();return}if(!(oi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(oi._dragging=this,this._preventOutline&&Ol(this._element),Xo(),si(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=ih(this._element);this._startPoint=new K(l.clientX,l.clientY),this._startPos=ar(this._element),this._parentScale=Bn(d);var m=s.type==="mousedown";Te(document,m?"mousemove":"touchmove",this._onMove,this),Te(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new K(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,vt(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),lt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),We(document,"mousemove touchmove",this._onMove,this),We(document,"mouseup touchend touchcancel",this._onUp,this),Jo(),Pn();var l=this._moved&&this._moving;this._moving=!1,oi._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function $l(s,l,d){var m,w=[1,4,2,8],P,j,$,G,Q,ie,ve,Ce;for(P=0,ie=s.length;P<ie;P++)s[P]._code=q(s[P],l);for($=0;$<4;$++){for(ve=w[$],m=[],P=0,ie=s.length,j=ie-1;P<ie;j=P++)G=s[P],Q=s[j],G._code&ve?Q._code&ve||(Ce=W(Q,G,ve,l,d),Ce._code=q(Ce,l),m.push(Ce)):(Q._code&ve&&(Ce=W(Q,G,ve,l,d),Ce._code=q(Ce,l),m.push(Ce)),m.push(G));s=m}return s}function ql(s,l){var d,m,w,P,j,$,G,Q,ie;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=ge([0,0]),Ce=he(s),ln=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());ln<1700&&(ve=sa(s));var Mt=s.length,$n=[];for(d=0;d<Mt;d++){var yn=ge(s[d]);$n.push(l.project(ge([yn.lat-ve.lat,yn.lng-ve.lng])))}for($=G=Q=0,d=0,m=Mt-1;d<Mt;m=d++)w=$n[d],P=$n[m],j=w.y*P.x-P.y*w.x,G+=(w.x+P.x)*j,Q+=(w.y+P.y)*j,$+=j*3;$===0?ie=$n[0]:ie=[G/$,Q/$];var pa=l.unproject(J(ie));return ge([pa.lat+ve.lat,pa.lng+ve.lng])}function sa(s){for(var l=0,d=0,m=0,w=0;w<s.length;w++){var P=ge(s[w]);l+=P.lat,d+=P.lng,m++}return ge([l/m,d/m])}var oa={__proto__:null,clipPolygon:$l,polygonCenter:ql,centroid:sa};function Gt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=_(s,d),s=Hr(s,d),s}function Gl(s,l,d){return Math.sqrt(Ee(s,l,d,!0))}function lh(s,l,d){return Ee(s,l,d)}function Hr(s,l){var d=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,w=new m(d);w[0]=w[d-1]=1,h(s,w,l,0,d-1);var P,j=[];for(P=0;P<d;P++)w[P]&&j.push(s[P]);return j}function h(s,l,d,m,w){var P=0,j,$,G;for($=m+1;$<=w-1;$++)G=Ee(s[$],s[m],s[w],!0),G>P&&(j=$,P=G);P>d&&(l[j]=1,h(s,l,d,m,j),h(s,l,d,j,w))}function _(s,l){for(var d=[s[0]],m=1,w=0,P=s.length;m<P;m++)te(s[m],s[w])>l&&(d.push(s[m]),w=m);return w<P-1&&d.push(s[P-1]),d}var x;function A(s,l,d,m,w){var P=m?x:q(s,d),j=q(l,d),$,G,Q;for(x=j;;){if(!(P|j))return[s,l];if(P&j)return!1;$=P||j,G=W(s,l,$,d,w),Q=q(G,d),$===P?(s=G,P=Q):(l=G,j=Q)}}function W(s,l,d,m,w){var P=l.x-s.x,j=l.y-s.y,$=m.min,G=m.max,Q,ie;return d&8?(Q=s.x+P*(G.y-s.y)/j,ie=G.y):d&4?(Q=s.x+P*($.y-s.y)/j,ie=$.y):d&2?(Q=G.x,ie=s.y+j*(G.x-s.x)/P):d&1&&(Q=$.x,ie=s.y+j*($.x-s.x)/P),new K(Q,ie,w)}function q(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,m=l.y-s.y;return d*d+m*m}function Ee(s,l,d,m){var w=l.x,P=l.y,j=d.x-w,$=d.y-P,G=j*j+$*$,Q;return G>0&&(Q=((s.x-w)*j+(s.y-P)*$)/G,Q>1?(w=d.x,P=d.y):Q>0&&(w+=j*Q,P+=$*Q)),j=s.x-w,$=s.y-P,m?j*j+$*$:new K(w,P)}function Fe(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ue(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fe(s)}function pt(s,l){var d,m,w,P,j,$,G,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=ge([0,0]),ve=he(s),Ce=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());Ce<1700&&(ie=sa(s));var ln=s.length,Mt=[];for(d=0;d<ln;d++){var $n=ge(s[d]);Mt.push(l.project(ge([$n.lat-ie.lat,$n.lng-ie.lng])))}for(d=0,m=0;d<ln-1;d++)m+=Mt[d].distanceTo(Mt[d+1])/2;if(m===0)Q=Mt[0];else for(d=0,P=0;d<ln-1;d++)if(j=Mt[d],$=Mt[d+1],w=j.distanceTo($),P+=w,P>m){G=(P-m)/w,Q=[$.x-G*($.x-j.x),$.y-G*($.y-j.y)];break}var yn=l.unproject(J(Q));return ge([yn.lat+ie.lat,yn.lng+ie.lng])}var Hn={__proto__:null,simplify:Gt,pointToSegmentDistance:Gl,closestPointOnSegment:lh,clipSegment:A,_getEdgeIntersection:W,_getBitCode:q,_sqClosestPointOnSegment:Ee,isFlat:Fe,_flat:Ue,polylineCenter:pt},ai={project:function(s){return new K(s.lng,s.lat)},unproject:function(s){return new me(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},Wn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,m=s.lat*l,w=this.R_MINOR/d,P=Math.sqrt(1-w*w),j=P*Math.sin(m),$=Math.tan(Math.PI/4-m/2)/Math.pow((1-j)/(1+j),P/2);return m=-d*Math.log(Math.max($,1e-10)),new K(s.lng*l*d,m)},unproject:function(s){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,w=Math.sqrt(1-m*m),P=Math.exp(-s.y/d),j=Math.PI/2-2*Math.atan(P),$=0,G=.1,Q;$<15&&Math.abs(G)>1e-7;$++)Q=w*Math.sin(j),Q=Math.pow((1-Q)/(1+Q),w/2),G=Math.PI/2-2*Math.atan(P*Q)-j,j+=G;return new me(j*l,s.x*l/d)}},Ci={__proto__:null,LonLat:ai,Mercator:Wn,SphericalMercator:Uo},aa=r({},Vt,{code:"EPSG:3395",projection:Wn,transformation:function(){var s=.5/(Math.PI*Wn.R);return wi(s,.5,-s,.5)}()}),la=r({},Vt,{code:"EPSG:4326",projection:ai,transformation:wi(1/180,1,-1/180,.5)}),w2=r({},at,{projection:ai,transformation:wi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,m=l.lat-s.lat;return Math.sqrt(d*d+m*m)},infinite:!0});at.Earth=Vt,at.EPSG3395=aa,at.EPSG3857=er,at.EPSG900913=Bo,at.EPSG4326=la,at.Simple=w2;var li=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var w=this._zoomBoundLayers[m].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ua=li.extend({initialize:function(s,l){R(this,l),this._layers={};var d,m;if(s)for(d=0,m=s.length;d<m;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[s]&&m[s].apply(m,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),x2=function(s,l){return new ua(s,l)},cr=ua.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ua.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ua.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ce;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),T2=function(s,l){return new cr(s,l)},ca=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var w=J(m),P=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),P&&(s.style.marginLeft=-P.x+"px",s.style.marginTop=-P.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function E2(s){return new ca(s)}var Kl=ca.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Kl.imagePath!="string"&&(Kl.imagePath=this._detectIconPath()),(this.options.imagePath||Kl.imagePath)+ca.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,m,w){var P=m.exec(d);return P&&P[w]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Le("div","leaflet-default-icon-path",document.body),l=zr(s,"background-image")||zr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),l0=In.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new oi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,P=ar(l._icon),j=d.getPixelBounds(),$=d.getPixelOrigin(),G=Z(j.min._subtract($).add(w),j.max._subtract($).subtract(w));if(!G.contains(P)){var Q=J((Math.max(G.max.x,P.x)-G.max.x)/(j.max.x-G.max.x)-(Math.min(G.min.x,P.x)-G.min.x)/(j.min.x-G.min.x),(Math.max(G.max.y,P.y)-G.max.y)/(j.max.y-G.max.y)-(Math.min(G.min.y,P.y)-G.min.y)/(j.min.y-G.min.y)).multiplyBy(m);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),lt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,m=ar(l._icon),w=l._map.layerPointToLatLng(m);d&&lt(d,m),l._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),uh=li.extend({options:{icon:new Kl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){R(this,l),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(d,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),P=!1;w!==this._shadow&&(this._removeShadow(),P=!0),w&&(se(w,l),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&P&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&lt(this._icon,s),this._shadow&&lt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),l0)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new l0(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&mn(this._icon,s),this._shadow&&mn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),m=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function S2(s,l){return new uh(s,l)}var Wr=li.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ch=Wr.extend({options:{fill:!0,radius:10},initialize:function(s,l){R(this,l),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Wr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),m=[s+d,l+d];this._pxBounds=new fe(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function b2(s,l){return new ch(s,l)}var kp=ch.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),R(this,l),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Wr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===Vt.distance){var w=Math.PI/180,P=this._mRadius/Vt.R/w,j=d.project([l+P,s]),$=d.project([l-P,s]),G=j.add($).divideBy(2),Q=d.unproject(G).lat,ie=Math.acos((Math.cos(P*w)-Math.sin(l*w)*Math.sin(Q*w))/(Math.cos(l*w)*Math.cos(Q*w)))/w;(isNaN(ie)||ie===0)&&(ie=P/Math.cos(Math.PI/180*l)),this._point=G.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:G.x-d.project([Q,s-ie]).x,this._radiusY=G.y-j.y}else{var ve=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ve).x}this._updateBounds()}});function P2(s,l,d){return new kp(s,l,d)}var hr=Wr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){R(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,m=Ee,w,P,j=0,$=this._parts.length;j<$;j++)for(var G=this._parts[j],Q=1,ie=G.length;Q<ie;Q++){w=G[Q-1],P=G[Q];var ve=m(s,w,P,!0);ve<l&&(l=ve,d=m(s,w,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ge(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ce,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Fe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Fe(s),m=0,w=s.length;m<w;m++)d?(l[m]=ge(s[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(s[m]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new K(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var m=s[0]instanceof me,w=s.length,P,j;if(m){for(j=[],P=0;P<w;P++)j[P]=this._map.latLngToLayerPoint(s[P]),d.extend(j[P]);l.push(j)}else for(P=0;P<w;P++)this._projectLatlngs(s[P],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,w,P,j,$,G;for(d=0,w=0,P=this._rings.length;d<P;d++)for(G=this._rings[d],m=0,j=G.length;m<j-1;m++)$=A(G[m],G[m+1],s,m,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==G[m+1]||m===j-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,m=s.length;d<m;d++)s[d]=Gt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,m,w,P,j,$,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,P=this._parts.length;d<P;d++)for($=this._parts[d],m=0,j=$.length,w=j-1;m<j;w=m++)if(!(!l&&m===0)&&Gl(s,$[w],$[m])<=G)return!0;return!1}});function I2(s,l){return new hr(s,l)}hr._flat=Ue;var ha=hr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ql(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=hr.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof me&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){hr.prototype._setLatLngs.call(this,s),Fe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new K(l,l);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,w=this._rings.length,P;m<w;m++)P=$l(this._rings[m],s,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,m,w,P,j,$,G,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(P=0,G=this._parts.length;P<G;P++)for(d=this._parts[P],j=0,Q=d.length,$=Q-1;j<Q;$=j++)m=d[j],w=d[$],m.y>s.y!=w.y>s.y&&s.x<(w.x-m.x)*(s.y-m.y)/(w.y-m.y)+m.x&&(l=!l);return l||hr.prototype._containsPoint.call(this,s,!0)}});function C2(s,l){return new ha(s,l)}var dr=cr.extend({initialize:function(s,l){R(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,m,w;if(l){for(d=0,m=l.length;d<m;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var P=this.options;if(P.filter&&!P.filter(s))return this;var j=hh(s,P);return j?(j.feature=ph(s),j.defaultOptions=j.options,this.resetStyle(j),P.onEachFeature&&P.onEachFeature(s,j),this.addLayer(j)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function hh(s,l){var d=s.type==="Feature"?s.geometry:s,m=d?d.coordinates:null,w=[],P=l&&l.pointToLayer,j=l&&l.coordsToLatLng||Rp,$,G,Q,ie;if(!m&&!d)return null;switch(d.type){case"Point":return $=j(m),u0(P,s,$,l);case"MultiPoint":for(Q=0,ie=m.length;Q<ie;Q++)$=j(m[Q]),w.push(u0(P,s,$,l));return new cr(w);case"LineString":case"MultiLineString":return G=dh(m,d.type==="LineString"?0:1,j),new hr(G,l);case"Polygon":case"MultiPolygon":return G=dh(m,d.type==="Polygon"?1:2,j),new ha(G,l);case"GeometryCollection":for(Q=0,ie=d.geometries.length;Q<ie;Q++){var ve=hh({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ve&&w.push(ve)}return new cr(w);case"FeatureCollection":for(Q=0,ie=d.features.length;Q<ie;Q++){var Ce=hh(d.features[Q],l);Ce&&w.push(Ce)}return new cr(w);default:throw new Error("Invalid GeoJSON object.")}}function u0(s,l,d,m){return s?s(l,d):new uh(d,m&&m.markersInheritOptions&&m)}function Rp(s){return new me(s[1],s[0],s[2])}function dh(s,l,d){for(var m=[],w=0,P=s.length,j;w<P;w++)j=l?dh(s[w],l-1,d):(d||Rp)(s[w]),m.push(j);return m}function Np(s,l){return s=ge(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function fh(s,l,d,m){for(var w=[],P=0,j=s.length;P<j;P++)w.push(l?fh(s[P],Fe(s[P])?0:l-1,d,m):Np(s[P],m));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function da(s,l){return s.feature?r({},s.feature,{geometry:l}):ph(l)}function ph(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Mp={toGeoJSON:function(s){return da(this,{type:"Point",coordinates:Np(this.getLatLng(),s)})}};uh.include(Mp),kp.include(Mp),ch.include(Mp),hr.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=fh(this._latlngs,l?1:0,!1,s);return da(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ha.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=l&&!Fe(this._latlngs[0]),m=fh(this._latlngs,d?2:l?1:0,!0,s);return l||(m=[m]),da(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),ua.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),da(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(w){if(w.toGeoJSON){var P=w.toGeoJSON(s);if(d)m.push(P.geometry);else{var j=ph(P);j.type==="FeatureCollection"?m.push.apply(m,j.features):m.push(j)}}}),d?da(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function c0(s,l){return new dr(s,l)}var A2=c0,mh=li.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=he(l),R(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&Un(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=he(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Le("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;or(this._image,d,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();lt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),k2=function(s,l,d){return new mh(s,l,d)},h0=mh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Le("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),m=[],w=0;w<d.length;w++)m.push(d[w].src);this._url=d.length>0?m:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var j=Le("source");j.src=this._url[P],l.appendChild(j)}}});function R2(s,l,d){return new h0(s,l,d)}var d0=mh.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function N2(s,l,d){return new d0(s,l,d)}var Ai=li.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof me||C(s))?(this._latlng=ge(s),R(this,l)):(R(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&mn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(mn(this._container,0),this._removeTimeout=setTimeout(a(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&Un(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof cr){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?lt(this._container,s.add(d)):l=l.add(s).add(d);var m=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(s,l,d,m){var w=l;return w instanceof s||(w=new s(m).setContent(l)),d&&w.setLatLng(d),w}}),li.include({_initOverlay:function(s,l,d,m){var w=d;return w instanceof s?(R(w,m),w._source=this):(w=l&&!m?l:new s(m,this),w.setContent(d)),w}});var gh=Ai.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ai.prototype.openOn.call(this,s)},onAdd:function(s){Ai.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Wr||this._source.on("preclick",ze))},onRemove:function(s){Ai.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Wr||this._source.off("preclick",ze))},getEvents:function(){var s=Ai.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Le("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Le("div",s+"-content-wrapper",l);if(this._contentNode=Le("div",s+"-content",d),Qs(l),Vl(this._contentNode),Te(l,"contextmenu",ze),this._tipContainer=Le("div",s+"-tip-container",l),this._tip=Le("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Le("a",s+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Te(m,"click",function(w){vt(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=s.offsetHeight,w=this.options.maxHeight,P="leaflet-popup-scrolled";w&&m>w?(l.height=w+"px",se(s,P)):Ke(s,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(zr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,w=new K(this._containerLeft,-d-this._containerBottom);w._add(ar(this._container));var P=s.layerPointToContainerPoint(w),j=J(this.options.autoPanPadding),$=J(this.options.autoPanPaddingTopLeft||j),G=J(this.options.autoPanPaddingBottomRight||j),Q=s.getSize(),ie=0,ve=0;P.x+m+G.x>Q.x&&(ie=P.x+m-Q.x+G.x),P.x-ie-$.x<0&&(ie=P.x-$.x),P.y+d+G.y>Q.y&&(ve=P.y+d-Q.y+G.y),P.y-ve-$.y<0&&(ve=P.y-$.y),(ie||ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,ve]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),M2=function(s,l){return new gh(s,l)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(s,l,d){return this._initOverlay(gh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),li.include({bindPopup:function(s,l){return this._popup=this._initOverlay(gh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof cr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Si(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Wr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var yh=Ai.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ai.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ai.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ai.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,m=this._map,w=this._container,P=m.latLngToContainerPoint(m.getCenter()),j=m.layerPointToContainerPoint(s),$=this.options.direction,G=w.offsetWidth,Q=w.offsetHeight,ie=J(this.options.offset),ve=this._getAnchor();$==="top"?(l=G/2,d=Q):$==="bottom"?(l=G/2,d=0):$==="center"?(l=G/2,d=Q/2):$==="right"?(l=0,d=Q/2):$==="left"?(l=G,d=Q/2):j.x<P.x?($="right",l=0,d=Q/2):($="left",l=G+(ie.x+ve.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ie).add(ve),Ke(w,"leaflet-tooltip-right"),Ke(w,"leaflet-tooltip-left"),Ke(w,"leaflet-tooltip-top"),Ke(w,"leaflet-tooltip-bottom"),se(w,"leaflet-tooltip-"+$),lt(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&mn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),L2=function(s,l){return new yh(s,l)};Ie.include({openTooltip:function(s,l,d){return this._initOverlay(yh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),li.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof cr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Te(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Te(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,m;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var f0=ca.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(on(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=J(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function D2(s){return new f0(s)}ca.Default=Kl;var Zl=li.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof K?s:new K(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),m=0,w=l.length,P;m<w;m++)P=l[m].style.zIndex,l[m]!==this._container&&P&&(d=s(d,+P));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){mn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var m in this._tiles){var w=this._tiles[m];if(!(!w.current||!w.loaded)){var P=Math.min(1,(s-w.loaded)/200);mn(w.el,P),P<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(F(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(je(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[s],w=this._map;return m||(m=this._levels[s]={},m.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,w.getCenter(),w.getZoom()),y(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,m){var w=Math.floor(s/2),P=Math.floor(l/2),j=d-1,$=new K(+w,+P);$.z=+j;var G=this._tileCoordsToKey($),Q=this._tiles[G];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),j>m?this._retainParent(w,P,j,m):!1)},_retainChildren:function(s,l,d,m){for(var w=2*s;w<2*s+2;w++)for(var P=2*l;P<2*l+2;P++){var j=new K(w,P);j.z=d+1;var $=this._tileCoordsToKey(j),G=this._tiles[$];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);d+1<m&&this._retainChildren(w,P,d+1,m)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,m){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var P=this.options.updateWhenZooming&&w!==this._tileZoom;(!m||P)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var m=this._map.getZoomScale(d,s.zoom),w=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();ae.any3d?or(s.el,w,m):lt(s.el,w)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),w=l.project(s,this._tileZoom).floor(),P=l.getSize().divideBy(m*2);return new fe(w.subtract(P),w.add(P))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(m),P=w.getCenter(),j=[],$=this.options.keepBuffer,G=new fe(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!G.contains(new K(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ve=w.min.y;ve<=w.max.y;ve++)for(var Ce=w.min.x;Ce<=w.max.x;Ce++){var ln=new K(Ce,ve);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Mt=this._tiles[this._tileCoordsToKey(ln)];Mt?Mt.current=!0:j.push(ln)}}if(j.sort(function(yn,pa){return yn.distanceTo(P)-pa.distanceTo(P)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $n=document.createDocumentFragment();for(Ce=0;Ce<j.length;Ce++)this._addTile(j[Ce],$n);this._level.el.appendChild($n)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return he(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),m=s.scaleBy(d),w=m.add(d),P=l.unproject(m,s.z),j=l.unproject(w,s.z);return[P,j]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new ce(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new K(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(je(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,ae.ielt9&&this.options.opacity<1&&mn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),m=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&D(a(this._tileReady,this,s,null,w)),lt(w,d),this._tiles[m]={el:w,coords:s,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var m=this._tileCoordsToKey(s);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(mn(d.el,0),F(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new K(this._wrapX?p(s.x,this._wrapX):s.x,this._wrapY?p(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function O2(s){return new Zl(s)}var fa=Zl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=R(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Te(d,"load",a(this._tileOnLoad,this,l,d)),Te(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return S(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ae.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(s=l-s),s+m},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=H;var d=this._tiles[s].coords;je(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",H),Zl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===H))return Zl.prototype._tileReady.call(this,s,l,d)}});function p0(s,l){return new fa(s,l)}var m0=fa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=R(this,l);var w=l.detectRetina&&ae.retina?2:1,P=this.getTileSize();d.width=P.x*w,d.height=P.y*w,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,fa.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,m=Z(d.project(l[0]),d.project(l[1])),w=m.min,P=m.max,j=(this._wmsVersion>=1.3&&this._crs===la?[w.y,w.x,P.y,P.x]:[w.x,w.y,P.x,P.y]).join(","),$=fa.prototype.getTileUrl.call(this,s);return $+V(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function V2(s,l){return new m0(s,l)}fa.WMS=m0,p0.wms=V2;var fr=li.extend({options:{padding:.1},initialize:function(s){R(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),P=m.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(s,l));ae.any3d?or(this._container,P,d):lt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),g0=fr.extend({options:{tolerance:0},getEvents:function(){var s=fr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Te(s,"mousemove",this._onMouseMove,this),Te(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,je(this._container),We(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fr.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),m=ae.retina?2:1;lt(l,s.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){fr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],m,w;for(w=0;w<l.length;w++){if(m=Number(l[w]),isNaN(m))return;d.push(m)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,m,w,P,j=s._parts,$=j.length,G=this._ctx;if($){for(G.beginPath(),d=0;d<$;d++){for(m=0,w=j[d].length;m<w;m++)P=j[d][m],G[m?"lineTo":"moveTo"](P.x,P.y);l&&G.closePath()}this._fillStroke(G,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,m=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||m)/m;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,m,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,m,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,m,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(se(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function y0(s){return ae.canvas?new g0(s):null}var Yl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),j2={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Yl("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Yl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;je(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,m=s.options,w=s._container;w.stroked=!!m.stroke,w.filled=!!m.fill,m.stroke?(l||(l=s._stroke=Yl("stroke")),w.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=C(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(w.removeChild(l),s._stroke=null),m.fill?(d||(d=s._fill=Yl("fill")),w.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(w.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),m=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){zn(s._container)},_bringToBack:function(s){Un(s._container)}},_h=ae.vml?Yl:zs,Ql=fr.extend({_initContainer:function(){this._container=_h("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_h("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),We(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),lt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=_h("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Dr(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||d,w="a"+d+","+m+" 0 1,0 ",P=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(s,P)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){zn(s._path)},_bringToBack:function(s){Un(s._path)}});ae.vml&&Ql.include(j2);function _0(s){return ae.svg||ae.vml?new Ql(s):null}Ie.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&y0(s)||_0(s)}});var v0=ha.extend({initialize:function(s,l){ha.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=he(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function F2(s,l){return new v0(s,l)}Ql.create=_h,Ql.pointsToPath=Dr,dr.geometryToLayer=hh,dr.coordsToLatLng=Rp,dr.coordsToLatLngs=dh,dr.latLngToCoords=Np,dr.latLngsToCoords=fh,dr.getFeature=da,dr.asFeature=ph,Ie.mergeOptions({boxZoom:!0});var w0=In.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),si(),Xo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Te(document,{contextmenu:Si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),d=l.getSize();lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(je(this._box),Ke(this._container,"leaflet-crosshair")),Pn(),Jo(),We(document,{contextmenu:Si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",w0),Ie.mergeOptions({doubleClickZoom:!0});var x0=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,w=s.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(s.containerPoint,w)}});Ie.addInitHook("addHandler","doubleClickZoom",x0),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var T0=In.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new oi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=he(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,w=(m-l+d)%s+l-d,P=(m+l+d)%s-l-d,j=Math.abs(w+d)<Math.abs(P+d)?w:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(s){var l=this._map,d=l.options,m=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),m)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,$=w.multiplyBy(j/P),G=$.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,G),ie=$.multiplyBy(Q/G),ve=Q/(d.inertiaDeceleration*j),Ce=ie.multiplyBy(-ve/2).round();!Ce.x&&!Ce.y?l.fire("moveend"):(Ce=l._limitOffset(Ce,l.options.maxBounds),D(function(){l.panBy(Ce,{duration:ve,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",T0),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var E0=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Te(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),We(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,m=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,m,w;for(m=0,w=d.left.length;m<w;m++)l[d.left[m]]=[-1*s,0];for(m=0,w=d.right.length;m<w;m++)l[d.right[m]]=[s,0];for(m=0,w=d.down.length;m<w;m++)l[d.down[m]]=[0,s];for(m=0,w=d.up.length;m<w;m++)l[d.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,m,w;for(m=0,w=d.zoomIn.length;m<w;m++)l[d.zoomIn[m]]=s;for(m=0,w=d.zoomOut.length;m<w;m++)l[d.zoomOut[m]]=-s},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){We(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],s.shiftKey&&(m=J(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(J(m),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(w)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Si(s)}}});Ie.addInitHook("addHandler","keyboard",E0),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var S0=In.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Fl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),m),Si(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(w/d)*d:w,j=s._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,j&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+j):s.setZoomAround(this._lastMousePos,l+j))}});Ie.addInitHook("addHandler","scrollWheelZoom",S0);var z2=600;Ie.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var b0=In.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new K(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",vt),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),z2),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){We(document,"touchend",vt),We(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new K(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ie.addInitHook("addHandler","tapHold",b0),Ie.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var P0=In.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),vt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]),w=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(w===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var j=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(j,this,!0),vt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",P0),Ie.BoxZoom=w0,Ie.DoubleClickZoom=x0,Ie.Drag=T0,Ie.Keyboard=E0,Ie.ScrollWheelZoom=S0,Ie.TapHold=b0,Ie.TouchZoom=P0,n.Bounds=fe,n.Browser=ae,n.CRS=at,n.Canvas=g0,n.Circle=kp,n.CircleMarker=ch,n.Class=ne,n.Control=gn,n.DivIcon=f0,n.DivOverlay=Ai,n.DomEvent=Js,n.DomUtil=Ap,n.Draggable=oi,n.Evented=ke,n.FeatureGroup=cr,n.GeoJSON=dr,n.GridLayer=Zl,n.Handler=In,n.Icon=ca,n.ImageOverlay=mh,n.LatLng=me,n.LatLngBounds=ce,n.Layer=li,n.LayerGroup=ua,n.LineUtil=Hn,n.Map=Ie,n.Marker=uh,n.Mixin=ah,n.Path=Wr,n.Point=K,n.PolyUtil=oa,n.Polygon=ha,n.Polyline=hr,n.Popup=gh,n.PosAnimation=Ul,n.Projection=Ci,n.Rectangle=v0,n.Renderer=fr,n.SVG=Ql,n.SVGOverlay=d0,n.TileLayer=fa,n.Tooltip=yh,n.Transformation=Fs,n.Util=O,n.VideoOverlay=h0,n.bind=a,n.bounds=Z,n.canvas=y0,n.circle=P2,n.circleMarker=b2,n.control=Pi,n.divIcon=D2,n.extend=r,n.featureGroup=T2,n.geoJSON=c0,n.geoJson=A2,n.gridLayer=O2,n.icon=E2,n.imageOverlay=k2,n.latLng=ge,n.latLngBounds=he,n.layerGroup=x2,n.map=na,n.marker=S2,n.point=J,n.polygon=C2,n.polyline=I2,n.popup=M2,n.rectangle=F2,n.setOptions=R,n.stamp=c,n.svg=_0,n.svgOverlay=N2,n.tileLayer=p0,n.tooltip=L2,n.transformation=wi,n.version=i,n.videoOverlay=R2;var U2=window.L;n.noConflict=function(){return window.L=U2,this},window.L=n})})(Qg,Qg.exports);var xl=Qg.exports;const Tl=hE(xl);function Xf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Jf(t,e){return e==null?function(i,r){const o=B.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=B.useRef();o.current||(o.current=t(i,r));const a=B.useRef(i),{instance:u}=o.current;return B.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function vI(t,e){B.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function wI(t){return function(n){const i=Yf(),r=t(Qf(n,i),i);return pI(i.map,n.attribution),av(r.current,n.eventHandlers),vI(r.current,i),r}}function Bj(t,e){const n=B.useRef();B.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function Hj(t){return function(n){const i=Yf(),r=t(Qf(n,i),i);return av(r.current,n.eventHandlers),vI(r.current,i),Bj(r.current,n),r}}function Wj(t,e){const n=Jf(t,e),i=wI(n);return _I(i)}function $j(t,e){const n=Jf(t),i=Uj(n,e);return Fj(i)}function qj(t,e){const n=Jf(t,e),i=Hj(n);return _I(i)}function Gj(t,e){const n=Jf(t,e),i=wI(n);return zj(i)}function Kj(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function lv(){return Yf().map}function Zj(t){const e=lv();return B.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Xg(){return Xg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xg.apply(this,arguments)}function Yj({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...p},y){const[v]=B.useState({className:r,id:o,style:u}),[T,I]=B.useState(null);B.useImperativeHandle(y,()=>(T==null?void 0:T.map)??null,[T]);const R=B.useCallback(b=>{if(b!==null&&T===null){const S=new xl.Map(b,p);n!=null&&f!=null?S.setView(n,f):t!=null&&S.fitBounds(t,e),c!=null&&S.whenReady(c),I(jj(S))}},[]);B.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const V=T?bd.createElement(yI,{value:T},i):a??null;return bd.createElement("div",Xg({},v,{ref:R}),V)}const xI=B.forwardRef(Yj),TI=Wj(function({position:e,...n},i){const r=new xl.Marker(e,n);return Xf(r,mI(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Qj=qj(function({positions:e,...n},i){const r=new xl.Polyline(e,n);return Xf(r,mI(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),Xj=$j(function(e,n){const i=new xl.Popup(e,n.overlayContainer);return Xf(i,n)},function(e,n,{position:i},r){B.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function c(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:u,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),EI=Gj(function({url:e,...n},i){const r=new xl.TileLayer(e,Qf(n,i));return Xf(r,i)},function(e,n,i){Kj(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),SI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",bI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function PI(t,e,n,i){const o=os(n-t),a=os(i-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(os(t))*Math.cos(os(n))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function os(t){return t*(Math.PI/180)}function f1(t){return t*(180/Math.PI)}function Jj(t,e,n=100){const[i,r]=t,[o,a]=e;if(PI(i,r,o,a)<500)return[t,e];const c=[],f=os(i),p=os(r),y=os(o),v=os(a),T=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-y)/2),2)+Math.cos(f)*Math.cos(y)*Math.pow(Math.sin((p-v)/2),2)));let I=t[1];for(let R=0;R<=n;R++){const V=R/n,b=Math.sin((1-V)*T)/Math.sin(T),S=Math.sin(V*T)/Math.sin(T),C=b*Math.cos(f)*Math.cos(p)+S*Math.cos(y)*Math.cos(v),z=b*Math.cos(f)*Math.sin(p)+S*Math.cos(y)*Math.sin(v),H=b*Math.sin(f)+S*Math.sin(y),U=Math.atan2(H,Math.sqrt(C*C+z*z));let k=Math.atan2(z,C),E=f1(k);const M=E-I;M<-180?E+=360:M>180&&(E-=360),c.push([f1(U),E]),I=E}return c}let II=Tl.icon({iconUrl:SI,shadowUrl:bI,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Tl.Marker.prototype.options.icon=II;const e3=({coords:t})=>{const e=lv();return B.useEffect(()=>{if(t.length>0){const n=Tl.latLngBounds(t);e.fitBounds(n,{padding:[50,50]})}},[t,e]),null},CI=({activities:t,className:e="h-[300px] w-full rounded-xl overflow-hidden",highlightedActivityId:n})=>{const i=t.filter(a=>a.coordinates&&a.coordinates.lng<0),r=[];if(i.length>0){const a=i[0].coordinates;r.push([a.lat,a.lng]);for(let u=0;u<i.length-1;u++){const c=i[u].coordinates,f=i[u+1].coordinates;if(PI(c.lat,c.lng,f.lat,f.lng)>500){const y=Jj([c.lat,c.lng],[f.lat,f.lng]);r.push(...y.slice(1))}else r.push([f.lat,f.lng])}}if(i.length===0)return g.jsxs("div",{className:`${e} bg-gray-100 flex items-center justify-center text-gray-400 flex-col gap-2`,children:[g.jsx(rc,{className:"w-8 h-8 opacity-50"}),g.jsx("span",{className:"text-sm",children:""})]});const o=i.length>0?[i[0].coordinates.lat,i[0].coordinates.lng]:[37.7749,-122.4194];return g.jsx("div",{className:e,children:g.jsxs(xI,{center:o,zoom:13,scrollWheelZoom:!1,className:"h-full w-full z-0",children:[g.jsx(EI,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.map((a,u)=>{const c=n&&a.id===n,f=c?Tl.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[30,48],iconAnchor:[15,48],popupAnchor:[1,-34],shadowSize:[41,41]}):II;return g.jsx(TI,{position:[a.coordinates.lat,a.coordinates.lng],icon:f,zIndexOffset:c?1e3:0,children:g.jsx(Xj,{children:g.jsxs("div",{className:"font-sans",children:[g.jsx("div",{className:"font-bold text-indigo-600",children:a.time}),g.jsx("div",{className:"font-medium",children:a.title}),g.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.location}),g.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${a.coordinates.lat},${a.coordinates.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-blue-500 mt-2 hover:underline",children:[g.jsx(UN,{className:"w-3 h-3"}),"Google Maps "]})]})})},u)}),r.length>1&&g.jsx(Qj,{positions:r,color:"#4f46e5",weight:3,opacity:.7,dashArray:"5, 10"}),g.jsx(e3,{coords:r})]})})};function AI(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=AI(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Jn(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=AI(t))&&(i&&(i+=" "),i+=e);return i}function t3({day:t,isExpanded:e,onToggle:n,isEditing:i,onAddActivity:r,onUpdateActivity:o,onRemoveActivity:a,onActivityFocus:u,highlightedActivityId:c,onUpdateDayInfo:f}){const[p,y]=B.useState(!1),[v,T]=B.useState("list"),I=V=>{const[b]=V.split(" "),[S,C]=b.split(":").map(Number);return S*60+C},R=V=>{if(V.stopPropagation(),!t.activities||t.activities.length===0)return;let b="";const S=t.activities.filter(C=>C.type==="flight");if(S.length>0)b=` ${S.map(z=>z.title.split(" to ")[1]||z.title).join(" & ")}`;else{const C=t.activities.filter(U=>U.type!=="food"&&U.type!=="transport");b=(C.length>0?C:t.activities).slice(0,2).map(U=>U.title).join(" & ")}b&&f&&f(b,t.summary)};return g.jsxs("div",{className:Jn("polaroid-card mb-8 relative",e?"z-20 scale-105 rotate-0":"hover:z-10"),children:[g.jsx("div",{className:"washi-tape",style:{transform:`translateX(-50%) rotate(${Math.random()*4-2}deg)`,backgroundColor:t.city==="SF"?"rgba(255, 154, 158, 0.6)":"rgba(162, 217, 255, 0.6)"}}),g.jsxs("div",{onClick:n,className:"cursor-pointer flex items-start justify-between group select-none",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b-2 border-gray-100 pb-2",children:[i?g.jsx("input",{type:"text",value:t.date,onClick:V=>V.stopPropagation(),onChange:V=>f==null?void 0:f(t.title,t.summary,V.target.value),className:"font-hand text-xl font-bold text-gray-500 transform -rotate-2 bg-transparent border-b border-gray-300 focus:border-indigo-500 outline-none w-40"}):g.jsx("span",{className:"font-hand text-xl font-bold text-gray-500 transform -rotate-2",children:t.date}),g.jsx("div",{className:"flex-1"}),i?g.jsxs("div",{className:"flex gap-2 transform rotate-1",onClick:V=>V.stopPropagation(),children:[g.jsxs("select",{value:t.city,onChange:V=>f==null?void 0:f(t.title,t.summary,void 0,void 0,V.target.value),className:"text-xs font-bold uppercase bg-gray-100 text-gray-800 px-2 py-1 rounded border-none outline-none",children:[g.jsx("option",{value:"SF",children:"SF"}),g.jsx("option",{value:"SLC",children:"SLC"}),g.jsx("option",{value:"SAN",children:"SAN"}),g.jsx("option",{value:"LA",children:"LA"})]}),g.jsx("input",{type:"text",value:t.cityLabel,onChange:V=>f==null?void 0:f(t.title,t.summary,void 0,V.target.value),className:"text-xs font-bold tracking-widest uppercase bg-gray-800 text-white px-2 py-1 w-24 text-center border-none outline-none"})]}):g.jsx("span",{className:"text-xs font-bold tracking-widest uppercase bg-gray-800 text-white px-2 py-1 transform rotate-1",children:t.cityLabel})]}),i?g.jsxs("div",{onClick:V=>V.stopPropagation(),className:"space-y-2 mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:t.title,onChange:V=>f==null?void 0:f(V.target.value,t.summary),className:"flex-1 text-2xl font-heading font-bold text-gray-800 border-b-2 border-indigo-200 focus:border-indigo-500 outline-none bg-transparent",placeholder:"..."}),g.jsx("button",{onClick:R,className:"p-2 bg-indigo-100 text-indigo-600 rounded-full hover:bg-indigo-200 transition-colors",title:" ()",children:g.jsx(T_,{size:18})})]}),g.jsx("input",{type:"text",value:t.summary,onChange:V=>f==null?void 0:f(t.title,V.target.value),className:"w-full font-hand text-lg text-gray-500 border-b-2 border-indigo-200 focus:border-indigo-500 outline-none bg-transparent",placeholder:"..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"text-2xl font-heading font-bold text-gray-800 mb-2 leading-tight",children:t.title}),g.jsx("p",{className:"font-hand text-lg text-gray-500 leading-snug",children:t.summary})]})]}),g.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[g.jsx("button",{onClick:V=>{V.stopPropagation(),y(!p)},className:`p-2 rounded-full border-2 transition-all lg:hidden ${p?"border-gray-800 text-gray-800 bg-gray-100":"border-gray-200 text-gray-400 hover:border-gray-400"}`,title:p?"List View":"Map View",children:p?g.jsx(Bw,{size:18}):g.jsx(Ib,{size:18})}),e&&!p&&g.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",onClick:V=>V.stopPropagation(),children:[g.jsx("button",{onClick:()=>T("list"),className:`p-1.5 rounded-md transition-all ${v==="list"?"bg-white shadow-sm text-gray-800":"text-gray-400 hover:text-gray-600"}`,title:"List View",children:g.jsx(Bw,{size:16})}),g.jsx("button",{onClick:()=>T("timeline"),className:`p-1.5 rounded-md transition-all ${v==="timeline"?"bg-white shadow-sm text-gray-800":"text-gray-400 hover:text-gray-600"}`,title:"Timeline View",children:g.jsx(Pb,{size:16})})]}),g.jsx("div",{className:Jn("p-2 text-gray-300 transition-transform duration-300 self-end",e&&"rotate-180 text-gray-800"),children:g.jsx(kN,{size:20})})]})]}),g.jsx(Oo,{children:e&&g.jsx(bn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:g.jsx("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-gray-200",children:g.jsxs("div",{className:"bg-[var(--paper-bg)] p-4 rounded border border-gray-100 shadow-inner",children:[p?g.jsx(CI,{activities:t.activities}):v==="list"?g.jsxs("div",{className:"space-y-4 relative pl-4",children:[g.jsx("div",{className:"absolute left-8 top-2 bottom-2 w-0.5 bg-gray-200 border-l border-dashed border-gray-300"}),t.activities.map((V,b)=>{const S=`${t.id}-${b}`,C=t.activities[b+1];let z=null;if(V.coordinates&&(C!=null&&C.coordinates)){const U=(C.coordinates.lat-V.coordinates.lat)*Math.PI/180,k=(C.coordinates.lng-V.coordinates.lng)*Math.PI/180,E=Math.sin(U/2)*Math.sin(U/2)+Math.cos(V.coordinates.lat*Math.PI/180)*Math.cos(C.coordinates.lat*Math.PI/180)*Math.sin(k/2)*Math.sin(k/2),N=6371*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E))),D=Math.round(N/30*60+5);N>.5&&(z={dist:N.toFixed(1),time:D})}return g.jsxs("div",{className:"relative",children:[g.jsx(Oj,{id:S,activity:V,isLast:b===t.activities.length-1,isEditing:i,isHighlighted:c===S,onEdit:()=>o==null?void 0:o(b,V),onDelete:()=>a==null?void 0:a(b),onFocus:u}),z&&g.jsxs("div",{className:"absolute left-8 bottom-[-24px] transform -translate-x-3 z-10 bg-white border-2 border-indigo-100 rounded-full px-3 py-1 text-xs font-bold text-indigo-600 flex items-center gap-1.5 shadow-md whitespace-nowrap group-hover/time:scale-110 transition-transform",children:[g.jsx("span",{className:"bg-indigo-100 p-0.5 rounded-full",children:""}),g.jsxs("span",{children:[z.dist," km"]}),g.jsx("span",{className:"text-indigo-200",children:"|"}),g.jsxs("span",{children:[" ",z.time," "]})]})]},b)})]}):g.jsxs("div",{className:"relative h-[600px] bg-white rounded-xl border border-gray-200 shadow-inner overflow-y-auto p-4 custom-scrollbar",children:[Array.from({length:19}).map((V,b)=>{const S=b+6;return g.jsx("div",{className:"absolute w-full border-t border-gray-100 text-xs text-gray-300 flex items-center",style:{top:`${(S-6)*50}px`},children:g.jsxs("span",{className:"w-10 text-right pr-2",children:[S,":00"]})},S)}),t.activities.map((V,b)=>{const C=(I(V.time)-360)/60*50;return g.jsxs("div",{className:"absolute left-12 right-2 p-2 rounded-lg border border-indigo-100 bg-indigo-50/80 hover:bg-indigo-100 transition-colors cursor-pointer shadow-sm text-xs overflow-hidden",style:{top:`${Math.max(0,C)}px`,height:"45px"},onClick:()=>o==null?void 0:o(b,V),children:[g.jsxs("div",{className:"font-bold text-indigo-900 truncate",children:[V.time," ",V.title]}),g.jsx("div",{className:"text-indigo-600 truncate",children:V.description})]},b)})]}),i&&!p&&v==="list"&&g.jsxs("button",{onClick:r,className:"mt-6 w-full py-3 border-2 border-dashed border-gray-300 rounded text-gray-500 font-heading font-bold hover:border-gray-800 hover:text-gray-800 transition-colors flex items-center justify-center gap-2 group",children:[g.jsx(rl,{size:18,className:"group-hover:rotate-90 transition-transform"}),"Add New Memory"]})]})})})})]})}const xm=[{id:"day1",date:"2026/05/21",city:"SF",cityLabel:"",title:"",summary:`

 /`,activities:[{time:"20:30",title:"SFO ",description:"JX012 ",type:"flight",iconName:"Plane",coordinates:{lat:37.6213,lng:-122.379}},{time:"21:40",title:" (BART)",description:" BART  SFO  Powell St  ( 30 )",type:"transport",iconName:"Train",tips:" Clipper Card  Wallet"},{time:"22:45",title:"Check-in & ",description:" Union Square / Powell / Market St ",type:"hotel",iconName:"Moon",location:"Union Square, San Francisco"}]},{id:"day2",date:"2026/05/22",city:"SF",cityLabel:"",title:" & ",summary:`

 /SF /`,activities:[{time:"09:30",title:"",description:" Marina / Crissy Field ",type:"transport",iconName:"Bike",tips:"CAN BOOK LATER"},{time:"10:00",title:"Crissy Field",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.804,lng:-122.4655}},{time:"10:30",title:"Warming Hut",description:"",type:"food",iconName:"Coffee"},{time:"10:50",title:" Golden Gate Bridge",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8199,lng:-122.4783}},{time:"11:20",title:"Fort Point",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8105,lng:-122.477}},{time:"12:15",title:"Marina ",description:" Marina ",type:"food",iconName:"Utensils"},{time:"14:00",title:"",description:"",type:"hotel",iconName:"Moon"},{time:"16:30",title:"Lombard St ()",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8021,lng:-122.4187}},{time:"18:00",title:"North Beach ",description:"",type:"food",iconName:"Utensils"}]},{id:"day3",date:"2026/05/23",city:"SF",cityLabel:"/",title:"",summary:`

 /`,activities:[{time:"08:40",title:" (Caltrain)",description:" Caltrain ",type:"transport",iconName:"Train"},{time:"09:40",title:"Apple Park Visitor Center",description:"AR  T-shirt",type:"sightseeing",iconName:"ShoppingBag",location:"Cupertino",coordinates:{lat:37.3349,lng:-122.009}},{time:"11:20",title:"Googleplex",description:" Android Statues ",type:"sightseeing",iconName:"Camera",location:"Mountain View",coordinates:{lat:37.422,lng:-122.0841}},{time:"13:20",title:"Stanford University",description:" Main Quad",type:"sightseeing",iconName:"Briefcase",coordinates:{lat:37.4275,lng:-122.1697}},{time:"17:00",title:"",description:" Caltrain  Uber ",type:"transport",iconName:"Train"}]},{id:"day4",date:"2026/05/24",city:"SF",cityLabel:"",title:"",summary:`

 /`,activities:[{time:"08:45",title:"Pier 33 ",description:" 33 ",type:"transport",iconName:"MapPin",tips:"MUST BOOK EARLY"},{time:"09:30",title:" (Alcatraz)",description:"",type:"sightseeing",iconName:"Key",coordinates:{lat:37.827,lng:-122.423}},{time:"13:00",title:"Ferry Building ",description:" ()",type:"food",iconName:"Utensils",coordinates:{lat:37.7955,lng:-122.3937}},{time:"15:00",title:" / ",description:"Embarcadero ",type:"other",iconName:"Coffee"}]},{id:"day5",date:"2026/05/25",city:"SF",cityLabel:"",title:"",summary:`

 /`,activities:[{time:"10:00",title:"SS Jeremiah OBrien",description:" (Pier 45/35)",type:"sightseeing",iconName:"Ship",tips:"CAN BOOK LATER"},{time:"11:30",title:"Embarcadero ",description:"",type:"food",iconName:"Utensils"},{time:"12:35",title:"Oracle Park",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.7786,lng:-122.3893}},{time:"14:05",title:"Giants ",description:" MLB ",type:"other",iconName:"Trophy",tips:"MUST BOOK EARLY"},{time:"18:30",title:"",description:"Mission Bay  North Beach ",type:"food",iconName:"Utensils"}]},{id:"day6",date:"2026/05/26",city:"SF",cityLabel:"",title:"",summary:`Sausalito 

 /`,activities:[{time:"09:30",title:" Ferry Building",description:"",type:"transport",iconName:"MapPin"},{time:"10:30",title:"Sausalito ",description:"",type:"sightseeing",iconName:"Sun",coordinates:{lat:37.8591,lng:-122.4853},tips:"CAN BOOK LATER Clipper Card"},{time:"14:15",title:"Exploratorium",description:" (Pier 15)",type:"sightseeing",iconName:"Lightbulb",tips:"CAN BOOK LATER"},{time:"17:00",title:"",description:"",type:"food",iconName:"Utensils"},{time:"18:45",title:"Marshalls Beach ",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8025,lng:-122.48},tips:""},{time:"21:15",title:"California St ",description:"",type:"sightseeing",iconName:"Camera"}]},{id:"day7",date:"2026/05/27",city:"SLC",cityLabel:"",title:"",summary:`

 /SLC `,activities:[{time:"07:30",title:"Check-out",description:"",type:"hotel",iconName:"CheckSquare"},{time:"08:00",title:" SFO ",description:" BART  Uber ",type:"transport",iconName:"Train"},{time:"10:00",title:" (SLC)",description:" SLC ( 2 )",type:"flight",iconName:"Plane",tips:"MUST BOOK EARLY"},{time:"15:30",title:" Check-in",description:" SLC  Salt Palace ",type:"hotel",iconName:"MapPin",coordinates:{lat:40.767,lng:-111.8965}},{time:"18:00",title:"City Creek Center",description:"",type:"sightseeing",iconName:"ShoppingBag"}]},{id:"day8",date:"2026/05/28",city:"SLC",cityLabel:"",title:"ACSM  Day 1",summary:`

 /`,activities:[{time:"08:30",title:" Salt Palace",description:"",type:"transport",iconName:"MapPin"},{time:"09:00",title:"ACSM  / ",description:"",type:"conference",iconName:"Briefcase"},{time:"18:00",title:" / ",description:" Temple Square ",type:"sightseeing",iconName:"Camera",coordinates:{lat:40.7704,lng:-111.8919}}]},{id:"day9",date:"2026/05/29",city:"SLC",cityLabel:"",title:"ACSM  Day 2",summary:`

 /`,activities:[{time:"09:00",title:"ACSM  / ",description:"",type:"conference",iconName:"Briefcase"},{time:"18:00",title:" / ",description:"",type:"hotel",iconName:"Utensils"}]},{id:"day10",date:"2026/05/30",city:"SLC",cityLabel:"",title:"",summary:`

 /`,activities:[{time:"06:30",title:" & ",description:"",type:"hotel",iconName:"Sun"},{time:"07:45",title:" SLC ",description:" Uber  TRAX ",type:"transport",iconName:"Train"},{time:"09:30",title:" (SFO)",description:" 09:30-10:30 ",type:"flight",iconName:"Plane",tips:"MUST BOOK EARLY/"},{time:"12:00",title:" SFO / ",description:"",type:"other",iconName:"Coffee"},{time:"21:30",title:"",description:" (TBIT )",type:"flight",iconName:"Ticket"}]},{id:"day11",date:"2026/05/31",city:"SF",cityLabel:"",title:"",summary:`

 //`,activities:[{time:"00:50",title:"SFO ",description:" JX011  (TPE)",type:"flight",iconName:"Plane",tips:"Save Travels! "}]}],p1=[" ( 90 )"," (MLB)"," (SFO  SLC)","ACSM ","ESTA  ( 72 )"," SIM  eSIM",""," (SF) (SLC)"," ()"],n3=()=>{};var m1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},i3=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,p=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;c||(T=64,a||(v=64)),i.push(n[p],n[y],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||y==null)throw new r3;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),y!==64){const I=f<<6&192|y;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s3=function(t){const e=kI(t);return RI.encodeByteArray(e,!0)},lf=function(t){return s3(t).replace(/\./g,"")},NI=function(t){try{return RI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=()=>o3().__FIREBASE_DEFAULTS__,l3=()=>{if(typeof process>"u"||typeof m1>"u")return;const t=m1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NI(t[1]);return e&&JSON.parse(e)},ep=()=>{try{return n3()||a3()||l3()||u3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MI=t=>{var e,n;return(n=(e=ep())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LI=t=>{const e=MI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},DI=()=>{var t;return(t=ep())==null?void 0:t.config},OI=t=>{var e;return(e=ep())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lf(JSON.stringify(n)),lf(JSON.stringify(a)),""].join(".")}const Mu={};function h3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mu))Mu[e]?t.emulator.push(e):t.prod.push(e);return t}function d3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let g1=!1;function cv(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Mu[t]===e||Mu[t]||g1)return;Mu[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=h3().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{g1=!0,a()},v}function p(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=d3(i),T=n("text"),I=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),V=document.getElementById(R)||document.createElement("a"),b=n("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),p(V,R);const z=f();c(S,b),C.append(S,I,V,z),document.body.appendChild(C)}o?(I.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function p3(){var e;const t=(e=ep())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function y3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _3(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v3(){return!p3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w3(){try{return typeof indexedDB=="object"}catch{return!1}}function x3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="FirebaseError";class Xi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=T3,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?E3(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Xi(r,u,i)}}function E3(t,e){return t.replace(S3,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const S3=/\{\$([^}]+)}/g;function b3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Po(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(y1(o)&&y1(a)){if(!Po(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function y1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function P3(t,e){const n=new I3(t,e);return n.subscribe.bind(n)}class I3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");C3(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Tm),r.error===void 0&&(r.error=Tm),r.complete===void 0&&(r.complete=Tm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new c3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R3(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k3(t){return t===oo?void 0:t}function R3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const M3={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},L3=Re.INFO,D3={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},O3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=D3[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hv{constructor(e){this.name=e,this._logLevel=L3,this._logHandler=O3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const V3=(t,e)=>e.some(n=>t instanceof n);let _1,v1;function j3(){return _1||(_1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F3(){return v1||(v1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jI=new WeakMap,Jg=new WeakMap,FI=new WeakMap,Em=new WeakMap,dv=new WeakMap;function z3(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(gs(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&jI.set(n,t)}).catch(()=>{}),dv.set(e,t),e}function U3(t){if(Jg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Jg.set(t,e)}let ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function B3(t){ey=t(ey)}function H3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sm(this),e,...n);return FI.set(i,e.sort?e.sort():[e]),gs(i)}:F3().includes(t)?function(...e){return t.apply(Sm(this),e),gs(jI.get(this))}:function(...e){return gs(t.apply(Sm(this),e))}}function W3(t){return typeof t=="function"?H3(t):(t instanceof IDBTransaction&&U3(t),V3(t,j3())?new Proxy(t,ey):t)}function gs(t){if(t instanceof IDBRequest)return z3(t);if(Em.has(t))return Em.get(t);const e=W3(t);return e!==t&&(Em.set(t,e),dv.set(e,t)),e}const Sm=t=>dv.get(t);function $3(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=gs(a);return i&&a.addEventListener("upgradeneeded",c=>{i(gs(a.result),c.oldVersion,c.newVersion,gs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const q3=["get","getKey","getAll","getAllKeys","count"],G3=["put","add","delete","clear"],bm=new Map;function w1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=G3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||q3.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return bm.set(e,o),o}B3(t=>({...t,get:(e,n,i)=>w1(e,n)||t.get(e,n,i),has:(e,n)=>!!w1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Z3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ty="@firebase/app",x1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new hv("@firebase/app"),Y3="@firebase/app-compat",Q3="@firebase/analytics-compat",X3="@firebase/analytics",J3="@firebase/app-check-compat",e5="@firebase/app-check",t5="@firebase/auth",n5="@firebase/auth-compat",i5="@firebase/database",r5="@firebase/data-connect",s5="@firebase/database-compat",o5="@firebase/functions",a5="@firebase/functions-compat",l5="@firebase/installations",u5="@firebase/installations-compat",c5="@firebase/messaging",h5="@firebase/messaging-compat",d5="@firebase/performance",f5="@firebase/performance-compat",p5="@firebase/remote-config",m5="@firebase/remote-config-compat",g5="@firebase/storage",y5="@firebase/storage-compat",_5="@firebase/firestore",v5="@firebase/ai",w5="@firebase/firestore-compat",x5="firebase",T5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]",E5={[ty]:"fire-core",[Y3]:"fire-core-compat",[X3]:"fire-analytics",[Q3]:"fire-analytics-compat",[e5]:"fire-app-check",[J3]:"fire-app-check-compat",[t5]:"fire-auth",[n5]:"fire-auth-compat",[i5]:"fire-rtdb",[r5]:"fire-data-connect",[s5]:"fire-rtdb-compat",[o5]:"fire-fn",[a5]:"fire-fn-compat",[l5]:"fire-iid",[u5]:"fire-iid-compat",[c5]:"fire-fcm",[h5]:"fire-fcm-compat",[d5]:"fire-perf",[f5]:"fire-perf-compat",[p5]:"fire-rc",[m5]:"fire-rc-compat",[g5]:"fire-gcs",[y5]:"fire-gcs-compat",[_5]:"fire-fst",[w5]:"fire-fst-compat",[v5]:"fire-vertex","fire-js":"fire-js",[x5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,S5=new Map,iy=new Map;function T1(t,e){try{t.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Io(t){const e=t.name;if(iy.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,t);for(const n of uf.values())T1(n,t);for(const n of S5.values())T1(n,t);return!0}function tp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Nc("app","Firebase",b5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=T5;function zI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ny,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ys.create("bad-app-name",{appName:String(r)});if(n||(n=DI()),!n)throw ys.create("no-options");const o=uf.get(r);if(o){if(Po(n,o.options)&&Po(i,o.config))return o;throw ys.create("duplicate-app",{appName:r})}const a=new N3(r);for(const c of iy.values())a.addComponent(c);const u=new P5(n,i,a);return uf.set(r,u),u}function fv(t=ny){const e=uf.get(t);if(!e&&t===ny&&DI())return zI();if(!e)throw ys.create("no-app",{appName:t});return e}function Ui(t,e,n){let i=E5[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(a.join(" "));return}Io(new bs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="firebase-heartbeat-database",C5=1,hc="firebase-heartbeat-store";let Pm=null;function UI(){return Pm||(Pm=$3(I5,C5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Pm}async function A5(t){try{const n=(await UI()).transaction(hc),i=await n.objectStore(hc).get(BI(t));return await n.done,i}catch(e){if(e instanceof Xi)kr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function E1(t,e){try{const i=(await UI()).transaction(hc,"readwrite");await i.objectStore(hc).put(e,BI(t)),await i.done}catch(n){if(n instanceof Xi)kr.warn(n.message);else{const i=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(i.message)}}}function BI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=1024,R5=30;class N5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L5(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=S1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>R5){const a=D5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){kr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S1(),{heartbeatsToSend:i,unsentEntries:r}=M5(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return kr.warn(n),""}}}function S1(){return new Date().toISOString().substring(0,10)}function M5(t,e=k5){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),b1(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),b1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class L5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w3()?x3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function b1(t){return lf(JSON.stringify({version:2,heartbeats:t})).length}function D5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){Io(new bs("platform-logger",e=>new K3(e),"PRIVATE")),Io(new bs("heartbeat",e=>new N5(e),"PRIVATE")),Ui(ty,x1,t),Ui(ty,x1,"esm2020"),Ui("fire-js","")}O5("");var P1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,HI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,E){function M(){}M.prototype=E.prototype,k.F=E.prototype,k.prototype=new M,k.prototype.constructor=k,k.D=function(N,D,F){for(var O=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)O[ne-2]=arguments[ne];return E.prototype[D].apply(N,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,E,M){M||(M=0);const N=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)N[D]=E.charCodeAt(M++)|E.charCodeAt(M++)<<8|E.charCodeAt(M++)<<16|E.charCodeAt(M++)<<24;else for(D=0;D<16;++D)N[D]=E[M++]|E[M++]<<8|E[M++]<<16|E[M++]<<24;E=k.g[0],M=k.g[1],D=k.g[2];let F=k.g[3],O;O=E+(F^M&(D^F))+N[0]+3614090360&4294967295,E=M+(O<<7&4294967295|O>>>25),O=F+(D^E&(M^D))+N[1]+3905402710&4294967295,F=E+(O<<12&4294967295|O>>>20),O=D+(M^F&(E^M))+N[2]+606105819&4294967295,D=F+(O<<17&4294967295|O>>>15),O=M+(E^D&(F^E))+N[3]+3250441966&4294967295,M=D+(O<<22&4294967295|O>>>10),O=E+(F^M&(D^F))+N[4]+4118548399&4294967295,E=M+(O<<7&4294967295|O>>>25),O=F+(D^E&(M^D))+N[5]+1200080426&4294967295,F=E+(O<<12&4294967295|O>>>20),O=D+(M^F&(E^M))+N[6]+2821735955&4294967295,D=F+(O<<17&4294967295|O>>>15),O=M+(E^D&(F^E))+N[7]+4249261313&4294967295,M=D+(O<<22&4294967295|O>>>10),O=E+(F^M&(D^F))+N[8]+1770035416&4294967295,E=M+(O<<7&4294967295|O>>>25),O=F+(D^E&(M^D))+N[9]+2336552879&4294967295,F=E+(O<<12&4294967295|O>>>20),O=D+(M^F&(E^M))+N[10]+4294925233&4294967295,D=F+(O<<17&4294967295|O>>>15),O=M+(E^D&(F^E))+N[11]+2304563134&4294967295,M=D+(O<<22&4294967295|O>>>10),O=E+(F^M&(D^F))+N[12]+1804603682&4294967295,E=M+(O<<7&4294967295|O>>>25),O=F+(D^E&(M^D))+N[13]+4254626195&4294967295,F=E+(O<<12&4294967295|O>>>20),O=D+(M^F&(E^M))+N[14]+2792965006&4294967295,D=F+(O<<17&4294967295|O>>>15),O=M+(E^D&(F^E))+N[15]+1236535329&4294967295,M=D+(O<<22&4294967295|O>>>10),O=E+(D^F&(M^D))+N[1]+4129170786&4294967295,E=M+(O<<5&4294967295|O>>>27),O=F+(M^D&(E^M))+N[6]+3225465664&4294967295,F=E+(O<<9&4294967295|O>>>23),O=D+(E^M&(F^E))+N[11]+643717713&4294967295,D=F+(O<<14&4294967295|O>>>18),O=M+(F^E&(D^F))+N[0]+3921069994&4294967295,M=D+(O<<20&4294967295|O>>>12),O=E+(D^F&(M^D))+N[5]+3593408605&4294967295,E=M+(O<<5&4294967295|O>>>27),O=F+(M^D&(E^M))+N[10]+38016083&4294967295,F=E+(O<<9&4294967295|O>>>23),O=D+(E^M&(F^E))+N[15]+3634488961&4294967295,D=F+(O<<14&4294967295|O>>>18),O=M+(F^E&(D^F))+N[4]+3889429448&4294967295,M=D+(O<<20&4294967295|O>>>12),O=E+(D^F&(M^D))+N[9]+568446438&4294967295,E=M+(O<<5&4294967295|O>>>27),O=F+(M^D&(E^M))+N[14]+3275163606&4294967295,F=E+(O<<9&4294967295|O>>>23),O=D+(E^M&(F^E))+N[3]+4107603335&4294967295,D=F+(O<<14&4294967295|O>>>18),O=M+(F^E&(D^F))+N[8]+1163531501&4294967295,M=D+(O<<20&4294967295|O>>>12),O=E+(D^F&(M^D))+N[13]+2850285829&4294967295,E=M+(O<<5&4294967295|O>>>27),O=F+(M^D&(E^M))+N[2]+4243563512&4294967295,F=E+(O<<9&4294967295|O>>>23),O=D+(E^M&(F^E))+N[7]+1735328473&4294967295,D=F+(O<<14&4294967295|O>>>18),O=M+(F^E&(D^F))+N[12]+2368359562&4294967295,M=D+(O<<20&4294967295|O>>>12),O=E+(M^D^F)+N[5]+4294588738&4294967295,E=M+(O<<4&4294967295|O>>>28),O=F+(E^M^D)+N[8]+2272392833&4294967295,F=E+(O<<11&4294967295|O>>>21),O=D+(F^E^M)+N[11]+1839030562&4294967295,D=F+(O<<16&4294967295|O>>>16),O=M+(D^F^E)+N[14]+4259657740&4294967295,M=D+(O<<23&4294967295|O>>>9),O=E+(M^D^F)+N[1]+2763975236&4294967295,E=M+(O<<4&4294967295|O>>>28),O=F+(E^M^D)+N[4]+1272893353&4294967295,F=E+(O<<11&4294967295|O>>>21),O=D+(F^E^M)+N[7]+4139469664&4294967295,D=F+(O<<16&4294967295|O>>>16),O=M+(D^F^E)+N[10]+3200236656&4294967295,M=D+(O<<23&4294967295|O>>>9),O=E+(M^D^F)+N[13]+681279174&4294967295,E=M+(O<<4&4294967295|O>>>28),O=F+(E^M^D)+N[0]+3936430074&4294967295,F=E+(O<<11&4294967295|O>>>21),O=D+(F^E^M)+N[3]+3572445317&4294967295,D=F+(O<<16&4294967295|O>>>16),O=M+(D^F^E)+N[6]+76029189&4294967295,M=D+(O<<23&4294967295|O>>>9),O=E+(M^D^F)+N[9]+3654602809&4294967295,E=M+(O<<4&4294967295|O>>>28),O=F+(E^M^D)+N[12]+3873151461&4294967295,F=E+(O<<11&4294967295|O>>>21),O=D+(F^E^M)+N[15]+530742520&4294967295,D=F+(O<<16&4294967295|O>>>16),O=M+(D^F^E)+N[2]+3299628645&4294967295,M=D+(O<<23&4294967295|O>>>9),O=E+(D^(M|~F))+N[0]+4096336452&4294967295,E=M+(O<<6&4294967295|O>>>26),O=F+(M^(E|~D))+N[7]+1126891415&4294967295,F=E+(O<<10&4294967295|O>>>22),O=D+(E^(F|~M))+N[14]+2878612391&4294967295,D=F+(O<<15&4294967295|O>>>17),O=M+(F^(D|~E))+N[5]+4237533241&4294967295,M=D+(O<<21&4294967295|O>>>11),O=E+(D^(M|~F))+N[12]+1700485571&4294967295,E=M+(O<<6&4294967295|O>>>26),O=F+(M^(E|~D))+N[3]+2399980690&4294967295,F=E+(O<<10&4294967295|O>>>22),O=D+(E^(F|~M))+N[10]+4293915773&4294967295,D=F+(O<<15&4294967295|O>>>17),O=M+(F^(D|~E))+N[1]+2240044497&4294967295,M=D+(O<<21&4294967295|O>>>11),O=E+(D^(M|~F))+N[8]+1873313359&4294967295,E=M+(O<<6&4294967295|O>>>26),O=F+(M^(E|~D))+N[15]+4264355552&4294967295,F=E+(O<<10&4294967295|O>>>22),O=D+(E^(F|~M))+N[6]+2734768916&4294967295,D=F+(O<<15&4294967295|O>>>17),O=M+(F^(D|~E))+N[13]+1309151649&4294967295,M=D+(O<<21&4294967295|O>>>11),O=E+(D^(M|~F))+N[4]+4149444226&4294967295,E=M+(O<<6&4294967295|O>>>26),O=F+(M^(E|~D))+N[11]+3174756917&4294967295,F=E+(O<<10&4294967295|O>>>22),O=D+(E^(F|~M))+N[2]+718787259&4294967295,D=F+(O<<15&4294967295|O>>>17),O=M+(F^(D|~E))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+F&4294967295}i.prototype.v=function(k,E){E===void 0&&(E=k.length);const M=E-this.blockSize,N=this.C;let D=this.h,F=0;for(;F<E;){if(D==0)for(;F<=M;)r(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<E;)if(N[D++]=k.charCodeAt(F++),D==this.blockSize){r(this,N),D=0;break}}else for(;F<E;)if(N[D++]=k[F++],D==this.blockSize){r(this,N),D=0;break}}this.h=D,this.o+=E},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;E=this.o*8;for(var M=k.length-8;M<k.length;++M)k[M]=E&255,E/=256;for(this.v(k),k=Array(16),E=0,M=0;M<4;++M)for(let N=0;N<32;N+=8)k[E++]=this.g[M]>>>N&255;return k};function o(k,E){var M=u;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=E(k)}function a(k,E){this.h=E;const M=[];let N=!0;for(let D=k.length-1;D>=0;D--){const F=k[D]|0;N&&F==E||(M[D]=F,N=!1)}this.g=M}var u={};function c(k){return-128<=k&&k<128?o(k,function(E){return new a([E|0],E<0?-1:0)}):new a([k|0],k<0?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(k<0)return V(f(-k));const E=[];let M=1;for(let N=0;k>=M;N++)E[N]=k/M|0,M*=4294967296;return new a(E,0)}function p(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return V(p(k.substring(1),E));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(E,8));let N=y;for(let F=0;F<k.length;F+=8){var D=Math.min(8,k.length-F);const O=parseInt(k.substring(F,F+D),E);D<8?(D=f(Math.pow(E,D)),N=N.j(D).add(f(O))):(N=N.j(M),N=N.add(f(O)))}return N}var y=c(0),v=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(R(this))return-V(this).m();let k=0,E=1;for(let M=0;M<this.g.length;M++){const N=this.i(M);k+=(N>=0?N:4294967296+N)*E,E*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(R(this))return"-"+V(this).toString(k);const E=f(Math.pow(k,6));var M=this;let N="";for(;;){const D=z(M,E).g;M=b(M,D.j(E));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(k);if(M=D,I(M))return F+N;for(;F.length<6;)F="0"+F;N=F+N}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(let E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function R(k){return k.h==-1}t.l=function(k){return k=b(this,k),R(k)?-1:I(k)?0:1};function V(k){const E=k.g.length,M=[];for(let N=0;N<E;N++)M[N]=~k.g[N];return new a(M,~k.h).add(v)}t.abs=function(){return R(this)?V(this):this},t.add=function(k){const E=Math.max(this.g.length,k.g.length),M=[];let N=0;for(let D=0;D<=E;D++){let F=N+(this.i(D)&65535)+(k.i(D)&65535),O=(F>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);N=O>>>16,F&=65535,O&=65535,M[D]=O<<16|F}return new a(M,M[M.length-1]&-2147483648?-1:0)};function b(k,E){return k.add(V(E))}t.j=function(k){if(I(this)||I(k))return y;if(R(this))return R(k)?V(this).j(V(k)):V(V(this).j(k));if(R(k))return V(this.j(V(k)));if(this.l(T)<0&&k.l(T)<0)return f(this.m()*k.m());const E=this.g.length+k.g.length,M=[];for(var N=0;N<2*E;N++)M[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<k.g.length;D++){const F=this.i(N)>>>16,O=this.i(N)&65535,ne=k.i(D)>>>16,Pe=k.i(D)&65535;M[2*N+2*D]+=O*Pe,S(M,2*N+2*D),M[2*N+2*D+1]+=F*Pe,S(M,2*N+2*D+1),M[2*N+2*D+1]+=O*ne,S(M,2*N+2*D+1),M[2*N+2*D+2]+=F*ne,S(M,2*N+2*D+2)}for(k=0;k<E;k++)M[k]=M[2*k+1]<<16|M[2*k];for(k=E;k<2*E;k++)M[k]=0;return new a(M,0)};function S(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function C(k,E){this.g=k,this.h=E}function z(k,E){if(I(E))throw Error("division by zero");if(I(k))return new C(y,y);if(R(k))return E=z(V(k),E),new C(V(E.g),V(E.h));if(R(E))return E=z(k,V(E)),new C(V(E.g),E.h);if(k.g.length>30){if(R(k)||R(E))throw Error("slowDivide_ only works with positive integers.");for(var M=v,N=E;N.l(k)<=0;)M=H(M),N=H(N);var D=U(M,1),F=U(N,1);for(N=U(N,2),M=U(M,2);!I(N);){var O=F.add(N);O.l(k)<=0&&(D=D.add(M),F=O),N=U(N,1),M=U(M,1)}return E=b(k,D.j(E)),new C(D,E)}for(D=y;k.l(E)>=0;){for(M=Math.max(1,Math.floor(k.m()/E.m())),N=Math.ceil(Math.log(M)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),F=f(M),O=F.j(E);R(O)||O.l(k)>0;)M-=N,F=f(M),O=F.j(E);I(F)&&(F=v),D=D.add(F),k=b(k,O)}return new C(D,k)}t.B=function(k){return z(this,k).h},t.and=function(k){const E=Math.max(this.g.length,k.g.length),M=[];for(let N=0;N<E;N++)M[N]=this.i(N)&k.i(N);return new a(M,this.h&k.h)},t.or=function(k){const E=Math.max(this.g.length,k.g.length),M=[];for(let N=0;N<E;N++)M[N]=this.i(N)|k.i(N);return new a(M,this.h|k.h)},t.xor=function(k){const E=Math.max(this.g.length,k.g.length),M=[];for(let N=0;N<E;N++)M[N]=this.i(N)^k.i(N);return new a(M,this.h^k.h)};function H(k){const E=k.g.length+1,M=[];for(let N=0;N<E;N++)M[N]=k.i(N)<<1|k.i(N-1)>>>31;return new a(M,k.h)}function U(k,E){const M=E>>5;E%=32;const N=k.g.length-M,D=[];for(let F=0;F<N;F++)D[F]=E>0?k.i(F+M)>>>E|k.i(F+M+1)<<32-E:k.i(F+M);return new a(D,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,HI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,_s=a}).apply(typeof P1<"u"?P1:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WI,gu,$I,pd,ry,qI,GI,KI;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var _=0;_<h.length;++_){var x=h[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(h,_){if(_)e:{var x=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var W=h[A];if(!(W in x))break e;x=x[W]}h=h[h.length-1],A=x[h],_=_(A),_!=A&&_!=null&&e(x,h,{configurable:!0,writable:!0,value:_})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(_){var x=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&x.push([A,_[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function c(h,_,x){return h.call.apply(h.bind,arguments)}function f(h,_,x){return f=c,f.apply(null,arguments)}function p(h,_){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function y(h,_){function x(){}x.prototype=_.prototype,h.Z=_.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(A,W,q){for(var te=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)te[Ee-2]=arguments[Ee];return _.prototype[W].apply(A,te)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const _=h.length;if(_>0){const x=Array(_);for(let A=0;A<_;A++)x[A]=h[A];return x}return[]}function I(h,_){for(let A=1;A<arguments.length;A++){const W=arguments[A];var x=typeof W;if(x=x!="object"?x:W?Array.isArray(W)?"array":x:"null",x=="array"||x=="object"&&typeof W.length=="number"){x=h.length||0;const q=W.length||0;h.length=x+q;for(let te=0;te<q;te++)h[x+te]=W[te]}else h.push(W)}}class R{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function V(h){a.setTimeout(()=>{throw h},0)}function b(){var h=k;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class S{constructor(){this.h=this.g=null}add(_,x){const A=C.get();A.set(_,x),this.h?this.h.next=A:this.g=A,this.h=A}}var C=new R(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let H,U=!1,k=new S,E=()=>{const h=Promise.resolve(void 0);H=()=>{h.then(M)}};function M(){for(var h;h=b();){try{h.h.call(h.g)}catch(x){V(x)}var _=C;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}U=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};a.addEventListener("test",x,_),a.removeEventListener("test",x,_)}catch{}return h}();function O(h){return/^[\s\xa0]*$/.test(h)}function ne(h,_){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}y(ne,D),ne.prototype.init=function(h,_){const x=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(x=="mouseover"?_=h.fromElement:x=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),Oe=0;function ke(h,_,x,A,W){this.listener=h,this.proxy=null,this.src=_,this.type=x,this.capture=!!A,this.ha=W,this.key=++Oe,this.da=this.fa=!1}function K(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h,_,x){for(const A in h)_.call(x,h[A],A,h)}function J(h,_){for(const x in h)_.call(void 0,h[x],x,h)}function fe(h){const _={};for(const x in h)_[x]=h[x];return _}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,_){let x,A;for(let W=1;W<arguments.length;W++){A=arguments[W];for(x in A)h[x]=A[x];for(let q=0;q<Z.length;q++)x=Z[q],Object.prototype.hasOwnProperty.call(A,x)&&(h[x]=A[x])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,_,x,A,W){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const te=ge(h,_,A,W);return te>-1?(_=h[te],x||(_.fa=!1)):(_=new ke(_,this.src,q,!!A,W),_.fa=x,h.push(_)),_};function me(h,_){const x=_.type;if(x in h.g){var A=h.g[x],W=Array.prototype.indexOf.call(A,_,void 0),q;(q=W>=0)&&Array.prototype.splice.call(A,W,1),q&&(K(_),h.g[x].length==0&&(delete h.g[x],h.h--))}}function ge(h,_,x,A){for(let W=0;W<h.length;++W){const q=h[W];if(!q.da&&q.listener==_&&q.capture==!!x&&q.ha==A)return W}return-1}var at="closure_lm_"+(Math.random()*1e6|0),Vt={};function Ji(h,_,x,A,W){if(Array.isArray(_)){for(let q=0;q<_.length;q++)Ji(h,_[q],x,A,W);return null}return x=xi(x),h&&h[Pe]?h.J(_,x,u(A)?!!A.capture:!1,W):Uo(h,_,x,!1,A,W)}function Uo(h,_,x,A,W,q){if(!_)throw Error("Invalid event type");const te=u(W)?!!W.capture:!!W;let Ee=Dr(h);if(Ee||(h[at]=Ee=new he(h)),x=Ee.add(_,x,A,te,q),x.proxy)return x;if(A=Fs(),x.proxy=A,A.src=h,A.listener=x,h.addEventListener)F||(W=te),W===void 0&&(W=!1),h.addEventListener(_.toString(),A,W);else if(h.attachEvent)h.attachEvent(Bo(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Fs(){function h(x){return _.call(h.src,h.listener,x)}const _=zs;return h}function wi(h,_,x,A,W){if(Array.isArray(_))for(var q=0;q<_.length;q++)wi(h,_[q],x,A,W);else A=u(A)?!!A.capture:!!A,x=xi(x),h&&h[Pe]?(h=h.i,q=String(_).toString(),q in h.g&&(_=h.g[q],x=ge(_,x,A,W),x>-1&&(K(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete h.g[q],h.h--)))):h&&(h=Dr(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ge(_,x,A,W)),(x=h>-1?_[h]:null)&&er(x))}function er(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Pe])me(_.i,h);else{var x=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(x,A,h.capture):_.detachEvent?_.detachEvent(Bo(x),A):_.addListener&&_.removeListener&&_.removeListener(A),(x=Dr(_))?(me(x,h),x.h==0&&(x.src=null,_[at]=null)):K(h)}}}function Bo(h){return h in Vt?Vt[h]:Vt[h]="on"+h}function zs(h,_){if(h.da)h=!0;else{_=new ne(_,this);const x=h.listener,A=h.ha||h.src;h.fa&&er(h),h=x.call(A,_)}return h}function Dr(h){return h=h[at],h instanceof he?h:null}var tr="__closure_events_fn_"+(Math.random()*1e9>>>0);function xi(h){return typeof h=="function"?h:(h[tr]||(h[tr]=function(_){return h.handleEvent(_)}),h[tr])}function _t(){N.call(this),this.i=new he(this),this.M=this,this.G=null}y(_t,N),_t.prototype[Pe]=!0,_t.prototype.removeEventListener=function(h,_,x,A){wi(this,h,_,x,A)};function ft(h,_){var x,A=h.G;if(A)for(x=[];A;A=A.G)x.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var W=_;_=new D(A,h),ce(_,W)}W=!0;let q,te;if(x)for(te=x.length-1;te>=0;te--)q=_.g=x[te],W=de(q,A,!0,_)&&W;if(q=_.g=h,W=de(q,A,!0,_)&&W,W=de(q,A,!1,_)&&W,x)for(te=0;te<x.length;te++)q=_.g=x[te],W=de(q,A,!1,_)&&W}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const x=h.g[_];for(let A=0;A<x.length;A++)K(x[A]);delete h.g[_],h.h--}}this.G=null},_t.prototype.J=function(h,_,x,A){return this.i.add(String(h),_,!1,x,A)},_t.prototype.K=function(h,_,x,A){return this.i.add(String(h),_,!0,x,A)};function de(h,_,x,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let q=0;q<_.length;++q){const te=_[q];if(te&&!te.da&&te.capture==x){const Ee=te.listener,Fe=te.ha||te.src;te.fa&&me(h.i,te),W=Ee.call(Fe,A)!==!1&&W}}return W&&!A.defaultPrevented}function Ge(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(h,_||0)}function jt(h){h.g=Ge(()=>{h.g=null,h.i&&(h.i=!1,jt(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class jn extends N{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(h){N.call(this),this.h=h,this.g={}}y(Ft,N);var ii=[];function Us(h){ue(h.g,function(_,x){this.g.hasOwnProperty(x)&&er(_)},h),h.g={}}Ft.prototype.N=function(){Ft.Z.N.call(this),Us(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=a.JSON.stringify,Ep=a.JSON.parse,Hc=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Cl(){}function Wc(){}var Or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bs(){D.call(this,"d")}y(Bs,D);function Wo(){D.call(this,"c")}y(Wo,D);var nr={},Vr=null;function $o(){return Vr=Vr||new _t}nr.Ia="serverreachability";function $c(h){D.call(this,nr.Ia,h)}y($c,D);function jr(h){const _=$o();ft(_,new $c(_))}nr.STAT_EVENT="statevent";function Al(h,_){D.call(this,nr.STAT_EVENT,h),this.stat=_}y(Al,D);function Nt(h){const _=$o();ft(_,new Al(_,h))}nr.Ja="timingevent";function qc(h,_){D.call(this,nr.Ja,h),this.size=_}y(qc,D);function Hs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Ws(){this.g=!0}Ws.prototype.ua=function(){this.g=!1};function Sp(h,_,x,A,W,q){h.info(function(){if(h.g)if(q){var te="",Ee=q.split("&");for(let Ue=0;Ue<Ee.length;Ue++){var Fe=Ee[Ue].split("=");if(Fe.length>1){const pt=Fe[0];Fe=Fe[1];const Hn=pt.split("_");te=Hn.length>=2&&Hn[1]=="type"?te+(pt+"="+Fe+"&"):te+(pt+"=redacted&")}}}else te=null;else te=q;return"XMLHTTP REQ ("+A+") [attempt "+W+"]: "+_+`
`+x+`
`+te})}function bp(h,_,x,A,W,q,te){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+W+"]: "+_+`
`+x+`
`+q+" "+te})}function Fr(h,_,x,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Pp(h,x)+(A?" "+A:"")})}function kl(h,_){h.info(function(){return"TIMEOUT: "+_})}Ws.prototype.info=function(){};function Pp(h,_){if(!h.g)return _;if(!_)return null;try{const q=JSON.parse(_);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var x=q[h];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var W=A[0];if(W!="noop"&&W!="stop"&&W!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return Ho(q)}catch{return _}}var qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kc;function pn(){}y(pn,Cl),pn.prototype.g=function(){return new XMLHttpRequest},Kc=new pn;function ae(h){return encodeURIComponent(String(h))}function Zc(h){var _=1;h=h.split(":");const x=[];for(;_>0&&h.length;)x.push(h.shift()),_--;return h.length&&x.push(h.join(":")),x}function ri(h,_,x,A){this.j=h,this.i=_,this.l=x,this.S=A||1,this.V=new Ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Nl={},$s={};function Go(h,_,x){h.M=1,h.A=Ke(on(_)),h.u=x,h.R=!0,ir(h,null)}function ir(h,_){h.F=Date.now(),Ko(h),h.B=on(h.A);var x=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Jo(x.i,"t",A),h.C=0,x=h.j.L,h.h=new Rl,h.g=ql(h.j,x?_:null,!h.u),h.P>0&&(h.O=new jn(f(h.Y,h,h.g),h.P)),_=h.V,x=h.g,A=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(ii[0]=W.toString()),W=ii);for(let q=0;q<W.length;q++){const te=Ji(x,W[q],A||_.handleEvent,!1,_.h||_);if(!te)break;_.g[te.key]=te}_=h.J?fe(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),jr(),Sp(h.i,h.v,h.B,h.l,h.S,h.u)}ri.prototype.ba=function(h){h=h.target;const _=this.O;_&&bi(h)==3?_.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)e:{const Ee=bi(this.g),Fe=this.g.ya(),Ue=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||Fl(this.g)))){this.K||Ee!=4||Fe==7||(Fe==8||Ue<=0?jr(3):jr(2)),Zo(this);var _=this.g.ca();this.X=_;var x=Yc(this);if(this.o=_==200,bp(this.i,this.v,this.B,this.l,this.S,Ee,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,W=this.g;if((A=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var q=A;break t}}q=null}if(h=q)Fr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ml(this,h);else{this.o=!1,this.m=3,Nt(12),Fn(this),qs(this);break e}}if(this.R){h=!0;let pt;for(;!this.K&&this.C<x.length;)if(pt=Ip(this,x),pt==$s){Ee==4&&(this.m=4,Nt(14),h=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Nl){this.m=4,Nt(15),Fr(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Fr(this.i,this.l,pt,null),Ml(this,pt);if(Qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||x.length!=0||this.h.h||(this.m=1,Nt(16),h=!1),this.o=this.o&&h,!h)Fr(this.i,this.l,x,"[Invalid Chunked Response]"),Fn(this),qs(this);else if(x.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Wl(te),te.P=!0,Nt(11))}}else Fr(this.i,this.l,x,null),Ml(this,x);Ee==4&&Fn(this),this.o&&!this.K&&(Ee==4?In(this.j,this):(this.o=!1,Ko(this)))}else zl(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Fn(this),qs(this)}}}catch{}finally{}};function Yc(h){if(!Qc(h))return h.g.la();const _=Fl(h.g);if(_==="")return"";let x="";const A=_.length,W=bi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Fn(h),qs(h),"";h.h.i=new a.TextDecoder}for(let q=0;q<A;q++)h.h.h=!0,x+=h.h.i.decode(_[q],{stream:!(W&&q==A-1)});return _.length=0,h.h.g+=x,h.C=0,h.h.g}function Qc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ip(h,_){var x=h.C,A=_.indexOf(`
`,x);return A==-1?$s:(x=Number(_.substring(x,A)),isNaN(x)?Nl:(A+=1,A+x>_.length?$s:(_=_.slice(A,A+x),h.C=A+x,_)))}ri.prototype.cancel=function(){this.K=!0,Fn(this)};function Ko(h){h.T=Date.now()+h.H,Xc(h,h.H)}function Xc(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Hs(f(h.aa,h),_)}function Zo(h){h.D&&(a.clearTimeout(h.D),h.D=null)}ri.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(kl(this.i,this.B),this.M!=2&&(jr(),Nt(17)),Fn(this),this.m=2,qs(this)):Xc(this,this.T-h)};function qs(h){h.j.I==0||h.K||In(h.j,h)}function Fn(h){Zo(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Us(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Ml(h,_){try{var x=h.j;if(x.I!=0&&(x.g==h||Gs(x.h,h))){if(!h.L&&Gs(x.h,h)&&x.I==3){try{var A=x.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var W=A;if(W[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)ra(x),na(x);else break e;Hl(x),Nt(18)}}else x.xa=W[1],0<x.xa-x.K&&W[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Hs(f(x.Va,x),6e3));th(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ii(x,11)}else if((h.L||x.g==h)&&ra(x),!O(_))for(W=x.Ba.g.parse(_),_=0;_<W.length;_++){let Ue=W[_];const pt=Ue[0];if(!(pt<=x.K))if(x.K=pt,Ue=Ue[1],x.I==2)if(Ue[0]=="c"){x.M=Ue[1],x.ba=Ue[2];const Hn=Ue[3];Hn!=null&&(x.ka=Hn,x.j.info("VER="+x.ka));const ai=Ue[4];ai!=null&&(x.za=ai,x.j.info("SVER="+x.za));const Wn=Ue[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(A=1.5*Wn,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Ci=h.g;if(Ci){const aa=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var q=A.h;q.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(rr(q,q.h),q.h=null))}if(A.G){const la=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;la&&(A.wa=la,se(A.J,A.G,la))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var te=h;if(A.na=$l(A,A.L?A.ba:null,A.W),te.L){Ll(A.h,te);var Ee=te,Fe=A.O;Fe&&(Ee.H=Fe),Ee.D&&(Zo(Ee),Ko(Ee)),A.g=te}else Bl(A);x.i.length>0&&Pi(x)}else Ue[0]!="stop"&&Ue[0]!="close"||Ii(x,7);else x.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ii(x,7):Ie(x):Ue[0]!="noop"&&x.l&&x.l.qa(Ue),x.A=0)}}jr(4)}catch{}}var Cp=class{constructor(h,_){this.g=h,this.map=_}};function Jc(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eh(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function th(h){return h.h?1:h.g?h.g.size:0}function Gs(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function rr(h,_){h.g?h.g.add(_):h.h=_}function Ll(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Jc.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Dl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const x of h.g.values())_=_.concat(x.G);return _}return T(h.i)}var zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Le(h,_){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const A=h[x].indexOf("=");let W,q=null;A>=0?(W=h[x].substring(0,A),q=h[x].substring(A+1)):W=h[x],_(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function je(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof je?(this.l=h.l,zn(this,h.j),this.o=h.o,this.g=h.g,Un(this,h.u),this.h=h.h,Ks(this,Zs(h.i)),this.m=h.m):h&&(_=String(h).match(zr))?(this.l=!1,zn(this,_[1]||"",!0),this.o=sr(_[2]||""),this.g=sr(_[3]||"",!0),Un(this,_[4]),this.h=sr(_[5]||"",!0),Ks(this,_[6]||"",!0),this.m=sr(_[7]||"")):(this.l=!1,this.i=new si(null,this.l))}je.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ti(_,nh,!0),":");var x=this.g;return(x||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ti(_,nh,!0),"@"),h.push(ae(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Ti(x,x.charAt(0)=="/"?or:Yo,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Ti(x,ar)),h.join("")},je.prototype.resolve=function(h){const _=on(this);let x=!!h.j;x?zn(_,h.j):x=!!h.o,x?_.o=h.o:x=!!h.g,x?_.g=h.g:x=h.u!=null;var A=h.h;if(x)Un(_,h.u);else if(x=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var W=_.h.lastIndexOf("/");W!=-1&&(A=_.h.slice(0,W+1)+A)}if(W=A,W==".."||W==".")A="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){A=W.lastIndexOf("/",0)==0,W=W.split("/");const q=[];for(let te=0;te<W.length;){const Ee=W[te++];Ee=="."?A&&te==W.length&&q.push(""):Ee==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&te==W.length&&q.push("")):(q.push(Ee),A=!0)}A=q.join("/")}else A=W}return x?_.h=A:x=h.i.toString()!=="",x?Ks(_,Zs(h.i)):x=!!h.m,x&&(_.m=h.m),_};function on(h){return new je(h)}function zn(h,_,x){h.j=x?sr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Un(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Ks(h,_,x){_ instanceof si?(h.i=_,Ol(h.i,h.l)):(x||(_=Ti(_,lt)),h.i=new si(_,h.l))}function se(h,_,x){h.i.set(_,x)}function Ke(h){return se(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function sr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ti(h,_,x){return typeof h=="string"?(h=encodeURI(h).replace(_,mn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var nh=/[#\/\?@]/g,Yo=/[#\?:]/g,or=/[#\?]/g,lt=/[#\?@]/g,ar=/#/g;function si(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Pn(h){h.g||(h.g=new Map,h.h=0,h.i&&Le(h.i,function(_,x){h.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}t=si.prototype,t.add=function(h,_){Pn(this),this.i=null,h=Ei(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(_),this.h+=1,this};function Qo(h,_){Pn(h),_=Ei(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ur(h,_){return Pn(h),_=Ei(h,_),h.g.has(_)}t.forEach=function(h,_){Pn(this),this.g.forEach(function(x,A){x.forEach(function(W){h.call(_,W,A,this)},this)},this)};function Xo(h,_){Pn(h);let x=[];if(typeof _=="string")Ur(h,_)&&(x=x.concat(h.g.get(Ei(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)x=x.concat(h[_]);return x}t.set=function(h,_){return Pn(this),this.i=null,h=Ei(this,h),Ur(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=Xo(this,h),h.length>0?String(h[0]):_):_};function Jo(h,_,x){Qo(h,_),x.length>0&&(h.i=null,h.g.set(Ei(h,_),T(x)),h.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var x=_[A];const W=ae(x);x=Xo(this,x);for(let q=0;q<x.length;q++){let te=W;x[q]!==""&&(te+="="+ae(x[q])),h.push(te)}}return this.i=h.join("&")};function Zs(h){const _=new si;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ei(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ol(h,_){_&&!h.j&&(Pn(h),h.i=null,h.g.forEach(function(x,A){const W=A.toLowerCase();A!=W&&(Qo(this,A),Jo(this,W,x))},h)),h.j=_}function ea(h,_){const x=new Ws;if(a.Image){const A=new Image;A.onload=p(Bn,x,"TestLoadImage: loaded",!0,_,A),A.onerror=p(Bn,x,"TestLoadImage: error",!1,_,A),A.onabort=p(Bn,x,"TestLoadImage: abort",!1,_,A),A.ontimeout=p(Bn,x,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function ih(h,_){const x=new Ws,A=new AbortController,W=setTimeout(()=>{A.abort(),Bn(x,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(q=>{clearTimeout(W),q.ok?Bn(x,"TestPingServer: ok",!0,_):Bn(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),Bn(x,"TestPingServer: error",!1,_)})}function Bn(h,_,x,A,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),A(x)}catch{}}function Ap(){this.g=new Hc}function Te(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Te,Cl),Te.prototype.g=function(){return new an(this.i,this.h)};function an(h,_){_t.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(an,_t),t=an.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,lr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,lr(this)),this.g&&(this.readyState=3,lr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;We(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function We(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Br(this):lr(this),this.readyState==3&&We(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Br(this))},t.Na=function(h){this.g&&(this.response=h,Br(this))},t.ga=function(){this.g&&Br(this)};function Br(h){h.readyState=4,h.l=null,h.j=null,h.B=null,lr(h)}t.setRequestHeader=function(h,_){this.A.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=_.next();return h.join(`\r
`)};function lr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ta(h){let _="";return ue(h,function(x,A){_+=A,_+=":",_+=x,_+=`\r
`}),_}function Ys(h,_,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=ta(x),typeof h=="string"?x!=null&&ae(x):se(h,_,x))}function ze(h){_t.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ze,_t);var Vl=/^https?$/i,Qs=["POST","PUT"];t=ze.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,_,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(q){vt(this,q);return}if(h=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var W in A)x.set(W,A[W]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())x.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(q=>q.toLowerCase()=="content-type"),W=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Qs,_,void 0)>=0)||A||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of x)this.g.setRequestHeader(q,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){vt(this,q)}};function vt(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Si(h),Xs(h)}function Si(h){h.A||(h.A=!0,ft(h,"complete"),ft(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ft(this,"complete"),ft(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?jl(this):this.Xa())},t.Xa=function(){jl(this)};function jl(h){if(h.h&&typeof o<"u"){if(h.v&&bi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ft(h,"readystatechange"),bi(h)==4){h.h=!1;try{const q=h.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var A;if(A=q===0){let te=String(h.D).match(zr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),A=!Vl.test(te?te.toLowerCase():"")}x=A}if(x)ft(h,"complete"),ft(h,"success");else{h.o=6;try{var W=bi(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",Si(h)}}finally{Xs(h)}}}}function Xs(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,_||ft(h,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bi(h){return h.g?h.g.readyState:0}t.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ep(_)}};function Fl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zl(h){const _={};h=(h.g&&bi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(O(h[A]))continue;var x=Zc(h[A]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const q=_[W]||[];_[W]=q,q.push(x)}J(_,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(h,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||_}function Ul(h){this.za=0,this.i=[],this.j=new Ws,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Js("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Js("baseRetryDelayMs",5e3,h),this.Za=Js("retryDelaySeedMs",1e4,h),this.Ta=Js("forwardChannelMaxRetries",2,h),this.va=Js("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Jc(h&&h.concurrentRequestLimit),this.Ba=new Ap,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ul.prototype,t.ka=8,t.I=1,t.connect=function(h,_,x,A){Nt(0),this.W=h,this.H=_||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=$l(this,null,this.W),Pi(this)};function Ie(h){if(gn(h),h.I==3){var _=h.V++,x=on(h.J);if(se(x,"SID",h.M),se(x,"RID",_),se(x,"TYPE","terminate"),ur(h,x),_=new ri(h,h.j,_),_.M=2,_.A=Ke(on(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=_.A,x=!0),x||(_.g=ql(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ko(_)}oi(h)}function na(h){h.g&&(Wl(h),h.g.cancel(),h.g=null)}function gn(h){na(h),h.v&&(a.clearTimeout(h.v),h.v=null),ra(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function Pi(h){if(!eh(h.h)&&!h.m){h.m=!0;var _=h.Ea;H||E(),U||(H(),U=!0),k.add(_,h),h.D=0}}function rh(h,_){return th(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Hs(f(h.Ea,h,_),ah(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new ri(this,this.j,h);let q=this.o;if(this.U&&(q?(q=fe(q),ce(q,this.U)):q=this.U),this.u!==null||this.R||(W.J=q,q=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=oh(this,W,_),x=on(this.J),se(x,"RID",h),se(x,"CVER",22),this.G&&se(x,"X-HTTP-Session-Id",this.G),ur(this,x),q&&(this.R?_="headers="+ae(ta(q))+"&"+_:this.u&&Ys(x,this.u,q)),rr(this.h,W),this.Ra&&se(x,"TYPE","init"),this.S?(se(x,"$req",_),se(x,"SID","null"),W.U=!0,Go(W,x,null)):Go(W,x,_),this.I=2}}else this.I==3&&(h?sh(this,h):this.i.length==0||eh(this.h)||sh(this))};function sh(h,_){var x;_?x=_.l:x=h.V++;const A=on(h.J);se(A,"SID",h.M),se(A,"RID",x),se(A,"AID",h.K),ur(h,A),h.u&&h.o&&Ys(A,h.u,h.o),x=new ri(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),_&&(h.i=_.G.concat(h.i)),_=oh(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),rr(h.h,x),Go(x,A,_)}function ur(h,_){h.H&&ue(h.H,function(x,A){se(_,A,x)}),h.l&&ue({},function(x,A){se(_,A,x)})}function oh(h,_,x){x=Math.min(h.i.length,x);const A=h.l?f(h.l.Ka,h.l,h):null;e:{var W=h.i;let Ee=-1;for(;;){const Fe=["count="+x];Ee==-1?x>0?(Ee=W[0].g,Fe.push("ofs="+Ee)):Ee=0:Fe.push("ofs="+Ee);let Ue=!0;for(let pt=0;pt<x;pt++){var q=W[pt].g;const Hn=W[pt].map;if(q-=Ee,q<0)Ee=Math.max(0,W[pt].g-100),Ue=!1;else try{q="req"+q+"_"||"";try{var te=Hn instanceof Map?Hn:Object.entries(Hn);for(const[ai,Wn]of te){let Ci=Wn;u(Wn)&&(Ci=Ho(Wn)),Fe.push(q+ai+"="+encodeURIComponent(Ci))}}catch(ai){throw Fe.push(q+"type="+encodeURIComponent("_badmap")),ai}}catch{A&&A(Hn)}}if(Ue){te=Fe.join("&");break e}}te=void 0}return h=h.i.splice(0,x),_.G=h,te}function Bl(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;H||E(),U||(H(),U=!0),k.add(_,h),h.A=0}}function Hl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Hs(f(h.Da,h),ah(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,ia(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Hs(f(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),na(this),ia(this))};function Wl(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function ia(h){h.g=new ri(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=on(h.na);se(_,"RID","rpc"),se(_,"SID",h.M),se(_,"AID",h.K),se(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&se(_,"TO",h.ia),se(_,"TYPE","xmlhttp"),ur(h,_),h.u&&h.o&&Ys(_,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Ke(on(_)),x.u=null,x.R=!0,ir(x,h)}t.Va=function(){this.C!=null&&(this.C=null,na(this),Hl(this),Nt(19))};function ra(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function In(h,_){var x=null;if(h.g==_){ra(h),Wl(h),h.g=null;var A=2}else if(Gs(h.h,_))x=_.G,Ll(h.h,_),A=1;else return;if(h.I!=0){if(_.o)if(A==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var W=h.D;A=$o(),ft(A,new qc(A,x)),Pi(h)}else Bl(h);else if(W=_.m,W==3||W==0&&_.X>0||!(A==1&&rh(h,_)||A==2&&Hl(h)))switch(x&&x.length>0&&(_=h.h,_.i=_.i.concat(x)),W){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function ah(h,_){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*_}function Ii(h,_){if(h.j.info("Error code "+_),_==2){var x=f(h.bb,h),A=h.Ua;const W=!A;A=new je(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zn(A,"https"),Ke(A),W?ea(A.toString(),x):ih(A.toString(),x)}else Nt(2);h.I=0,h.l&&h.l.pa(_),oi(h),gn(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function oi(h){if(h.I=0,h.ja=[],h.l){const _=Dl(h.h);(_.length!=0||h.i.length!=0)&&(I(h.ja,_),I(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function $l(h,_,x){var A=x instanceof je?on(x):new je(x);if(A.g!="")_&&(A.g=_+"."+A.g),Un(A,A.u);else{var W=a.location;A=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const q=new je(null);A&&zn(q,A),_&&(q.g=_),W&&Un(q,W),x&&(q.h=x),A=q}return x=h.G,_=h.wa,x&&_&&se(A,x,_),se(A,"VER",h.ka),ur(h,A),A}function ql(h,_,x){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new ze(new Te({ab:x})):new ze(h.ma),_.Fa(h.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sa(){}t=sa.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oa(){}oa.prototype.g=function(h,_){return new Gt(h,_)};function Gt(h,_){_t.call(this),this.g=new Ul(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Hr(this)}y(Gt,_t),Gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Ie(this.g)},Gt.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=Ho(h),h=x);_.i.push(new Cp(_.Ya++,h)),_.I==3&&Pi(_)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Ie(this.g),delete this.g,Gt.Z.N.call(this)};function Gl(h){Bs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const x in _){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}y(Gl,Bs);function lh(){Wo.call(this),this.status=1}y(lh,Wo);function Hr(h){this.g=h}y(Hr,sa),Hr.prototype.ra=function(){ft(this.g,"a")},Hr.prototype.qa=function(h){ft(this.g,new Gl(h))},Hr.prototype.pa=function(h){ft(this.g,new lh)},Hr.prototype.oa=function(){ft(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,KI=function(){return new oa},GI=function(){return $o()},qI=nr,ry={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,pd=qo,Gc.COMPLETE="complete",$I=Gc,Wc.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",_t.prototype.listen=_t.prototype.J,gu=Wc,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,WI=ze}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const I1="@firebase/firestore",C1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new hv("@firebase/firestore");function _a(){return Co.logLevel}function re(t,...e){if(Co.logLevel<=Re.DEBUG){const n=e.map(pv);Co.debug(`Firestore (${El}): ${t}`,...n)}}function Rr(t,...e){if(Co.logLevel<=Re.ERROR){const n=e.map(pv);Co.error(`Firestore (${El}): ${t}`,...n)}}function ll(t,...e){if(Co.logLevel<=Re.WARN){const n=e.map(pv);Co.warn(`Firestore (${El}): ${t}`,...n)}}function pv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,ZI(t,i,n)}function ZI(t,e,n){let i=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Rr(i),new Error(i)}function He(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||ZI(e,r,i)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class j5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class F5{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new YI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class z5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new z5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=H5(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ne(t,e){return t<e?-1:t>e?1:0}function sy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Im(r)===Im(o)?Ne(r,o):Im(r)?1:-1}return Ne(t.length,e.length)}const W5=55296,$5=57343;function Im(t){const e=t.charCodeAt(0);return e>=W5&&e<=$5}function ul(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="__name__";class Ni{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ni.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ne(e.length,n.length)}static compareSegments(e,n){const i=Ni.isNumericId(e),r=Ni.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ni.extractNumericId(e).compare(Ni.extractNumericId(n)):sy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class nt extends Ni{construct(e,n,i){return new nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ni{construct(e,n,i){return new Ht(e,n,i)}static isValidIdentifier(e){return q5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k1}static keyField(){return new Ht([k1])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e,n){if(!n)throw new le(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K5(t,e,n,i){if(e===!0&&i===!0)throw new le(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function R1(t){if(!ye.isDocumentKey(t))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gv(t);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Lc(t,e){if(!QI(t))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new le(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=-62135596800,M1=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*M1);return new Qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<N1)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M1}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:bt("string",Qe._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Qe(0,0))}static max(){return new Se(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function Z5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new Ps(r,ye.empty(),e)}function Y5(t){return new Ps(t.readTime,t.key,dc)}class Ps{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ps(Se.min(),ye.empty(),dc)}static max(){return new Ps(Se.max(),ye.empty(),dc)}}function Q5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==X5)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,i)=>{n(e)})}static reject(e){return new Y((n,i)=>{i(e)})}static waitFor(e){return new Y((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=Y.resolve(!1);for(const i of e)n=n.next(r=>r?Y.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Y((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(p=>{a[f]=p,++u,u===o&&i(a)},p=>r(p))}})}static doWhile(e,n){return new Y((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function eF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}np.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-1;function ip(t){return t==null}function cf(t){return t===0&&1/t==-1/0}function tF(t){return typeof t=="number"&&Number.isInteger(t)&&!cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="";function nF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=L1(e)),e=iF(t.get(n),e);return L1(e)}function iF(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case XI:n+="";break;default:n+=o}}return n}function L1(t){return t+XI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Bt.RED,this.left=r??Bt.EMPTY,this.right=o??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Bt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O1(this.data.getIterator())}getIteratorFrom(e){return new O1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class O1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new kn([])}unionWith(e){let n=new kt(Ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eC("Invalid base64 string: "+o):o}}(e);return new qt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const rF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=rF.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="server_timestamp",nC="__type__",iC="__previous_value__",rC="__local_write_time__";function _v(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[nC])==null?void 0:i.stringValue)===tC}function rp(t){const e=t.mapValue.fields[iC];return _v(e)?rp(e):e}function fc(t){const e=Is(t.mapValue.fields[rC].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,n,i,r,o,a,u,c,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=p}}const hf="(default)";class pc{constructor(e,n){this.projectId=e,this.database=n||hf}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===hf}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="__type__",oF="__max__",$h={mapValue:{}},oC="__vector__",df="value";function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_v(t)?4:lF(t)?9007199254740991:aF(t)?10:11:we(28295,{value:t})}function Zi(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fc(t).isEqual(fc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Is(r.timestampValue),u=Is(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Cs(r.bytesValue).isEqual(Cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return gt(r.geoPointValue.latitude)===gt(o.geoPointValue.latitude)&&gt(r.geoPointValue.longitude)===gt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return gt(r.integerValue)===gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=gt(r.doubleValue),u=gt(o.doubleValue);return a===u?cf(a)===cf(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return ul(t.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(D1(a)!==D1(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Zi(a[c],u[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function mc(t,e){return(t.values||[]).find(n=>Zi(n,e))!==void 0}function cl(t,e){if(t===e)return 0;const n=As(t),i=As(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=gt(o.integerValue||o.doubleValue),c=gt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return V1(t.timestampValue,e.timestampValue);case 4:return V1(fc(t),fc(e));case 5:return sy(t.stringValue,e.stringValue);case 6:return function(o,a){const u=Cs(o),c=Cs(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const p=Ne(u[f],c[f]);if(p!==0)return p}return Ne(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ne(gt(o.latitude),gt(a.latitude));return u!==0?u:Ne(gt(o.longitude),gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return j1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,I,R;const u=o.fields||{},c=a.fields||{},f=(v=u[df])==null?void 0:v.arrayValue,p=(T=c[df])==null?void 0:T.arrayValue,y=Ne(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((R=p==null?void 0:p.values)==null?void 0:R.length)||0);return y!==0?y:j1(f,p)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===$h.mapValue&&a===$h.mapValue)return 0;if(o===$h.mapValue)return 1;if(a===$h.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let y=0;y<c.length&&y<p.length;++y){const v=sy(c[y],p[y]);if(v!==0)return v;const T=cl(u[c[y]],f[p[y]]);if(T!==0)return T}return Ne(c.length,p.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function V1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Is(t),i=Is(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function j1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=cl(n[r],i[r]);if(o)return o}return Ne(n.length,i.length)}function hl(t){return oy(t)}function oy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Is(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=oy(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${oy(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function md(t){switch(As(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rp(t);return e?16+md(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+md(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Vs(i.fields,(o,a)=>{r+=o.length+md(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function ay(t){return!!t&&"integerValue"in t}function vv(t){return!!t&&"arrayValue"in t}function F1(t){return!!t&&"nullValue"in t}function z1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gd(t){return!!t&&"mapValue"in t}function aF(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sC])==null?void 0:i.stringValue)===oC}function Lu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Lu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lu(t.arrayValue.values[n]);return e}return{...t}}function lF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(n)}setAll(e){let n=Ht.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Lu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];gd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Vs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new wn(Lu(this.value))}}function aC(t){const e=[];return Vs(t.fields,(n,i)=>{const r=new Ht([n]);if(gd(i)){const o=aC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new en(e,0,Se.min(),Se.min(),Se.min(),wn.empty(),0)}static newFoundDocument(e,n,i,r){return new en(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new en(e,2,n,Se.min(),Se.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Se.min(),Se.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function U1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(a.referenceValue),n.key):i=cl(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function B1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n="asc"){this.field=e,this.dir=n}}function uF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{}class Ct extends lC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new hF(e,n,i):n==="array-contains"?new pF(e,i):n==="in"?new mF(e,i):n==="not-in"?new gF(e,i):n==="array-contains-any"?new yF(e,i):new Ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dF(e,i):new fF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends lC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yi(e,n)}matches(e){return uC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uC(t){return t.op==="and"}function cC(t){return cF(t)&&uC(t)}function cF(t){for(const e of t.filters)if(e instanceof Yi)return!1;return!0}function ly(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+hl(t.value);if(cC(t))return t.filters.map(e=>ly(e)).join(",");{const e=t.filters.map(n=>ly(n)).join(",");return`${t.op}(${e})`}}function hC(t,e){return t instanceof Ct?function(i,r){return r instanceof Ct&&i.op===r.op&&i.field.isEqual(r.field)&&Zi(i.value,r.value)}(t,e):t instanceof Yi?function(i,r){return r instanceof Yi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&hC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function dC(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${hl(n.value)}`}(t):t instanceof Yi?function(n){return n.op.toString()+" {"+n.getFilters().map(dC).join(" ,")+"}"}(t):"Filter"}class hF extends Ct{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class dF extends Ct{constructor(e,n){super(e,"in",n),this.keys=fC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fF extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=fC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ye.fromName(i.referenceValue))}class pF extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vv(n)&&mc(n.arrayValue,this.value)}}class mF extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class gF extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class yF extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>mc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function H1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new _F(t,e,n,i,r,o,a)}function wv(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ly(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),ip(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>hl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>hl(i)).join(",")),e.Te=n}return e.Te}function xv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B1(t.startAt,e.startAt)&&B1(t.endAt,e.endAt)}function uy(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vF(t,e,n,i,r,o,a,u){return new sp(t,e,n,i,r,o,a,u)}function op(t){return new sp(t)}function W1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wF(t){return t.collectionGroup!==null}function Du(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new kt(Ht.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new pf(o,i))}),n.has(Ht.keyField().canonicalString())||e.Ie.push(new pf(Ht.keyField(),i))}return e.Ie}function Hi(t){const e=be(t);return e.Ee||(e.Ee=xF(e,Du(t))),e.Ee}function xF(t,e){if(t.limitType==="F")return H1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new pf(r.field,o)});const n=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;return H1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function cy(t,e,n){return new sp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ap(t,e){return xv(Hi(t),Hi(e))&&t.limitType===e.limitType}function pC(t){return`${wv(Hi(t))}|lt:${t.limitType}`}function va(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>dC(r)).join(", ")}]`),ip(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>hl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>hl(r)).join(",")),`Target(${i})`}(Hi(t))}; limitType=${t.limitType})`}function lp(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Du(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=U1(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,Du(i),r)||i.endAt&&!function(a,u,c){const f=U1(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,Du(i),r))}(t,e)}function TF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mC(t){return(e,n)=>{let i=!1;for(const r of Du(t)){const o=EF(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function EF(t,e,n){const i=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?cl(c,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new ot(ye.comparator);function Nr(){return SF}const gC=new ot(ye.comparator);function yu(...t){let e=gC;for(const n of t)e=e.insert(n.key,n);return e}function yC(t){let e=gC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ho(){return Ou()}function _C(){return Ou()}function Ou(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const bF=new ot(ye.comparator),PF=new kt(ye.comparator);function Me(...t){let e=PF;for(const n of t)e=e.add(n);return e}const IF=new kt(Ne);function CF(){return IF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function vC(t){return{integerValue:""+t}}function AF(t,e){return tF(e)?vC(e):Tv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function kF(t,e,n){return t instanceof mf?function(r,o){const a={fields:{[nC]:{stringValue:tC},[rC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&_v(o)&&(o=rp(o)),o&&(a.fields[iC]=o),{mapValue:a}}(n,e):t instanceof gc?xC(t,e):t instanceof yc?TC(t,e):function(r,o){const a=wC(r,o),u=$1(a)+$1(r.Ae);return ay(a)&&ay(r.Ae)?vC(u):Tv(r.serializer,u)}(t,e)}function RF(t,e,n){return t instanceof gc?xC(t,e):t instanceof yc?TC(t,e):n}function wC(t,e){return t instanceof gf?function(i){return ay(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class mf extends up{}class gc extends up{constructor(e){super(),this.elements=e}}function xC(t,e){const n=EC(e);for(const i of t.elements)n.some(r=>Zi(r,i))||n.push(i);return{arrayValue:{values:n}}}class yc extends up{constructor(e){super(),this.elements=e}}function TC(t,e){let n=EC(e);for(const i of t.elements)n=n.filter(r=>!Zi(r,i));return{arrayValue:{values:n}}}class gf extends up{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $1(t){return gt(t.integerValue||t.doubleValue)}function EC(t){return vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NF(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof gc&&r instanceof gc||i instanceof yc&&r instanceof yc?ul(i.elements,r.elements,Zi):i instanceof gf&&r instanceof gf?Zi(i.Ae,r.Ae):i instanceof mf&&r instanceof mf}(t.transform,e.transform)}class MF{constructor(e,n){this.version=e,this.transformResults=n}}class Wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cp{}function SC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PC(t.key,Wi.none()):new Dc(t.key,t.data,Wi.none());{const n=t.data,i=wn.empty();let r=new kt(Ht.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new js(t.key,i,new kn(r.toArray()),Wi.none())}}function LF(t,e,n){t instanceof Dc?function(r,o,a){const u=r.value.clone(),c=G1(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof js?function(r,o,a){if(!yd(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=G1(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(bC(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Vu(t,e,n,i){return t instanceof Dc?function(o,a,u,c){if(!yd(o.precondition,a))return u;const f=o.value.clone(),p=K1(o.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof js?function(o,a,u,c){if(!yd(o.precondition,a))return u;const f=K1(o.fieldTransforms,c,a),p=a.data;return p.setAll(bC(o)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return yd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function DF(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=wC(i.transform,r||null);o!=null&&(n===null&&(n=wn.empty()),n.set(i.field,o))}return n||null}function q1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ul(i,r,(o,a)=>NF(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dc extends cp{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class js extends cp{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function G1(t,e,n){const i=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,RF(a,u,n[r]))}return i}function K1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,kF(o,a,e))}return i}class PC extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OF extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&LF(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Vu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Vu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=_C();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=SC(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(n,i)=>q1(n,i))&&ul(this.baseMutations,e.baseMutations,(n,i)=>q1(n,i))}}class Ev{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return bF}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Ev(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,De;function zF(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function IC(t){if(t===void 0)return Rr("GRPC error has no .code"),X.UNKNOWN;switch(t){case xt.OK:return X.OK;case xt.CANCELLED:return X.CANCELLED;case xt.UNKNOWN:return X.UNKNOWN;case xt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xt.INTERNAL:return X.INTERNAL;case xt.UNAVAILABLE:return X.UNAVAILABLE;case xt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xt.NOT_FOUND:return X.NOT_FOUND;case xt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xt.ABORTED:return X.ABORTED;case xt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xt.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(De=xt||(xt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new _s([4294967295,4294967295],0);function Z1(t){const e=UF().encode(t),n=new HI;return n.update(e),new Uint8Array(n.digest())}function Y1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _s([n,i],0),new _s([r,o],0)]}class Sv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new _u(`Invalid padding: ${n}`);if(i<0)throw new _u(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new _u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_s.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(_s.fromNumber(i)));return r.compare(BF)===1&&(r=new _s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Z1(e),[i,r]=Y1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Sv(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Z1(e),[i,r]=Y1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hp(Se.min(),r,new ot(Ne),Nr(),Me())}}class Oc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Oc(i,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class CC{constructor(e,n){this.targetId=e,this.Ce=n}}class AC{constructor(e,n,i=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Q1{constructor(){this.ve=0,this.Fe=X1(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),i=Me();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new Oc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=X1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HF{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=qh(),this.He=qh(),this.Ye=new ot(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(uy(o))if(i===0){const a=new ye(o.path);this.et(n,a,en.newNoDocument(a,Se.min()))}else He(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),c=u?this.ct(u,e,a):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=Cs(i).toUint8Array()}catch(c){if(c instanceof eC)return ll("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Sv(a,r,o)}catch(c){return ll(c instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&uy(u.target)){const c=new ye(u.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,en.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Me();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new hp(e,n,this.Ye,this.je,i);return this.je=Nr(),this.Je=qh(),this.He=qh(),this.Ye=new ot(Ne),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Q1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Q1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qh(){return new ot(ye.comparator)}function X1(){return new ot(ye.comparator)}const WF={asc:"ASCENDING",desc:"DESCENDING"},$F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qF={and:"AND",or:"OR"};class GF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hy(t,e){return t.useProto3Json||ip(e)?e:{value:e}}function yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KF(t,e){return yf(t,e.toTimestamp())}function $i(t){return He(!!t,49232),Se.fromTimestamp(function(n){const i=Is(n);return new Qe(i.seconds,i.nanos)}(t))}function bv(t,e){return dy(t,e).canonicalString()}function dy(t,e){const n=function(r){return new nt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RC(t){const e=nt.fromString(t);return He(OC(e),10190,{key:e.toString()}),e}function fy(t,e){return bv(t.databaseId,e.path)}function Cm(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(MC(n))}function NC(t,e){return bv(t.databaseId,e)}function ZF(t){const e=RC(t);return e.length===4?nt.emptyPath():MC(e)}function py(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MC(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function J1(t,e,n){return{name:fy(t,e),fields:n.value.mapValue.fields}}function YF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(He(p===void 0||typeof p=="string",58123),qt.fromBase64String(p||"")):(He(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),qt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const p=f.code===void 0?X.UNKNOWN:IC(f.code);return new le(p,f.message||"")}(a);n=new AC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Cm(t,i.document.name),o=$i(i.document.updateTime),a=i.document.createTime?$i(i.document.createTime):Se.min(),u=new wn({mapValue:{fields:i.document.fields}}),c=en.newFoundDocument(r,o,a,u),f=i.targetIds||[],p=i.removedTargetIds||[];n=new _d(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Cm(t,i.document),o=i.readTime?$i(i.readTime):Se.min(),a=en.newNoDocument(r,o),u=i.removedTargetIds||[];n=new _d([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Cm(t,i.document),o=i.removedTargetIds||[];n=new _d([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new FF(r,o),u=i.targetId;n=new CC(u,a)}}return n}function QF(t,e){let n;if(e instanceof Dc)n={update:J1(t,e.key,e.value)};else if(e instanceof PC)n={delete:fy(t,e.key)};else if(e instanceof js)n={update:J1(t,e.key,e.data),updateMask:o6(e.fieldMask)};else{if(!(e instanceof OF))return we(16599,{Vt:e.type});n={verify:fy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof mf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof gc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gf)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:KF(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function XF(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?$i(r.updateTime):$i(o);return a.isEqual(Se.min())&&(a=$i(o)),new MF(a,r.transformResults||[])}(n,e))):[]}function JF(t,e){return{documents:[NC(t,e.path)]}}function e6(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NC(t,r);const o=function(f){if(f.length!==0)return DC(Yi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:wa(v.field),direction:i6(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=hy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function t6(t){let e=ZF(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){He(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const v=LC(y);return v instanceof Yi&&cC(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(I){return new pf(xa(I.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,ip(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(y){const v=!!y.before,T=y.values||[];return new ff(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,T=y.values||[];return new ff(T,v)}(n.endAt)),vF(e,r,a,o,u,"F",c,f)}function n6(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xa(n.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=xa(n.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xa(n.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xa(n.unaryFilter.field);return Ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(xa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yi.create(n.compositeFilter.filters.map(i=>LC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function i6(t){return WF[t]}function r6(t){return $F[t]}function s6(t){return qF[t]}function wa(t){return{fieldPath:t.canonicalString()}}function xa(t){return Ht.fromServerFormat(t.fieldPath)}function DC(t){return t instanceof Ct?function(n){if(n.op==="=="){if(z1(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NAN"}};if(F1(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z1(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NAN"}};if(F1(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(n.field),op:r6(n.op),value:n.value}}}(t):t instanceof Yi?function(n){const i=n.getFilters().map(r=>DC(r));return i.length===1?i[0]:{compositeFilter:{op:s6(n.op),filters:i}}}(t):we(54877,{filter:t})}function o6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.yt=e}}function l6(t){const e=t6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Cn=new c6}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Ps.min())}updateCollectionGroup(e,n,i){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class c6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new kt(nt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new kt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(VC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new dl(0)}static cr(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="LruGarbageCollector",h6=1048576;function nT([t,e],[n,i]){const r=Ne(t,n);return r===0?Ne(e,i):r}class d6{constructor(e){this.Ir=e,this.buffer=new kt(nT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();nT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(tT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bl(n)?re(tT,"Ignoring IndexedDB error during garbage collection: ",n):await Sl(n)}await this.Vr(3e5)})}}class p6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(np.ce);const i=new d6(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(eT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,c,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,a=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(f=Date.now(),_a()<=Re.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${y} documents in `+(f-c)+`ms
Total Duration: ${f-p}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}}function m6(t,e){return new p6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Vu(i.mutation,r,kn.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Me()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Me()){const r=ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=yu();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Me()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Nr();const a=Ou(),u=function(){return Ou()}();return n.forEach((c,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof js)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),Vu(p.mutation,f,p.mutation.getFieldMask(),Qe.now())):a.set(f.key,kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>u.set(f,new y6(p,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Ou();let r=new ot((a,u)=>a-u),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let p=i.get(c)||kn.empty();p=u.applyToLocalView(f,p),i.set(c,p);const y=(r.get(u.batchId)||Me()).add(c);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,p=c.value,y=_C();p.forEach(v=>{if(!o.has(v)){const T=SC(n.get(v),i.get(v));T!==null&&y.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Y.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Y.resolve(ho());let u=dc,c=o;return a.next(f=>Y.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Me())).next(p=>({batchId:u,changes:yC(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(i=>{let r=yu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=yu();return this.indexManager.getCollectionParents(e,o).next(u=>Y.forEach(u,c=>{const f=function(y,v){return new sp(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,en.newInvalidDocument(p)))});let u=yu();return a.forEach((c,f)=>{const p=o.get(c);p!==void 0&&Vu(p.mutation,f,kn.empty(),Qe.now()),lp(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:$i(r.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:l6(r.bundledQuery),readTime:$i(r.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.overlays=new ot(ye.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ho();return Y.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Y.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Y.resolve()}getOverlaysForCollection(e,n,i){const r=ho(),o=n.length+1,a=new ye(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ot((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=ho(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=ho(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=r)););return Y.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new jF(n,i));let o=this.qr.get(n);o===void 0&&(o=Me(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Qr=new kt(Lt.$r),this.Ur=new kt(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Lt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ye(new nt([])),i=new Lt(n,e),r=new Lt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new nt([])),i=new Lt(n,e),r=new Lt(n,e+1);let o=Me();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Lt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Lt.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new VF(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Lt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?yv:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Lt(n,0),r=new Lt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Ne);return n.forEach(r=>{const o=new Lt(r,0),a=new Lt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Y.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const a=new Lt(new ye(o),0);let u=new kt(Ne);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.Yr)),!0)},a),Y.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Y.forEach(n.mutations,r=>{const o=new Lt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Lt(n,0),r=this.Zr.firstAfterOrEqual(i);return Y.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.ri=e,this.docs=function(){return new ot(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let i=Nr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():en.newInvalidDocument(r))}),Y.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Nr();const a=n.path,u=new ye(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Q5(Y5(p),i)<=0||(r.has(p.key)||lp(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new S6(this)}getSize(e){return Y.resolve(this.size)}}class S6 extends g6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.persistence=e,this.si=new Fo(n=>wv(n),xv),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Pv,this.targetCount=0,this.ai=dl.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new dl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Y.waitFor(o).next(()=>r)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Y.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Y.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Y.resolve(i)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.ui={},this.overlays={},this.ci=new np(0),this.li=!1,this.li=!0,this.hi=new x6,this.referenceDelegate=e(this),this.Pi=new b6(this),this.indexManager=new u6,this.remoteDocumentCache=function(r){return new E6(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new a6(n),this.Ii=new v6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new w6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new T6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new P6(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Y.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class P6 extends J5{constructor(e){super(),this.currentSequenceNumber=e}}class Iv{constructor(e){this.persistence=e,this.Ri=new Pv,this.Vi=null}static mi(e){return new Iv(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Y.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,i=>{const r=ye.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _f{constructor(e,n){this.persistence=e,this.pi=new Fo(i=>nF(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=m6(this,n)}static mi(e,n){return new _f(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Y.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Y.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=md(e.data.value)),n}br(e,n,i){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Y.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Me(),r=Me();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Cv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return v3()?8:eF(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new I6;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(_a()<=Re.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(_a()<=Re.DEBUG&&re("QueryEngine","Query:",va(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(_a()<=Re.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(n))):Y.resolve())}ys(e,n){if(W1(n))return Y.resolve(null);let i=Hi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=cy(n,null,"F"),i=Hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Me(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.Ds(n,u);return this.Cs(n,f,a,c.readTime)?this.ys(e,cy(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,i,r){return W1(n)||r.isEqual(Se.min())?Y.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Y.resolve(null):(_a()<=Re.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),va(n)),this.vs(e,a,n,Z5(r,dc)).next(u=>u))})}Ds(e,n){let i=new kt(mC(e));return n.forEach((r,o)=>{lp(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return _a()<=Re.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",va(n)),this.ps.getDocumentsMatchingQuery(e,n,Ps.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LocalStore",A6=3e8;class k6{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new ot(Ne),this.xs=new Fo(o=>wv(o),xv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function R6(t,e,n,i){return new k6(t,e,n,i)}async function FC(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Me();for(const f of r){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function N6(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){const y=f.batch,v=y.keys();let T=Y.resolve();return v.forEach(I=>{T=T.next(()=>p.getEntry(c,I)).next(R=>{const V=f.docVersions.get(I);He(V!==null,48541),R.version.compareTo(V)<0&&(y.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Me();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function zC(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function M6(t,e){const n=be(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((p,y)=>{const v=r.get(y);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Pi.addMatchingKeys(o,p.addedDocuments,y)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(qt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,i)),r=r.insert(y,T),function(R,V,b){return R.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=A6?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,T,p)&&u.push(n.Pi.updateTargetData(o,T))});let c=Nr(),f=Me();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(L6(o,a,e.documentUpdates).next(p=>{c=p.ks,f=p.qs})),!i.isEqual(Se.min())){const p=n.Pi.getLastRemoteSnapshotVersion(o).next(y=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(p)}return Y.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Ms=r,o))}function L6(t,e,n){let i=Me(),r=Me();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Nr();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(Se.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):re(Av,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{ks:a,qs:r}})}function D6(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=yv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function O6(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Y.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new as(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function my(t,e,n){const i=be(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!bl(a))throw a;re(Av,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function iT(t,e,n){const i=be(t);let r=Se.min(),o=Me();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const y=be(c),v=y.xs.get(p);return v!==void 0?Y.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,p)}(i,a,Hi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Me())).next(u=>(V6(i,TF(e),u),{documents:u,Qs:o})))}function V6(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class rT{constructor(){this.activeTargetIds=CF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j6{constructor(){this.Mo=new rT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="ConnectivityMonitor";class oT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(sT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(sT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function gy(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="RestConnection",z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===hf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=gy(),u=this.zo(e,n.toUriEncodedString());re(Am,`Sending RPC '${e}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,o);const{host:f}=new URL(u),p=Os(f);return this.Jo(e,u,c,i,p).then(y=>(re(Am,`Received RPC '${e}' ${a}: `,y),y),y=>{throw ll(Am,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",i),y})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+El}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=z6[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class H6 extends U6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=gy();return new Promise((u,c)=>{const f=new WI;f.setWithCredentials(!0),f.listenOnce($I.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case pd.NO_ERROR:const y=f.getResponseJson();re(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case pd.TIMEOUT:re(Yt,`RPC '${e}' ${a} timed out`),c(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const v=f.getStatus();if(re(Yt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const I=T==null?void 0:T.error;if(I&&I.status&&I.message){const R=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(S)>=0?S:X.UNKNOWN}(I.status);c(new le(R,I.message))}else c(new le(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new le(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Yt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);re(Yt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",p,i,15)})}T_(e,n,i){const r=gy(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KI(),u=GI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=o.join("");re(Yt,`Creating RPC '${e}' stream ${r}: ${p}`,c);const y=a.createWebChannel(p,c);this.I_(y);let v=!1,T=!1;const I=new B6({Yo:V=>{T?re(Yt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(v||(re(Yt,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),re(Yt,`RPC '${e}' stream ${r} sending:`,V),y.send(V))},Zo:()=>y.close()}),R=(V,b,S)=>{V.listen(b,C=>{try{S(C)}catch(z){setTimeout(()=>{throw z},0)}})};return R(y,gu.EventType.OPEN,()=>{T||(re(Yt,`RPC '${e}' stream ${r} transport opened.`),I.o_())}),R(y,gu.EventType.CLOSE,()=>{T||(T=!0,re(Yt,`RPC '${e}' stream ${r} transport closed`),I.a_(),this.E_(y))}),R(y,gu.EventType.ERROR,V=>{T||(T=!0,ll(Yt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),I.a_(new le(X.UNAVAILABLE,"The operation could not be completed")))}),R(y,gu.EventType.MESSAGE,V=>{var b;if(!T){const S=V.data[0];He(!!S,16349);const C=S,z=(C==null?void 0:C.error)||((b=C[0])==null?void 0:b.error);if(z){re(Yt,`RPC '${e}' stream ${r} received error:`,z);const H=z.status;let U=function(M){const N=xt[M];if(N!==void 0)return IC(N)}(H),k=z.message;U===void 0&&(U=X.INTERNAL,k="Unknown error status: "+H+" with message "+z.message),T=!0,I.a_(new le(U,k)),y.close()}else re(Yt,`RPC '${e}' stream ${r} received:`,S),I.u_(S)}}),R(u,qI.STAT_EVENT,V=>{V.stat===ry.PROXY?re(Yt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===ry.NOPROXY&&re(Yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return new GF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="PersistentStream";class BC{constructor(e,n,i,r,o,a,u,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new le(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(aT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(aT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W6 extends BC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YF(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?$i(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=py(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=uy(c)?{documents:JF(o,c)}:{query:e6(o,c).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=kC(o,a.resumeToken);const f=hy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=yf(o,a.snapshotVersion.toTimestamp());const f=hy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=n6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=py(this.serializer),n.removeTarget=e,this.q_(n)}}class $6 extends BC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XF(e.writeResults,e.commitTime),i=$i(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=py(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>QF(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{}class G6 extends q6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,dy(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,dy(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class K6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class Z6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{zo(this)&&(re(Ao,"Restarting streams for network reachability change."),await async function(c){const f=be(c);f.Ea.add(4),await Vc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await fp(f)}(this))})}),this.Ra=new K6(i,r)}}async function fp(t){if(zo(t))for(const e of t.da)await e(!0)}async function Vc(t){for(const e of t.da)await e(!1)}function HC(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mv(n)?Nv(n):Pl(n).O_()&&Rv(n,e))}function kv(t,e){const n=be(t),i=Pl(n);n.Ia.delete(e),i.O_()&&WC(n,e),n.Ia.size===0&&(i.O_()?i.L_():zo(n)&&n.Ra.set("Unknown"))}function Rv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).Y_(e)}function WC(t,e){t.Va.Ue(e),Pl(t).Z_(e)}function Nv(t){t.Va=new HF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.Ra.ua()}function Mv(t){return zo(t)&&!Pl(t).x_()&&t.Ia.size>0}function zo(t){return be(t).Ea.size===0}function $C(t){t.Va=void 0}async function Y6(t){t.Ra.set("Online")}async function Q6(t){t.Ia.forEach((e,n)=>{Rv(t,e)})}async function X6(t,e){$C(t),Mv(t)?(t.Ra.ha(e),Nv(t)):t.Ra.set("Unknown")}async function J6(t,e,n){if(t.Ra.set("Online"),e instanceof AC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vf(t,i)}else if(e instanceof _d?t.Va.Ze(e):e instanceof CC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await zC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const p=o.Ia.get(c);if(!p)return;o.Ia.set(c,p.withResumeToken(qt.EMPTY_BYTE_STRING,p.snapshotVersion)),WC(o,c);const y=new as(p.target,c,f,p.sequenceNumber);Rv(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(Ao,"Failed to raise snapshot:",i),await vf(t,i)}}async function vf(t,e,n){if(!bl(e))throw e;t.Ea.add(1),await Vc(t),t.Ra.set("Offline"),n||(n=()=>zC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(Ao,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fp(t)})}function qC(t,e){return e().catch(n=>vf(t,n,e))}async function pp(t){const e=be(t),n=ks(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yv;for(;ez(e);)try{const r=await D6(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,tz(e,r)}catch(r){await vf(e,r)}GC(e)&&KC(e)}function ez(t){return zo(t)&&t.Ta.length<10}function tz(t,e){t.Ta.push(e);const n=ks(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GC(t){return zo(t)&&!ks(t).x_()&&t.Ta.length>0}function KC(t){ks(t).start()}async function nz(t){ks(t).ra()}async function iz(t){const e=ks(t);for(const n of t.Ta)e.ea(n.mutations)}async function rz(t,e,n){const i=t.Ta.shift(),r=Ev.from(i,e,n);await qC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await pp(t)}async function sz(t,e){e&&ks(t).X_&&await async function(i,r){if(function(a){return zF(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();ks(i).B_(),await qC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await pp(i)}}(t,e),GC(t)&&KC(t)}async function lT(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),re(Ao,"RemoteStore received new credentials");const i=zo(n);n.Ea.add(3),await Vc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fp(n)}async function oz(t,e){const n=be(t);e?(n.Ea.delete(2),await fp(n)):e||(n.Ea.add(2),await Vc(n),n.Ra.set("Unknown"))}function Pl(t){return t.ma||(t.ma=function(n,i,r){const o=be(n);return o.sa(),new W6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Y6.bind(null,t),t_:Q6.bind(null,t),r_:X6.bind(null,t),H_:J6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Mv(t)?Nv(t):t.Ra.set("Unknown")):(await t.ma.stop(),$C(t))})),t.ma}function ks(t){return t.fa||(t.fa=function(n,i,r){const o=be(n);return o.sa(),new $6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nz.bind(null,t),r_:sz.bind(null,t),ta:iz.bind(null,t),na:rz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pp(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Ao,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Lv(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(t,e){if(Rr("AsyncQueue",`${e}: ${t}`),bl(t))return new le(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=yu(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new qa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.ga=new ot(ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class fl{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new fl(e,n,qa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lz{constructor(){this.queries=cT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=be(n),o=r.queries;r.queries=cT(),o.forEach((a,u)=>{for(const c of u.Sa)c.onError(i)})})(this,new le(X.ABORTED,"Firestore shutting down"))}}function cT(){return new Fo(t=>pC(t),ap)}async function ZC(t,e){const n=be(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new az,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Dv(a,`Initialization of query '${va(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ov(n)}async function YC(t,e){const n=be(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function uz(t,e){const n=be(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Ov(n)}function cz(t,e,n){const i=be(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Ov(t){t.Ca.forEach(e=>{e.next()})}var yy,hT;(hT=yy||(yy={})).Ma="default",hT.Cache="cache";class QC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new fl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.key=e}}class JC{constructor(e){this.key=e}}class hz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=mC(e),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new uT,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,y)=>{const v=r.get(p),T=lp(this.query,y)?y:null,I=!!v&&this.mutatedKeys.has(v.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;v&&T?v.data.isEqual(T.data)?I!==R&&(i.track({type:3,doc:T}),V=!0):this.su(v,T)||(i.track({type:2,doc:T}),V=!0,(c&&this.eu(T,c)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),V=!0):v&&!T&&(i.track({type:1,doc:v}),V=!0,(c||f)&&(u=!0)),V&&(T?(a=a.add(T),o=R?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,y)=>function(T,I){const R=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:V})}};return R(T)-R(I)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,f=c!==this.Za;return this.Za=c,a.length!==0||f?{snapshot:new fl(this.query,e.tu,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new JC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new XC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vv="SyncEngine";class dz{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class fz{constructor(e){this.key=e,this.hu=!1}}class pz{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Fo(u=>pC(u),ap),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ye.comparator),this.Au=new Map,this.Ru=new Pv,this.Vu={},this.mu=new Map,this.fu=dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mz(t,e,n=!0){const i=sA(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await eA(i,e,n,!0),r}async function gz(t,e){const n=sA(t);await eA(n,e,!0,!1)}async function eA(t,e,n,i){const r=await O6(t.localStore,Hi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await yz(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&HC(t.remoteStore,r),u}async function yz(t,e,n,i,r){t.pu=(y,v,T)=>async function(R,V,b,S){let C=V.view.ru(b);C.Cs&&(C=await iT(R.localStore,V.query,!1).then(({documents:k})=>V.view.ru(k,C)));const z=S&&S.targetChanges.get(V.targetId),H=S&&S.targetMismatches.get(V.targetId)!=null,U=V.view.applyChanges(C,R.isPrimaryClient,z,H);return fT(R,V.targetId,U.au),U.snapshot}(t,y,v,T);const o=await iT(t.localStore,e,!0),a=new hz(e,o.Qs),u=a.ru(o.documents),c=Oc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);fT(t,n,f.au);const p=new dz(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function _z(t,e,n){const i=be(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!ap(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await my(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&kv(i.remoteStore,r.targetId),_y(i,r.targetId)}).catch(Sl)):(_y(i,r.targetId),await my(i.localStore,r.targetId,!0))}async function vz(t,e){const n=be(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kv(n.remoteStore,i.targetId))}async function wz(t,e,n){const i=Iz(t);try{const r=await function(a,u){const c=be(a),f=Qe.now(),p=u.reduce((T,I)=>T.add(I.key),Me());let y,v;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=Nr(),R=Me();return c.Ns.getEntries(T,p).next(V=>{I=V,I.forEach((b,S)=>{S.isValidDocument()||(R=R.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,I)).next(V=>{y=V;const b=[];for(const S of u){const C=DF(S,y.get(S.key).overlayedDocument);C!=null&&b.push(new js(S.key,C,aC(C.value.mapValue),Wi.exists(!0)))}return c.mutationQueue.addMutationBatch(T,f,b,u)}).next(V=>{v=V;const b=V.applyToLocalDocumentSet(y,R);return c.documentOverlayCache.saveOverlays(T,V.batchId,b)})}).then(()=>({batchId:v.batchId,changes:yC(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Vu[a.currentUser.toKey()];f||(f=new ot(Ne)),f=f.insert(u,c),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await jc(i,r.changes),await pp(i.remoteStore)}catch(r){const o=Dv(r,"Failed to persist write");n.reject(o)}}async function tA(t,e){const n=be(t);try{const i=await M6(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?He(a.hu,14607):r.removedDocuments.size>0&&(He(a.hu,42227),a.hu=!1))}),await jc(n,i,e)}catch(i){await Sl(i)}}function dT(t,e,n){const i=be(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=be(a);c.onlineState=u;let f=!1;c.queries.forEach((p,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)}),f&&Ov(c)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xz(t,e,n){const i=be(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new ot(ye.comparator);a=a.insert(o,en.newNoDocument(o,Se.min()));const u=Me().add(o),c=new hp(Se.min(),new Map,new ot(Ne),a,u);await tA(i,c),i.du=i.du.remove(o),i.Au.delete(e),jv(i)}else await my(i.localStore,e,!1).then(()=>_y(i,e,n)).catch(Sl)}async function Tz(t,e){const n=be(t),i=e.batch.batchId;try{const r=await N6(n.localStore,e);iA(n,i,null),nA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jc(n,r)}catch(r){await Sl(r)}}async function Ez(t,e,n){const i=be(t);try{const r=await function(a,u){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,u).next(y=>(He(y!==null,37113),p=y.keys(),c.mutationQueue.removeMutationBatch(f,y))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(i.localStore,e);iA(i,e,n),nA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await jc(i,r)}catch(r){await Sl(r)}}function nA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function iA(t,e,n){const i=be(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function _y(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||rA(t,i)})}function rA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jv(t))}function fT(t,e,n){for(const i of n)i instanceof XC?(t.Ru.addReference(i.key,e),Sz(t,i)):i instanceof JC?(re(Vv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||rA(t,i.key)):we(19791,{wu:i})}function Sz(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(Vv,"New document in limbo: "+n),t.Eu.add(i),jv(t))}function jv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(nt.fromString(e)),i=t.fu.next();t.Au.set(i,new fz(n)),t.du=t.du.insert(n,i),HC(t.remoteStore,new as(Hi(op(n.path)),i,"TargetPurposeLimboResolution",np.ce))}}async function jc(t,e,n){const i=be(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,c)=>{a.push(i.pu(c,e,n).then(f=>{var p;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(f){r.push(f);const y=Cv.As(c.targetId,f);o.push(y)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(c,f){const p=be(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,v=>Y.forEach(v.Es,T=>p.persistence.referenceDelegate.addReference(y,v.targetId,T)).next(()=>Y.forEach(v.ds,T=>p.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))}catch(y){if(!bl(y))throw y;re(Av,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const T=p.Ms.get(v),I=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(I);p.Ms=p.Ms.insert(v,R)}}}(i.localStore,o))}async function bz(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){re(Vv,"User change. New user:",e.toKey());const i=await FC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(c=>{c.reject(new le(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await jc(n,i.Ls)}}function Pz(t,e){const n=be(t),i=n.Au.get(e);if(i&&i.hu)return Me().add(i.key);{let r=Me();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function sA(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xz.bind(null,e),e.Pu.H_=uz.bind(null,e.eventManager),e.Pu.yu=cz.bind(null,e.eventManager),e}function Iz(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ez.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return R6(this.persistence,new C6,e.initialUser,this.serializer)}Cu(e){return new jC(Iv.mi,this.serializer)}Du(e){return new j6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class Cz extends wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof _f,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new f6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new jC(i=>_f.mi(i,n),this.serializer)}}class vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bz.bind(null,this.syncEngine),await oz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lz}()}createDatastore(e){const n=dp(e.databaseInfo.databaseId),i=function(o){return new H6(o)}(e.databaseInfo);return function(o,a,u,c){return new G6(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Z6(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>dT(this.syncEngine,n,0),function(){return oT.v()?new oT:new F6}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,p){const y=new pz(r,o,a,u,c,f);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=be(r);re(Ao,"RemoteStore shutting down."),o.Ea.add(5),await Vc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class Az{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Xt.UNAUTHENTICATED,this.clientId=mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(Rs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(Rs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress(),re(Rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await FC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kz(t);re(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>lT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>lT(e.remoteStore,r)),t._onlineComponents=e}async function kz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Rs,"Using user provided OfflineComponentProvider");try{await Rm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ll("Error using user provided cache. Falling back to memory cache: "+n),await Rm(t,new wf)}}else re(Rs,"Using default OfflineComponentProvider"),await Rm(t,new Cz(void 0));return t._offlineComponents}async function aA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Rs,"Using user provided OnlineComponentProvider"),await pT(t,t._uninitializedComponentsProvider._online)):(re(Rs,"Using default OnlineComponentProvider"),await pT(t,new vy))),t._onlineComponents}function Rz(t){return aA(t).then(e=>e.syncEngine)}async function wy(t){const e=await aA(t),n=e.eventManager;return n.onListen=mz.bind(null,e.syncEngine),n.onUnlisten=_z.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vz.bind(null,e.syncEngine),n}function Nz(t,e,n={}){const i=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const p=new oA({next:v=>{p.Nu(),a.enqueueAndForget(()=>YC(o,y));const T=v.docs.has(u);!T&&v.fromCache?f.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&c&&c.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new QC(op(u.path),p,{includeMetadataChanges:!0,qa:!0});return ZC(o,y)}(await wy(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firestore.googleapis.com",gT=!0;class yT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uA,this.ssl=gT}else this.host=e.host,this.ssl=e.ssl??gT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h6)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lA(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new V5;switch(i.type){case"firstParty":return new U5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=mT.get(n);i&&(re("ComponentProvider","Removing Datastore"),mT.delete(n),i.terminate())}(this),Promise.resolve()}}function Mz(t,e,n,i={}){var f;t=Bi(t,Fv);const r=Os(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(uv(`https://${u}`),cv("Firestore",!0)),o.host!==uA&&o.host!==u&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:r,emulatorOptions:i};if(!Po(c,a)&&(t._setSettings(c),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=Xt.MOCK_USER;else{p=VI(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Xt(v)}t._authCredentials=new j5(new YI(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mp(this.firestore,e,this._query)}}class Pt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Lc(n,Pt._jsonSchema))return new Pt(e,i||null,new ye(nt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:bt("string",Pt._jsonSchemaVersion),referencePath:bt("string")};class _c extends mp{constructor(e,n,i){super(e,n,op(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ye(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function Tt(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=mv.newId()),G5("doc","path",e),t instanceof Fv){const i=nt.fromString(e,...n);return R1(i),new Pt(t,null,new ye(i))}{if(!(t instanceof Pt||t instanceof _c))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(nt.fromString(e,...n));return R1(i),new Pt(t.firestore,t instanceof _c?t.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="AsyncQueue";class vT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UC(this,"async_queue_retry"),this._c=()=>{const i=km();i&&re(_T,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bl(e))throw e;re(_T,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",wT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Lv.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:wT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class pl extends Fv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new vT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vT(e),this._firestoreClient=void 0,await e}}}function Lz(t,e){const n=typeof t=="object"?t:fv(),i=typeof t=="string"?t:hf,r=tp(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=LI("firestore");o&&Mz(r,...o)}return r}function zv(t){if(t._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Dz(t),t._firestoreClient}function Dz(t){var i,r,o;const e=t._freezeSettings(),n=function(u,c,f,p){return new sF(u,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,lA(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Az(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(qt.fromBase64String(e))}catch(n){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lc(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:bt("string",Qn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(Lc(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:bt("string",qi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lc(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:bt("string",Gi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=/^__.*__$/;class Vz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class cA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new js(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Bv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hA(this.Ac)&&Oz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dp(e)}Cc(e,n,i,r=!1){return new Bv({Ac:e,methodName:n,Dc:i,path:Ht.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dA(t){const e=t._freezeSettings(),n=dp(t._databaseId);return new jz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fz(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);Hv("Data must be an object, but it was:",a,i);const u=fA(i,a);let c,f;if(o.merge)c=new kn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const v=xy(e,y,n);if(!a.contains(v))throw new le(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);mA(p,v)||p.push(v)}c=new kn(p),f=a.fieldTransforms.filter(y=>c.covers(y.field))}else c=null,f=a.fieldTransforms;return new Vz(new wn(u),c,f)}class yp extends Uv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}function zz(t,e,n,i){const r=t.Cc(1,e,n);Hv("Data must be an object, but it was:",r,i);const o=[],a=wn.empty();Vs(i,(c,f)=>{const p=Wv(e,c,n);f=Rt(f);const y=r.yc(p);if(f instanceof yp)o.push(p);else{const v=_p(f,y);v!=null&&(o.push(p),a.set(p,v))}});const u=new kn(o);return new cA(a,u,r.fieldTransforms)}function Uz(t,e,n,i,r,o){const a=t.Cc(1,e,n),u=[xy(e,i,n)],c=[r];if(o.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(xy(e,o[v])),c.push(o[v+1]);const f=[],p=wn.empty();for(let v=u.length-1;v>=0;--v)if(!mA(f,u[v])){const T=u[v];let I=c[v];I=Rt(I);const R=a.yc(T);if(I instanceof yp)f.push(T);else{const V=_p(I,R);V!=null&&(f.push(T),p.set(T,V))}}const y=new kn(f);return new cA(p,y,a.fieldTransforms)}function _p(t,e){if(pA(t=Rt(t)))return Hv("Unsupported field value:",e,t),fA(t,e);if(t instanceof Uv)return function(i,r){if(!hA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=_p(u,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Rt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AF(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Qe.fromDate(i);return{timestampValue:yf(r.serializer,o)}}if(i instanceof Qe){const o=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yf(r.serializer,o)}}if(i instanceof qi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qn)return{bytesValue:kC(r.serializer,i._byteString)};if(i instanceof Pt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gi)return function(a,u){return{mapValue:{fields:{[sC]:{stringValue:oC},[df]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Tv(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${gv(i)}`)}(t,e)}function fA(t,e){const n={};return JI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,(i,r)=>{const o=_p(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function pA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof qi||t instanceof Qn||t instanceof Pt||t instanceof Uv||t instanceof Gi)}function Hv(t,e,n){if(!pA(n)||!QI(n)){const i=gv(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function xy(t,e,n){if((e=Rt(e))instanceof gp)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw xf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Bz=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(Bz)>=0)throw xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gp(...e.split("."))._internalPath}catch{throw xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xf(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new le(X.INVALID_ARGUMENT,u+t+c)}function mA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Hz extends gA{data(){return super.data()}}function yA(t,e){return typeof e=="string"?Wv(t,e):e instanceof gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $z{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Vs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[df].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>gt(a.doubleValue));return new Gi(n)}convertGeoPoint(e){return new qi(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=rp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=Is(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=nt.fromString(e);He(OC(i),9688,{name:e});const r=new pc(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return r.isEqual(n)||Rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class vu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends gA{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(yA("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:bt("string",yo._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class vd extends yo{data(e={}){return super.data(e)}}class Ga{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new vu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vd(this._firestore,this._userDataWriter,i.key,i,new vu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new vd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new vd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Gz(u.type),doc:c,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Gz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){t=Bi(t,Pt);const e=Bi(t.firestore,pl);return Nz(zv(e),t._key).then(n=>wA(e,t,n))}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:bt("string",Ga._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class _A extends $z{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function pi(t,e,n){t=Bi(t,Pt);const i=Bi(t.firestore,pl),r=qz(t.converter,e,n);return vA(i,[Fz(dA(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Wi.none())])}function Nm(t,e,n,...i){t=Bi(t,Pt);const r=Bi(t.firestore,pl),o=dA(r);let a;return a=typeof(e=Rt(e))=="string"||e instanceof gp?Uz(o,"updateDoc",t._key,e,n,i):zz(o,"updateDoc",t._key,e),vA(r,[a.toMutation(t._key,Wi.exists(!0))])}function vp(t,...e){var c,f,p;t=Rt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||xT(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xT(e[i])){const y=e[i];e[i]=(c=y.next)==null?void 0:c.bind(y),e[i+1]=(f=y.error)==null?void 0:f.bind(y),e[i+2]=(p=y.complete)==null?void 0:p.bind(y)}let o,a,u;if(t instanceof Pt)a=Bi(t.firestore,pl),u=op(t._key.path),o={next:y=>{e[i]&&e[i](wA(a,t,y))},error:e[i+1],complete:e[i+2]};else{const y=Bi(t,mp);a=Bi(y.firestore,pl),u=y._query;const v=new _A(a);o={next:T=>{e[i]&&e[i](new Ga(a,v,y,T))},error:e[i+1],complete:e[i+2]},Wz(t._query)}return function(v,T,I,R){const V=new oA(R),b=new QC(T,V,I);return v.asyncQueue.enqueueAndForget(async()=>ZC(await wy(v),b)),()=>{V.Nu(),v.asyncQueue.enqueueAndForget(async()=>YC(await wy(v),b))}}(zv(a),u,r,o)}function vA(t,e){return function(i,r){const o=new vs;return i.asyncQueue.enqueueAndForget(async()=>wz(await Rz(i),r,o)),o.promise}(zv(t),e)}function wA(t,e,n){const i=n.docs.get(e._key),r=new _A(t);return new yo(t,r,e._key,i,new vu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){El=r})(jo),Io(new bs("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new pl(new F5(i.getProvider("auth-internal")),new B5(a,i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(f.options.projectId,p)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ui(I1,C1,e),Ui(I1,C1,"esm2020")})();var Kz="firebase",Zz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui(Kz,Zz,"app");function xA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yz=xA,TA=new Nc("auth","Firebase",xA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new hv("@firebase/auth");function Qz(t,...e){Tf.logLevel<=Re.WARN&&Tf.warn(`Auth (${jo}): ${t}`,...e)}function wd(t,...e){Tf.logLevel<=Re.ERROR&&Tf.error(`Auth (${jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,...e){throw qv(t,...e)}function _i(t,...e){return qv(t,...e)}function $v(t,e,n){const i={...Yz(),[e]:n};return new Nc("auth","Firebase",i).create(e,{appName:t.name})}function _o(t){return $v(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xz(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qi(t,"argument-error"),$v(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return TA.create(t,...e)}function xe(t,e,...n){if(!t)throw qv(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wd(e),new Error(e)}function Mr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Jz(){return ET()==="http:"||ET()==="https:"}function ET(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jz()||g3()||"connection"in navigator)?navigator.onLine:!0}function tU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=f3()||y3()}get(){return eU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rU=new Fc(3e4,6e4);function Kv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Il(t,e,n,i,r={}){return SA(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=Mc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return m3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(f.credentials="include"),EA.fetch()(await bA(t,t.config.apiHost,n,u),f)})}async function SA(t,e,n){t._canInitEmulator=!1;const i={...nU,...e};try{const r=new oU(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Kh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Kh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Kh(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw $v(t,p,f);Qi(t,p)}}catch(r){if(r instanceof Xi)throw r;Qi(t,"network-request-failed",{message:String(r)})}}async function sU(t,e,n,i,r={}){const o=await Il(t,e,n,i,r);return"mfaPendingCredential"in o&&Qi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function bA(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Gv(t.config,r):`${t.config.apiScheme}://${r}`;return iU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class oU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),rU.get())})}}function Kh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_i(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e){return Il(t,"POST","/v1/accounts:delete",e)}async function Ef(t,e){return Il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lU(t,e=!1){const n=Rt(t),i=await n.getIdToken(e),r=Zv(i);xe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ju(Mm(r.auth_time)),issuedAtTime:ju(Mm(r.iat)),expirationTime:ju(Mm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function Zv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const r=NI(n);return r?JSON.parse(r):(wd("Failed to decode base64 JWT payload"),null)}catch(r){return wd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ST(t){const e=Zv(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Xi&&uU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function uU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(t){var y;const e=t.auth,n=await t.getIdToken(),i=await vc(t,Ef(e,{idToken:n}));xe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(y=r.providerUserInfo)!=null&&y.length?PA(r.providerUserInfo):[],a=dU(t.providerData,o),u=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ey(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function hU(t){const e=Rt(t);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function PA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e){const n=await SA(t,{},async()=>{const i=Mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await bA(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:i};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(c.credentials="include"),EA.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pU(t,e){return Il(t,"POST","/v2/accounts:revokeToken",Kv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ST(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=ST(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await fU(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ka;return i&&(xe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(xe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(xe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new cU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ey(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await vc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lU(this,e)}reload(){return hU(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(_o(this.auth));const e=await this.getIdToken();return await vc(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:I,stsTokenManager:R}=n;xe(y&&R,e,"internal-error");const V=Ka.fromJSON(this.name,R);xe(typeof y=="string",e,"internal-error"),Gr(i,e.name),Gr(r,e.name),xe(typeof v=="boolean",e,"internal-error"),xe(typeof T=="boolean",e,"internal-error"),Gr(o,e.name),Gr(a,e.name),Gr(u,e.name),Gr(c,e.name),Gr(f,e.name),Gr(p,e.name);const b=new mi({uid:y,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:V,createdAt:f,lastLoginAt:p});return I&&Array.isArray(I)&&(b.providerData=I.map(S=>({...S}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ka;r.updateFromServerResponse(n);const o=new mi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];xe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?PA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ka;u.updateFromIdToken(i);const c=new mi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ey(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Map;function wr(t){Mr(t instanceof Function,"Expected a class definition");let e=bT.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IA.type="NONE";const PT=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=xd(this.userKey,r.apiKey,o),this.fullPersistenceKey=xd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ef(this.auth,{idToken:e}).catch(()=>{});return n?mi._fromGetAccountInfoResponse(this.auth,n,e):null}return mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Za(wr(PT),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||wr(PT);const a=xd(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(a);if(p){let y;if(typeof p=="string"){const v=await Ef(e,{idToken:p}).catch(()=>{});if(!v)break;y=await mi._fromGetAccountInfoResponse(e,v,p)}else y=mi._fromJSON(e,p);f!==o&&(u=y),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Za(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Za(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MA(e))return"Blackberry";if(LA(e))return"Webos";if(AA(e))return"Safari";if((e.includes("chrome/")||kA(e))&&!e.includes("edge/"))return"Chrome";if(NA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function CA(t=sn()){return/firefox\//i.test(t)}function AA(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kA(t=sn()){return/crios\//i.test(t)}function RA(t=sn()){return/iemobile/i.test(t)}function NA(t=sn()){return/android/i.test(t)}function MA(t=sn()){return/blackberry/i.test(t)}function LA(t=sn()){return/webos/i.test(t)}function Yv(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mU(t=sn()){var e;return Yv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function gU(){return _3()&&document.documentMode===10}function DA(t=sn()){return Yv(t)||NA(t)||LA(t)||MA(t)||/windows phone/i.test(t)||RA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e=[]){let n;switch(t){case"Browser":n=IT(sn());break;case"Worker":n=`${IT(sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(t,e={}){return Il(t,"GET","/v2/passwordPolicy",Kv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=6;class wU{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CT(this),this.idTokenSubscription=new CT(this),this.beforeStateQueue=new yU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ef(this,{idToken:e}),i=await mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(_o(this));const n=e?Rt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(_o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(_o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _U(this),n=new wU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wr(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Qz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wp(t){return Rt(t)}class CT{constructor(e){this.auth=e,this.observer=null,this.addObserver=P3(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TU(t){Qv=t}function EU(t){return Qv.loadJS(t)}function SU(){return Qv.gapiScript}function bU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t,e){const n=tp(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Po(o,e??{}))return r;Qi(r,"already-initialized")}return n.initialize({options:e})}function IU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CU(t,e,n){const i=wp(t);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=VA(e),{host:a,port:u}=AU(e),c=u===null?"":`:${u}`,f={url:`${o}//${a}${c}/`},p=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(Po(f,i.config.emulator)&&Po(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Os(a)?(uv(`${o}//${a}${c}`),cv("Auth",!0)):kU()}function VA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AU(t){const e=VA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:AT(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:AT(a)}}}function AT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e){return sU(t,"POST","/v1/accounts:signInWithIdp",Kv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="http://localhost";class ko extends jA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new ko(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ya(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ya(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ya(e,n)}buildRequest(){const e={requestUri:RU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends zc{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return gr.credential(n,i)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends zc{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends zc{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ns.credential(n,i)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await mi._fromIdTokenResponse(e,i,r),a=kT(i);return new ml({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=kT(i);return new ml({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function kT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Xi{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new bf(e,n,i,r)}}function FA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(t,o,e,i):o})}async function NU(t,e,n=!1){const i=await vc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ml._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e,n=!1){const{auth:i}=t;if(Yn(i.app))return Promise.reject(_o(i));const r="reauthenticate";try{const o=await vc(t,FA(i,r,e,t),n);xe(o.idToken,i,"internal-error");const a=Zv(o.idToken);xe(a,i,"internal-error");const{sub:u}=a;return xe(t.uid===u,i,"user-mismatch"),ml._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e,n=!1){if(Yn(t.app))return Promise.reject(_o(t));const i="signIn",r=await FA(t,i,e),o=await ml._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function DU(t,e,n,i){return Rt(t).onIdTokenChanged(e,n,i)}function OU(t,e,n){return Rt(t).beforeAuthStateChanged(e,n)}function VU(t){return Rt(t).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=1e3,FU=10;class UA extends zA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,FU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},jU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UA.type="LOCAL";const zU=UA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA extends zA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BA.type="SESSION";const HA=BA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new xp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await UU(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=Jv("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(p),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function HU(t){Ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function WU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $U(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function qU(){return WA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firebaseLocalStorageDb",GU=1,If="firebaseLocalStorage",qA="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tp(t,e){return t.transaction([If],e?"readwrite":"readonly").objectStore(If)}function KU(){const t=indexedDB.deleteDatabase($A);return new Uc(t).toPromise()}function Sy(){const t=indexedDB.open($A,GU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(If,{keyPath:qA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(If)?e(i):(i.close(),await KU(),e(await Sy()))})})}async function RT(t,e,n){const i=Tp(t,!0).put({[qA]:e,value:n});return new Uc(i).toPromise()}async function ZU(t,e){const n=Tp(t,!1).get(e),i=await new Uc(n).toPromise();return i===void 0?null:i.value}function NT(t,e){const n=Tp(t,!0).delete(e);return new Uc(n).toPromise()}const YU=800,QU=3;class GA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>QU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xp._getInstance(qU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await WU(),!this.activeServiceWorker)return;this.sender=new BU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$U()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await RT(e,Pf,"1"),await NT(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>RT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>ZU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>NT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Tp(r,!1).getAll();return new Uc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GA.type="LOCAL";const XU=GA;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){return e?wr(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends jA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JU(t){return LU(t.auth,new e0(t),t.bypassAuthState)}function eB(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),MU(n,new e0(t),t.bypassAuthState)}async function tB(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),NU(n,new e0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JU;case"linkViaPopup":case"linkViaRedirect":return tB;case"reauthViaPopup":case"reauthViaRedirect":return eB;default:Qi(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new Fc(2e3,1e4);async function iB(t,e,n){if(Yn(t.app))return Promise.reject(_i(t,"operation-not-supported-in-this-environment"));const i=wp(t);Xz(t,e,Xv);const r=KA(i,n);return new fo(i,"signInViaPopup",e,r).executeNotNull()}class fo extends ZA{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nB.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="pendingRedirect",Td=new Map;class sB extends ZA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const i=await oB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oB(t,e){const n=uB(e),i=lB(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function aB(t,e){Td.set(t._key(),e)}function lB(t){return wr(t._redirectPersistence)}function uB(t){return xd(rB,t.config.apiKey,t.name)}async function cB(t,e,n=!1){if(Yn(t.app))return Promise.reject(_o(t));const i=wp(t),r=KA(i,e),a=await new sB(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=10*60*1e3;class dB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!YA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hB&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(e))}saveEventToCache(e){this.cachedEventUids.add(MT(e)),this.lastProcessedEventTime=Date.now()}}function MT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(t,e={}){return Il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gB=/^https?/;async function yB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pB(t);for(const n of e)try{if(_B(n))return}catch{}Qi(t,"unauthorized-domain")}function _B(t){const e=Ty(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!gB.test(n))return!1;if(mB.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=new Fc(3e4,6e4);function LT(){const t=Ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wB(t){return new Promise((e,n)=>{var r,o,a;function i(){LT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LT(),n(_i(t,"network-request-failed"))},timeout:vB.get()})}if((o=(r=Ki().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ki().gapi)!=null&&a.load)i();else{const u=bU("iframefcb");return Ki()[u]=()=>{gapi.load?i():n(_i(t,"network-request-failed"))},EU(`${SU()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function xB(t){return Ed=Ed||wB(t),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=new Fc(5e3,15e3),EB="__/auth/iframe",SB="emulator/auth/iframe",bB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IB(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gv(e,SB):`https://${t.config.authDomain}/${EB}`,i={apiKey:e.apiKey,appName:t.name,v:jo},r=PB.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Mc(i).slice(1)}`}async function CB(t){const e=await xB(t),n=Ki().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:IB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bB,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=_i(t,"network-request-failed"),u=Ki().setTimeout(()=>{o(a)},TB.get());function c(){Ki().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kB=500,RB=600,NB="_blank",MB="http://localhost";class DT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LB(t,e,n,i=kB,r=RB){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c={...AB,width:i.toString(),height:r.toString(),top:o,left:a},f=sn().toLowerCase();n&&(u=kA(f)?NB:n),CA(f)&&(e=e||MB,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[T,I])=>`${v}${T}=${I},`,"");if(mU(f)&&u!=="_self")return DB(e||"",u),new DT(null);const y=window.open(e||"",u,p);xe(y,t,"popup-blocked");try{y.focus()}catch{}return new DT(y)}function DB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="__/auth/handler",VB="emulator/auth/handler",jB=encodeURIComponent("fac");async function OT(t,e,n,i,r,o){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:jo,eventId:r};if(e instanceof Xv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",b3(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))a[p]=y}if(e instanceof zc){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),f=c?`#${jB}=${encodeURIComponent(c)}`:"";return`${FB(t)}?${Mc(u).slice(1)}${f}`}function FB({config:t}){return t.emulator?Gv(t,VB):`https://${t.authDomain}/${OB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class zB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=cB,this._overrideRedirectResult=aB}async _openPopup(e,n,i,r){var a;Mr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await OT(e,n,i,Ty(),r);return LB(e,o,Jv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await OT(e,n,i,Ty(),r);return HU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Mr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await CB(e),i=new dB(e);return n.register("authEvent",r=>(xe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lm,{type:Lm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Lm];o!==void 0&&n(!!o),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DA()||AA()||Yv()}}const UB=zB;var VT="@firebase/auth",jT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WB(t){Io(new bs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;xe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OA(t)},f=new xU(i,r,o,c);return IU(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Io(new bs("auth-internal",e=>{const n=wp(e.getProvider("auth").getImmediate());return(i=>new BB(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(VT,jT,HB(t)),Ui(VT,jT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=5*60,qB=OI("authIdTokenMaxAge")||$B;let FT=null;const GB=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>qB)return;const r=n==null?void 0:n.token;FT!==r&&(FT=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function KB(t=fv()){const e=tp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PU(t,{popupRedirectResolver:UB,persistence:[XU,zU,HA]}),i=OI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=GB(o.toString());OU(n,a,()=>a(n.currentUser)),DU(n,u=>a(u))}}const r=MI("auth");return r&&CU(n,`http://${r}`),n}function ZB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}TU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=_i("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",ZB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WB("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firebasestorage.googleapis.com",XA="storageBucket",YB=2*60*1e3,QB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Xi{constructor(e,n,i=0){super(Dm(e),`Firebase Storage: ${n} (${Dm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function Dm(t){return"storage/"+t}function t0(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ht.UNKNOWN,t)}function XB(t){return new dt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JB(t){return new dt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ht.UNAUTHENTICATED,t)}function t9(){return new dt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n9(t){return new dt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i9(){return new dt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r9(){return new dt(ht.CANCELED,"User canceled the upload/download.")}function s9(t){return new dt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function o9(t){return new dt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a9(){return new dt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XA+"' property when initializing the app?")}function l9(){return new dt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u9(){return new dt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c9(t){return new dt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function by(t){return new dt(ht.INVALID_ARGUMENT,t)}function JA(){return new dt(ht.APP_DELETED,"The Firebase app was deleted.")}function h9(t){return new dt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fu(t,e){return new dt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function lu(t){throw new dt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(i.path==="")return i;throw o9(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function f(z){z.path_=decodeURIComponent(z.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",T=new RegExp(`^https?://${y}/${p}/b/${r}/o${v}`,"i"),I={bucket:1,path:3},R=n===QA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",b=new RegExp(`^https?://${R}/${r}/${V}`,"i"),C=[{regex:u,indices:c,postModify:o},{regex:T,indices:I,postModify:f},{regex:b,indices:{bucket:1,path:2},postModify:f}];for(let z=0;z<C.length;z++){const H=C[z],U=H.regex.exec(e);if(U){const k=U[H.indices.bucket];let E=U[H.indices.path];E||(E=""),i=new Rn(k,E),H.postModify(i);break}}if(i==null)throw s9(e);return i}}class d9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function c(){return u===2}let f=!1;function p(...V){f||(f=!0,e.apply(null,V))}function y(V){r=setTimeout(()=>{r=null,t(T,c())},V)}function v(){o&&clearTimeout(o)}function T(V,...b){if(f){v();return}if(V){v(),p.call(null,V,...b);return}if(c()||a){v(),p.call(null,V,...b);return}i<64&&(i*=2);let C;u===1?(u=2,C=0):C=(i+Math.random())*1e3,y(C)}let I=!1;function R(V){I||(I=!0,v(),!f&&(r!==null?(V||(u=2),clearTimeout(r),y(0)):V||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,R(!0)},n),R}function p9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(t){return t!==void 0}function g9(t){return typeof t=="object"&&!Array.isArray(t)}function n0(t){return typeof t=="string"||t instanceof String}function zT(t){return i0()&&t instanceof Blob}function i0(){return typeof Blob<"u"}function UT(t,e,n,i){if(i<e)throw by(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw by(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function e2(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var vo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vo||(vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n,i,r,o,a,u,c,f,p,y,v=!0,T=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,R)=>{this.resolve_=I,this.reject_=R,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Zh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===vo.NO_ERROR,c=o.getStatus();if(!u||y9(c,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===vo.ABORT;i(!1,new Zh(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new Zh(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());m9(c)?o(c):o()}catch(c){a(c)}else if(u!==null){const c=t0();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(r.canceled){const c=this.appDelete_?JA():r9();a(c)}else{const c=i9();a(c)}};this.canceled_?n(!1,new Zh(!1,null,!0)):this.backoffId_=f9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function v9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function w9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function E9(t,e,n,i,r,o,a=!0,u=!1){const c=e2(t.urlParams),f=t.url+c,p=Object.assign({},t.headers);return x9(p,e),v9(p,n),w9(p,o),T9(p,i),new _9(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function b9(...t){const e=S9();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(i0())return new Blob(t);throw new dt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function P9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t){if(typeof atob>"u")throw c9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Om{constructor(e,n){this.data=e,this.contentType=n||null}}function C9(t,e){switch(t){case Oi.RAW:return new Om(t2(e));case Oi.BASE64:case Oi.BASE64URL:return new Om(n2(t,e));case Oi.DATA_URL:return new Om(k9(e),R9(e))}throw t0()}function t2(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function A9(t){let e;try{e=decodeURIComponent(t)}catch{throw Fu(Oi.DATA_URL,"Malformed data URL.")}return t2(e)}function n2(t,e){switch(t){case Oi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Fu(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Oi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Fu(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=I9(e)}catch(r){throw r.message.includes("polyfill")?r:Fu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class i2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fu(Oi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=N9(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function k9(t){const e=new i2(t);return e.base64?n2(Oi.BASE64,e.rest):A9(e.rest)}function R9(t){return new i2(t).contentType}function N9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let i=0,r="";zT(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(zT(this.data_)){const i=this.data_,r=P9(i,e,n);return r===null?null:new is(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new is(i,!0)}}static getBlob(...e){if(i0()){const n=e.map(i=>i instanceof is?i.data_:i);return new is(b9.apply(null,n))}else{const n=e.map(a=>n0(a)?C9(Oi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new is(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){let e;try{e=JSON.parse(t)}catch{return null}return g9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L9(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function s2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t,e){return e}class un{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||D9}}let Yh=null;function O9(t){return!n0(t)||t.length<2?t:s2(t)}function o2(){if(Yh)return Yh;const t=[];t.push(new un("bucket")),t.push(new un("generation")),t.push(new un("metageneration")),t.push(new un("name","fullPath",!0));function e(o,a){return O9(a)}const n=new un("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new un("size");return r.xform=i,t.push(r),t.push(new un("timeCreated")),t.push(new un("updated")),t.push(new un("md5Hash",null,!0)),t.push(new un("cacheControl",null,!0)),t.push(new un("contentDisposition",null,!0)),t.push(new un("contentEncoding",null,!0)),t.push(new un("contentLanguage",null,!0)),t.push(new un("contentType",null,!0)),t.push(new un("metadata","customMetadata",!0)),Yh=t,Yh}function V9(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Rn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function j9(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return V9(i,t),i}function a2(t,e,n){const i=r2(e);return i===null?null:j9(t,i,n)}function F9(t,e,n,i){const r=r2(e);if(r===null||!n0(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,y=t.fullPath,v="/b/"+a(p)+"/o/"+a(y),T=r0(v,n,i),I=e2({alt:"media",token:f});return T+I})[0]}function z9(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class l2{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){if(!t)throw t0()}function U9(t,e){function n(i,r){const o=a2(t,r,e);return u2(o!==null),o}return n}function B9(t,e){function n(i,r){const o=a2(t,r,e);return u2(o!==null),F9(o,r,t.host,t._protocol)}return n}function c2(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=t9():r=e9():n.getStatus()===402?r=JB(t.bucket):n.getStatus()===403?r=n9(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function H9(t){const e=c2(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=XB(t.path)),o.serverResponse=r.serverResponse,o}return n}function W9(t,e,n){const i=e.fullServerUrl(),r=r0(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new l2(r,o,B9(t,n),a);return u.errorHandler=H9(e),u}function $9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function q9(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=$9(null,e)),i}function G9(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let C="";for(let z=0;z<2;z++)C=C+Math.random().toString().slice(2);return C}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const f=q9(e,i,r),p=z9(f,n),y="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",T=is.getBlob(y,i,v);if(T===null)throw l9();const I={name:f.fullPath},R=r0(o,t.host,t._protocol),V="POST",b=t.maxUploadRetryTime,S=new l2(R,V,U9(t,n),b);return S.urlParams=I,S.headers=a,S.body=T.uploadData(),S.errorHandler=c2(e),S}class K9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw lu("cannot .send() more than once");if(Os(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Z9 extends K9{initXhr(){this.xhr_.responseType="text"}}function h2(){return new Z9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ro(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s2(this._location.path)}get storage(){return this._service}get parent(){const e=M9(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new Ro(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h9(e)}}function Y9(t,e,n){t._throwIfRoot("uploadBytes");const i=G9(t.storage,t._location,o2(),new is(e,!0),n);return t.storage.makeRequestWithTokens(i,h2).then(r=>({metadata:r,ref:t}))}function Q9(t){t._throwIfRoot("getDownloadURL");const e=W9(t.storage,t._location,o2());return t.storage.makeRequestWithTokens(e,h2).then(n=>{if(n===null)throw u9();return n})}function X9(t,e){const n=L9(t._location.path,e),i=new Rn(t._location.bucket,n);return new Ro(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){return/^[A-Za-z]+:\/\//.test(t)}function e8(t,e){return new Ro(t,e)}function d2(t,e){if(t instanceof s0){const n=t;if(n._bucket==null)throw a9();const i=new Ro(n,n._bucket);return e!=null?d2(i,e):i}else return e!==void 0?X9(t,e):t}function t8(t,e){if(e&&J9(e)){if(t instanceof s0)return e8(t,e);throw by("To use ref(service, url), the first argument must be a Storage instance.")}else return d2(t,e)}function BT(t,e){const n=e==null?void 0:e[XA];return n==null?null:Rn.makeFromBucketSpec(n,t)}function n8(t,e,n,i={}){t.host=`${e}:${n}`;const r=Os(e);r&&(uv(`https://${t.host}/b`),cv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:VI(o,t.app.options.projectId))}class s0{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=QA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YB,this._maxUploadRetryTime=QB,this._requests=new Set,r!=null?this._bucket=Rn.makeFromBucketSpec(r,this._host):this._bucket=BT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=BT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ro(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new d9(JA());{const a=E9(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const HT="@firebase/storage",WT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="storage";function i8(t,e,n){return t=Rt(t),Y9(t,e,n)}function r8(t){return t=Rt(t),Q9(t)}function s8(t,e){return t=Rt(t),t8(t,e)}function o8(t=fv(),e){t=Rt(t);const i=tp(t,f2).getImmediate({identifier:e}),r=LI("storage");return r&&a8(i,...r),i}function a8(t,e,n,i={}){n8(t,e,n,i)}function l8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new s0(n,i,r,e,jo)}function u8(){Io(new bs(f2,l8,"PUBLIC").setMultipleInstances(!0)),Ui(HT,WT,""),Ui(HT,WT,"esm2020")}u8();const c8={apiKey:"AIzaSyCPt2M4p5y-dDjNefu_Hq4vcyiKKN6Nmd8",authDomain:"acsm-trip-2026.firebaseapp.com",projectId:"acsm-trip-2026",storageBucket:"acsm-trip-2026.firebasestorage.app",messagingSenderId:"90847137220",appId:"1:90847137220:web:3f158196c5046666e96891",measurementId:"G-YV63KV6GPT"},o0=zI(c8),Et=Lz(o0),Vm=KB(o0),h8=o8(o0),d8=new gr;function f8({isEditing:t,itinerary:e}){const[n,i]=B.useState([]),[r,o]=B.useState(()=>{const E=localStorage.getItem("trip_checklist");return E?JSON.parse(E):{}}),[a,u]=B.useState(""),[c,f]=B.useState(!1),[p,y]=B.useState(null),[v,T]=B.useState(""),[I,R]=B.useState(!1),V=t||I;B.useEffect(()=>{const E=vp(Tt(Et,"trips","checklist"),M=>{M.exists()?i(M.data().items||[]):(pi(Tt(Et,"trips","checklist"),{items:p1}),i(p1))});return()=>E()},[]),B.useEffect(()=>{localStorage.setItem("trip_checklist",JSON.stringify(r))},[r]);const b=E=>{V||o(M=>({...M,[E]:!M[E]}))},S=async()=>{if(!a.trim())return;const E=[...n,a.trim()];await pi(Tt(Et,"trips","checklist"),{items:E}),u(""),f(!1)},C=async E=>{if(!confirm(""))return;const M=n.filter((N,D)=>D!==E);await pi(Tt(Et,"trips","checklist"),{items:M})},z=(E,M)=>{y(E),T(M)},H=async E=>{if(!v.trim())return;const M=[...n];M[E]=v.trim(),await pi(Tt(Et,"trips","checklist"),{items:M}),y(null)},U=async()=>{if(!e)return;const E=[],M=e.flatMap(ne=>ne.activities),N=M.map(ne=>ne.title.toLowerCase()),D=M.map(ne=>ne.type);N.some(ne=>ne.includes("swim")||ne.includes("beach")||ne.includes("pool"))&&E.push("/","",""),N.some(ne=>ne.includes("hike")||ne.includes("trail")||ne.includes("mountain"))&&E.push("","",""),N.some(ne=>ne.includes("rain")||ne.includes("storm"))&&E.push("/",""),D.includes("flight")&&E.push("","",""," (/)"),D.includes("conference")&&E.push("","",""),["","","",""].forEach(ne=>E.push(ne));const O=Array.from(new Set(E)).filter(ne=>!n.includes(ne));if(O.length===0){alert("");return}if(confirm(`AI  ${O.length} 

${O.join(`
`)}

`)){const ne=[...n,...O];await pi(Tt(Et,"trips","checklist"),{items:ne})}},k=n.length>0?Math.round(Object.values(r).filter(Boolean).length/n.length*100):0;return g.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative",children:[g.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-32 h-8 bg-yellow-100/80 transform rotate-1 shadow-sm z-10"}),g.jsxs("div",{className:"p-6 bg-[var(--paper-bg)] border-b border-gray-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 font-heading",children:[g.jsx(ud,{size:20,className:"text-gray-600"}),""]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:U,className:"p-1.5 rounded-full text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center gap-1 text-xs font-bold mr-2",title:"AI ",children:[g.jsx(T_,{size:16}),g.jsx("span",{className:"hidden sm:inline",children:"AI "})]}),g.jsx("button",{onClick:()=>R(!I),className:Jn("p-1.5 rounded-full transition-colors",I?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:I?"":"",children:g.jsx(ud,{size:16})}),g.jsxs("span",{className:"text-sm font-bold text-gray-600 font-hand text-lg",children:[k,"% "]})]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:g.jsx("div",{className:"bg-gray-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${k}%`}})})]}),g.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-3 bg-white",children:[n.map((E,M)=>g.jsx("div",{className:"relative group",children:p===M?g.jsxs("div",{className:"flex gap-2 items-center p-2 rounded-lg border border-indigo-300 bg-indigo-50",children:[g.jsx("input",{type:"text",value:v,onChange:N=>T(N.target.value),className:"flex-1 bg-transparent outline-none text-sm",autoFocus:!0}),g.jsx("button",{onClick:()=>H(M),className:"text-indigo-600 hover:text-indigo-800",children:g.jsx(w_,{size:16})}),g.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600",children:g.jsx(bo,{size:16})})]}):g.jsxs("label",{className:Jn("flex items-start gap-3 p-3 rounded-lg transition-all border relative",V?"cursor-default border-dashed border-gray-300":"cursor-pointer",r[E]&&!V?"bg-gray-50 border-gray-200":!V&&"hover:bg-gray-50 border-transparent hover:border-gray-200"),children:[g.jsx("div",{className:"relative flex items-center mt-0.5",children:!V&&g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"checkbox",className:"peer sr-only",checked:!!r[E],onChange:()=>b(E)}),g.jsx("div",{className:Jn("w-5 h-5 rounded border flex items-center justify-center transition-colors",r[E]?"bg-gray-600 border-gray-600":"bg-white border-gray-300"),children:r[E]&&g.jsx(AN,{size:12,className:"text-white"})})]})}),g.jsx("span",{className:Jn("text-sm transition-colors select-none flex-1 font-hand text-lg",r[E]&&!V?"text-gray-400 line-through decoration-gray-400":"text-gray-700"),children:E}),V&&g.jsxs("div",{className:"flex gap-1 ml-2",children:[g.jsx("button",{onClick:N=>{N.preventDefault(),z(M,E)},className:"p-1 text-gray-400 hover:text-indigo-600 rounded hover:bg-indigo-50",children:g.jsx(ud,{size:14})}),g.jsx("button",{onClick:N=>{N.preventDefault(),C(M)},className:"p-1 text-gray-400 hover:text-red-600 rounded hover:bg-red-50",children:g.jsx(Do,{size:14})})]})]})},M)),V&&g.jsx("div",{className:"col-span-1 md:col-span-2 mt-2",children:c?g.jsxs("div",{className:"flex gap-2 items-center p-3 rounded-lg border-2 border-dashed border-indigo-300 bg-indigo-50",children:[g.jsx("input",{type:"text",value:a,onChange:E=>u(E.target.value),placeholder:"...",className:"flex-1 bg-transparent outline-none text-sm placeholder-indigo-300",autoFocus:!0,onKeyDown:E=>E.key==="Enter"&&S()}),g.jsx("button",{onClick:S,className:"px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700",children:""}),g.jsx("button",{onClick:()=>f(!1),className:"p-1 text-gray-400 hover:text-gray-600",children:g.jsx(bo,{size:16})})]}):g.jsxs("button",{onClick:()=>f(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 font-bold",children:[g.jsx(rl,{size:18}),""]})})]})]})}function p8(t){try{const e=decodeURIComponent(t),n=e.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(n)return{lat:parseFloat(n[1]),lng:parseFloat(n[2])};const i=e.match(/[?&](?:q|query)=(-?\d+\.\d+),(-?\d+\.\d+)/);if(i)return{lat:parseFloat(i[1]),lng:parseFloat(i[2])};const r=e.match(/[?&]ll=(-?\d+\.\d+),(-?\d+\.\d+)/);if(r)return{lat:parseFloat(r[1]),lng:parseFloat(r[2])};const o=e.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);return o?{lat:parseFloat(o[1]),lng:parseFloat(o[2])}:null}catch(e){return console.error("Error parsing Google Maps URL:",e),null}}let m8=Tl.icon({iconUrl:SI,shadowUrl:bI,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Tl.Marker.prototype.options.icon=m8;const g8=({onSelect:t,position:e})=>(Zj({click(n){t(n.latlng.lat,n.latlng.lng)}}),e?g.jsx(TI,{position:e}):null),y8=({center:t})=>{const e=lv();return B.useEffect(()=>{e.setView(t,e.getZoom())},[t,e]),null};function _8({initialLat:t,initialLng:e,onLocationSelect:n,className:i="h-[300px] w-full rounded-xl overflow-hidden"}){const[r,o]=B.useState(t&&e?[t,e]:null),[a,u]=B.useState(""),[c,f]=B.useState(t&&e?[t,e]:[37.7749,-122.4194]);B.useEffect(()=>{t&&e&&(o([t,e]),f([t,e]))},[t,e]);const p=(v,T)=>{o([v,T]),n(v,T)},y=async v=>{if(v.preventDefault(),!!a.trim())try{const I=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(a)}`)).json();if(I&&I.length>0){const{lat:R,lon:V}=I[0],b=parseFloat(R),S=parseFloat(V);f([b,S])}else alert("")}catch(T){console.error("Search failed:",T),alert("")}};return g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:i,children:g.jsxs(xI,{center:c,zoom:13,scrollWheelZoom:!0,className:"h-full w-full z-0",children:[g.jsx(EI,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),g.jsx(g8,{onSelect:p,position:r}),g.jsx(y8,{center:c})]})}),g.jsx("form",{onSubmit:y,className:"absolute top-2 left-2 right-2 z-[400]",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",placeholder:" (: Golden Gate Bridge)...",className:"w-full pl-10 pr-4 py-2 rounded-lg shadow-md border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-white/90 backdrop-blur-sm",value:a,onChange:v=>u(v.target.value)}),g.jsx(qN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})}),g.jsx("div",{className:"absolute bottom-2 left-2 right-2 z-[400] pointer-events-none",children:g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm px-3 py-1.5 rounded-lg shadow-sm text-xs text-gray-600 text-center border border-gray-200",children:[g.jsx(rc,{className:"inline-block w-3 h-3 mr-1 mb-0.5"}),""]})})]})}const v8=[{value:"flight",label:""},{value:"transport",label:""},{value:"food",label:""},{value:"sightseeing",label:""},{value:"hotel",label:""},{value:"conference",label:""},{value:"other",label:""}];function w8({isOpen:t,onClose:e,onSave:n,initialData:i,availableDays:r,currentDayId:o}){var ke,K,ue,J,fe;const[a,u]=B.useState({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[]}),[c,f]=B.useState(""),[p,y]=B.useState("(Local)"),[v,T]=B.useState(o),[I,R]=B.useState(!1),[V,b]=B.useState(!1),[S,C]=B.useState(""),[z,H]=B.useState(""),[U,k]=B.useState(!1),[E,M]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{if(t)if(T(o),i){u({...i,attachments:i.attachments||[]});const Z=i.time.match(/^(\d{1,2}:\d{2})\s*(\(.*\))?$/);if(Z){const ce=Z[1],[he,me]=ce.split(":"),ge=`${he.padStart(2,"0")}:${me}`;f(ge),y(Z[2]||"(Local)")}else f(i.time),y("(Local)");R(!!i.walletItemId)}else u({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[],coordinates:void 0}),f(""),y("(Local)"),R(!1)},[i,t,o]);const D=Z=>{Z.preventDefault();const ce=p==="(Local)"?c:`${c} ${p} `;n({...a,time:ce},v,I),e()},F=async Z=>{var he;const ce=(he=Z.target.files)==null?void 0:he[0];if(ce){b(!0);try{const me=s8(h8,`trip_images / ${Date.now()}_${ce.name} `);await i8(me,ce);const ge=await r8(me),at={id:Date.now().toString(),type:"image",url:ge,label:ce.name};u(Vt=>({...Vt,attachments:[...Vt.attachments||[],at]}))}catch(me){console.error("Upload failed:",me),alert("")}finally{b(!1),N.current&&(N.current.value="")}}},O=()=>{if(!S)return;const Z={id:Date.now().toString(),type:"link",url:S,label:z||S};u(ce=>({...ce,attachments:[...ce.attachments||[],Z]})),C(""),H(""),k(!1)},ne=Z=>{u(ce=>{var he;return{...ce,attachments:(he=ce.attachments)==null?void 0:he.filter(me=>me.id!==Z)}})},Pe=()=>{let Z="";const ce=a.type,he=a.title.toLowerCase();switch(ce){case"flight":Z=" 2-3  ( 6 ) App ";break;case"transport":he.includes("uber")||he.includes("lyft")?Z="":he.includes("train")||he.includes("rail")?Z=" 15 ":Z="";break;case"food":Z=" 15-20%  ()";break;case"sightseeing":Z="";break;case"hotel":Z=" (Check-in)  15:00 (Check-out)  11:00 Wi-Fi";break;case"conference":Z=" (Badge) ";break;default:Z=""}a.tips&&!confirm("")||u(me=>({...me,tips:Z}))},Oe=[{value:"(TPE)",label:" (TPE)"},{value:"(SFO)",label:" (SFO)"},{value:"(SLC)",label:" (SLC)"},{value:"(SAN)",label:" (SAN)"},{value:"(LAX)",label:" (LAX)"},{value:"(Local)",label:""}];return g.jsx(Oo,{children:t&&g.jsxs(g.Fragment,{children:[g.jsx(bn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),g.jsx(bn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i?"":""}),g.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500",children:g.jsx(bo,{size:20})})]}),g.jsxs("form",{onSubmit:D,className:"p-4 space-y-4 overflow-y-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:v,onChange:Z=>T(Z.target.value),children:r.map(Z=>g.jsxs("option",{value:Z.id,children:[Z.date," - ",Z.cityLabel]},Z.id))})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"time",required:!0,className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:c,onChange:Z=>f(Z.target.value)}),g.jsxs("select",{className:"w-24 px-2 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm bg-gray-50",onChange:Z=>{Z.target.value&&f(Z.target.value)},value:"",children:[g.jsx("option",{value:"",disabled:!0,children:""}),Array.from({length:48}).map((Z,ce)=>{const he=Math.floor(ce/2).toString().padStart(2,"0"),me=ce%2===0?"00":"30";return g.jsx("option",{value:`${he}:${me}`,children:`${he}:${me}`},ce)})]})]})]}),g.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:Z=>y(Z.target.value),children:Oe.map(Z=>g.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),g.jsxs("div",{className:"col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.type,onChange:Z=>u({...a,type:Z.target.value}),children:v8.map(Z=>g.jsx("option",{value:Z.value,children:Z.label},Z.value))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.title,onChange:Z=>u({...a,title:Z.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",value:a.description,onChange:Z=>u({...a,description:Z.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),g.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.location||"",onChange:Z=>u({...a,location:Z.target.value})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (USD)"}),g.jsx("input",{type:"number",min:"0",placeholder:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.cost||0,onChange:Z=>u({...a,cost:parseFloat(Z.target.value)})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"/ ()"}),g.jsxs("button",{type:"button",onClick:Pe,className:"text-xs flex items-center gap-1 text-indigo-600 hover:text-indigo-800 bg-indigo-50 hover:bg-indigo-100 px-2 py-0.5 rounded-full transition-colors",title:"",children:[g.jsx(T_,{size:12}),g.jsx("span",{children:"AI "})]})]}),g.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.tips||"",onChange:Z=>u({...a,tips:Z.target.value}),placeholder:"..."})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"col-span-2",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:" (Coordinates)"}),g.jsxs("button",{type:"button",onClick:()=>M(!E),className:"text-xs flex items-center gap-1 text-indigo-600 hover:text-indigo-800 bg-indigo-50 hover:bg-indigo-100 px-2 py-0.5 rounded-full transition-colors",children:[g.jsx(rc,{size:12}),g.jsx("span",{children:E?"":""})]})]}),E&&g.jsx("div",{className:"mb-3 border rounded-xl overflow-hidden shadow-sm",children:g.jsx(_8,{initialLat:(ke=a.coordinates)==null?void 0:ke.lat,initialLng:(K=a.coordinates)==null?void 0:K.lng,onLocationSelect:(Z,ce)=>{u({...a,coordinates:{lat:Z,lng:ce}})},className:"h-[200px] w-full"})}),g.jsx("div",{className:"flex gap-2 mb-2",children:g.jsx("input",{type:"text",placeholder:" Google Maps ...",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm",onChange:Z=>{const ce=p8(Z.target.value);ce&&(u({...a,coordinates:ce}),Z.target.value="")}})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lat)"}),g.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((ue=a.coordinates)==null?void 0:ue.lat)||"",onChange:Z=>{var he;const ce=parseFloat(Z.target.value);u({...a,coordinates:{lng:((he=a.coordinates)==null?void 0:he.lng)||0,lat:isNaN(ce)?0:ce}})},placeholder:"e.g. 37.7749"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lng)"}),g.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((J=a.coordinates)==null?void 0:J.lng)||"",onChange:Z=>{var he;const ce=parseFloat(Z.target.value);u({...a,coordinates:{lat:((he=a.coordinates)==null?void 0:he.lat)||0,lng:isNaN(ce)?0:ce}})},placeholder:"e.g. -122.4194"})]})]}),(a.cost||0)>0&&g.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1 p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[g.jsx("input",{type:"checkbox",id:"syncWallet",className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500",checked:I,onChange:Z=>R(Z.target.checked)}),g.jsx("label",{htmlFor:"syncWallet",className:"text-sm text-indigo-700 font-medium cursor-pointer select-none flex-1",children:" (Budget)"}),a.walletItemId&&g.jsx("span",{className:"text-xs text-indigo-400 bg-white px-2 py-0.5 rounded border border-indigo-100",children:""})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[g.jsx(BN,{size:16})," (/)"]}),g.jsx("div",{className:"space-y-2 mb-3",children:(fe=a.attachments)==null?void 0:fe.map(Z=>g.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border border-gray-200",children:[g.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[Z.type==="image"?g.jsx(zw,{size:16,className:"text-indigo-500"}):g.jsx(Lg,{size:16,className:"text-blue-500"}),g.jsx("a",{href:Z.url,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-700 truncate hover:underline",children:Z.label||"Attachment"})]}),g.jsx("button",{type:"button",onClick:()=>ne(Z.id),className:"text-gray-400 hover:text-red-500",children:g.jsx(Do,{size:16})})]},Z.id))}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{var Z;return(Z=N.current)==null?void 0:Z.click()},disabled:V,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:V?"...":g.jsxs(g.Fragment,{children:[g.jsx(zw,{size:16})," "]})}),g.jsx("input",{type:"file",ref:N,className:"hidden",accept:"image/*",onChange:F}),g.jsxs("button",{type:"button",onClick:()=>k(!U),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:[g.jsx(Lg,{size:16})," "]})]}),U&&g.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2",children:[g.jsx("input",{type:"text",placeholder:" (https://...)",className:"w-full px-3 py-1.5 border rounded text-sm",value:S,onChange:Z=>C(Z.target.value)}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:" ()",className:"flex-1 px-3 py-1.5 border rounded text-sm",value:z,onChange:Z=>H(Z.target.value)}),g.jsx("button",{type:"button",onClick:O,className:"px-3 py-1.5 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700",children:""})]})]})]}),g.jsx("div",{className:"pt-4 border-t",children:g.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[g.jsx(w_,{size:20}),""]})})]})]})})]})})}const x8={flight:Yd,hotel:ON,ticket:eM,insurance:x_,food:kb,transport:Ab,shopping:QN,entertainment:zN,other:FN},$T={flight:"",hotel:"",ticket:"",insurance:"",food:"",transport:"",shopping:"",entertainment:"",other:""};function T8({isOpen:t,onClose:e,items:n,onAdd:i,onUpdate:r,onRemove:o,totalCost:a}){const[u,c]=B.useState("list"),[f,p]=B.useState(!1),[y,v]=B.useState(32.5),[T,I]=B.useState(!1),[R,V]=B.useState(null),[b,S]=B.useState({category:"other",title:"",reference:"",details:"",cost:0}),C=U=>{U.preventDefault(),R?(r(R,b),V(null)):(i(b),p(!1)),S({category:"other",title:"",reference:"",details:"",cost:0})},z=U=>{S({category:U.category,title:U.title,reference:U.reference,details:U.details,cost:U.cost}),V(U.id),p(!1)},H=()=>{V(null),S({category:"other",title:"",reference:"",details:"",cost:0})};return g.jsx(Oo,{children:t&&g.jsxs(g.Fragment,{children:[g.jsx(bn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),g.jsx(bn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl pointer-events-auto flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-t-xl",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[g.jsx(Ng,{className:"text-amber-400"})," & "]}),g.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),g.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:g.jsx(bo,{size:24})})]}),g.jsxs("div",{className:"bg-white/10 rounded-lg p-4 backdrop-blur-sm border border-white/10",children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsx("div",{className:"text-xs text-slate-300 uppercase tracking-wider font-medium",children:" ( + )"}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("button",{onClick:()=>I(!T),className:`text-xs px-2 py-0.5 rounded border transition-colors ${T?"bg-amber-400 text-slate-900 border-amber-400 font-bold":"text-slate-400 border-slate-600 hover:border-slate-400"}`,children:"NT$"})})]}),g.jsxs("div",{className:"text-3xl font-bold text-white font-mono",children:["$",a.toLocaleString()," ",g.jsx("span",{className:"text-lg text-slate-400",children:"USD"})]}),T&&g.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 flex justify-between items-center",children:[g.jsxs("div",{className:"text-amber-400 font-mono font-bold text-xl",children:[" NT$ ",Math.round(a*y).toLocaleString()]}),g.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[g.jsx("span",{children:":"}),g.jsx("input",{type:"number",value:y,onChange:U=>v(Number(U.target.value)),className:"w-12 bg-slate-800 border border-slate-600 rounded px-1 py-0.5 text-white text-right outline-none focus:border-amber-400",step:"0.1"})]})]})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[g.jsxs("div",{className:"flex gap-2 mb-6 bg-gray-200 p-1 rounded-lg w-fit",children:[g.jsx("button",{onClick:()=>c("list"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${u==="list"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),g.jsx("button",{onClick:()=>c("analytics"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${u==="analytics"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]}),u==="list"?g.jsxs(g.Fragment,{children:[f||R?g.jsxs("form",{onSubmit:C,className:"bg-white p-4 rounded-xl shadow-sm border space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h3",{className:"font-bold text-gray-800",children:R?"":""}),g.jsx("button",{type:"button",onClick:()=>R?H():p(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),g.jsx("select",{className:"w-full p-2 border rounded-lg",value:b.category,onChange:U=>S({...b,category:U.target.value}),children:Object.entries($T).map(([U,k])=>g.jsx("option",{value:U,children:k},U))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (USD)"}),g.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg",value:b.cost,onChange:U=>S({...b,cost:Number(U.target.value)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),g.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded-lg",value:b.title,onChange:U=>S({...b,title:U.target.value})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),g.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:b.reference,onChange:U=>S({...b,reference:U.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (/)"}),g.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:b.details,onChange:U=>S({...b,details:U.target.value})})]})]}),g.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 font-medium",children:R?"":""})]}):g.jsxs("button",{onClick:()=>p(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 mb-6",children:[g.jsx(rl,{size:20}),""]}),g.jsxs("div",{className:"space-y-3",children:[n.map(U=>{const k=x8[U.category];return g.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex items-start gap-4 group",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 flex-shrink-0",children:g.jsx(k,{size:20})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h4",{className:"font-bold text-gray-800 truncate",children:U.title}),U.cost?g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"font-mono font-medium text-gray-900",children:["$",U.cost.toLocaleString()]}),T&&g.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:[" NT$ ",Math.round(U.cost*y).toLocaleString()]})]}):null]}),g.jsx("div",{className:"text-sm text-indigo-600 font-mono mt-0.5",children:U.reference}),g.jsx("div",{className:"text-sm text-gray-500 mt-1",children:U.details})]}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>z(U),className:"p-2 text-gray-300 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:g.jsx(HN,{size:18})}),g.jsx("button",{onClick:()=>o(U.id),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:g.jsx(Do,{size:18})})]})]},U.id)}),n.length===0&&!f&&g.jsxs("div",{className:"text-center py-12 text-gray-400",children:[g.jsx(Ng,{size:48,className:"mx-auto mb-3 opacity-20"}),g.jsx("p",{children:""})]})]})]}):g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border flex flex-col items-center",children:[g.jsx("h3",{className:"font-bold text-gray-800 mb-6 w-full text-left",children:""}),a>0?g.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8 w-full",children:[g.jsx("div",{className:"relative w-48 h-48 rounded-full flex-shrink-0",style:{background:`conic-gradient(${(()=>{let U=0;return Object.entries(n.reduce((k,E)=>(k[E.category]=(k[E.category]||0)+(E.cost||0),k),{})).sort(([,k],[,E])=>E-k).map(([,k],E)=>{const M=k/a*360,N=U;U+=M;const D=["#6366f1","#8b5cf6","#ec4899","#f43f5e","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6"];return`${D[E%D.length]} ${N}deg ${U}deg`}).join(", ")})()})`},children:g.jsxs("div",{className:"absolute inset-4 bg-white rounded-full flex items-center justify-center flex-col",children:[g.jsx("span",{className:"text-xs text-gray-400",children:""}),g.jsxs("span",{className:"font-bold text-gray-800 text-lg",children:["$",a.toLocaleString()]})]})}),g.jsx("div",{className:"flex-1 w-full grid grid-cols-1 gap-2",children:Object.entries(n.reduce((U,k)=>(U[k.category]=(U[k.category]||0)+(k.cost||0),U),{})).sort(([,U],[,k])=>k-U).map(([U,k],E)=>{const M=["#6366f1","#8b5cf6","#ec4899","#f43f5e","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6"],N=(k/a*100).toFixed(1);return g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M[E%M.length]}}),g.jsx("span",{className:"text-gray-600",children:$T[U]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"font-mono font-medium text-gray-900",children:["$",k.toLocaleString()]}),g.jsxs("span",{className:"text-xs text-gray-400 w-10 text-right",children:[N,"%"]})]})]},U)})})]}):g.jsx("div",{className:"text-gray-400 py-8",children:""})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[g.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:""}),g.jsxs("div",{className:"space-y-3",children:[n.sort((U,k)=>(k.cost||0)-(U.cost||0)).slice(0,3).map((U,k)=>g.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2 last:border-0 last:pb-0",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"text-gray-400 font-mono text-sm",children:["0",k+1]}),g.jsx("span",{className:"text-gray-700 font-medium",children:U.title})]}),g.jsxs("span",{className:"font-mono font-bold text-gray-900",children:["$",(U.cost||0).toLocaleString()]})]},U.id)),n.length===0&&g.jsx("div",{className:"text-gray-400 text-sm",children:""})]})]})]})]})]})})]})})}var qT;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(qT||(qT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GT;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(GT||(GT={}));var KT;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(KT||(KT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=["user","model","function","system"];var YT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(YT||(YT={}));var QT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(QT||(QT={}));var XT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(XT||(XT={}));var JT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(JT||(JT={}));var zu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(zu||(zu={}));var eE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(eE||(eE={}));var tE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(tE||(tE={}));var nE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nE||(nE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ya extends tn{constructor(e,n){super(e),this.response=n}}class p2 extends tn{constructor(e,n,i,r){super(e),this.status=n,this.statusText=i,this.errorDetails=r}}class ws extends tn{}class m2 extends tn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="https://generativelanguage.googleapis.com",S8="v1beta",b8="0.24.1",P8="genai-js";var No;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(No||(No={}));class I8{constructor(e,n,i,r,o){this.model=e,this.task=n,this.apiKey=i,this.stream=r,this.requestOptions=o}toString(){var e,n;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||S8;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||E8}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function C8(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${P8}/${b8}`),e.join(" ")}async function A8(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",C8(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new ws(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,o]of i.entries()){if(r==="x-goog-api-key")throw new ws(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new ws(`Header name ${r} can only be set using the apiClient field`);n.append(r,o)}}return n}async function k8(t,e,n,i,r,o){const a=new I8(t,e,n,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},L8(o)),{method:"POST",headers:await A8(a),body:r})}}async function Bc(t,e,n,i,r,o={},a=fetch){const{url:u,fetchOptions:c}=await k8(t,e,n,i,r,o);return R8(u,c,a)}async function R8(t,e,n=fetch){let i;try{i=await n(t,e)}catch(r){N8(r,t)}return i.ok||await M8(i,t),i}function N8(t,e){let n=t;throw n.name==="AbortError"?(n=new m2(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof p2||t instanceof ws||(n=new tn(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function M8(t,e){let n="",i;try{const r=await t.json();n=r.error.message,r.error.details&&(n+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new p2(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,i)}function L8(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ya(`${Qr(t)}`,t);return D8(t)}else if(t.promptFeedback)throw new ya(`Text not available. ${Qr(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ya(`${Qr(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),iE(t)[0]}else if(t.promptFeedback)throw new ya(`Function call not available. ${Qr(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Sd(t.candidates[0]))throw new ya(`${Qr(t)}`,t);return iE(t)}else if(t.promptFeedback)throw new ya(`Function call not available. ${Qr(t)}`,t)},t}function D8(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function iE(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const O8=[zu.RECITATION,zu.SAFETY,zu.LANGUAGE];function Sd(t){return!!t.finishReason&&O8.includes(t.finishReason)}function Qr(t){var e,n,i;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){const o=t.candidates[0];Sd(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}function wc(t){return this instanceof wc?(this.v=t,this):new wc(t)}function V8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(v){i[v]&&(r[v]=function(T){return new Promise(function(I,R){o.push([v,T,I,R])>1||u(v,T)})})}function u(v,T){try{c(i[v](T))}catch(I){y(o[0][3],I)}}function c(v){v.value instanceof wc?Promise.resolve(v.value.v).then(f,p):y(o[0][2],v)}function f(v){u("next",v)}function p(v){u("throw",v)}function y(v,T){v(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function j8(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=U8(e),[i,r]=n.tee();return{stream:z8(i),response:F8(r)}}async function F8(t){const e=[],n=t.getReader();for(;;){const{done:i,value:r}=await n.read();if(i)return a0(B8(e));e.push(r)}}function z8(t){return V8(this,arguments,function*(){const n=t.getReader();for(;;){const{value:i,done:r}=yield wc(n.read());if(r)break;yield yield wc(a0(i))}})}function U8(t){const e=t.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:a,done:u})=>{if(u){if(r.trim()){i.error(new tn("Failed to parse stream"));return}i.close();return}r+=a;let c=r.match(rE),f;for(;c;){try{f=JSON.parse(c[1])}catch{i.error(new tn(`Error parsing JSON response: "${c[1]}"`));return}i.enqueue(f),r=r.substring(c[0].length),c=r.match(rE)}return o()}).catch(a=>{let u=a;throw u.stack=a.stack,u.name==="AbortError"?u=new m2("Request aborted when reading from the stream"):u=new tn("Error reading from the stream"),u})}}})}function B8(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of t){if(i.candidates){let r=0;for(const o of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[r]||(n.candidates[r]={index:r}),n.candidates[r].citationMetadata=o.citationMetadata,n.candidates[r].groundingMetadata=o.groundingMetadata,n.candidates[r].finishReason=o.finishReason,n.candidates[r].finishMessage=o.finishMessage,n.candidates[r].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[r].content||(n.candidates[r].content={role:o.content.role||"user",parts:[]});const a={};for(const u of o.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[r].content.parts.push(a)}r++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e,n,i){const r=await Bc(e,No.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return j8(r)}async function y2(t,e,n,i){const o=await(await Bc(e,No.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:a0(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function xc(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return H8(e)}function H8(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,r=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),r=!0):(e.parts.push(o),i=!0);if(i&&r)throw new tn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new tn("No content is provided for sending chat message.");return i?e:n}function W8(t,e){var n;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const r=t.generateContentRequest!=null;if(t.contents){if(r)throw new ws("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=t.contents}else if(r)i=Object.assign(Object.assign({},i),t.generateContentRequest);else{const o=xc(t);i.contents=[o]}return{generateContentRequest:i}}function sE(t){let e;return t.contents?e=t:e={contents:[xc(t)]},t.systemInstruction&&(e.systemInstruction=_2(t.systemInstruction)),e}function $8(t){return typeof t=="string"||Array.isArray(t)?{content:xc(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],q8={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function G8(t){let e=!1;for(const n of t){const{role:i,parts:r}=n;if(!e&&i!=="user")throw new tn(`First content should be with role 'user', got ${i}`);if(!ZT.includes(i))throw new tn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(ZT)}`);if(!Array.isArray(r))throw new tn("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new tn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const c of oE)c in u&&(o[c]+=1);const a=q8[i];for(const u of oE)if(!a.includes(u)&&o[u]>0)throw new tn(`Content with role '${i}' can't contain '${u}' part`);e=!0}}function aE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="SILENT_ERROR";class K8{constructor(e,n,i,r={}){this.model=n,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(G8(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=xc(e),p={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>y2(this._apiKey,this.model,p,y)).then(T=>{var I;if(aE(T.response)){this._history.push(f);const R=Object.assign({parts:[],role:"model"},(I=T.response.candidates)===null||I===void 0?void 0:I[0].content);this._history.push(R)}else{const R=Qr(T.response);R&&console.warn(`sendMessage() was unsuccessful. ${R}. Inspect response object for details.`)}v=T}).catch(T=>{throw this._sendPromise=Promise.resolve(),T}),await this._sendPromise,v}async sendMessageStream(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=xc(e),p={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),n),v=g2(this._apiKey,this.model,p,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(T=>{throw new Error(lE)}).then(T=>T.response).then(T=>{if(aE(T)){this._history.push(f);const I=Object.assign({},T.candidates[0].content);I.role||(I.role="model"),this._history.push(I)}else{const I=Qr(T);I&&console.warn(`sendMessageStream() was unsuccessful. ${I}. Inspect response object for details.`)}}).catch(T=>{T.message!==lE&&console.error(T)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(t,e,n,i){return(await Bc(e,No.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y8(t,e,n,i){return(await Bc(e,No.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}async function Q8(t,e,n,i){const r=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Bc(e,No.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n,i={}){this.apiKey=e,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=_2(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var i;const r=sE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return y2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}async generateContentStream(e,n={}){var i;const r=sE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return g2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}startChat(e){var n;return new K8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const i=W8(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),n);return Z8(this.apiKey,this.model,i,r)}async embedContent(e,n={}){const i=$8(e),r=Object.assign(Object.assign({},this._requestOptions),n);return Y8(this.apiKey,this.model,i,r)}async batchEmbedContents(e,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return Q8(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new tn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new uE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,i){if(!e.name)throw new ws("Cached content must contain a `name` field.");if(!e.model)throw new ws("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const a of r)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){const u=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===c)continue}throw new ws(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new uE(this.apiKey,o,i)}}function J8(){const[t,e]=B.useState([]),[n,i]=B.useState(!1),[r,o]=B.useState(null);return{messages:t,loading:n,error:r,sendMessage:async(c,f,p)=>{if(!c){o(" API Key");return}i(!0),o(null);try{const y={role:"user",text:f};e(C=>[...C,y]);const T=new X8(c).getGenerativeModel({model:"gemini-2.0-flash"}),I=`
You are a helpful travel assistant for the 'ACSM Trip 2026'.
Here is the current itinerary data in JSON format:
${JSON.stringify(p,null,2)}

Please answer the user's questions based on this itinerary.
- Be concise and friendly.
- If the user asks about time, location, or details, refer to the JSON data.
- If the answer is not in the data, offer general travel advice for San Francisco, Salt Lake City, or San Diego.
- Reply in Traditional Chinese ().
            `,S=(await T.startChat({history:[{role:"user",parts:[{text:I}]},{role:"model",parts:[{text:""}]},...t.map(C=>({role:C.role,parts:[{text:C.text}]}))]}).sendMessage(f)).response.text();e(C=>[...C,{role:"model",text:S}])}catch(y){console.error("Gemini API Error:",y),o(y.message||" API Key ")}finally{i(!1)}},clearHistory:()=>{e([]),o(null)}}}function e7({itinerary:t}){const[e,n]=B.useState(!1),[i,r]=B.useState(""),[o,a]=B.useState(""),[u,c]=B.useState(!1),{messages:f,loading:p,error:y,sendMessage:v,clearHistory:T}=J8(),I=B.useRef(null);B.useEffect(()=>{const S=localStorage.getItem("gemini_api_key");S?a(S):c(!0)},[]);const R=S=>{a(S),localStorage.setItem("gemini_api_key",S),c(!1)};B.useEffect(()=>{var S;(S=I.current)==null||S.scrollIntoView({behavior:"smooth"})},[f]);const V=()=>{i.trim()&&(v(o,i,t),r(""))},b=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),V())};return g.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[g.jsx(Oo,{children:e&&g.jsxs(bn.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-80 sm:w-96 h-[500px] mb-4 flex flex-col overflow-hidden border border-gray-200",children:[g.jsxs("div",{className:"bg-indigo-600 p-4 flex justify-between items-center text-white",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Hw,{size:18}),g.jsx("h3",{className:"font-bold",children:"AI "})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>c(!u),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:" API Key",children:g.jsx(KN,{size:16})}),g.jsx("button",{onClick:T,className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:"",children:g.jsx(Do,{size:16})}),g.jsx("button",{onClick:()=>n(!1),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",children:g.jsx(bo,{size:18})})]})]}),u?g.jsxs("div",{className:"flex-1 p-6 bg-gray-50 flex flex-col justify-center",children:[g.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:" Gemini API Key"}),g.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[" Google Gemini API Key  AI ",g.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 hover:underline ml-1",children:" Key"})]}),g.jsx("input",{type:"password",placeholder:"Paste API Key here...",className:"w-full px-3 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-indigo-500 outline-none",value:o,onChange:S=>a(S.target.value)}),g.jsx("button",{onClick:()=>R(o),className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700",children:""})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-50 space-y-4",children:[f.length===0&&g.jsxs("div",{className:"text-center text-gray-400 mt-10 text-sm",children:[g.jsx(Hw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),g.jsx("p",{children:" AI "}),g.jsx("p",{children:""})]}),f.map((S,C)=>g.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm whitespace-pre-wrap ${S.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-none"}`,children:S.text})},C)),p&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none shadow-sm border border-gray-100",children:g.jsxs("div",{className:"flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),y&&g.jsx("div",{className:"text-center text-xs text-red-500 bg-red-50 p-2 rounded-lg",children:y}),g.jsx("div",{ref:I})]}),g.jsxs("div",{className:"p-3 bg-white border-t border-gray-100 flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",value:i,onChange:S=>r(S.target.value),onKeyDown:b,disabled:p}),g.jsx("button",{onClick:V,disabled:p||!i.trim(),className:"p-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g.jsx(GN,{size:18})})]})]})]})}),g.jsx(bn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!e),className:"bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors flex items-center justify-center",children:e?g.jsx(bo,{size:24}):g.jsx(jN,{size:24})})]})}function t7({info:t,loading:e}){const i=(r=>{switch(r){case"fog":return RN;case"sun":return Qd;case"cloud-sun":return MN;case"rain":return NN;case"snow":return XN;default:return Qd}})(t.icon);return e?g.jsxs("div",{className:"sticker p-4 mb-6 flex items-center gap-4 animate-pulse",children:[g.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]}):g.jsxs(bn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"sticker p-4 mb-6 flex flex-col sm:flex-row items-start sm:items-center gap-4 relative overflow-hidden",children:[g.jsxs("div",{className:"flex items-center gap-3 min-w-[140px] relative z-10",children:[g.jsx("div",{className:"p-2.5 bg-gray-100 text-gray-800 rounded-full border border-gray-200",children:g.jsx(i,{size:24})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-0.5 font-sans",children:"Weather"}),g.jsx("div",{className:"font-bold text-gray-800 text-lg font-heading",children:t.tempRange})]})]}),g.jsx("div",{className:"w-px h-10 bg-gray-200 hidden sm:block relative z-10 border-r border-dashed border-gray-300"}),g.jsxs("div",{className:"flex-1 space-y-1 relative z-10",children:[g.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium font-hand text-lg",children:[g.jsx(JN,{size:16,className:"text-gray-400"}),g.jsx("span",{children:t.description})]}),g.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-500 leading-relaxed font-sans",children:[g.jsx(YN,{size:16,className:"text-gray-400 mt-0.5 flex-shrink-0"}),g.jsx("span",{children:t.clothing})]})]})]})}function n7({className:t}){const[e,n]=B.useState(new Date);B.useEffect(()=>{const u=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(u)},[]);const i=(u,c)=>new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:c}).format(u),r=(u,c)=>parseInt(new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1,timeZone:c}).format(u)),o=u=>u>=6&&u<18,a=[{label:" (Home)",zone:"Asia/Taipei",code:"TPE"},{label:" (Trip)",zone:"America/Los_Angeles",code:"PDT"}];return g.jsxs("div",{className:Jn("bg-white rounded-xl shadow-sm border border-gray-200 p-4",t),children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3 text-gray-700 font-bold border-b pb-2",children:[g.jsx(Pb,{size:18,className:"text-indigo-600"}),g.jsx("h3",{className:"text-sm",children:""})]}),g.jsx("div",{className:"space-y-3",children:a.map(u=>{const c=i(e,u.zone),f=r(e,u.zone),p=o(f);return g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:Jn("p-1.5 rounded-full",p?"bg-orange-100 text-orange-500":"bg-indigo-100 text-indigo-500"),children:p?g.jsx(Qd,{size:14}):g.jsx(Cb,{size:14})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500 font-medium",children:u.code}),g.jsx("div",{className:"text-sm font-bold text-gray-800",children:u.label})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-lg font-mono font-bold text-gray-800 tracking-tight",children:c}),g.jsx("div",{className:"text-xs text-gray-400",children:p?"Daytime":"Night"})]})]},u.code)})}),g.jsx("div",{className:"mt-3 pt-2 border-t border-gray-100",children:g.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[g.jsx("span",{children:" (Overlap):"}),g.jsx("span",{className:"font-medium text-green-600",children:"09:00 - 11:00 TPE"})]})})]})}function i7({isOpen:t,onClose:e,currentAdmins:n,currentUserEmail:i}){const[r,o]=B.useState(""),[a,u]=B.useState(!1),[c,f]=B.useState("2026-05-20"),[p,y]=B.useState("2026-06-04"),[v,T]=B.useState(!1);B.useEffect(()=>{t&&TT(Tt(Et,"trips","settings")).then(b=>{if(b.exists()){const S=b.data();S.startDate&&f(S.startDate),S.endDate&&y(S.endDate)}})},[t]);const I=async b=>{if(b.preventDefault(),!(!r||!r.includes("@"))){if(n.includes(r)){alert(" Email ");return}u(!0);try{const S=[...n,r];await Nm(Tt(Et,"trips","settings"),{adminEmails:S}),o("")}catch(S){console.error("Failed to add admin:",S),alert("")}finally{u(!1)}}},R=async b=>{if(b===i){alert("");return}if(confirm(` ${b} `))try{const S=n.filter(C=>C!==b);await Nm(Tt(Et,"trips","settings"),{adminEmails:S})}catch(S){console.error("Failed to remove admin:",S),alert("")}},V=async()=>{if(confirm(`
${c}
${p}
`)){T(!0);try{await pi(Tt(Et,"trips","settings"),{startDate:c,endDate:p},{merge:!0});const b=await TT(Tt(Et,"trips","main"));if(b.exists()){const S=b.data().days,C=yL(c),z=S.map((H,U)=>{const k=tM(C,U),E=fL(k,"yyyy/MM/dd"),M=["","","","","","",""][k.getDay()];return{...H,date:`${E} (${M})`}});await Nm(Tt(Et,"trips","main"),{days:z}),alert("")}}catch(b){console.error("Failed to update date:",b),alert("")}finally{T(!1)}}};return t?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:g.jsxs(bn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-slate-800 to-slate-900 text-white",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(x_,{className:"text-emerald-400",size:20}),g.jsx("h2",{className:"text-lg font-bold",children:""})]}),g.jsx("button",{onClick:e,className:"text-white/70 hover:text-white transition-colors",children:g.jsx(bo,{size:20})})]}),g.jsxs("div",{className:"p-6 space-y-8",children:[g.jsxs("section",{children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[g.jsx(bb,{size:16,className:"text-indigo-600"}),""]}),g.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:" (Day 1)"}),g.jsx("input",{type:"date",value:c,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:""}),g.jsx("input",{type:"date",value:p,onChange:b=>y(b.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),g.jsxs("button",{onClick:V,disabled:v,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[g.jsx(w_,{size:16}),""]}),g.jsx("p",{className:"text-xs text-indigo-600 mt-2 opacity-80 text-center",children:"* "})]})]}),g.jsx("hr",{className:"border-gray-100"}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[g.jsx(Ww,{size:16,className:"text-indigo-600"}),""]}),g.jsx("form",{onSubmit:I,className:"mb-4",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"email",value:r,onChange:b=>o(b.target.value),placeholder:" Google Email",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",required:!0}),g.jsxs("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center gap-1",children:[g.jsx(rl,{size:18}),""]})]})}),g.jsx("div",{className:"space-y-2",children:g.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 pr-1",children:g.jsx(Oo,{mode:"popLayout",children:n.map(b=>g.jsxs(bn.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-500 shadow-sm",children:g.jsx(Ww,{size:14})}),g.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[180px]",children:b}),b===i&&g.jsx("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold",children:"YOU"})]}),b!==i&&g.jsx("button",{onClick:()=>R(b),className:"text-gray-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"",children:g.jsx(Do,{size:16})})]},b))})})})]})]})]})}):null}function r7({isOpen:t,onClose:e,items:n,days:i,onAdd:r,onRemove:o,onMoveToDay:a}){const[u,c]=B.useState(!1),[f,p]=B.useState(""),y=v=>{if(v.preventDefault(),!f.trim())return;r({time:"00:00",title:f,description:"",type:"sightseeing",iconName:"MapPin"}),p(""),c(!1)};return g.jsx(Oo,{children:t&&g.jsxs(g.Fragment,{children:[g.jsx(bn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:e}),g.jsxs(bn.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white z-50 shadow-2xl flex flex-col",children:[g.jsxs("div",{className:"p-6 bg-amber-50 border-b border-amber-100 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-amber-100 rounded-full text-amber-600",children:g.jsx(Mg,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-800 font-heading",children:""}),g.jsx("p",{className:"text-sm text-gray-500",children:""})]})]}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:g.jsx(rl,{size:24,className:"rotate-45"})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[u?g.jsxs("form",{onSubmit:y,className:"mb-6 bg-white p-4 rounded-xl shadow-sm border border-amber-200",children:[g.jsx("input",{autoFocus:!0,type:"text",placeholder:"",className:"w-full p-2 border rounded-lg mb-3 focus:ring-2 focus:ring-amber-200 outline-none",value:f,onChange:v=>p(v.target.value)}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-3 py-1.5 text-sm text-gray-500 hover:text-gray-700",children:""}),g.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm bg-amber-500 text-white rounded-lg hover:bg-amber-600 font-medium",children:""})]})]}):g.jsxs("button",{onClick:()=>c(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-amber-400 hover:text-amber-600 hover:bg-amber-50 transition-all flex items-center justify-center gap-2 mb-6",children:[g.jsx(rl,{size:20}),""]}),g.jsxs("div",{className:"space-y-3",children:[n.map((v,T)=>g.jsxs(bn.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 group",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsx("h3",{className:"font-bold text-gray-800",children:v.title}),g.jsx("button",{onClick:()=>o(T),className:"text-gray-300 hover:text-red-500 transition-colors",children:g.jsx(Do,{size:16})})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("select",{className:"w-full p-2 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600 focus:ring-2 focus:ring-indigo-100 outline-none appearance-none cursor-pointer hover:bg-gray-100 transition-colors",onChange:I=>{I.target.value&&a(T,I.target.value)},value:"",children:[g.jsx("option",{value:"",disabled:!0,children:" ..."}),i.map(I=>g.jsxs("option",{value:I.id,children:[I.date.split(" ")[0]," - ",I.cityLabel]},I.id))]}),g.jsx(bb,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]},T)),n.length===0&&!u&&g.jsxs("div",{className:"text-center py-12 text-gray-400",children:[g.jsx(Mg,{size:48,className:"mx-auto mb-3 opacity-20"}),g.jsx("p",{children:""}),g.jsx("p",{className:"text-xs mt-1",children:""})]})]})]})]})]})})}function s7(){const[t,e]=B.useState(xm),[n,i]=B.useState(!0),[r,o]=B.useState([]),[a,u]=B.useState([]),c="main_f2";B.useEffect(()=>{const N=vp(Tt(Et,"trips",c),D=>{if(D.exists()){const F=D.data();e(F.days),o(F.unassigned||[])}else pi(Tt(Et,"trips",c),{days:xm,unassigned:[]});i(!1)},D=>{console.error("Firestore sync error:",D),i(!1)});return()=>N()},[]);const f=async(N,D)=>{try{await pi(Tt(Et,"trips",c),{days:N,unassigned:D})}catch(F){console.error("Error saving to Firestore:",F),alert("")}},p=()=>{u(N=>[...N,{days:t,unassigned:r}])},y=()=>{if(a.length===0)return;const N=a[a.length-1],D=a.slice(0,-1);u(D),e(N.days),o(N.unassigned),f(N.days,N.unassigned)},v=N=>[...N].sort((D,F)=>{const O=D.time.split(" ")[0],ne=F.time.split(" ")[0];return O.localeCompare(ne)});return{itinerary:t,unassignedActivities:r,loading:n,addActivity:(N,D)=>{p();const F=t.map(O=>{if(O.id===N){const ne=[...O.activities,D];return{...O,activities:v(ne)}}return O});f(F,r)},removeActivity:(N,D)=>{p();const F=t.map(O=>{if(O.id===N){const ne=[...O.activities];return ne.splice(D,1),{...O,activities:ne}}return O});f(F,r)},updateActivity:(N,D,F)=>{p();const O=t.map(ne=>{if(ne.id===N){const Pe=[...ne.activities];return Pe[D]=F,{...ne,activities:v(Pe)}}return ne});f(O,r)},reorderActivity:(N,D,F)=>{console.warn("reorderActivity is deprecated. Activities are now automatically sorted by time.")},moveActivity:(N,D,F,O)=>{p();const ne=t.map(Pe=>{if(Pe.id===N){const Oe=[...Pe.activities];return typeof O=="number"&&Oe.splice(O,1),{...Pe,activities:Oe}}if(Pe.id===D){const Oe=[...Pe.activities,F];return{...Pe,activities:v(Oe)}}return Pe});f(ne,r)},addToIdeaPool:N=>{p();const D=[...r,N];f(t,D)},removeFromIdeaPool:N=>{p();const D=[...r];D.splice(N,1),f(t,D)},moveFromPoolToDay:(N,D)=>{p();const F=r[N],O=[...r];O.splice(N,1);const ne=t.map(Pe=>{if(Pe.id===D){const Oe=[...Pe.activities,F];return{...Pe,activities:v(Oe)}}return Pe});f(ne,O)},resetItinerary:()=>{confirm("")&&(p(),f(xm,[]))},exportItinerary:()=>{const N=JSON.stringify({days:t,unassigned:r},null,2),D=new Blob([N],{type:"application/json"}),F=URL.createObjectURL(D),O=document.createElement("a");O.href=F,O.download=`acsm-trip-itinerary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(F)},exportItineraryText:()=>{let N=` ACSM 2026 Trip Itinerary

`;t.forEach(D=>{N+=` ${D.date} - ${D.title}
`,D.summary&&(N+=` ${D.summary}
`),D.activities.length===0?N+=`   (No activities)
`:D.activities.forEach(F=>{N+=`    ${F.time} ${F.title}
`,F.location&&(N+=`       ${F.location}
`),F.tips&&(N+=`       ${F.tips}
`)}),N+=`
`}),navigator.clipboard.writeText(N).then(()=>{alert(" Line  ")}).catch(D=>{console.error("Failed to copy text: ",D),alert("")})},importItinerary:N=>{const D=new FileReader;D.onload=F=>{var O;try{const ne=(O=F.target)==null?void 0:O.result,Pe=JSON.parse(ne);p(),Array.isArray(Pe)?(f(Pe,[]),alert("")):Pe.days&&Array.isArray(Pe.days)?(f(Pe.days,Pe.unassigned||[]),alert("")):alert("")}catch(ne){console.error("Import failed:",ne),alert("")}},D.readAsText(N)},updateDayInfo:(N,D,F,O,ne,Pe)=>{p();const Oe=t.map(ke=>ke.id===N?{...ke,title:D,summary:F,...O!==void 0?{date:O}:{},...ne!==void 0?{cityLabel:ne}:{},...Pe!==void 0?{city:Pe}:{}}:ke);f(Oe,r)},undo:y,canUndo:a.length>0}}const v2={SF:{tempRange:"11C - 18C",description:"",clothing:"",icon:"fog"},SLC:{tempRange:"10C - 24C",description:"",clothing:"",icon:"sun"},SAN:{tempRange:"16C - 22C",description:"",clothing:"",icon:"cloud-sun"},LA:{tempRange:"16C - 24C",description:"",clothing:"",icon:"sun"}},o7={SF:{lat:37.7749,lon:-122.4194},SLC:{lat:40.7608,lon:-111.891},SAN:{lat:32.7157,lon:-117.1611},LA:{lat:34.0522,lon:-118.2437}},a7=t=>{switch(t){case 0:return{description:"",icon:"sun"};case 1:case 2:case 3:return{description:"",icon:"cloud-sun"};case 45:case 48:return{description:"",icon:"fog"};case 51:case 53:case 55:return{description:"",icon:"rain"};case 61:case 63:case 65:return{description:"",icon:"rain"};case 71:case 73:case 75:return{description:"",icon:"snow"};case 80:case 81:case 82:return{description:"",icon:"rain"};case 95:case 96:case 99:return{description:"",icon:"rain"};default:return{description:"",icon:"cloud-sun"}}},l7=(t,e)=>{const n=(t+e)/2;return n<10?"":n<15?"":n<20?"":n<25?"":""},u7=async t=>{const e=o7[t];if(!e)return null;try{const i=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e.lat}&longitude=${e.lon}&current=temperature_2m,weather_code&daily=temperature_2m_max,temperature_2m_min&timezone=auto`)).json(),r=i.current,o=i.daily,a=Math.round(o.temperature_2m_min[0]),u=Math.round(o.temperature_2m_max[0]),c=Math.round(r.temperature_2m),f=a7(r.weather_code),p=l7(a,u);return{tempRange:`${a}C - ${u}C ( ${c}C)`,description:f.description,clothing:p,icon:f.icon}}catch(n){return console.error("Failed to fetch weather:",n),null}};function c7(t){const[e,n]=B.useState(null),[i,r]=B.useState(!0),[o,a]=B.useState(null);return B.useEffect(()=>{let u=!0;return(async()=>{r(!0),a(null);const f=await u7(t);u&&(f?n(f):(console.warn(`Weather API failed for ${t}, using static data.`),n(v2[t]||null)),r(!1))})(),()=>{u=!1}},[t]),{weather:e,loading:i,error:o}}const cE=[{id:"1",category:"flight",title:" JX012 (TPE-SFO)",reference:"PNR: ABC12345",details:"2026/05/20 23:40 , ",cost:1200},{id:"2",category:"hotel",title:"San Francisco Marriott Marquis",reference:"Conf: #8829102",details:"5/20 - 5/25 (5 Nights)",cost:1500}];function h7(){const[t,e]=B.useState(cE),[n,i]=B.useState(!0);B.useEffect(()=>{const f=vp(Tt(Et,"trips","wallet"),p=>{p.exists()?e(p.data().items):pi(Tt(Et,"trips","wallet"),{items:cE}),i(!1)},p=>{console.error("Firestore sync error:",p),i(!1)});return()=>f()},[]);const r=async f=>{try{await pi(Tt(Et,"trips","wallet"),{items:f})}catch(p){console.error("Error saving wallet to Firestore:",p),alert("")}};return{walletItems:t,loading:n,addWalletItem:f=>{const p={...f,id:crypto.randomUUID()},y=[...t,p];return r(y),p.id},removeWalletItem:f=>{const p=t.filter(y=>y.id!==f);r(p)},updateWalletItem:(f,p)=>{const y=t.map(v=>v.id===f?{...v,...p}:v);r(y)},getTotalCost:()=>t.reduce((f,p)=>f+(p.cost||0),0)}}const jm=["weber900127@gmail.com"];function d7(){const[t,e]=B.useState(null),[n,i]=B.useState(!0),[r,o]=B.useState(!1),[a,u]=B.useState([]);return B.useEffect(()=>Vm.onAuthStateChanged(y=>{e(y),y||(o(!1),i(!1))}),[]),B.useEffect(()=>{const p=vp(Tt(Et,"trips","settings"),y=>{if(y.exists()){const v=y.data().adminEmails;u(v)}else pi(Tt(Et,"trips","settings"),{adminEmails:jm}),u(jm)},y=>{console.error("Failed to sync admin list:",y),u(jm)});return()=>p()},[]),B.useEffect(()=>{t&&a.length>0?(o(a.includes(t.email||"")),i(!1)):t&&o(!1)},[t,a]),{user:t,isUserAdmin:r,adminList:a,loading:n,login:async()=>{try{await iB(Vm,d8)}catch(p){console.error("Login failed:",p),alert("")}},logout:async()=>{try{await VU(Vm)}catch(p){console.error("Logout failed:",p)}}}}function f7(){var ft;const[t,e]=B.useState("ALL"),[n,i]=B.useState({day1:!0}),[r,o]=B.useState(!1),[a,u]=B.useState(!1),[c,f]=B.useState(!1),[p,y]=B.useState(!1),{user:v,login:T,logout:I,loading:R,isUserAdmin:V,adminList:b}=d7(),[S,C]=B.useState(!1),[z,H]=B.useState(null),{itinerary:U,unassignedActivities:k,addActivity:E,updateActivity:M,removeActivity:N,moveActivity:D,addToIdeaPool:F,removeFromIdeaPool:O,moveFromPoolToDay:ne,exportItinerary:Pe,exportItineraryText:Oe,importItinerary:ke,updateDayInfo:K,undo:ue,canUndo:J}=s7(),{walletItems:fe,addWalletItem:Z,updateWalletItem:ce,removeWalletItem:he,getTotalCost:me}=h7(),{weather:ge,loading:at}=c7(t),Vt=de=>{i(Ge=>({...Ge,[de]:!Ge[de]}))},Ji=t==="ALL"?U:U.filter(de=>de.city===t),Fs=U.reduce((de,Ge)=>de+Ge.activities.reduce((jt,jn)=>jt+(jn.cost||0),0),0)+me(),wi=(de,Ge,jt)=>{const jn={...de,modifiedBy:(v==null?void 0:v.displayName)||"Anonymous",modifiedAt:new Date().toISOString()};if(jt&&(de.cost||0)>0){let Ft="other";switch(de.type){case"flight":Ft="flight";break;case"transport":Ft="transport";break;case"food":Ft="food";break;case"hotel":Ft="hotel";break;case"sightseeing":Ft="ticket";break;default:Ft="other"}const ii={category:Ft,title:de.title,reference:"",details:`${de.time}`,cost:de.cost};if(de.walletItemId)ce(de.walletItemId,ii);else{const Us=Z(ii);jn.walletItemId=Us}}z?z.dayId===Ge?M(z.dayId,z.index,jn):D(z.dayId,Ge,jn,z.index):E(Ge,jn),C(!1),H(null)},er=(de,Ge,jt)=>{H({dayId:de,index:Ge,activity:jt}),C(!0)},Bo=(de,Ge)=>{confirm("")&&N(de,Ge)},[zs,Dr]=B.useState(null);if(R)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--paper-bg)] text-gray-500 font-hand text-xl",children:"Loading your memories..."});console.log("Scrapbook Theme Loaded v3");const tr=Object.keys(n).filter(de=>n[de]),xi=de=>(Ge,jt)=>({...Ge,id:`${de}-${jt}`}),_t=tr.length>0?Ji.filter(de=>n[de.id]).flatMap(de=>de.activities.map(xi(de.id))):Ji.flatMap(de=>de.activities.map(xi(de.id)));return g.jsxs("div",{className:"min-h-screen pb-12 relative",children:[g.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 opacity-50 mix-blend-multiply",style:{backgroundImage:"var(--paper-texture)"}}),g.jsxs("div",{className:"relative z-10",children:[g.jsx(ML,{isEditing:r,onToggleEdit:()=>o(!r),onExport:Pe,onShare:Oe,onImport:ke,onOpenWallet:()=>u(!0),onOpenSettings:()=>f(!0),onOpenIdeaPool:()=>y(!0),user:v,isAdmin:V,onLogin:T,onLogout:I,onUndo:ue,canUndo:J}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 -mt-6 relative z-20",children:[g.jsx("div",{className:"flex overflow-x-auto gap-3 pb-4 scrollbar-hide mb-6 no-scrollbar px-2",children:[{id:"ALL",label:"All Trips"},{id:"SF",label:"San Francisco"},{id:"SLC",label:"Salt Lake City"}].map(de=>g.jsxs("button",{onClick:()=>e(de.id),className:Jn("px-5 py-2 whitespace-nowrap text-sm font-bold transition-all relative group",t===de.id?"text-white transform -rotate-1":"text-gray-600 hover:text-gray-900 hover:rotate-1"),children:[g.jsx("div",{className:Jn("absolute inset-0 border-2 border-dashed rounded-lg -z-10 transition-all",t===de.id?"bg-gray-800 border-gray-800 shadow-md":"bg-white border-gray-300 group-hover:border-gray-400")}),g.jsx("div",{className:Jn("absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-r border-gray-300",t===de.id&&"border-transparent")}),g.jsx("div",{className:Jn("absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-l border-gray-300",t===de.id&&"border-transparent")}),g.jsx("span",{className:"font-heading tracking-wide uppercase",children:de.label})]},de.id))}),g.jsx(Oo,{mode:"wait",children:t!=="ALL"&&g.jsx(t7,{city:t,info:ge||v2[t],loading:at},t)}),g.jsx("div",{className:"mt-4 mb-8",children:g.jsx(n7,{})}),v?g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ji.map(de=>g.jsx(t3,{day:de,isExpanded:!!n[de.id],onToggle:()=>Vt(de.id),isEditing:r,onAddActivity:()=>{H({dayId:de.id,index:-1,activity:{}}),C(!0)},onUpdateActivity:(Ge,jt)=>er(de.id,Ge,jt),onRemoveActivity:Ge=>Bo(de.id,Ge),onActivityFocus:Ge=>Dr(Ge),highlightedActivityId:zs,onUpdateDayInfo:(Ge,jt,jn,Ft,ii)=>K(de.id,Ge,jt,jn,Ft,ii)},de.id)),g.jsx(f8,{isEditing:r,itinerary:U})]}),g.jsx("div",{className:"hidden lg:block lg:col-span-1",children:g.jsx("div",{className:"sticky top-8",children:g.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg border border-gray-200 transform rotate-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.jsx(Ib,{size:20,className:"text-indigo-600"}),g.jsx("h3",{className:"font-heading font-bold text-gray-800",children:"Trip Map"})]}),g.jsx(CI,{activities:_t,highlightedActivityId:zs,className:"h-[500px] w-full rounded-lg overflow-hidden border border-gray-100"})]})})})]}):g.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm text-center mt-8",children:[g.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("span",{className:"text-2xl",children:""})}),g.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:""}),g.jsx("p",{className:"text-gray-500 mb-6",children:" Google "}),g.jsx("button",{onClick:T,className:"bg-indigo-600 text-white px-6 py-2 rounded-full font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:" Google "})]}),g.jsxs("div",{className:"mt-12 text-center text-xs text-gray-400 pb-8",children:[g.jsx("p",{children:""}),g.jsx("p",{className:"mt-2",children:"Created for 2026 ACSM Trip"})]})]}),g.jsx(w8,{isOpen:S,onClose:()=>{C(!1),H(null)},onSave:wi,initialData:z==null?void 0:z.activity,availableDays:U,currentDayId:(z==null?void 0:z.dayId)||((ft=U[0])==null?void 0:ft.id)}),g.jsx(T8,{isOpen:a,onClose:()=>u(!1),items:fe,onAdd:Z,onRemove:he,onUpdate:ce,totalCost:Fs}),g.jsx(e7,{itinerary:U}),g.jsx(i7,{isOpen:c,onClose:()=>f(!1),currentAdmins:b,currentUserEmail:v==null?void 0:v.email}),g.jsx(r7,{isOpen:p,onClose:()=>y(!1),items:k,days:U,onAdd:F,onRemove:O,onMoveToDay:ne})]})]})}class p7 extends B.Component{constructor(){super(...arguments);k0(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){var n;return this.state.hasError?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg w-full border border-red-200",children:[g.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),g.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-60 text-sm font-mono text-gray-800 mb-4",children:(n=this.state.error)==null?void 0:n.toString()}),g.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Fm.createRoot(document.getElementById("root")).render(g.jsx(bd.StrictMode,{children:g.jsx(p7,{children:g.jsx(f7,{})})}));
