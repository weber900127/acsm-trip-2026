var qk=Object.defineProperty;var Gk=(t,e,n)=>e in t?qk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var b0=(t,e,n)=>Gk(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Kk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hE={exports:{}},Af={},dE={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),Yk=Symbol.for("react.fragment"),Xk=Symbol.for("react.strict_mode"),Qk=Symbol.for("react.profiler"),Jk=Symbol.for("react.provider"),e2=Symbol.for("react.context"),t2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),i2=Symbol.for("react.memo"),r2=Symbol.for("react.lazy"),k0=Symbol.iterator;function s2(t){return t===null||typeof t!="object"?null:(t=k0&&t[k0]||t["@@iterator"],typeof t=="function"?t:null)}var fE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,mE={};function dl(t,e,n){this.props=t,this.context=e,this.refs=mE,this.updater=n||fE}dl.prototype.isReactComponent={};dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gE(){}gE.prototype=dl.prototype;function by(t,e,n){this.props=t,this.context=e,this.refs=mE,this.updater=n||fE}var ky=by.prototype=new gE;ky.constructor=by;pE(ky,dl.prototype);ky.isPureReactComponent=!0;var R0=Array.isArray,yE=Object.prototype.hasOwnProperty,Ry={current:null},_E={key:!0,ref:!0,__self:!0,__source:!0};function vE(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)yE.call(e,i)&&!_E.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:_c,type:t,key:o,ref:a,props:r,_owner:Ry.current}}function o2(t,e){return{$$typeof:_c,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ny(t){return typeof t=="object"&&t!==null&&t.$$typeof===_c}function a2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N0=/\/+/g;function jp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a2(""+t.key):e.toString(36)}function Qh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _c:case Zk:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+jp(a,0):i,R0(r)?(n="",t!=null&&(n=t.replace(N0,"$&/")+"/"),Qh(r,e,n,"",function(f){return f})):r!=null&&(Ny(r)&&(r=o2(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(N0,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",R0(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+jp(o,u);a+=Qh(o,e,n,c,r)}else if(c=s2(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+jp(o,u++),a+=Qh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Th(t,e,n){if(t==null)return t;var i=[],r=0;return Qh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function l2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Jh={transition:null},u2={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Jh,ReactCurrentOwner:Ry};function wE(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Th,forEach:function(t,e,n){Th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Th(t,function(){e++}),e},toArray:function(t){return Th(t,function(e){return e})||[]},only:function(t){if(!Ny(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=dl;Ie.Fragment=Yk;Ie.Profiler=Qk;Ie.PureComponent=by;Ie.StrictMode=Xk;Ie.Suspense=n2;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2;Ie.act=wE;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pE({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Ry.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)yE.call(e,c)&&!_E.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:_c,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:e2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jk,_context:t},t.Consumer=t};Ie.createElement=vE;Ie.createFactory=function(t){var e=vE.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:t2,render:t}};Ie.isValidElement=Ny;Ie.lazy=function(t){return{$$typeof:r2,_payload:{_status:-1,_result:t},_init:l2}};Ie.memo=function(t,e){return{$$typeof:i2,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Jh.transition;Jh.transition={};try{t()}finally{Jh.transition=e}};Ie.unstable_act=wE;Ie.useCallback=function(t,e){return fn.current.useCallback(t,e)};Ie.useContext=function(t){return fn.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return fn.current.useEffect(t,e)};Ie.useId=function(){return fn.current.useId()};Ie.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return fn.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Ie.useRef=function(t){return fn.current.useRef(t)};Ie.useState=function(t){return fn.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return fn.current.useTransition()};Ie.version="18.3.1";dE.exports=Ie;var W=dE.exports;const Cd=cE(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=W,h2=Symbol.for("react.element"),d2=Symbol.for("react.fragment"),f2=Object.prototype.hasOwnProperty,p2=c2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m2={key:!0,ref:!0,__self:!0,__source:!0};function TE(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)f2.call(e,i)&&!m2.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:h2,type:t,key:o,ref:a,props:r,_owner:p2.current}}Af.Fragment=d2;Af.jsx=TE;Af.jsxs=TE;hE.exports=Af;var w=hE.exports,Um={},xE={exports:{}},Vn={},EE={exports:{}},SE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,re){var Q=G.length;G.push(re);e:for(;0<Q;){var he=Q-1>>>1,xe=G[he];if(0<r(xe,re))G[he]=re,G[Q]=xe,Q=he;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var re=G[0],Q=G.pop();if(Q!==re){G[0]=Q;e:for(var he=0,xe=G.length,We=xe>>>1;he<We;){var Re=2*(he+1)-1,Ee=G[Re],fe=Re+1,gt=G[fe];if(0>r(Ee,Q))fe<xe&&0>r(gt,Ee)?(G[he]=gt,G[fe]=Q,he=fe):(G[he]=Ee,G[Re]=Q,he=Re);else if(fe<xe&&0>r(gt,Q))G[he]=gt,G[fe]=Q,he=fe;else break e}}return re}function r(G,re){var Q=G.sortIndex-re.sortIndex;return Q!==0?Q:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],m=1,g=null,_=3,E=!1,k=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=G)i(f),re.sortIndex=re.expirationTime,e(c,re);else break;re=n(f)}}function F(G){if(C=!1,A(G),!k)if(n(c)!==null)k=!0,Ze(z);else{var re=n(f);re!==null&&J(F,re.startTime-G)}}function z(G,re){k=!1,C&&(C=!1,P(I),I=-1),E=!0;var Q=_;try{for(A(re),g=n(c);g!==null&&(!(g.expirationTime>re)||G&&!V());){var he=g.callback;if(typeof he=="function"){g.callback=null,_=g.priorityLevel;var xe=he(g.expirationTime<=re);re=t.unstable_now(),typeof xe=="function"?g.callback=xe:g===n(c)&&i(c),A(re)}else i(c);g=n(c)}if(g!==null)var We=!0;else{var Re=n(f);Re!==null&&J(F,Re.startTime-re),We=!1}return We}finally{g=null,_=Q,E=!1}}var $=!1,R=null,I=-1,M=5,D=-1;function V(){return!(t.unstable_now()-D<M)}function U(){if(R!==null){var G=t.unstable_now();D=G;var re=!0;try{re=R(!0,G)}finally{re?O():($=!1,R=null)}}else $=!1}var O;if(typeof x=="function")O=function(){x(U)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,jt=ke.port2;ke.port1.onmessage=U,O=function(){jt.postMessage(null)}}else O=function(){N(U,0)};function Ze(G){R=G,$||($=!0,O())}function J(G,re){I=N(function(){G(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){k||E||(k=!0,Ze(z))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var Q=_;_=re;try{return G()}finally{_=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=_;_=G;try{return re()}finally{_=Q}},t.unstable_scheduleCallback=function(G,re,Q){var he=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?he+Q:he):Q=he,G){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Q+xe,G={id:m++,callback:re,priorityLevel:G,startTime:Q,expirationTime:xe,sortIndex:-1},Q>he?(G.sortIndex=Q,e(f,G),n(c)===null&&G===n(f)&&(C?(P(I),I=-1):C=!0,J(F,Q-he))):(G.sortIndex=xe,e(c,G),k||E||(k=!0,Ze(z))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var re=_;return function(){var Q=_;_=re;try{return G.apply(this,arguments)}finally{_=Q}}}})(SE);EE.exports=SE;var g2=EE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=W,Dn=g2;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PE=new Set,Uu={};function Ro(t,e){Ka(t,e),Ka(t+"Capture",e)}function Ka(t,e){for(Uu[t]=e,t=0;t<e.length;t++)PE.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zm=Object.prototype.hasOwnProperty,_2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},M0={};function v2(t){return zm.call(M0,t)?!0:zm.call(L0,t)?!1:_2.test(t)?M0[t]=!0:(L0[t]=!0,!1)}function w2(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T2(t,e,n,i){if(e===null||typeof e>"u"||w2(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ly=/[\-:]([a-z])/g;function My(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ly,My);Ht[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ly,My);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ly,My);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dy(t,e,n,i){var r=Ht.hasOwnProperty(e)?Ht[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T2(e,n,r,i)&&(n=null),i||r===null?v2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ar=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xh=Symbol.for("react.element"),va=Symbol.for("react.portal"),wa=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Bm=Symbol.for("react.profiler"),IE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Wm=Symbol.for("react.suspense_list"),jy=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),D0=Symbol.iterator;function Yl(t){return t===null||typeof t!="object"?null:(t=D0&&t[D0]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,Fp;function au(t){if(Fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var Up=!1;function zp(t,e){if(!t||Up)return"";Up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{Up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?au(t):""}function x2(t){switch(t.tag){case 5:return au(t.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return t=zp(t.type,!1),t;case 11:return t=zp(t.type.render,!1),t;case 1:return t=zp(t.type,!0),t;default:return""}}function $m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wa:return"Fragment";case va:return"Portal";case Bm:return"Profiler";case Oy:return"StrictMode";case Hm:return"Suspense";case Wm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CE:return(t.displayName||"Context")+".Consumer";case IE:return(t._context.displayName||"Context")+".Provider";case Vy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jy:return e=t.displayName||null,e!==null?e:$m(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return $m(t(e))}catch{}}return null}function E2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $m(e);case 8:return e===Oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S2(t){var e=bE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eh(t){t._valueTracker||(t._valueTracker=S2(t))}function kE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ad(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qm(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function O0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RE(t,e){e=e.checked,e!=null&&Dy(t,"checked",e,!1)}function Gm(t,e){RE(t,e);var n=gs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Km(t,e.type,n):e.hasOwnProperty("defaultValue")&&Km(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Km(t,e,n){(e!=="number"||Ad(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lu=Array.isArray;function Va(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Zm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(lu(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function NE(t,e){var n=gs(e.value),i=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function F0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sh,ME=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sh=Sh||document.createElement("div"),Sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P2=["Webkit","ms","Moz","O"];Object.keys(yu).forEach(function(t){P2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yu[e]=yu[t]})});function DE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yu.hasOwnProperty(t)&&yu[t]?(""+e).trim():e+"px"}function OE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=DE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var I2=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xm(t,e){if(e){if(I2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Qm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=null;function Fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eg=null,ja=null,Fa=null;function U0(t){if(t=Tc(t)){if(typeof eg!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Lf(e),eg(t.stateNode,t.type,e))}}function VE(t){ja?Fa?Fa.push(t):Fa=[t]:ja=t}function jE(){if(ja){var t=ja,e=Fa;if(Fa=ja=null,U0(t),e)for(t=0;t<e.length;t++)U0(e[t])}}function FE(t,e){return t(e)}function UE(){}var Bp=!1;function zE(t,e,n){if(Bp)return t(e,n);Bp=!0;try{return FE(t,e,n)}finally{Bp=!1,(ja!==null||Fa!==null)&&(UE(),jE())}}function Bu(t,e){var n=t.stateNode;if(n===null)return null;var i=Lf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var tg=!1;if(_r)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){tg=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{tg=!1}function C2(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var _u=!1,bd=null,kd=!1,ng=null,A2={onError:function(t){_u=!0,bd=t}};function b2(t,e,n,i,r,o,a,u,c){_u=!1,bd=null,C2.apply(A2,arguments)}function k2(t,e,n,i,r,o,a,u,c){if(b2.apply(this,arguments),_u){if(_u){var f=bd;_u=!1,bd=null}else throw Error(ee(198));kd||(kd=!0,ng=f)}}function No(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z0(t){if(No(t)!==t)throw Error(ee(188))}function R2(t){var e=t.alternate;if(!e){if(e=No(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return z0(r),t;if(o===i)return z0(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function HE(t){return t=R2(t),t!==null?WE(t):null}function WE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WE(t);if(e!==null)return e;t=t.sibling}return null}var $E=Dn.unstable_scheduleCallback,B0=Dn.unstable_cancelCallback,N2=Dn.unstable_shouldYield,L2=Dn.unstable_requestPaint,pt=Dn.unstable_now,M2=Dn.unstable_getCurrentPriorityLevel,Uy=Dn.unstable_ImmediatePriority,qE=Dn.unstable_UserBlockingPriority,Rd=Dn.unstable_NormalPriority,D2=Dn.unstable_LowPriority,GE=Dn.unstable_IdlePriority,bf=null,Oi=null;function O2(t){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:F2,V2=Math.log,j2=Math.LN2;function F2(t){return t>>>=0,t===0?32:31-(V2(t)/j2|0)|0}var Ph=64,Ih=4194304;function uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=uu(u):(o&=a,o!==0&&(i=uu(o)))}else a=n&~r,a!==0?i=uu(a):o!==0&&(i=uu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fi(e),r=1<<n,i|=t[n],e&=~r;return i}function U2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z2(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fi(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=U2(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function ig(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KE(){var t=Ph;return Ph<<=1,!(Ph&4194240)&&(Ph=64),t}function Hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fi(e),t[e]=n}function B2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function zy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var He=0;function ZE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YE,By,XE,QE,JE,rg=!1,Ch=[],ns=null,is=null,rs=null,Hu=new Map,Wu=new Map,qr=[],H2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H0(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wu.delete(e.pointerId)}}function Ql(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Tc(e),e!==null&&By(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function W2(t,e,n,i,r){switch(e){case"focusin":return ns=Ql(ns,t,e,n,i,r),!0;case"dragenter":return is=Ql(is,t,e,n,i,r),!0;case"mouseover":return rs=Ql(rs,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Hu.set(o,Ql(Hu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Wu.set(o,Ql(Wu.get(o)||null,t,e,n,i,r)),!0}return!1}function eS(t){var e=io(t.target);if(e!==null){var n=No(e);if(n!==null){if(e=n.tag,e===13){if(e=BE(n),e!==null){t.blockedOn=e,JE(t.priority,function(){XE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ed(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Jm=i,n.target.dispatchEvent(i),Jm=null}else return e=Tc(n),e!==null&&By(e),t.blockedOn=n,!1;e.shift()}return!0}function W0(t,e,n){ed(t)&&n.delete(e)}function $2(){rg=!1,ns!==null&&ed(ns)&&(ns=null),is!==null&&ed(is)&&(is=null),rs!==null&&ed(rs)&&(rs=null),Hu.forEach(W0),Wu.forEach(W0)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,rg||(rg=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,$2)))}function $u(t){function e(r){return Jl(r,t)}if(0<Ch.length){Jl(Ch[0],t);for(var n=1;n<Ch.length;n++){var i=Ch[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ns!==null&&Jl(ns,t),is!==null&&Jl(is,t),rs!==null&&Jl(rs,t),Hu.forEach(e),Wu.forEach(e),n=0;n<qr.length;n++)i=qr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)eS(n),n.blockedOn===null&&qr.shift()}var Ua=Ar.ReactCurrentBatchConfig,Ld=!0;function q2(t,e,n,i){var r=He,o=Ua.transition;Ua.transition=null;try{He=1,Hy(t,e,n,i)}finally{He=r,Ua.transition=o}}function G2(t,e,n,i){var r=He,o=Ua.transition;Ua.transition=null;try{He=4,Hy(t,e,n,i)}finally{He=r,Ua.transition=o}}function Hy(t,e,n,i){if(Ld){var r=sg(t,e,n,i);if(r===null)Jp(t,e,i,Md,n),H0(t,i);else if(W2(r,t,e,n,i))i.stopPropagation();else if(H0(t,i),e&4&&-1<H2.indexOf(t)){for(;r!==null;){var o=Tc(r);if(o!==null&&YE(o),o=sg(t,e,n,i),o===null&&Jp(t,e,i,Md,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Jp(t,e,i,null,n)}}var Md=null;function sg(t,e,n,i){if(Md=null,t=Fy(i),t=io(t),t!==null)if(e=No(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Md=t,null}function tS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M2()){case Uy:return 1;case qE:return 4;case Rd:case D2:return 16;case GE:return 536870912;default:return 16}default:return 16}}var Qr=null,Wy=null,td=null;function nS(){if(td)return td;var t,e=Wy,n=e.length,i,r="value"in Qr?Qr.value:Qr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return td=r.slice(t,1<i?1-i:void 0)}function nd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ah(){return!0}function $0(){return!1}function jn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ah:$0,this.isPropagationStopped=$0,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ah)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ah)},persist:function(){},isPersistent:Ah}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=jn(fl),wc=rt({},fl,{view:0,detail:0}),K2=jn(wc),Wp,$p,eu,kf=rt({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eu&&(eu&&t.type==="mousemove"?(Wp=t.screenX-eu.screenX,$p=t.screenY-eu.screenY):$p=Wp=0,eu=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),q0=jn(kf),Z2=rt({},kf,{dataTransfer:0}),Y2=jn(Z2),X2=rt({},wc,{relatedTarget:0}),qp=jn(X2),Q2=rt({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),J2=jn(Q2),eR=rt({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tR=jn(eR),nR=rt({},fl,{data:0}),G0=jn(nR),iR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sR[t])?!!e[t]:!1}function qy(){return oR}var aR=rt({},wc,{key:function(t){if(t.key){var e=iR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(t){return t.type==="keypress"?nd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lR=jn(aR),uR=rt({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=jn(uR),cR=rt({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),hR=jn(cR),dR=rt({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fR=jn(dR),pR=rt({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mR=jn(pR),gR=[9,13,27,32],Gy=_r&&"CompositionEvent"in window,vu=null;_r&&"documentMode"in document&&(vu=document.documentMode);var yR=_r&&"TextEvent"in window&&!vu,iS=_r&&(!Gy||vu&&8<vu&&11>=vu),Z0=" ",Y0=!1;function rS(t,e){switch(t){case"keyup":return gR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function _R(t,e){switch(t){case"compositionend":return sS(e);case"keypress":return e.which!==32?null:(Y0=!0,Z0);case"textInput":return t=e.data,t===Z0&&Y0?null:t;default:return null}}function vR(t,e){if(Ta)return t==="compositionend"||!Gy&&rS(t,e)?(t=nS(),td=Wy=Qr=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iS&&e.locale!=="ko"?null:e.data;default:return null}}var wR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wR[t.type]:e==="textarea"}function oS(t,e,n,i){VE(i),e=Dd(e,"onChange"),0<e.length&&(n=new $y("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var wu=null,qu=null;function TR(t){yS(t,0)}function Rf(t){var e=Sa(t);if(kE(e))return t}function xR(t,e){if(t==="change")return e}var aS=!1;if(_r){var Gp;if(_r){var Kp="oninput"in document;if(!Kp){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Kp=typeof Q0.oninput=="function"}Gp=Kp}else Gp=!1;aS=Gp&&(!document.documentMode||9<document.documentMode)}function J0(){wu&&(wu.detachEvent("onpropertychange",lS),qu=wu=null)}function lS(t){if(t.propertyName==="value"&&Rf(qu)){var e=[];oS(e,qu,t,Fy(t)),zE(TR,e)}}function ER(t,e,n){t==="focusin"?(J0(),wu=e,qu=n,wu.attachEvent("onpropertychange",lS)):t==="focusout"&&J0()}function SR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rf(qu)}function PR(t,e){if(t==="click")return Rf(e)}function IR(t,e){if(t==="input"||t==="change")return Rf(e)}function CR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:CR;function Gu(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!zm.call(e,r)||!vi(t[r],e[r]))return!1}return!0}function ew(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tw(t,e){var n=ew(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ew(n)}}function uS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cS(){for(var t=window,e=Ad();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ad(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AR(t){var e=cS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uS(n.ownerDocument.documentElement,n)){if(i!==null&&Ky(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=tw(n,o);var a=tw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bR=_r&&"documentMode"in document&&11>=document.documentMode,xa=null,og=null,Tu=null,ag=!1;function nw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ag||xa==null||xa!==Ad(i)||(i=xa,"selectionStart"in i&&Ky(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Tu&&Gu(Tu,i)||(Tu=i,i=Dd(og,"onSelect"),0<i.length&&(e=new $y("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xa)))}function bh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ea={animationend:bh("Animation","AnimationEnd"),animationiteration:bh("Animation","AnimationIteration"),animationstart:bh("Animation","AnimationStart"),transitionend:bh("Transition","TransitionEnd")},Zp={},hS={};_r&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Nf(t){if(Zp[t])return Zp[t];if(!Ea[t])return t;var e=Ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hS)return Zp[t]=e[n];return t}var dS=Nf("animationend"),fS=Nf("animationiteration"),pS=Nf("animationstart"),mS=Nf("transitionend"),gS=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){gS.set(t,e),Ro(e,[t])}for(var Yp=0;Yp<iw.length;Yp++){var Xp=iw[Yp],kR=Xp.toLowerCase(),RR=Xp[0].toUpperCase()+Xp.slice(1);Cs(kR,"on"+RR)}Cs(dS,"onAnimationEnd");Cs(fS,"onAnimationIteration");Cs(pS,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(mS,"onTransitionEnd");Ka("onMouseEnter",["mouseout","mouseover"]);Ka("onMouseLeave",["mouseout","mouseover"]);Ka("onPointerEnter",["pointerout","pointerover"]);Ka("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NR=new Set("cancel close invalid load scroll toggle".split(" ").concat(cu));function rw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,k2(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;rw(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;rw(r,u,f),o=c}}}if(kd)throw t=ng,kd=!1,ng=null,t}function Ye(t,e){var n=e[dg];n===void 0&&(n=e[dg]=new Set);var i=t+"__bubble";n.has(i)||(_S(e,t,2,!1),n.add(i))}function Qp(t,e,n){var i=0;e&&(i|=4),_S(n,t,i,e)}var kh="_reactListening"+Math.random().toString(36).slice(2);function Ku(t){if(!t[kh]){t[kh]=!0,PE.forEach(function(n){n!=="selectionchange"&&(NR.has(n)||Qp(n,!1,t),Qp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kh]||(e[kh]=!0,Qp("selectionchange",!1,e))}}function _S(t,e,n,i){switch(tS(e)){case 1:var r=q2;break;case 4:r=G2;break;default:r=Hy}n=r.bind(null,e,n,t),r=void 0,!tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Jp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=io(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}zE(function(){var f=o,m=Fy(n),g=[];e:{var _=gS.get(t);if(_!==void 0){var E=$y,k=t;switch(t){case"keypress":if(nd(n)===0)break e;case"keydown":case"keyup":E=lR;break;case"focusin":k="focus",E=qp;break;case"focusout":k="blur",E=qp;break;case"beforeblur":case"afterblur":E=qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=hR;break;case dS:case fS:case pS:E=J2;break;case mS:E=fR;break;case"scroll":E=K2;break;case"wheel":E=mR;break;case"copy":case"cut":case"paste":E=tR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=K0}var C=(e&4)!==0,N=!C&&t==="scroll",P=C?_!==null?_+"Capture":null:_;C=[];for(var x=f,A;x!==null;){A=x;var F=A.stateNode;if(A.tag===5&&F!==null&&(A=F,P!==null&&(F=Bu(x,P),F!=null&&C.push(Zu(x,F,A)))),N)break;x=x.return}0<C.length&&(_=new E(_,k,null,n,m),g.push({event:_,listeners:C}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",_&&n!==Jm&&(k=n.relatedTarget||n.fromElement)&&(io(k)||k[vr]))break e;if((E||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=f,k=k?io(k):null,k!==null&&(N=No(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=f),E!==k)){if(C=q0,F="onMouseLeave",P="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=K0,F="onPointerLeave",P="onPointerEnter",x="pointer"),N=E==null?_:Sa(E),A=k==null?_:Sa(k),_=new C(F,x+"leave",E,n,m),_.target=N,_.relatedTarget=A,F=null,io(m)===f&&(C=new C(P,x+"enter",k,n,m),C.target=A,C.relatedTarget=N,F=C),N=F,E&&k)t:{for(C=E,P=k,x=0,A=C;A;A=da(A))x++;for(A=0,F=P;F;F=da(F))A++;for(;0<x-A;)C=da(C),x--;for(;0<A-x;)P=da(P),A--;for(;x--;){if(C===P||P!==null&&C===P.alternate)break t;C=da(C),P=da(P)}C=null}else C=null;E!==null&&sw(g,_,E,C,!1),k!==null&&N!==null&&sw(g,N,k,C,!0)}}e:{if(_=f?Sa(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var z=xR;else if(X0(_))if(aS)z=IR;else{z=SR;var $=ER}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(z=PR);if(z&&(z=z(t,f))){oS(g,z,n,m);break e}$&&$(t,_,f),t==="focusout"&&($=_._wrapperState)&&$.controlled&&_.type==="number"&&Km(_,"number",_.value)}switch($=f?Sa(f):window,t){case"focusin":(X0($)||$.contentEditable==="true")&&(xa=$,og=f,Tu=null);break;case"focusout":Tu=og=xa=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,nw(g,n,m);break;case"selectionchange":if(bR)break;case"keydown":case"keyup":nw(g,n,m)}var R;if(Gy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ta?rS(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(iS&&n.locale!=="ko"&&(Ta||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ta&&(R=nS()):(Qr=m,Wy="value"in Qr?Qr.value:Qr.textContent,Ta=!0)),$=Dd(f,I),0<$.length&&(I=new G0(I,t,null,n,m),g.push({event:I,listeners:$}),R?I.data=R:(R=sS(n),R!==null&&(I.data=R)))),(R=yR?_R(t,n):vR(t,n))&&(f=Dd(f,"onBeforeInput"),0<f.length&&(m=new G0("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}yS(g,e)})}function Zu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Bu(t,n),o!=null&&i.unshift(Zu(t,o,r)),o=Bu(t,e),o!=null&&i.push(Zu(t,o,r))),t=t.return}return i}function da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=Bu(n,o),c!=null&&a.unshift(Zu(n,c,u))):r||(c=Bu(n,o),c!=null&&a.push(Zu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var LR=/\r\n?/g,MR=/\u0000|\uFFFD/g;function ow(t){return(typeof t=="string"?t:""+t).replace(LR,`
`).replace(MR,"")}function Rh(t,e,n){if(e=ow(e),ow(t)!==e&&n)throw Error(ee(425))}function Od(){}var lg=null,ug=null;function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,DR=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,OR=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(t){return aw.resolve(null).then(t).catch(VR)}:hg;function VR(t){setTimeout(function(){throw t})}function em(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$u(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$u(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Ri="__reactFiber$"+pl,Yu="__reactProps$"+pl,vr="__reactContainer$"+pl,dg="__reactEvents$"+pl,jR="__reactListeners$"+pl,FR="__reactHandles$"+pl;function io(t){var e=t[Ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[Ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lw(t);t!==null;){if(n=t[Ri])return n;t=lw(t)}return e}t=n,n=t.parentNode}return null}function Tc(t){return t=t[Ri]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Lf(t){return t[Yu]||null}var fg=[],Pa=-1;function As(t){return{current:t}}function Xe(t){0>Pa||(t.current=fg[Pa],fg[Pa]=null,Pa--)}function Ke(t,e){Pa++,fg[Pa]=t.current,t.current=e}var ys={},en=As(ys),En=As(!1),go=ys;function Za(t,e){var n=t.type.contextTypes;if(!n)return ys;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Sn(t){return t=t.childContextTypes,t!=null}function Vd(){Xe(En),Xe(en)}function uw(t,e,n){if(en.current!==ys)throw Error(ee(168));Ke(en,e),Ke(En,n)}function vS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,E2(t)||"Unknown",r));return rt({},n,i)}function jd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,go=en.current,Ke(en,t),Ke(En,En.current),!0}function cw(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=vS(t,e,go),i.__reactInternalMemoizedMergedChildContext=t,Xe(En),Xe(en),Ke(en,t)):Xe(En),Ke(En,n)}var ur=null,Mf=!1,tm=!1;function wS(t){ur===null?ur=[t]:ur.push(t)}function UR(t){Mf=!0,wS(t)}function bs(){if(!tm&&ur!==null){tm=!0;var t=0,e=He;try{var n=ur;for(He=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ur=null,Mf=!1}catch(r){throw ur!==null&&(ur=ur.slice(t+1)),$E(Uy,bs),r}finally{He=e,tm=!1}}return null}var Ia=[],Ca=0,Fd=null,Ud=0,Kn=[],Zn=0,yo=null,hr=1,dr="";function Xs(t,e){Ia[Ca++]=Ud,Ia[Ca++]=Fd,Fd=t,Ud=e}function TS(t,e,n){Kn[Zn++]=hr,Kn[Zn++]=dr,Kn[Zn++]=yo,yo=t;var i=hr;t=dr;var r=32-fi(i)-1;i&=~(1<<r),n+=1;var o=32-fi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,hr=1<<32-fi(e)+r|n<<r|i,dr=o+t}else hr=1<<o|n<<r|i,dr=t}function Zy(t){t.return!==null&&(Xs(t,1),TS(t,1,0))}function Yy(t){for(;t===Fd;)Fd=Ia[--Ca],Ia[Ca]=null,Ud=Ia[--Ca],Ia[Ca]=null;for(;t===yo;)yo=Kn[--Zn],Kn[Zn]=null,dr=Kn[--Zn],Kn[Zn]=null,hr=Kn[--Zn],Kn[Zn]=null}var Ln=null,kn=null,Je=!1,ci=null;function xS(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,kn=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yo!==null?{id:hr,overflow:dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,kn=null,!0):!1;default:return!1}}function pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mg(t){if(Je){var e=kn;if(e){var n=e;if(!hw(t,e)){if(pg(t))throw Error(ee(418));e=ss(n.nextSibling);var i=Ln;e&&hw(t,e)?xS(i,n):(t.flags=t.flags&-4097|2,Je=!1,Ln=t)}}else{if(pg(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Je=!1,Ln=t}}}function dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Nh(t){if(t!==Ln)return!1;if(!Je)return dw(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cg(t.type,t.memoizedProps)),e&&(e=kn)){if(pg(t))throw ES(),Error(ee(418));for(;e;)xS(t,e),e=ss(e.nextSibling)}if(dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=Ln?ss(t.stateNode.nextSibling):null;return!0}function ES(){for(var t=kn;t;)t=ss(t.nextSibling)}function Ya(){kn=Ln=null,Je=!1}function Xy(t){ci===null?ci=[t]:ci.push(t)}var zR=Ar.ReactCurrentBatchConfig;function tu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Lh(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fw(t){var e=t._init;return e(t._payload)}function SS(t){function e(P,x){if(t){var A=P.deletions;A===null?(P.deletions=[x],P.flags|=16):A.push(x)}}function n(P,x){if(!t)return null;for(;x!==null;)e(P,x),x=x.sibling;return null}function i(P,x){for(P=new Map;x!==null;)x.key!==null?P.set(x.key,x):P.set(x.index,x),x=x.sibling;return P}function r(P,x){return P=us(P,x),P.index=0,P.sibling=null,P}function o(P,x,A){return P.index=A,t?(A=P.alternate,A!==null?(A=A.index,A<x?(P.flags|=2,x):A):(P.flags|=2,x)):(P.flags|=1048576,x)}function a(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,x,A,F){return x===null||x.tag!==6?(x=lm(A,P.mode,F),x.return=P,x):(x=r(x,A),x.return=P,x)}function c(P,x,A,F){var z=A.type;return z===wa?m(P,x,A.props.children,F,A.key):x!==null&&(x.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Hr&&fw(z)===x.type)?(F=r(x,A.props),F.ref=tu(P,x,A),F.return=P,F):(F=ud(A.type,A.key,A.props,null,P.mode,F),F.ref=tu(P,x,A),F.return=P,F)}function f(P,x,A,F){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=um(A,P.mode,F),x.return=P,x):(x=r(x,A.children||[]),x.return=P,x)}function m(P,x,A,F,z){return x===null||x.tag!==7?(x=co(A,P.mode,F,z),x.return=P,x):(x=r(x,A),x.return=P,x)}function g(P,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=lm(""+x,P.mode,A),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xh:return A=ud(x.type,x.key,x.props,null,P.mode,A),A.ref=tu(P,null,x),A.return=P,A;case va:return x=um(x,P.mode,A),x.return=P,x;case Hr:var F=x._init;return g(P,F(x._payload),A)}if(lu(x)||Yl(x))return x=co(x,P.mode,A,null),x.return=P,x;Lh(P,x)}return null}function _(P,x,A,F){var z=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return z!==null?null:u(P,x,""+A,F);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case xh:return A.key===z?c(P,x,A,F):null;case va:return A.key===z?f(P,x,A,F):null;case Hr:return z=A._init,_(P,x,z(A._payload),F)}if(lu(A)||Yl(A))return z!==null?null:m(P,x,A,F,null);Lh(P,A)}return null}function E(P,x,A,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return P=P.get(A)||null,u(x,P,""+F,z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case xh:return P=P.get(F.key===null?A:F.key)||null,c(x,P,F,z);case va:return P=P.get(F.key===null?A:F.key)||null,f(x,P,F,z);case Hr:var $=F._init;return E(P,x,A,$(F._payload),z)}if(lu(F)||Yl(F))return P=P.get(A)||null,m(x,P,F,z,null);Lh(x,F)}return null}function k(P,x,A,F){for(var z=null,$=null,R=x,I=x=0,M=null;R!==null&&I<A.length;I++){R.index>I?(M=R,R=null):M=R.sibling;var D=_(P,R,A[I],F);if(D===null){R===null&&(R=M);break}t&&R&&D.alternate===null&&e(P,R),x=o(D,x,I),$===null?z=D:$.sibling=D,$=D,R=M}if(I===A.length)return n(P,R),Je&&Xs(P,I),z;if(R===null){for(;I<A.length;I++)R=g(P,A[I],F),R!==null&&(x=o(R,x,I),$===null?z=R:$.sibling=R,$=R);return Je&&Xs(P,I),z}for(R=i(P,R);I<A.length;I++)M=E(R,P,I,A[I],F),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?I:M.key),x=o(M,x,I),$===null?z=M:$.sibling=M,$=M);return t&&R.forEach(function(V){return e(P,V)}),Je&&Xs(P,I),z}function C(P,x,A,F){var z=Yl(A);if(typeof z!="function")throw Error(ee(150));if(A=z.call(A),A==null)throw Error(ee(151));for(var $=z=null,R=x,I=x=0,M=null,D=A.next();R!==null&&!D.done;I++,D=A.next()){R.index>I?(M=R,R=null):M=R.sibling;var V=_(P,R,D.value,F);if(V===null){R===null&&(R=M);break}t&&R&&V.alternate===null&&e(P,R),x=o(V,x,I),$===null?z=V:$.sibling=V,$=V,R=M}if(D.done)return n(P,R),Je&&Xs(P,I),z;if(R===null){for(;!D.done;I++,D=A.next())D=g(P,D.value,F),D!==null&&(x=o(D,x,I),$===null?z=D:$.sibling=D,$=D);return Je&&Xs(P,I),z}for(R=i(P,R);!D.done;I++,D=A.next())D=E(R,P,I,D.value,F),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?I:D.key),x=o(D,x,I),$===null?z=D:$.sibling=D,$=D);return t&&R.forEach(function(U){return e(P,U)}),Je&&Xs(P,I),z}function N(P,x,A,F){if(typeof A=="object"&&A!==null&&A.type===wa&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case xh:e:{for(var z=A.key,$=x;$!==null;){if($.key===z){if(z=A.type,z===wa){if($.tag===7){n(P,$.sibling),x=r($,A.props.children),x.return=P,P=x;break e}}else if($.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Hr&&fw(z)===$.type){n(P,$.sibling),x=r($,A.props),x.ref=tu(P,$,A),x.return=P,P=x;break e}n(P,$);break}else e(P,$);$=$.sibling}A.type===wa?(x=co(A.props.children,P.mode,F,A.key),x.return=P,P=x):(F=ud(A.type,A.key,A.props,null,P.mode,F),F.ref=tu(P,x,A),F.return=P,P=F)}return a(P);case va:e:{for($=A.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){n(P,x.sibling),x=r(x,A.children||[]),x.return=P,P=x;break e}else{n(P,x);break}else e(P,x);x=x.sibling}x=um(A,P.mode,F),x.return=P,P=x}return a(P);case Hr:return $=A._init,N(P,x,$(A._payload),F)}if(lu(A))return k(P,x,A,F);if(Yl(A))return C(P,x,A,F);Lh(P,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(n(P,x.sibling),x=r(x,A),x.return=P,P=x):(n(P,x),x=lm(A,P.mode,F),x.return=P,P=x),a(P)):n(P,x)}return N}var Xa=SS(!0),PS=SS(!1),zd=As(null),Bd=null,Aa=null,Qy=null;function Jy(){Qy=Aa=Bd=null}function e_(t){var e=zd.current;Xe(zd),t._currentValue=e}function gg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function za(t,e){Bd=t,Qy=Aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(Qy!==t)if(t={context:t,memoizedValue:e,next:null},Aa===null){if(Bd===null)throw Error(ee(308));Aa=t,Bd.dependencies={lanes:0,firstContext:t}}else Aa=Aa.next=t;return e}var ro=null;function t_(t){ro===null?ro=[t]:ro.push(t)}function IS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,t_(e)):(n.next=r.next,r.next=n),e.interleaved=n,wr(t,i)}function wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function n_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,wr(t,n)}return r=i.interleaved,r===null?(e.next=e,t_(i)):(e.next=r.next,r.next=e),i.interleaved=e,wr(t,n)}function id(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zy(t,n)}}function pw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hd(t,e,n,i){var r=t.updateQueue;Wr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=f=c=null,u=o;do{var _=u.lane,E=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,C=u;switch(_=e,E=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){g=k.call(E,g,_);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,_=typeof k=="function"?k.call(E,g,_):k,_==null)break e;g=rt({},g,_);break e;case 2:Wr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else E={eventTime:E,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=E,c=g):m=m.next=E,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);vo|=a,t.lanes=a,t.memoizedState=g}}function mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var xc={},Vi=As(xc),Xu=As(xc),Qu=As(xc);function so(t){if(t===xc)throw Error(ee(174));return t}function i_(t,e){switch(Ke(Qu,e),Ke(Xu,t),Ke(Vi,xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ym(e,t)}Xe(Vi),Ke(Vi,e)}function Qa(){Xe(Vi),Xe(Xu),Xe(Qu)}function AS(t){so(Qu.current);var e=so(Vi.current),n=Ym(e,t.type);e!==n&&(Ke(Xu,t),Ke(Vi,n))}function r_(t){Xu.current===t&&(Xe(Vi),Xe(Xu))}var et=As(0);function Wd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nm=[];function s_(){for(var t=0;t<nm.length;t++)nm[t]._workInProgressVersionPrimary=null;nm.length=0}var rd=Ar.ReactCurrentDispatcher,im=Ar.ReactCurrentBatchConfig,_o=0,it=null,St=null,Mt=null,$d=!1,xu=!1,Ju=0,BR=0;function $t(){throw Error(ee(321))}function o_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function a_(t,e,n,i,r,o){if(_o=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rd.current=t===null||t.memoizedState===null?qR:GR,t=n(i,r),xu){o=0;do{if(xu=!1,Ju=0,25<=o)throw Error(ee(301));o+=1,Mt=St=null,e.updateQueue=null,rd.current=KR,t=n(i,r)}while(xu)}if(rd.current=qd,e=St!==null&&St.next!==null,_o=0,Mt=St=it=null,$d=!1,e)throw Error(ee(300));return t}function l_(){var t=Ju!==0;return Ju=0,t}function bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function ei(){if(St===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Mt===null?it.memoizedState:Mt.next;if(e!==null)Mt=e,St=t;else{if(t===null)throw Error(ee(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function ec(t,e){return typeof e=="function"?e(t):e}function rm(t){var e=ei(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=St,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var m=f.lane;if((_o&m)===m)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,it.lanes|=m,vo|=m}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,vi(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,it.lanes|=o,vo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sm(t){var e=ei(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);vi(o,e.memoizedState)||(xn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function bS(){}function kS(t,e){var n=it,i=ei(),r=e(),o=!vi(i.memoizedState,r);if(o&&(i.memoizedState=r,xn=!0),i=i.queue,u_(LS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,tc(9,NS.bind(null,n,i,r,e),void 0,null),Ot===null)throw Error(ee(349));_o&30||RS(n,e,r)}return r}function RS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NS(t,e,n,i){e.value=n,e.getSnapshot=i,MS(e)&&DS(t)}function LS(t,e,n){return n(function(){MS(e)&&DS(t)})}function MS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function DS(t){var e=wr(t,1);e!==null&&pi(e,t,1,-1)}function gw(t){var e=bi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:t},e.queue=t,t=t.dispatch=$R.bind(null,it,t),[e.memoizedState,t]}function tc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function OS(){return ei().memoizedState}function sd(t,e,n,i){var r=bi();it.flags|=t,r.memoizedState=tc(1|e,n,void 0,i===void 0?null:i)}function Df(t,e,n,i){var r=ei();i=i===void 0?null:i;var o=void 0;if(St!==null){var a=St.memoizedState;if(o=a.destroy,i!==null&&o_(i,a.deps)){r.memoizedState=tc(e,n,o,i);return}}it.flags|=t,r.memoizedState=tc(1|e,n,o,i)}function yw(t,e){return sd(8390656,8,t,e)}function u_(t,e){return Df(2048,8,t,e)}function VS(t,e){return Df(4,2,t,e)}function jS(t,e){return Df(4,4,t,e)}function FS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function US(t,e,n){return n=n!=null?n.concat([t]):null,Df(4,4,FS.bind(null,e,t),n)}function c_(){}function zS(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&o_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function BS(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&o_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function HS(t,e,n){return _o&21?(vi(n,e)||(n=KE(),it.lanes|=n,vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function HR(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var i=im.transition;im.transition={};try{t(!1),e()}finally{He=n,im.transition=i}}function WS(){return ei().memoizedState}function WR(t,e,n){var i=ls(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$S(t))qS(e,n);else if(n=IS(t,e,n,i),n!==null){var r=dn();pi(n,t,i,r),GS(n,e,i)}}function $R(t,e,n){var i=ls(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($S(t))qS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,vi(u,a)){var c=e.interleaved;c===null?(r.next=r,t_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=IS(t,e,r,i),n!==null&&(r=dn(),pi(n,t,i,r),GS(n,e,i))}}function $S(t){var e=t.alternate;return t===it||e!==null&&e===it}function qS(t,e){xu=$d=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zy(t,n)}}var qd={readContext:Jn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},qR={readContext:Jn,useCallback:function(t,e){return bi().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:yw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sd(4194308,4,FS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return sd(4,2,t,e)},useMemo:function(t,e){var n=bi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=bi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=WR.bind(null,it,t),[i.memoizedState,t]},useRef:function(t){var e=bi();return t={current:t},e.memoizedState=t},useState:gw,useDebugValue:c_,useDeferredValue:function(t){return bi().memoizedState=t},useTransition:function(){var t=gw(!1),e=t[0];return t=HR.bind(null,t[1]),bi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=it,r=bi();if(Je){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Ot===null)throw Error(ee(349));_o&30||RS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,yw(LS.bind(null,i,o,t),[t]),i.flags|=2048,tc(9,NS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=bi(),e=Ot.identifierPrefix;if(Je){var n=dr,i=hr;n=(i&~(1<<32-fi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GR={readContext:Jn,useCallback:zS,useContext:Jn,useEffect:u_,useImperativeHandle:US,useInsertionEffect:VS,useLayoutEffect:jS,useMemo:BS,useReducer:rm,useRef:OS,useState:function(){return rm(ec)},useDebugValue:c_,useDeferredValue:function(t){var e=ei();return HS(e,St.memoizedState,t)},useTransition:function(){var t=rm(ec)[0],e=ei().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:kS,useId:WS,unstable_isNewReconciler:!1},KR={readContext:Jn,useCallback:zS,useContext:Jn,useEffect:u_,useImperativeHandle:US,useInsertionEffect:VS,useLayoutEffect:jS,useMemo:BS,useReducer:sm,useRef:OS,useState:function(){return sm(ec)},useDebugValue:c_,useDeferredValue:function(t){var e=ei();return St===null?e.memoizedState=t:HS(e,St.memoizedState,t)},useTransition:function(){var t=sm(ec)[0],e=ei().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:kS,useId:WS,unstable_isNewReconciler:!1};function li(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Of={isMounted:function(t){return(t=t._reactInternals)?No(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=dn(),r=ls(t),o=mr(i,r);o.payload=e,n!=null&&(o.callback=n),e=os(t,o,r),e!==null&&(pi(e,t,r,i),id(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=dn(),r=ls(t),o=mr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=os(t,o,r),e!==null&&(pi(e,t,r,i),id(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),i=ls(t),r=mr(n,i);r.tag=2,e!=null&&(r.callback=e),e=os(t,r,i),e!==null&&(pi(e,t,i,n),id(e,t,i))}};function _w(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Gu(n,i)||!Gu(r,o):!0}function KS(t,e,n){var i=!1,r=ys,o=e.contextType;return typeof o=="object"&&o!==null?o=Jn(o):(r=Sn(e)?go:en.current,i=e.contextTypes,o=(i=i!=null)?Za(t,r):ys),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Of,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function vw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Of.enqueueReplaceState(e,e.state,null)}function _g(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},n_(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Jn(o):(o=Sn(e)?go:en.current,r.context=Za(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(yg(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Of.enqueueReplaceState(r,r.state,null),Hd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ja(t,e){try{var n="",i=e;do n+=x2(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function om(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZR=typeof WeakMap=="function"?WeakMap:Map;function ZS(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Kd||(Kd=!0,bg=i),vg(t,e)},n}function YS(t,e,n){n=mr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){vg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){vg(t,e),typeof i!="function"&&(as===null?as=new Set([this]):as.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ww(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ZR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=uN.bind(null,t,e,n),e.then(t,t))}function Tw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var YR=Ar.ReactCurrentOwner,xn=!1;function hn(t,e,n,i){e.child=t===null?PS(e,null,n,i):Xa(e,t.child,n,i)}function Ew(t,e,n,i,r){n=n.render;var o=e.ref;return za(e,r),i=a_(t,e,n,i,o,r),n=l_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Tr(t,e,r)):(Je&&n&&Zy(e),e.flags|=1,hn(t,e,i,r),e.child)}function Sw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!__(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,XS(t,e,o,i,r)):(t=ud(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Gu,n(a,i)&&t.ref===e.ref)return Tr(t,e,r)}return e.flags|=1,t=us(o,i),t.ref=e.ref,t.return=e,e.child=t}function XS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Gu(o,i)&&t.ref===e.ref)if(xn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Tr(t,e,r)}return wg(t,e,n,i,r)}function QS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ka,An),An|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ka,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ke(ka,An),An|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ke(ka,An),An|=i;return hn(t,e,r,n),e.child}function JS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,n,i,r){var o=Sn(n)?go:en.current;return o=Za(e,o),za(e,r),n=a_(t,e,n,i,o,r),i=l_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Tr(t,e,r)):(Je&&i&&Zy(e),e.flags|=1,hn(t,e,n,r),e.child)}function Pw(t,e,n,i,r){if(Sn(n)){var o=!0;jd(e)}else o=!1;if(za(e,r),e.stateNode===null)od(t,e),KS(e,n,i),_g(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Jn(f):(f=Sn(n)?go:en.current,f=Za(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&vw(e,a,i,f),Wr=!1;var _=e.memoizedState;a.state=_,Hd(e,i,a,r),c=e.memoizedState,u!==i||_!==c||En.current||Wr?(typeof m=="function"&&(yg(e,n,m,i),c=e.memoizedState),(u=Wr||_w(e,n,u,i,_,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,CS(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:li(e.type,u),a.props=f,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jn(c):(c=Sn(n)?go:en.current,c=Za(e,c));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&vw(e,a,i,c),Wr=!1,_=e.memoizedState,a.state=_,Hd(e,i,a,r);var k=e.memoizedState;u!==g||_!==k||En.current||Wr?(typeof E=="function"&&(yg(e,n,E,i),k=e.memoizedState),(f=Wr||_w(e,n,f,i,_,k,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Tg(t,e,n,i,o,r)}function Tg(t,e,n,i,r,o){JS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&cw(e,n,!1),Tr(t,e,o);i=e.stateNode,YR.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Xa(e,t.child,null,o),e.child=Xa(e,null,u,o)):hn(t,e,u,o),e.memoizedState=i.state,r&&cw(e,n,!0),e.child}function eP(t){var e=t.stateNode;e.pendingContext?uw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uw(t,e.context,!1),i_(t,e.containerInfo)}function Iw(t,e,n,i,r){return Ya(),Xy(r),e.flags|=256,hn(t,e,n,i),e.child}var xg={dehydrated:null,treeContext:null,retryLane:0};function Eg(t){return{baseLanes:t,cachePool:null,transitions:null}}function tP(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ke(et,r&1),t===null)return mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ff(a,i,0,null),t=co(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Eg(n),e.memoizedState=xg,t):h_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return XR(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=us(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=us(u,o):(o=co(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Eg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=xg,i}return o=t.child,t=o.sibling,i=us(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function h_(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mh(t,e,n,i){return i!==null&&Xy(i),Xa(e,t.child,null,n),t=h_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XR(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=om(Error(ee(422))),Mh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Ff({mode:"visible",children:i.children},r,0,null),o=co(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Xa(e,t.child,null,a),e.child.memoizedState=Eg(a),e.memoizedState=xg,o);if(!(e.mode&1))return Mh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=om(o,i,void 0),Mh(t,e,a,i)}if(u=(a&t.childLanes)!==0,xn||u){if(i=Ot,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,wr(t,r),pi(i,t,r,-1))}return y_(),i=om(Error(ee(421))),Mh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=cN.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,kn=ss(r.nextSibling),Ln=e,Je=!0,ci=null,t!==null&&(Kn[Zn++]=hr,Kn[Zn++]=dr,Kn[Zn++]=yo,hr=t.id,dr=t.overflow,yo=e),e=h_(e,i.children),e.flags|=4096,e)}function Cw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gg(t.return,e,n)}function am(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function nP(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(hn(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cw(t,n,e);else if(t.tag===19)Cw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ke(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Wd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),am(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Wd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}am(e,!0,n,null,o);break;case"together":am(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function od(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QR(t,e,n){switch(e.tag){case 3:eP(e),Ya();break;case 5:AS(e);break;case 1:Sn(e.type)&&jd(e);break;case 4:i_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ke(zd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ke(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?tP(t,e,n):(Ke(et,et.current&1),t=Tr(t,e,n),t!==null?t.sibling:null);Ke(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return nP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ke(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,QS(t,e,n)}return Tr(t,e,n)}var iP,Sg,rP,sP;iP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sg=function(){};rP=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,so(Vi.current);var o=null;switch(n){case"input":r=qm(t,r),i=qm(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=Zm(t,r),i=Zm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Od)}Xm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Uu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ye("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};sP=function(t,e,n,i){n!==i&&(e.flags|=4)};function nu(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function JR(t,e,n){var i=e.pendingProps;switch(Yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return Sn(e.type)&&Vd(),qt(e),null;case 3:return i=e.stateNode,Qa(),Xe(En),Xe(en),s_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ci!==null&&(Ng(ci),ci=null))),Sg(t,e),qt(e),null;case 5:r_(e);var r=so(Qu.current);if(n=e.type,t!==null&&e.stateNode!=null)rP(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return qt(e),null}if(t=so(Vi.current),Nh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ri]=e,i[Yu]=o,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(r=0;r<cu.length;r++)Ye(cu[r],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":O0(i,o),Ye("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ye("invalid",i);break;case"textarea":j0(i,o),Ye("invalid",i)}Xm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Rh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Rh(i.textContent,u,t),r=["children",""+u]):Uu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ye("scroll",i)}switch(n){case"input":Eh(i),V0(i,o,!0);break;case"textarea":Eh(i),F0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Od)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ri]=e,t[Yu]=i,iP(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qm(n,i),n){case"dialog":Ye("cancel",t),Ye("close",t),r=i;break;case"iframe":case"object":case"embed":Ye("load",t),r=i;break;case"video":case"audio":for(r=0;r<cu.length;r++)Ye(cu[r],t);r=i;break;case"source":Ye("error",t),r=i;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),r=i;break;case"details":Ye("toggle",t),r=i;break;case"input":O0(t,i),r=qm(t,i),Ye("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Ye("invalid",t);break;case"textarea":j0(t,i),r=Zm(t,i),Ye("invalid",t);break;default:r=i}Xm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?OE(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ME(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&zu(t,c):typeof c=="number"&&zu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Uu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ye("scroll",t):c!=null&&Dy(t,o,c,a))}switch(n){case"input":Eh(t),V0(t,i,!1);break;case"textarea":Eh(t),F0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+gs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Va(t,!!i.multiple,o,!1):i.defaultValue!=null&&Va(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Od)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)sP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=so(Qu.current),so(Vi.current),Nh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ri]=e,(o=i.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:Rh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ri]=e,e.stateNode=i}return qt(e),null;case 13:if(Xe(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&kn!==null&&e.mode&1&&!(e.flags&128))ES(),Ya(),e.flags|=98560,o=!1;else if(o=Nh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Ri]=e}else Ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),o=!1}else ci!==null&&(Ng(ci),ci=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?It===0&&(It=3):y_())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Qa(),Sg(t,e),t===null&&Ku(e.stateNode.containerInfo),qt(e),null;case 10:return e_(e.type._context),qt(e),null;case 17:return Sn(e.type)&&Vd(),qt(e),null;case 19:if(Xe(et),o=e.memoizedState,o===null)return qt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)nu(o,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Wd(t),a!==null){for(e.flags|=128,nu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&pt()>el&&(e.flags|=128,i=!0,nu(o,!1),e.lanes=4194304)}else{if(!i)if(t=Wd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Je)return qt(e),null}else 2*pt()-o.renderingStartTime>el&&n!==1073741824&&(e.flags|=128,i=!0,nu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=pt(),e.sibling=null,n=et.current,Ke(et,i?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return g_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?An&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function eN(t,e){switch(Yy(e),e.tag){case 1:return Sn(e.type)&&Vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qa(),Xe(En),Xe(en),s_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r_(e),null;case 13:if(Xe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(et),null;case 4:return Qa(),null;case 10:return e_(e.type._context),null;case 22:case 23:return g_(),null;case 24:return null;default:return null}}var Dh=!1,Yt=!1,tN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){lt(t,e,i)}else n.current=null}function Pg(t,e,n){try{n()}catch(i){lt(t,e,i)}}var Aw=!1;function nN(t,e){if(lg=Ld,t=cS(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var E;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)_=g,g=E;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(c=a),(E=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=E}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ug={focusedElem:t,selectionRange:n},Ld=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,N=k.memoizedState,P=e.stateNode,x=P.getSnapshotBeforeUpdate(e.elementType===e.type?C:li(e.type,C),N);P.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(F){lt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return k=Aw,Aw=!1,k}function Eu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Pg(e,n,o)}r=r.next}while(r!==i)}}function Vf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ig(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oP(t){var e=t.alternate;e!==null&&(t.alternate=null,oP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ri],delete e[Yu],delete e[dg],delete e[jR],delete e[FR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aP(t){return t.tag===5||t.tag===3||t.tag===4}function bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Od));else if(i!==4&&(t=t.child,t!==null))for(Cg(t,e,n),t=t.sibling;t!==null;)Cg(t,e,n),t=t.sibling}function Ag(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ag(t,e,n),t=t.sibling;t!==null;)Ag(t,e,n),t=t.sibling}var Ft=null,ui=!1;function Fr(t,e,n){for(n=n.child;n!==null;)lP(t,e,n),n=n.sibling}function lP(t,e,n){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Yt||ba(n,e);case 6:var i=Ft,r=ui;Ft=null,Fr(t,e,n),Ft=i,ui=r,Ft!==null&&(ui?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(ui?(t=Ft,n=n.stateNode,t.nodeType===8?em(t.parentNode,n):t.nodeType===1&&em(t,n),$u(t)):em(Ft,n.stateNode));break;case 4:i=Ft,r=ui,Ft=n.stateNode.containerInfo,ui=!0,Fr(t,e,n),Ft=i,ui=r;break;case 0:case 11:case 14:case 15:if(!Yt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Pg(n,e,a),r=r.next}while(r!==i)}Fr(t,e,n);break;case 1:if(!Yt&&(ba(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){lt(n,e,u)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(Yt=(i=Yt)||n.memoizedState!==null,Fr(t,e,n),Yt=i):Fr(t,e,n);break;default:Fr(t,e,n)}}function kw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tN),e.forEach(function(i){var r=hN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ft=u.stateNode,ui=!1;break e;case 3:Ft=u.stateNode.containerInfo,ui=!0;break e;case 4:Ft=u.stateNode.containerInfo,ui=!0;break e}u=u.return}if(Ft===null)throw Error(ee(160));lP(o,a,r),Ft=null,ui=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){lt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uP(e,t),e=e.sibling}function uP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Ai(t),i&4){try{Eu(3,t,t.return),Vf(3,t)}catch(C){lt(t,t.return,C)}try{Eu(5,t,t.return)}catch(C){lt(t,t.return,C)}}break;case 1:oi(e,t),Ai(t),i&512&&n!==null&&ba(n,n.return);break;case 5:if(oi(e,t),Ai(t),i&512&&n!==null&&ba(n,n.return),t.flags&32){var r=t.stateNode;try{zu(r,"")}catch(C){lt(t,t.return,C)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&RE(r,o),Qm(u,a);var f=Qm(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?OE(r,g):m==="dangerouslySetInnerHTML"?ME(r,g):m==="children"?zu(r,g):Dy(r,m,g,f)}switch(u){case"input":Gm(r,o);break;case"textarea":NE(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Va(r,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?Va(r,!!o.multiple,o.defaultValue,!0):Va(r,!!o.multiple,o.multiple?[]:"",!1))}r[Yu]=o}catch(C){lt(t,t.return,C)}}break;case 6:if(oi(e,t),Ai(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(C){lt(t,t.return,C)}}break;case 3:if(oi(e,t),Ai(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$u(e.containerInfo)}catch(C){lt(t,t.return,C)}break;case 4:oi(e,t),Ai(t);break;case 13:oi(e,t),Ai(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(p_=pt())),i&4&&kw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(f=Yt)||m,oi(e,t),Yt=f):oi(e,t),Ai(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(oe=t,m=t.child;m!==null;){for(g=oe=m;oe!==null;){switch(_=oe,E=_.child,_.tag){case 0:case 11:case 14:case 15:Eu(4,_,_.return);break;case 1:ba(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){lt(i,n,C)}}break;case 5:ba(_,_.return);break;case 22:if(_.memoizedState!==null){Nw(g);continue}}E!==null?(E.return=_,oe=E):Nw(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=DE("display",a))}catch(C){lt(t,t.return,C)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(C){lt(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:oi(e,t),Ai(t),i&4&&kw(t);break;case 21:break;default:oi(e,t),Ai(t)}}function Ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aP(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(zu(r,""),i.flags&=-33);var o=bw(t);Ag(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=bw(t);Cg(t,u,a);break;default:throw Error(ee(161))}}catch(c){lt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iN(t,e,n){oe=t,cP(t)}function cP(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Dh;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Yt;u=Dh;var f=Yt;if(Dh=a,(Yt=c)&&!f)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?Lw(r):c!==null?(c.return=a,oe=c):Lw(r);for(;o!==null;)oe=o,cP(o),o=o.sibling;oe=r,Dh=u,Yt=f}Rw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):Rw(t)}}function Rw(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Vf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Yt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&$u(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Yt||e.flags&512&&Ig(e)}catch(_){lt(e,e.return,_)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Nw(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Lw(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vf(4,e)}catch(c){lt(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){lt(e,r,c)}}var o=e.return;try{Ig(e)}catch(c){lt(e,o,c)}break;case 5:var a=e.return;try{Ig(e)}catch(c){lt(e,a,c)}}}catch(c){lt(e,e.return,c)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var rN=Math.ceil,Gd=Ar.ReactCurrentDispatcher,d_=Ar.ReactCurrentOwner,Qn=Ar.ReactCurrentBatchConfig,Me=0,Ot=null,xt=null,Bt=0,An=0,ka=As(0),It=0,nc=null,vo=0,jf=0,f_=0,Su=null,wn=null,p_=0,el=1/0,lr=null,Kd=!1,bg=null,as=null,Oh=!1,Jr=null,Zd=0,Pu=0,kg=null,ad=-1,ld=0;function dn(){return Me&6?pt():ad!==-1?ad:ad=pt()}function ls(t){return t.mode&1?Me&2&&Bt!==0?Bt&-Bt:zR.transition!==null?(ld===0&&(ld=KE()),ld):(t=He,t!==0||(t=window.event,t=t===void 0?16:tS(t.type)),t):1}function pi(t,e,n,i){if(50<Pu)throw Pu=0,kg=null,Error(ee(185));vc(t,n,i),(!(Me&2)||t!==Ot)&&(t===Ot&&(!(Me&2)&&(jf|=n),It===4&&Gr(t,Bt)),Pn(t,i),n===1&&Me===0&&!(e.mode&1)&&(el=pt()+500,Mf&&bs()))}function Pn(t,e){var n=t.callbackNode;z2(t,e);var i=Nd(t,t===Ot?Bt:0);if(i===0)n!==null&&B0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&B0(n),e===1)t.tag===0?UR(Mw.bind(null,t)):wS(Mw.bind(null,t)),OR(function(){!(Me&6)&&bs()}),n=null;else{switch(ZE(i)){case 1:n=Uy;break;case 4:n=qE;break;case 16:n=Rd;break;case 536870912:n=GE;break;default:n=Rd}n=_P(n,hP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hP(t,e){if(ad=-1,ld=0,Me&6)throw Error(ee(327));var n=t.callbackNode;if(Ba()&&t.callbackNode!==n)return null;var i=Nd(t,t===Ot?Bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Yd(t,i);else{e=i;var r=Me;Me|=2;var o=fP();(Ot!==t||Bt!==e)&&(lr=null,el=pt()+500,uo(t,e));do try{aN();break}catch(u){dP(t,u)}while(!0);Jy(),Gd.current=o,Me=r,xt!==null?e=0:(Ot=null,Bt=0,e=It)}if(e!==0){if(e===2&&(r=ig(t),r!==0&&(i=r,e=Rg(t,r))),e===1)throw n=nc,uo(t,0),Gr(t,i),Pn(t,pt()),n;if(e===6)Gr(t,i);else{if(r=t.current.alternate,!(i&30)&&!sN(r)&&(e=Yd(t,i),e===2&&(o=ig(t),o!==0&&(i=o,e=Rg(t,o))),e===1))throw n=nc,uo(t,0),Gr(t,i),Pn(t,pt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Qs(t,wn,lr);break;case 3:if(Gr(t,i),(i&130023424)===i&&(e=p_+500-pt(),10<e)){if(Nd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){dn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=hg(Qs.bind(null,t,wn,lr),e);break}Qs(t,wn,lr);break;case 4:if(Gr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-fi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=pt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rN(i/1960))-i,10<i){t.timeoutHandle=hg(Qs.bind(null,t,wn,lr),i);break}Qs(t,wn,lr);break;case 5:Qs(t,wn,lr);break;default:throw Error(ee(329))}}}return Pn(t,pt()),t.callbackNode===n?hP.bind(null,t):null}function Rg(t,e){var n=Su;return t.current.memoizedState.isDehydrated&&(uo(t,e).flags|=256),t=Yd(t,e),t!==2&&(e=wn,wn=n,e!==null&&Ng(e)),t}function Ng(t){wn===null?wn=t:wn.push.apply(wn,t)}function sN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!vi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~f_,e&=~jf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fi(e),i=1<<n;t[n]=-1,e&=~i}}function Mw(t){if(Me&6)throw Error(ee(327));Ba();var e=Nd(t,0);if(!(e&1))return Pn(t,pt()),null;var n=Yd(t,e);if(t.tag!==0&&n===2){var i=ig(t);i!==0&&(e=i,n=Rg(t,i))}if(n===1)throw n=nc,uo(t,0),Gr(t,e),Pn(t,pt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qs(t,wn,lr),Pn(t,pt()),null}function m_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(el=pt()+500,Mf&&bs())}}function wo(t){Jr!==null&&Jr.tag===0&&!(Me&6)&&Ba();var e=Me;Me|=1;var n=Qn.transition,i=He;try{if(Qn.transition=null,He=1,t)return t()}finally{He=i,Qn.transition=n,Me=e,!(Me&6)&&bs()}}function g_(){An=ka.current,Xe(ka)}function uo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DR(n)),xt!==null)for(n=xt.return;n!==null;){var i=n;switch(Yy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Vd();break;case 3:Qa(),Xe(En),Xe(en),s_();break;case 5:r_(i);break;case 4:Qa();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:e_(i.type._context);break;case 22:case 23:g_()}n=n.return}if(Ot=t,xt=t=us(t.current,null),Bt=An=e,It=0,nc=null,f_=jf=vo=0,wn=Su=null,ro!==null){for(e=0;e<ro.length;e++)if(n=ro[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}ro=null}return t}function dP(t,e){do{var n=xt;try{if(Jy(),rd.current=qd,$d){for(var i=it.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}$d=!1}if(_o=0,Mt=St=it=null,xu=!1,Ju=0,d_.current=null,n===null||n.return===null){It=1,nc=e,xt=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Bt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=Tw(a);if(E!==null){E.flags&=-257,xw(E,a,u,o,e),E.mode&1&&ww(o,f,e),e=E,c=f;var k=e.updateQueue;if(k===null){var C=new Set;C.add(c),e.updateQueue=C}else k.add(c);break e}else{if(!(e&1)){ww(o,f,e),y_();break e}c=Error(ee(426))}}else if(Je&&u.mode&1){var N=Tw(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),xw(N,a,u,o,e),Xy(Ja(c,u));break e}}o=c=Ja(c,u),It!==4&&(It=2),Su===null?Su=[o]:Su.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=ZS(o,c,e);pw(o,P);break e;case 1:u=c;var x=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(as===null||!as.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=YS(o,u,e);pw(o,F);break e}}o=o.return}while(o!==null)}mP(n)}catch(z){e=z,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function fP(){var t=Gd.current;return Gd.current=qd,t===null?qd:t}function y_(){(It===0||It===3||It===2)&&(It=4),Ot===null||!(vo&268435455)&&!(jf&268435455)||Gr(Ot,Bt)}function Yd(t,e){var n=Me;Me|=2;var i=fP();(Ot!==t||Bt!==e)&&(lr=null,uo(t,e));do try{oN();break}catch(r){dP(t,r)}while(!0);if(Jy(),Me=n,Gd.current=i,xt!==null)throw Error(ee(261));return Ot=null,Bt=0,It}function oN(){for(;xt!==null;)pP(xt)}function aN(){for(;xt!==null&&!N2();)pP(xt)}function pP(t){var e=yP(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?mP(t):xt=e,d_.current=null}function mP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eN(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,xt=null;return}}else if(n=JR(n,e,An),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);It===0&&(It=5)}function Qs(t,e,n){var i=He,r=Qn.transition;try{Qn.transition=null,He=1,lN(t,e,n,i)}finally{Qn.transition=r,He=i}return null}function lN(t,e,n,i){do Ba();while(Jr!==null);if(Me&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(B2(t,o),t===Ot&&(xt=Ot=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oh||(Oh=!0,_P(Rd,function(){return Ba(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Qn.transition,Qn.transition=null;var a=He;He=1;var u=Me;Me|=4,d_.current=null,nN(t,n),uP(n,t),AR(ug),Ld=!!lg,ug=lg=null,t.current=n,iN(n),L2(),Me=u,He=a,Qn.transition=o}else t.current=n;if(Oh&&(Oh=!1,Jr=t,Zd=r),o=t.pendingLanes,o===0&&(as=null),O2(n.stateNode),Pn(t,pt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Kd)throw Kd=!1,t=bg,bg=null,t;return Zd&1&&t.tag!==0&&Ba(),o=t.pendingLanes,o&1?t===kg?Pu++:(Pu=0,kg=t):Pu=0,bs(),null}function Ba(){if(Jr!==null){var t=ZE(Zd),e=Qn.transition,n=He;try{if(Qn.transition=null,He=16>t?16:t,Jr===null)var i=!1;else{if(t=Jr,Jr=null,Zd=0,Me&6)throw Error(ee(331));var r=Me;for(Me|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(oe=f;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:Eu(8,m,o)}var g=m.child;if(g!==null)g.return=m,oe=g;else for(;oe!==null;){m=oe;var _=m.sibling,E=m.return;if(oP(m),m===f){oe=null;break}if(_!==null){_.return=E,oe=_;break}oe=E}}}var k=o.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var N=C.sibling;C.sibling=null,C=N}while(C!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Eu(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,oe=P;break e}oe=o.return}}var x=t.current;for(oe=x;oe!==null;){a=oe;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,oe=A;else e:for(a=x;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Vf(9,u)}}catch(z){lt(u,u.return,z)}if(u===a){oe=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,oe=F;break e}oe=u.return}}if(Me=r,bs(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(bf,t)}catch{}i=!0}return i}finally{He=n,Qn.transition=e}}return!1}function Dw(t,e,n){e=Ja(n,e),e=ZS(t,e,1),t=os(t,e,1),e=dn(),t!==null&&(vc(t,1,e),Pn(t,e))}function lt(t,e,n){if(t.tag===3)Dw(t,t,n);else for(;e!==null;){if(e.tag===3){Dw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(as===null||!as.has(i))){t=Ja(n,t),t=YS(e,t,1),e=os(e,t,1),t=dn(),e!==null&&(vc(e,1,t),Pn(e,t));break}}e=e.return}}function uN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(Bt&n)===n&&(It===4||It===3&&(Bt&130023424)===Bt&&500>pt()-p_?uo(t,0):f_|=n),Pn(t,e)}function gP(t,e){e===0&&(t.mode&1?(e=Ih,Ih<<=1,!(Ih&130023424)&&(Ih=4194304)):e=1);var n=dn();t=wr(t,e),t!==null&&(vc(t,e,n),Pn(t,n))}function cN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gP(t,n)}function hN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),gP(t,n)}var yP;yP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,QR(t,e,n);xn=!!(t.flags&131072)}else xn=!1,Je&&e.flags&1048576&&TS(e,Ud,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;od(t,e),t=e.pendingProps;var r=Za(e,en.current);za(e,n),r=a_(null,e,i,t,r,n);var o=l_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(i)?(o=!0,jd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,n_(e),r.updater=Of,e.stateNode=r,r._reactInternals=e,_g(e,i,t,n),e=Tg(null,e,i,!0,o,n)):(e.tag=0,Je&&o&&Zy(e),hn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(od(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=fN(i),t=li(i,t),r){case 0:e=wg(null,e,i,t,n);break e;case 1:e=Pw(null,e,i,t,n);break e;case 11:e=Ew(null,e,i,t,n);break e;case 14:e=Sw(null,e,i,li(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),wg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),Pw(t,e,i,r,n);case 3:e:{if(eP(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,CS(t,e),Hd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ja(Error(ee(423)),e),e=Iw(t,e,i,n,r);break e}else if(i!==r){r=Ja(Error(ee(424)),e),e=Iw(t,e,i,n,r);break e}else for(kn=ss(e.stateNode.containerInfo.firstChild),Ln=e,Je=!0,ci=null,n=PS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ya(),i===r){e=Tr(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 5:return AS(e),t===null&&mg(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,cg(i,r)?a=null:o!==null&&cg(i,o)&&(e.flags|=32),JS(t,e),hn(t,e,a,n),e.child;case 6:return t===null&&mg(e),null;case 13:return tP(t,e,n);case 4:return i_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Xa(e,null,i,n):hn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),Ew(t,e,i,r,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ke(zd,i._currentValue),i._currentValue=a,o!==null)if(vi(o.value,a)){if(o.children===r.children&&!En.current){e=Tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=mr(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),gg(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),gg(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,za(e,n),r=Jn(r),i=i(r),e.flags|=1,hn(t,e,i,n),e.child;case 14:return i=e.type,r=li(i,e.pendingProps),r=li(i.type,r),Sw(t,e,i,r,n);case 15:return XS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),od(t,e),e.tag=1,Sn(i)?(t=!0,jd(e)):t=!1,za(e,n),KS(e,i,r),_g(e,i,r,n),Tg(null,e,i,!0,t,n);case 19:return nP(t,e,n);case 22:return QS(t,e,n)}throw Error(ee(156,e.tag))};function _P(t,e){return $E(t,e)}function dN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,i){return new dN(t,e,n,i)}function __(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fN(t){if(typeof t=="function")return __(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vy)return 11;if(t===jy)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ud(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")__(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case wa:return co(n.children,r,o,e);case Oy:a=8,r|=8;break;case Bm:return t=Xn(12,n,e,r|2),t.elementType=Bm,t.lanes=o,t;case Hm:return t=Xn(13,n,e,r),t.elementType=Hm,t.lanes=o,t;case Wm:return t=Xn(19,n,e,r),t.elementType=Wm,t.lanes=o,t;case AE:return Ff(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IE:a=10;break e;case CE:a=9;break e;case Vy:a=11;break e;case jy:a=14;break e;case Hr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Xn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function co(t,e,n,i){return t=Xn(7,t,i,e),t.lanes=n,t}function Ff(t,e,n,i){return t=Xn(22,t,i,e),t.elementType=AE,t.lanes=n,t.stateNode={isHidden:!1},t}function lm(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pN(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function v_(t,e,n,i,r,o,a,u,c){return t=new pN(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n_(o),t}function mN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function vP(t){if(!t)return ys;t=t._reactInternals;e:{if(No(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Sn(n))return vS(t,n,e)}return e}function wP(t,e,n,i,r,o,a,u,c){return t=v_(n,i,!0,t,r,o,a,u,c),t.context=vP(null),n=t.current,i=dn(),r=ls(n),o=mr(i,r),o.callback=e??null,os(n,o,r),t.current.lanes=r,vc(t,r,i),Pn(t,i),t}function Uf(t,e,n,i){var r=e.current,o=dn(),a=ls(r);return n=vP(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=os(r,e,a),t!==null&&(pi(t,r,a,o),id(t,r,a)),a}function Xd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ow(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w_(t,e){Ow(t,e),(t=t.alternate)&&Ow(t,e)}function gN(){return null}var TP=typeof reportError=="function"?reportError:function(t){console.error(t)};function T_(t){this._internalRoot=t}zf.prototype.render=T_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Uf(t,e,null,null)};zf.prototype.unmount=T_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){Uf(null,t,null,null)}),e[vr]=null}};function zf(t){this._internalRoot=t}zf.prototype.unstable_scheduleHydration=function(t){if(t){var e=QE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&eS(t)}};function x_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function yN(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Xd(a);o.call(f)}}var a=wP(e,i,t,0,null,!1,!1,"",Vw);return t._reactRootContainer=a,t[vr]=a.current,Ku(t.nodeType===8?t.parentNode:t),wo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Xd(c);u.call(f)}}var c=v_(t,0,!1,null,null,!1,!1,"",Vw);return t._reactRootContainer=c,t[vr]=c.current,Ku(t.nodeType===8?t.parentNode:t),wo(function(){Uf(e,c,n,i)}),c}function Hf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Xd(a);u.call(c)}}Uf(e,a,t,r)}else a=yN(n,e,t,r,i);return Xd(a)}YE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uu(e.pendingLanes);n!==0&&(zy(e,n|1),Pn(e,pt()),!(Me&6)&&(el=pt()+500,bs()))}break;case 13:wo(function(){var i=wr(t,1);if(i!==null){var r=dn();pi(i,t,1,r)}}),w_(t,1)}};By=function(t){if(t.tag===13){var e=wr(t,134217728);if(e!==null){var n=dn();pi(e,t,134217728,n)}w_(t,134217728)}};XE=function(t){if(t.tag===13){var e=ls(t),n=wr(t,e);if(n!==null){var i=dn();pi(n,t,e,i)}w_(t,e)}};QE=function(){return He};JE=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};eg=function(t,e,n){switch(e){case"input":if(Gm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Lf(i);if(!r)throw Error(ee(90));kE(i),Gm(i,r)}}}break;case"textarea":NE(t,n);break;case"select":e=n.value,e!=null&&Va(t,!!n.multiple,e,!1)}};FE=m_;UE=wo;var _N={usingClientEntryPoint:!1,Events:[Tc,Sa,Lf,VE,jE,m_]},iu={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vN={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HE(t),t===null?null:t.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||gN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{bf=Vh.inject(vN),Oi=Vh}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_N;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x_(e))throw Error(ee(200));return mN(t,e,null,n)};Vn.createRoot=function(t,e){if(!x_(t))throw Error(ee(299));var n=!1,i="",r=TP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=v_(t,1,!1,null,null,n,!1,i,r),t[vr]=e.current,Ku(t.nodeType===8?t.parentNode:t),new T_(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=HE(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return wo(t)};Vn.hydrate=function(t,e,n){if(!Bf(e))throw Error(ee(200));return Hf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!x_(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=TP;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=wP(e,null,t,1,n??null,r,!1,o,a),t[vr]=e.current,Ku(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new zf(e)};Vn.render=function(t,e,n){if(!Bf(e))throw Error(ee(200));return Hf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(ee(40));return t._reactRootContainer?(wo(function(){Hf(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};Vn.unstable_batchedUpdates=m_;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Bf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Hf(t,e,n,!1,i)};Vn.version="18.3.1-next-f1338f8080-20240426";function xP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xP)}catch(t){console.error(t)}}xP(),xE.exports=Vn;var EP=xE.exports,jw=EP;Um.createRoot=jw.createRoot,Um.hydrateRoot=jw.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=W.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:c,...f},m)=>W.createElement("svg",{ref:m,...wN,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${TN(t)}`,u].join(" "),...f},[...e.map(([g,_])=>W.createElement(g,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=we("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=we("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=we("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=we("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=we("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=we("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=we("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=we("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=we("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=we("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=we("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=we("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=we("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=we("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=we("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=we("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=we("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=we("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=we("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=we("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=we("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=we("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=we("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ZN="modulepreload",YN=function(t){return"/"+t},Hw={},Ww=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=YN(c),c in Hw)return;Hw[c]=!0;const f=c.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":ZN,f||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((_,E)=>{g.addEventListener("load",_),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function Fe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function xr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function XN(t,e){const n=Fe(t);return isNaN(e)?xr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const CP=6048e5,QN=864e5,P_=6e4,I_=36e5,jh=43200,$w=1440;let JN={};function Ec(){return JN}function ic(t,e){var u,c,f,m;const n=Ec(),i=(e==null?void 0:e.weekStartsOn)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=Fe(t),o=r.getDay(),a=(o<i?7:0)+o-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Qd(t){return ic(t,{weekStartsOn:1})}function AP(t){const e=Fe(t),n=e.getFullYear(),i=xr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=Qd(i),o=xr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Qd(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function qw(t){const e=Fe(t);return e.setHours(0,0,0,0),e}function Jd(t){const e=Fe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bP(t,e){const n=qw(t),i=qw(e),r=+n-Jd(n),o=+i-Jd(i);return Math.round((r-o)/QN)}function eL(t){const e=AP(t),n=xr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Qd(n)}function hd(t,e){const n=Fe(t),i=Fe(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function tL(t){return xr(t,Date.now())}function nL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function iL(t){if(!nL(t)&&typeof t!="number")return!1;const e=Fe(t);return!isNaN(Number(e))}function rL(t,e){const n=Fe(t),i=Fe(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function sL(t,e){const n=Fe(t),i=Fe(e),r=Gw(n,i),o=Math.abs(bP(n,i));n.setDate(n.getDate()-r*o);const a=+(Gw(n,i)===-r),u=r*(o-a);return u===0?0:u}function Gw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function C_(t){return e=>{const n=Math.trunc,i=n(e);return i===0?0:i}}function A_(t,e){return+Fe(t)-+Fe(e)}function oL(t,e,n){const i=A_(t,e)/I_;return C_()(i)}function aL(t,e,n){const i=A_(t,e)/P_;return C_()(i)}function lL(t){const e=Fe(t);return e.setHours(23,59,59,999),e}function uL(t){const e=Fe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function cL(t){const e=Fe(t);return+lL(e)==+uL(e)}function hL(t,e){const n=Fe(t),i=Fe(e),r=hd(n,i),o=Math.abs(rL(n,i));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);let u=hd(n,i)===-r;cL(Fe(t))&&o===1&&hd(t,i)===1&&(u=!1),a=r*(o-Number(u))}return a===0?0:a}function dL(t,e,n){const i=A_(t,e)/1e3;return C_()(i)}function fL(t){const e=Fe(t),n=xr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mL=(t,e,n)=>{let i;const r=pL[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Ha(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const gL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_L={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vL={date:Ha({formats:gL,defaultWidth:"full"}),time:Ha({formats:yL,defaultWidth:"full"}),dateTime:Ha({formats:_L,defaultWidth:"full"})},wL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TL=(t,e,n,i)=>wL[t];function Ni(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):a;r=t.formattingValues[u]||t.formattingValues[a]}else{const a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[u]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return r[o]}}const xL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},SL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},AL=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},bL={ordinalNumber:AL,era:Ni({values:xL,defaultWidth:"wide"}),quarter:Ni({values:EL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ni({values:SL,defaultWidth:"wide"}),day:Ni({values:PL,defaultWidth:"wide"}),dayPeriod:Ni({values:IL,defaultWidth:"wide",formattingValues:CL,defaultFormattingWidth:"wide"})};function Li(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;const a=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(u)?RL(u,g=>g.test(a)):kL(u,g=>g.test(a));let f;f=t.valueCallback?t.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(a.length);return{value:f,rest:m}}}function kL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function RL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function kP(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const NL=/^(\d+)(th|st|nd|rd)?/i,LL=/\d+/i,ML={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DL={any:[/^b/i,/^(a|c)/i]},OL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VL={any:[/1/i,/2/i,/3/i,/4/i]},jL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},HL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WL={ordinalNumber:kP({matchPattern:NL,parsePattern:LL,valueCallback:t=>parseInt(t,10)}),era:Li({matchPatterns:ML,defaultMatchWidth:"wide",parsePatterns:DL,defaultParseWidth:"any"}),quarter:Li({matchPatterns:OL,defaultMatchWidth:"wide",parsePatterns:VL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Li({matchPatterns:jL,defaultMatchWidth:"wide",parsePatterns:FL,defaultParseWidth:"any"}),day:Li({matchPatterns:UL,defaultMatchWidth:"wide",parsePatterns:zL,defaultParseWidth:"any"}),dayPeriod:Li({matchPatterns:BL,defaultMatchWidth:"any",parsePatterns:HL,defaultParseWidth:"any"})},RP={code:"en-US",formatDistance:mL,formatLong:vL,formatRelative:TL,localize:bL,match:WL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $L(t){const e=Fe(t);return bP(e,fL(e))+1}function qL(t){const e=Fe(t),n=+Qd(e)-+eL(e);return Math.round(n/CP)+1}function NP(t,e){var m,g,_,E;const n=Fe(t),i=n.getFullYear(),r=Ec(),o=(e==null?void 0:e.firstWeekContainsDate)??((g=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(_=r.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,a=xr(t,0);a.setFullYear(i+1,0,o),a.setHours(0,0,0,0);const u=ic(a,e),c=xr(t,0);c.setFullYear(i,0,o),c.setHours(0,0,0,0);const f=ic(c,e);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function GL(t,e){var u,c,f,m;const n=Ec(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=NP(t,e),o=xr(t,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),ic(o,e)}function KL(t,e){const n=Fe(t),i=+ic(n,e)-+GL(n,e);return Math.round(i/CP)+1}function Be(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Ur={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return Be(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Be(n+1,2)},d(t,e){return Be(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Be(t.getHours()%12||12,e.length)},H(t,e){return Be(t.getHours(),e.length)},m(t,e){return Be(t.getMinutes(),e.length)},s(t,e){return Be(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return Be(r,e.length)}},fa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kw={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return Ur.y(t,e)},Y:function(t,e,n,i){const r=NP(t,i),o=r>0?r:1-r;if(e==="YY"){const a=o%100;return Be(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Be(o,e.length)},R:function(t,e){const n=AP(t);return Be(n,e.length)},u:function(t,e){const n=t.getFullYear();return Be(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Be(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Be(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Ur.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return Be(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=KL(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Be(r,e.length)},I:function(t,e,n){const i=qL(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):Be(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ur.d(t,e)},D:function(t,e,n){const i=$L(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Be(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Be(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Be(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Be(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=fa.noon:i===0?r=fa.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=fa.evening:i>=12?r=fa.afternoon:i>=4?r=fa.morning:r=fa.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ur.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ur.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Be(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):Be(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ur.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ur.s(t,e)},S:function(t,e){return Ur.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Yw(i);case"XXXX":case"XX":return Js(i);case"XXXXX":case"XXX":default:return Js(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return Yw(i);case"xxxx":case"xx":return Js(i);case"xxxxx":case"xxx":default:return Js(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zw(i,":");case"OOOO":default:return"GMT"+Js(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zw(i,":");case"zzzz":default:return"GMT"+Js(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return Be(i,e.length)},T:function(t,e,n){const i=t.getTime();return Be(i,e.length)}};function Zw(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return o===0?n+String(r):n+String(r)+e+Be(o,2)}function Yw(t,e){return t%60===0?(t>0?"-":"+")+Be(Math.abs(t)/60,2):Js(t,e)}function Js(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Be(Math.trunc(i/60),2),o=Be(i%60,2);return n+r+e+o}const Xw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return Xw(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Xw(i,e)).replace("{{time}}",LP(r,e))},YL={p:LP,P:ZL},XL=/^D+$/,QL=/^Y+$/,JL=["D","DD","YY","YYYY"];function eM(t){return XL.test(t)}function tM(t){return QL.test(t)}function nM(t,e,n){const i=iM(t,e,n);if(console.warn(i),JL.includes(t))throw new RangeError(i)}function iM(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oM=/^'([^]*?)'?$/,aM=/''/g,lM=/[a-zA-Z]/;function uM(t,e,n){var m,g,_,E;const i=Ec(),r=i.locale??RP,o=i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=i.weekStartsOn??((E=(_=i.locale)==null?void 0:_.options)==null?void 0:E.weekStartsOn)??0,u=Fe(t);if(!iL(u))throw new RangeError("Invalid time value");let c=e.match(sM).map(k=>{const C=k[0];if(C==="p"||C==="P"){const N=YL[C];return N(k,r.formatLong)}return k}).join("").match(rM).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const C=k[0];if(C==="'")return{isToken:!1,value:cM(k)};if(Kw[C])return{isToken:!0,value:k};if(C.match(lM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:k}});r.localize.preprocessor&&(c=r.localize.preprocessor(u,c));const f={firstWeekContainsDate:o,weekStartsOn:a,locale:r};return c.map(k=>{if(!k.isToken)return k.value;const C=k.value;(tM(C)||eM(C))&&nM(C,e,String(t));const N=Kw[C[0]];return N(u,C,r.localize,f)}).join("")}function cM(t){const e=t.match(oM);return e?e[1].replace(aM,"'"):t}function hM(t,e,n){const i=Ec(),r=(n==null?void 0:n.locale)??i.locale??RP,o=2520,a=hd(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,f;a>0?(c=Fe(e),f=Fe(t)):(c=Fe(t),f=Fe(e));const m=dL(f,c),g=(Jd(f)-Jd(c))/1e3,_=Math.round((m-g)/60);let E;if(_<2)return n!=null&&n.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,u):m<10?r.formatDistance("lessThanXSeconds",10,u):m<20?r.formatDistance("lessThanXSeconds",20,u):m<40?r.formatDistance("halfAMinute",0,u):m<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):_===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",_,u);if(_<45)return r.formatDistance("xMinutes",_,u);if(_<90)return r.formatDistance("aboutXHours",1,u);if(_<$w){const k=Math.round(_/60);return r.formatDistance("aboutXHours",k,u)}else{if(_<o)return r.formatDistance("xDays",1,u);if(_<jh){const k=Math.round(_/$w);return r.formatDistance("xDays",k,u)}else if(_<jh*2)return E=Math.round(_/jh),r.formatDistance("aboutXMonths",E,u)}if(E=hL(f,c),E<12){const k=Math.round(_/jh);return r.formatDistance("xMonths",k,u)}else{const k=E%12,C=Math.trunc(E/12);return k<3?r.formatDistance("aboutXYears",C,u):k<9?r.formatDistance("overXYears",C,u):r.formatDistance("almostXYears",C+1,u)}}function dM(t,e){return hM(t,tL(t),e)}function fM(t,e){const i=yM(t);let r;if(i.date){const c=_M(i.date,2);r=vM(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let a=0,u;if(i.time&&(a=wM(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(u=TM(i.timezone),isNaN(u))return new Date(NaN)}else{const c=new Date(o+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(o+a+u)}const Fh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pM=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,mM=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,gM=/^([+-])(\d{2})(?::?(\d{2}))?$/;function yM(t){const e={},n=t.split(Fh.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Fh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Fh.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=Fh.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function _M(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function vM(t,e){if(e===null)return new Date(NaN);const n=t.match(pM);if(!n)return new Date(NaN);const i=!!n[4],r=ru(n[1]),o=ru(n[2])-1,a=ru(n[3]),u=ru(n[4]),c=ru(n[5])-1;if(i)return IM(e,u,c)?xM(e,u,c):new Date(NaN);{const f=new Date(0);return!SM(e,o,a)||!PM(e,r)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(r,a)),f)}}function ru(t){return t?parseInt(t):1}function wM(t){const e=t.match(mM);if(!e)return NaN;const n=cm(e[1]),i=cm(e[2]),r=cm(e[3]);return CM(n,i,r)?n*I_+i*P_+r*1e3:NaN}function cm(t){return t&&parseFloat(t.replace(",","."))||0}function TM(t){if(t==="Z")return 0;const e=t.match(gM);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return AM(i,r)?n*(i*I_+r*P_):NaN}function xM(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,o=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}const EM=[31,null,31,30,31,30,31,31,30,31,30,31];function MP(t){return t%400===0||t%4===0&&t%100!==0}function SM(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(EM[e]||(MP(t)?29:28))}function PM(t,e){return e>=1&&e<=(MP(t)?366:365)}function IM(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function CM(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function AM(t,e){return e>=0&&e<=59}function bM({isEditing:t,onToggleEdit:e,onExport:n,onOpenWallet:i,onOpenSettings:r,user:o,isAdmin:a,onLogin:u,onLogout:c}){var C;const[f,m]=W.useState({days:0,hours:0,minutes:0}),[g,_]=W.useState(new Date("2026-05-20T00:00:00")),[E,k]=W.useState(new Date("2026-06-04T00:00:00"));return W.useEffect(()=>{(async()=>{try{const{doc:P,getDoc:x}=await Ww(async()=>{const{doc:z,getDoc:$}=await Promise.resolve().then(()=>WU);return{doc:z,getDoc:$}},void 0),{db:A}=await Ww(async()=>{const{db:z}=await Promise.resolve().then(()=>l8);return{db:z}},void 0),F=await x(P(A,"trips","settings"));if(F.exists()){const z=F.data();z.startDate&&_(new Date(z.startDate+"T00:00:00")),z.endDate&&k(new Date(z.endDate+"T00:00:00"))}}catch(P){console.error("Failed to fetch settings:",P)}})()},[]),W.useEffect(()=>{const N=()=>{const x=new Date;m({days:sL(g,x),hours:oL(g,x)%24,minutes:aL(g,x)%60})};N();const P=setInterval(N,6e4);return()=>clearInterval(P)},[g]),w.jsx("header",{className:"relative pt-8 pb-12 px-4 overflow-hidden",children:w.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[w.jsxs("div",{className:"bg-white p-6 md:p-8 shadow-lg transform rotate-1 border-2 border-gray-200 relative mx-4 md:mx-0",style:{backgroundImage:"radial-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[w.jsx("div",{className:"washi-tape"}),w.jsx("div",{className:"absolute left-0 right-0 top-1/2 border-b-2 border-dashed border-gray-300 -z-10 hidden md:block"}),w.jsx("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),w.jsx("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[var(--paper-bg)] rounded-full -translate-y-1/2 hidden md:block shadow-inner"}),w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 md:gap-12",children:[w.jsxs("div",{className:"flex-1 text-center md:text-left",children:[w.jsx("div",{className:"inline-block border-2 border-gray-800 px-3 py-1 mb-3 transform -rotate-2",children:w.jsx("span",{className:"font-heading font-bold tracking-widest uppercase text-xs",children:"Boarding Pass"})}),w.jsxs("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-2 text-gray-800 leading-tight",children:["ACSM ",w.jsx("span",{className:"text-gray-400 italic font-serif",children:"2026"})]}),w.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-sm font-bold tracking-wider text-gray-600 font-mono",children:[w.jsx("span",{children:"SF"}),w.jsx(Iu,{size:16,className:"text-gray-400"}),w.jsx("span",{children:"SLC"}),w.jsx(Iu,{size:16,className:"text-gray-400"}),w.jsx("span",{children:"SAN"}),w.jsx(Iu,{size:16,className:"text-gray-400"}),w.jsx("span",{children:"LA"})]})]}),w.jsxs("div",{className:"flex flex-col items-center md:items-end gap-4",children:[w.jsxs("div",{className:"text-center md:text-right",children:[w.jsx("div",{className:"font-hand text-2xl text-gray-500 transform -rotate-3 mb-1",children:"Save the date!"}),w.jsxs("div",{className:"font-heading text-xl font-bold border-b-2 border-gray-800 inline-block pb-1",children:[g.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.jsx("span",{className:"mx-2 text-gray-400",children:""}),E.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),w.jsxs("div",{className:"flex gap-3 mt-2",children:[o?w.jsxs("div",{className:"relative group cursor-pointer",title:o.displayName||o.email||"",children:[w.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 overflow-hidden shadow-sm transition-all",children:o.photoURL?w.jsx("img",{src:o.photoURL,alt:"User",className:"w-full h-full object-cover grayscale-0"}):w.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-gray-500 font-bold",children:((C=o.displayName)==null?void 0:C[0])||"U"})}),w.jsx("button",{onClick:c,className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:w.jsx(MN,{size:10})})]}):w.jsx("button",{onClick:u,className:"sticker px-4 py-2 font-hand text-lg font-bold hover:scale-105 transition-transform",children:"Sign In"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:n,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Export",children:w.jsx(RN,{size:18})}),w.jsx("button",{onClick:i,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Wallet",children:w.jsx(Lg,{size:18})}),a&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:e,className:`w-10 h-10 border-2 rounded-full flex items-center justify-center transition-colors ${t?"border-red-400 text-red-500 bg-red-50":"border-gray-300 text-gray-500 hover:border-gray-800 hover:text-gray-800"}`,title:"Toggle Edit Mode",children:w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full opacity-0 transition-opacity",style:{opacity:t?1:0}}),w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),w.jsx("path",{d:"m15 5 4 4"})]})]})}),w.jsx("button",{onClick:r,className:"w-10 h-10 border-2 border-gray-300 rounded-full flex items-center justify-center text-gray-500 hover:border-gray-800 hover:text-gray-800 transition-colors",title:"Admin Settings",children:w.jsx(S_,{size:18})})]})]})]})]})]})]}),w.jsxs("div",{className:"absolute -bottom-10 left-4 md:-left-6 paper-note p-3 w-28 text-center transform -rotate-2 z-0 hidden md:block",children:[w.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400 mx-auto mb-1 shadow-sm"}),w.jsx("div",{className:"font-hand text-lg leading-none mb-0.5 text-gray-600",children:"Countdown"}),w.jsxs("div",{className:"font-heading text-2xl font-bold text-gray-800",children:[f.days,w.jsx("span",{className:"text-xs font-sans font-normal text-gray-500 ml-1",children:"days"})]})]})]})})}const b_=W.createContext({});function k_(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const $f=W.createContext(null),R_=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class kM extends W.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function RM({children:t,isPresent:e}){const n=W.useId(),i=W.useRef(null),r=W.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=W.useContext(R_);return W.useInsertionEffect(()=>{const{width:a,height:u,top:c,left:f}=r.current;if(e||!i.current||!a||!u)return;i.current.dataset.motionPopId=n;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${c}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),w.jsx(kM,{isPresent:e,childRef:i,sizeRef:r,children:W.cloneElement(t,{ref:i})})}const NM=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=k_(LM),c=W.useId(),f=W.useCallback(g=>{u.set(g,!0);for(const _ of u.values())if(!_)return;i&&i()},[u,i]),m=W.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:f,register:g=>(u.set(g,!1),()=>u.delete(g))}),o?[Math.random(),f]:[n,f]);return W.useMemo(()=>{u.forEach((g,_)=>u.set(_,!1))},[n]),W.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=w.jsx(RM,{isPresent:n,children:t})),w.jsx($f.Provider,{value:m,children:t})};function LM(){return new Map}function DP(t=!0){const e=W.useContext($f);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=W.useId();W.useEffect(()=>{t&&r(o)},[t]);const a=W.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Uh=t=>t.key||"";function Qw(t){const e=[];return W.Children.forEach(t,n=>{W.isValidElement(n)&&e.push(n)}),e}const N_=typeof window<"u",OP=N_?W.useLayoutEffect:W.useEffect,Sc=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1})=>{const[u,c]=DP(a),f=W.useMemo(()=>Qw(t),[t]),m=a&&!u?[]:f.map(Uh),g=W.useRef(!0),_=W.useRef(f),E=k_(()=>new Map),[k,C]=W.useState(f),[N,P]=W.useState(f);OP(()=>{g.current=!1,_.current=f;for(let F=0;F<N.length;F++){const z=Uh(N[F]);m.includes(z)?E.delete(z):E.get(z)!==!0&&E.set(z,!1)}},[N,m.length,m.join("-")]);const x=[];if(f!==k){let F=[...f];for(let z=0;z<N.length;z++){const $=N[z],R=Uh($);m.includes(R)||(F.splice(z,0,$),x.push($))}o==="wait"&&x.length&&(F=x),P(Qw(F)),C(f);return}const{forceRender:A}=W.useContext(b_);return w.jsx(w.Fragment,{children:N.map(F=>{const z=Uh(F),$=a&&!u?!1:f===N||m.includes(z),R=()=>{if(E.has(z))E.set(z,!0);else return;let I=!0;E.forEach(M=>{M||(I=!1)}),I&&(A==null||A(),P(_.current),a&&(c==null||c()),i&&i())};return w.jsx(NM,{isPresent:$,initial:!g.current||n?void 0:!1,custom:$?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:$?void 0:R,children:F},z)})})},Mn=t=>t;let VP=Mn;function L_(t){let e;return()=>(e===void 0&&(e=t()),e)}const tl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},gr=t=>t*1e3,yr=t=>t/1e3,MM={useManualTiming:!1};function DM(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(c.schedule(f),t()),f(a)}const c={schedule:(f,m=!1,g=!1)=>{const E=g&&i?e:n;return m&&o.add(f),E.has(f)||E.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,c.process(f))}};return c}const zh=["read","resolveKeyframes","update","preRender","render","postRender"],OM=40;function jP(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=zh.reduce((P,x)=>(P[x]=DM(o),P),{}),{read:u,resolveKeyframes:c,update:f,preRender:m,render:g,postRender:_}=a,E=()=>{const P=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(P-r.timestamp,OM),1),r.timestamp=P,r.isProcessing=!0,u.process(r),c.process(r),f.process(r),m.process(r),g.process(r),_.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(E))},k=()=>{n=!0,i=!0,r.isProcessing||t(E)};return{schedule:zh.reduce((P,x)=>{const A=a[x];return P[x]=(F,z=!1,$=!1)=>(n||k(),A.schedule(F,z,$)),P},{}),cancel:P=>{for(let x=0;x<zh.length;x++)a[zh[x]].cancel(P)},state:r,steps:a}}const{schedule:Qe,cancel:_s,state:Ut,steps:hm}=jP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mn,!0),FP=W.createContext({strict:!1}),Jw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nl={};for(const t in Jw)nl[t]={isEnabled:e=>Jw[t].some(n=>!!e[n])};function VM(t){for(const e in t)nl[e]={...nl[e],...t[e]}}const jM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ef(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jM.has(t)}let UP=t=>!ef(t);function FM(t){t&&(UP=e=>e.startsWith("on")?!ef(e):t(e))}try{FM(require("@emotion/is-prop-valid").default)}catch{}function UM(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(UP(r)||n===!0&&ef(r)||!e&&!ef(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function zM(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const qf=W.createContext({});function rc(t){return typeof t=="string"||Array.isArray(t)}function Gf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const M_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D_=["initial",...M_];function Kf(t){return Gf(t.animate)||D_.some(e=>rc(t[e]))}function zP(t){return!!(Kf(t)||t.variants)}function BM(t,e){if(Kf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||rc(n)?n:void 0,animate:rc(i)?i:void 0}}return t.inherit!==!1?e:{}}function HM(t){const{initial:e,animate:n}=BM(t,W.useContext(qf));return W.useMemo(()=>({initial:e,animate:n}),[e1(e),e1(n)])}function e1(t){return Array.isArray(t)?t.join(" "):t}const WM=Symbol.for("motionComponentSymbol");function Ra(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $M(t,e,n){return W.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ra(n)&&(n.current=i))},[e])}const O_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qM="framerAppearId",BP="data-"+O_(qM),{schedule:V_}=jP(queueMicrotask,!1),HP=W.createContext({});function GM(t,e,n,i,r){var o,a;const{visualElement:u}=W.useContext(qf),c=W.useContext(FP),f=W.useContext($f),m=W.useContext(R_).reducedMotion,g=W.useRef(null);i=i||c.renderer,!g.current&&i&&(g.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const _=g.current,E=W.useContext(HP);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&KM(g.current,n,r,E);const k=W.useRef(!1);W.useInsertionEffect(()=>{_&&k.current&&_.update(n,f)});const C=n[BP],N=W.useRef(!!C&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,C))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,C)));return OP(()=>{_&&(k.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),V_.render(_.render),N.current&&_.animationState&&_.animationState.animateChanges())}),W.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,C)}),N.current=!1))}),_}function KM(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:WP(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&Ra(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:f})}function WP(t){if(t)return t.options.allowProjection!==!1?t.projection:WP(t.parent)}function ZM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&VM(t);function u(f,m){let g;const _={...W.useContext(R_),...f,layoutId:YM(f)},{isStatic:E}=_,k=HM(f),C=i(f,E);if(!E&&N_){XM();const N=QM(_);g=N.MeasureLayout,k.visualElement=GM(r,C,_,e,N.ProjectionNode)}return w.jsxs(qf.Provider,{value:k,children:[g&&k.visualElement?w.jsx(g,{visualElement:k.visualElement,..._}):null,n(r,f,$M(C,k.visualElement,m),C,E,k.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const c=W.forwardRef(u);return c[WM]=r,c}function YM({layoutId:t}){const e=W.useContext(b_).id;return e&&t!==void 0?e+"-"+t:t}function XM(t,e){W.useContext(FP).strict}function QM(t){const{drag:e,layout:n}=nl;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const JM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function j_(t){return typeof t!="string"||t.includes("-")?!1:!!(JM.indexOf(t)>-1||/[A-Z]/u.test(t))}function t1(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function F_(t,e,n,i){if(typeof e=="function"){const[r,o]=t1(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=t1(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const Vg=t=>Array.isArray(t),eD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),tD=t=>Vg(t)?t[t.length-1]||0:t,Jt=t=>!!(t&&t.getVelocity);function dd(t){const e=Jt(t)?t.get():t;return eD(e)?e.toValue():e}function nD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:iD(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const $P=t=>(e,n)=>{const i=W.useContext(qf),r=W.useContext($f),o=()=>nD(t,e,i,r);return n?o():k_(o)};function iD(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=dd(o[_]);let{initial:a,animate:u}=t;const c=Kf(t),f=zP(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!Gf(g)){const _=Array.isArray(g)?g:[g];for(let E=0;E<_.length;E++){const k=F_(t,_[E]);if(k){const{transitionEnd:C,transition:N,...P}=k;for(const x in P){let A=P[x];if(Array.isArray(A)){const F=m?A.length-1:0;A=A[F]}A!==null&&(r[x]=A)}for(const x in C)r[x]=C[x]}}}return r}const gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lo=new Set(gl),qP=t=>e=>typeof e=="string"&&e.startsWith(t),GP=qP("--"),rD=qP("var(--"),U_=t=>rD(t)?sD.test(t.split("/*")[0].trim()):!1,sD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,KP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Er=(t,e,n)=>n>e?e:n<t?t:n,yl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sc={...yl,transform:t=>Er(0,1,t)},Bh={...yl,default:1},Pc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Br=Pc("deg"),ji=Pc("%"),de=Pc("px"),oD=Pc("vh"),aD=Pc("vw"),n1={...ji,parse:t=>ji.parse(t)/100,transform:t=>ji.transform(t*100)},lD={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,radius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,top:de,right:de,bottom:de,left:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,backgroundPositionX:de,backgroundPositionY:de},uD={rotate:Br,rotateX:Br,rotateY:Br,rotateZ:Br,scale:Bh,scaleX:Bh,scaleY:Bh,scaleZ:Bh,skew:Br,skewX:Br,skewY:Br,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:sc,originX:n1,originY:n1,originZ:de},i1={...yl,transform:Math.round},z_={...lD,...uD,zIndex:i1,size:de,fillOpacity:sc,strokeOpacity:sc,numOctaves:i1},cD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hD=gl.length;function dD(t,e,n){let i="",r=!0;for(let o=0;o<hD;o++){const a=gl[o],u=t[a];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(a.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const f=KP(u,z_[a]);if(!c){r=!1;const m=cD[a]||a;i+=`${m}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function B_(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const c in e){const f=e[c];if(Lo.has(c)){a=!0;continue}else if(GP(c)){r[c]=f;continue}else{const m=KP(f,z_[c]);c.startsWith("origin")?(u=!0,o[c]=m):i[c]=m}}if(e.transform||(a||n?i.transform=dD(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:m=0}=o;i.transformOrigin=`${c} ${f} ${m}`}}const fD={offset:"stroke-dashoffset",array:"stroke-dasharray"},pD={offset:"strokeDashoffset",array:"strokeDasharray"};function mD(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?fD:pD;t[o.offset]=de.transform(-i);const a=de.transform(e),u=de.transform(n);t[o.array]=`${a} ${u}`}function r1(t,e,n){return typeof t=="string"?t:de.transform(e+n*t)}function gD(t,e,n){const i=r1(e,t.x,t.width),r=r1(n,t.y,t.height);return`${i} ${r}`}function H_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},m,g){if(B_(t,f,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:E,dimensions:k}=t;_.transform&&(k&&(E.transform=_.transform),delete _.transform),k&&(r!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=gD(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),i!==void 0&&(_.scale=i),a!==void 0&&mD(_,a,u,c,!1)}const W_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ZP=()=>({...W_(),attrs:{}}),$_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function YP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const XP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QP(t,e,n,i){YP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(XP.has(r)?r:O_(r),e.attrs[r])}const tf={};function yD(t){Object.assign(tf,t)}function JP(t,{layout:e,layoutId:n}){return Lo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!tf[t]||t==="opacity")}function q_(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(Jt(r[a])||e.style&&Jt(e.style[a])||JP(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function eI(t,e,n){const i=q_(t,e,n);for(const r in t)if(Jt(t[r])||Jt(e[r])){const o=gl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function _D(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const s1=["x","y","width","height","cx","cy","r"],vD={useVisualState:$P({scrapeMotionValuesFromProps:eI,createRenderState:ZP,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(Lo.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<s1.length;u++){const c=s1[u];t[c]!==e[c]&&(a=!0)}a&&Qe.read(()=>{_D(n,i),Qe.render(()=>{H_(i,r,$_(n.tagName),t.transformTemplate),QP(n,i)})})}})},wD={useVisualState:$P({scrapeMotionValuesFromProps:q_,createRenderState:W_})};function tI(t,e,n){for(const i in e)!Jt(e[i])&&!JP(i,n)&&(t[i]=e[i])}function TD({transformTemplate:t},e){return W.useMemo(()=>{const n=W_();return B_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function xD(t,e){const n=t.style||{},i={};return tI(i,n,t),Object.assign(i,TD(t,e)),i}function ED(t,e){const n={},i=xD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function SD(t,e,n,i){const r=W.useMemo(()=>{const o=ZP();return H_(o,e,$_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};tI(o,t.style,t),r.style={...o,...r.style}}return r}function PD(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(j_(n)?SD:ED)(i,o,a,n),f=UM(i,typeof n=="string",t),m=n!==W.Fragment?{...f,...c,ref:r}:{},{children:g}=i,_=W.useMemo(()=>Jt(g)?g.get():g,[g]);return W.createElement(n,{...m,children:_})}}function ID(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...j_(i)?vD:wD,preloadedFeatures:t,useRender:PD(r),createVisualElement:e,Component:i};return ZM(a)}}function nI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Zf(t,e,n){const i=t.getProps();return F_(i,e,n!==void 0?n:i.custom,t)}const CD=L_(()=>window.ScrollTimeline!==void 0);class AD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(CD()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class bD extends AD{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function G_(t,e){return t?t[e]||t.default||t:void 0}const jg=2e4;function iI(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<jg;)e+=n,i=t.next(e);return e>=jg?1/0:e}function K_(t){return typeof t=="function"}function o1(t,e){t.timeline=e,t.onfinish=null}const Z_=t=>Array.isArray(t)&&typeof t[0]=="number",kD={linearEasing:void 0};function RD(t,e){const n=L_(t);return()=>{var i;return(i=kD[e])!==null&&i!==void 0?i:n()}}const nf=RD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rI=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(tl(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function sI(t){return!!(typeof t=="function"&&nf()||!t||typeof t=="string"&&(t in Fg||nf())||Z_(t)||Array.isArray(t)&&t.every(sI))}const hu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Fg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hu([0,.65,.55,1]),circOut:hu([.55,0,1,.45]),backIn:hu([.31,.01,.66,-.59]),backOut:hu([.33,1.53,.69,.99])};function oI(t,e){if(t)return typeof t=="function"&&nf()?rI(t,e):Z_(t)?hu(t):Array.isArray(t)?t.map(n=>oI(n,e)||Fg.easeOut):Fg[t]}const ai={x:!1,y:!1};function aI(){return ai.x||ai.y}function ND(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function lI(t,e){const n=ND(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function a1(t){return e=>{e.pointerType==="touch"||aI()||t(e)}}function LD(t,e,n={}){const[i,r,o]=lI(t,n),a=a1(u=>{const{target:c}=u,f=e(u);if(typeof f!="function"||!c)return;const m=a1(g=>{f(g),c.removeEventListener("pointerleave",m)});c.addEventListener("pointerleave",m,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const uI=(t,e)=>e?t===e?!0:uI(t,e.parentElement):!1,Y_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,MD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DD(t){return MD.has(t.tagName)||t.tabIndex!==-1}const du=new WeakSet;function l1(t){return e=>{e.key==="Enter"&&t(e)}}function dm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const OD=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=l1(()=>{if(du.has(n))return;dm(n,"down");const r=l1(()=>{dm(n,"up")}),o=()=>dm(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function u1(t){return Y_(t)&&!aI()}function VD(t,e,n={}){const[i,r,o]=lI(t,n),a=u=>{const c=u.currentTarget;if(!u1(u)||du.has(c))return;du.add(c);const f=e(u),m=(E,k)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",_),!(!u1(E)||!du.has(c))&&(du.delete(c),typeof f=="function"&&f(E,{success:k}))},g=E=>{m(E,n.useGlobalTarget||uI(c,E.target))},_=E=>{m(E,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",_,r)};return i.forEach(u=>{!DD(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>OD(f,r),r)}),o}function jD(t){return t==="x"||t==="y"?ai[t]?null:(ai[t]=!0,()=>{ai[t]=!1}):ai.x||ai.y?null:(ai.x=ai.y=!0,()=>{ai.x=ai.y=!1})}const cI=new Set(["width","height","top","left","right","bottom",...gl]);let fd;function FD(){fd=void 0}const Fi={now:()=>(fd===void 0&&Fi.set(Ut.isProcessing||MM.useManualTiming?Ut.timestamp:performance.now()),fd),set:t=>{fd=t,queueMicrotask(FD)}};function X_(t,e){t.indexOf(e)===-1&&t.push(e)}function Q_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class J_{constructor(){this.subscriptions=[]}add(e){return X_(this.subscriptions,e),()=>Q_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function hI(t,e){return e?t*(1e3/e):0}const c1=30,UD=t=>!isNaN(parseFloat(t));class zD{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=Fi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new J_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>c1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,c1);return hI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oc(t,e){return new zD(t,e)}function BD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,oc(n))}function HD(t,e){const n=Zf(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=tD(o[a]);BD(t,a,u)}}function WD(t){return!!(Jt(t)&&t.add)}function Ug(t,e){const n=t.getValue("willChange");if(WD(n))return n.add(e)}function dI(t){return t.props[BP]}const fI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$D=1e-7,qD=12;function GD(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=fI(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>$D&&++u<qD);return a}function Ic(t,e,n,i){if(t===e&&n===i)return Mn;const r=o=>GD(o,0,1,t,n);return o=>o===0||o===1?o:fI(r(o),e,i)}const pI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mI=t=>e=>1-t(1-e),gI=Ic(.33,1.53,.69,.99),ev=mI(gI),yI=pI(ev),_I=t=>(t*=2)<1?.5*ev(t):.5*(2-Math.pow(2,-10*(t-1))),tv=t=>1-Math.sin(Math.acos(t)),vI=mI(tv),wI=pI(tv),TI=t=>/^0[^.\s]+$/u.test(t);function KD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||TI(t):!0}const Cu=t=>Math.round(t*1e5)/1e5,nv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZD(t){return t==null}const YD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,iv=(t,e)=>n=>!!(typeof n=="string"&&YD.test(n)&&n.startsWith(t)||e&&!ZD(n)&&Object.prototype.hasOwnProperty.call(n,e)),xI=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(nv);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},XD=t=>Er(0,255,t),fm={...yl,transform:t=>Math.round(XD(t))},oo={test:iv("rgb","red"),parse:xI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+fm.transform(t)+", "+fm.transform(e)+", "+fm.transform(n)+", "+Cu(sc.transform(i))+")"};function QD(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const zg={test:iv("#"),parse:QD,transform:oo.transform},Na={test:iv("hsl","hue"),parse:xI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ji.transform(Cu(e))+", "+ji.transform(Cu(n))+", "+Cu(sc.transform(i))+")"},Kt={test:t=>oo.test(t)||zg.test(t)||Na.test(t),parse:t=>oo.test(t)?oo.parse(t):Na.test(t)?Na.parse(t):zg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?oo.transform(t):Na.transform(t)},JD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(nv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JD))===null||n===void 0?void 0:n.length)||0)>0}const EI="number",SI="color",tO="var",nO="var(",h1="${}",iO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ac(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(iO,c=>(Kt.test(c)?(i.color.push(o),r.push(SI),n.push(Kt.parse(c))):c.startsWith(nO)?(i.var.push(o),r.push(tO),n.push(c)):(i.number.push(o),r.push(EI),n.push(parseFloat(c))),++o,h1)).split(h1);return{values:n,split:u,indexes:i,types:r}}function PI(t){return ac(t).values}function II(t){const{split:e,types:n}=ac(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===EI?o+=Cu(r[a]):u===SI?o+=Kt.transform(r[a]):o+=r[a]}return o}}const rO=t=>typeof t=="number"?0:t;function sO(t){const e=PI(t);return II(t)(e.map(rO))}const vs={test:eO,parse:PI,createTransformer:II,getAnimatableNone:sO},oO=new Set(["brightness","contrast","saturate","opacity"]);function aO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(nv)||[];if(!i)return t;const r=n.replace(i,"");let o=oO.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const lO=/\b([a-z-]*)\(.*?\)/gu,Bg={...vs,getAnimatableNone:t=>{const e=t.match(lO);return e?e.map(aO).join(" "):t}},uO={...z_,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:Bg,WebkitFilter:Bg},rv=t=>uO[t];function CI(t,e){let n=rv(t);return n!==Bg&&(n=vs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cO=new Set(["auto","none","0"]);function hO(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!cO.has(o)&&ac(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=CI(n,r)}const d1=t=>t===yl||t===de,f1=(t,e)=>parseFloat(t.split(", ")[e]),p1=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return f1(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?f1(o[1],t):0}},dO=new Set(["x","y","z"]),fO=gl.filter(t=>!dO.has(t));function pO(t){const e=[];return fO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:p1(4,13),y:p1(5,14)};il.translateX=il.x;il.translateY=il.y;const ho=new Set;let Hg=!1,Wg=!1;function AI(){if(Wg){const t=Array.from(ho).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=pO(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Wg=!1,Hg=!1,ho.forEach(t=>t.complete()),ho.clear()}function bI(){ho.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wg=!0)})}function mO(){bI(),AI()}class sv{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ho.add(this),Hg||(Hg=!0,Qe.read(bI),Qe.resolveKeyframes(AI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const c=i.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ho.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ho.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),gO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yO(t){const e=gO.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function RI(t,e,n=1){const[i,r]=yO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return kI(a)?parseFloat(a):a}return U_(r)?RI(r,e,n+1):r}const NI=t=>e=>e.test(t),_O={test:t=>t==="auto",parse:t=>t},LI=[yl,de,ji,Br,aD,oD,_O],m1=t=>LI.find(NI(t));class MI extends sv{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),U_(f))){const m=RI(f,n.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!cI.has(i)||e.length!==2)return;const[r,o]=e,a=m1(r),u=m1(o);if(a!==u)if(d1(a)&&d1(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)KD(e[r])&&i.push(r);i.length&&hO(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=il[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=il[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const g1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vs.test(t)||t==="0")&&!t.startsWith("url("));function vO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function wO(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=g1(r,e),u=g1(o,e);return!a||!u?!1:vO(t)||(n==="spring"||K_(n))&&i}const TO=t=>t!==null;function Yf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(TO),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const xO=40;class DI{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&mO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Fi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:c,isGenerator:f}=this.options;if(!f&&!wO(e,i,r,o))if(a)this.options.duration=0;else{c&&c(Yf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const nt=(t,e,n)=>t+(e-t)*n;function pm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EO({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=pm(c,u,t+1/3),o=pm(c,u,t),a=pm(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function rf(t,e){return n=>n>0?e:t}const mm=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},SO=[zg,oo,Na],PO=t=>SO.find(e=>e.test(t));function y1(t){const e=PO(t);if(!e)return!1;let n=e.parse(t);return e===Na&&(n=EO(n)),n}const _1=(t,e)=>{const n=y1(t),i=y1(e);if(!n||!i)return rf(t,e);const r={...n};return o=>(r.red=mm(n.red,i.red,o),r.green=mm(n.green,i.green,o),r.blue=mm(n.blue,i.blue,o),r.alpha=nt(n.alpha,i.alpha,o),oo.transform(r))},IO=(t,e)=>n=>e(t(n)),Cc=(...t)=>t.reduce(IO),$g=new Set(["none","hidden"]);function CO(t,e){return $g.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AO(t,e){return n=>nt(t,e,n)}function ov(t){return typeof t=="number"?AO:typeof t=="string"?U_(t)?rf:Kt.test(t)?_1:RO:Array.isArray(t)?OI:typeof t=="object"?Kt.test(t)?_1:bO:rf}function OI(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>ov(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function bO(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=ov(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function kO(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],c=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=c,r[a]++}return i}const RO=(t,e)=>{const n=vs.createTransformer(e),i=ac(t),r=ac(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?$g.has(t)&&!r.values.length||$g.has(e)&&!i.values.length?CO(t,e):Cc(OI(kO(i,r),r.values),n):rf(t,e)};function VI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nt(t,e,n):ov(t)(t,e)}const NO=5;function jI(t,e,n){const i=Math.max(e-NO,0);return hI(n-t(i),e-i)}const at={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gm=.001;function LO({duration:t=at.duration,bounce:e=at.bounce,velocity:n=at.velocity,mass:i=at.mass}){let r,o,a=1-e;a=Er(at.minDamping,at.maxDamping,a),t=Er(at.minDuration,at.maxDuration,yr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,E=qg(f,a),k=Math.exp(-g);return gm-_/E*k},o=f=>{const g=f*a*t,_=g*n+n,E=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),C=qg(Math.pow(f,2),a);return(-r(f)+gm>0?-1:1)*((_-E)*k)/C}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-gm+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,c=DO(r,o,u);if(t=gr(t),isNaN(c))return{stiffness:at.stiffness,damping:at.damping,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const MO=12;function DO(t,e,n){let i=n;for(let r=1;r<MO;r++)i=i-t(i)/e(i);return i}function qg(t,e){return t*Math.sqrt(1-e*e)}const OO=["duration","bounce"],VO=["stiffness","damping","mass"];function v1(t,e){return e.some(n=>t[n]!==void 0)}function jO(t){let e={velocity:at.velocity,stiffness:at.stiffness,damping:at.damping,mass:at.mass,isResolvedFromDuration:!1,...t};if(!v1(t,VO)&&v1(t,OO))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Er(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:at.mass,stiffness:r,damping:o}}else{const n=LO(t);e={...e,...n,mass:at.mass},e.isResolvedFromDuration=!0}return e}function FI(t=at.visualDuration,e=at.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:m,duration:g,velocity:_,isResolvedFromDuration:E}=jO({...n,velocity:-yr(n.velocity||0)}),k=_||0,C=f/(2*Math.sqrt(c*m)),N=a-o,P=yr(Math.sqrt(c/m)),x=Math.abs(N)<5;i||(i=x?at.restSpeed.granular:at.restSpeed.default),r||(r=x?at.restDelta.granular:at.restDelta.default);let A;if(C<1){const z=qg(P,C);A=$=>{const R=Math.exp(-C*P*$);return a-R*((k+C*P*N)/z*Math.sin(z*$)+N*Math.cos(z*$))}}else if(C===1)A=z=>a-Math.exp(-P*z)*(N+(k+P*N)*z);else{const z=P*Math.sqrt(C*C-1);A=$=>{const R=Math.exp(-C*P*$),I=Math.min(z*$,300);return a-R*((k+C*P*N)*Math.sinh(I)+z*N*Math.cosh(I))/z}}const F={calculatedDuration:E&&g||null,next:z=>{const $=A(z);if(E)u.done=z>=g;else{let R=0;C<1&&(R=z===0?gr(k):jI(A,z,$));const I=Math.abs(R)<=i,M=Math.abs(a-$)<=r;u.done=I&&M}return u.value=u.done?a:$,u},toString:()=>{const z=Math.min(iI(F),jg),$=rI(R=>F.next(z*R).value,z,30);return z+"ms "+$}};return F}function w1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},E=I=>u!==void 0&&I<u||c!==void 0&&I>c,k=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let C=n*e;const N=g+C,P=a===void 0?N:a(N);P!==N&&(C=P-g);const x=I=>-C*Math.exp(-I/i),A=I=>P+x(I),F=I=>{const M=x(I),D=A(I);_.done=Math.abs(M)<=f,_.value=_.done?P:D};let z,$;const R=I=>{E(_.value)&&(z=I,$=FI({keyframes:[_.value,k(_.value)],velocity:jI(A,I,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let M=!1;return!$&&z===void 0&&(M=!0,F(I),R(I)),z!==void 0&&I>=z?$.next(I-z):(!M&&F(I),_)}}}const FO=Ic(.42,0,1,1),UO=Ic(0,0,.58,1),UI=Ic(.42,0,.58,1),zO=t=>Array.isArray(t)&&typeof t[0]!="number",BO={linear:Mn,easeIn:FO,easeInOut:UI,easeOut:UO,circIn:tv,circInOut:wI,circOut:vI,backIn:ev,backInOut:yI,backOut:gI,anticipate:_I},T1=t=>{if(Z_(t)){VP(t.length===4);const[e,n,i,r]=t;return Ic(e,n,i,r)}else if(typeof t=="string")return BO[t];return t};function HO(t,e,n){const i=[],r=n||VI,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Mn:e;u=Cc(c,u)}i.push(u)}return i}function WO(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(VP(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=HO(e,i,r),c=u.length,f=m=>{if(a&&m<t[0])return e[0];let g=0;if(c>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const _=tl(t[g],t[g+1],m);return u[g](_)};return n?m=>f(Er(t[0],t[o-1],m)):f}function $O(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=tl(0,e,i);t.push(nt(n,1,r))}}function qO(t){const e=[0];return $O(e,t.length-1),e}function GO(t,e){return t.map(n=>n*e)}function KO(t,e){return t.map(()=>e||UI).splice(0,t.length-1)}function sf({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=zO(i)?i.map(T1):T1(i),o={done:!1,value:e[0]},a=GO(n&&n.length===e.length?n:qO(e),t),u=WO(a,e,{ease:Array.isArray(r)?r:KO(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const ZO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Qe.update(e,!0),stop:()=>_s(e),now:()=>Ut.isProcessing?Ut.timestamp:Fi.now()}},YO={decay:w1,inertia:w1,tween:sf,keyframes:sf,spring:FI},XO=t=>t/100;class av extends DI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||sv,u=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=K_(n)?n:YO[n]||sf;let c,f;u!==sf&&typeof e[0]!="number"&&(c=Cc(XO,VI(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=iI(m));const{calculatedDuration:g}=m,_=g+r,E=_*(i+1)-r;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:_,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=i;if(this.startTime===null)return o.next(0);const{delay:_,repeat:E,repeatType:k,repeatDelay:C,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-_*(this.speed>=0?1:-1),x=this.speed>=0?P<0:P>m;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let A=this.currentTime,F=o;if(E){const I=Math.min(this.currentTime,m)/g;let M=Math.floor(I),D=I%1;!D&&I>=1&&(D=1),D===1&&M--,M=Math.min(M,E+1),!!(M%2)&&(k==="reverse"?(D=1-D,C&&(D-=C/g)):k==="mirror"&&(F=a)),A=Er(0,1,D)*g}const z=x?{done:!1,value:c[0]}:F.next(A);u&&(z.value=u(z.value));let{done:$}=z;!x&&f!==null&&($=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return R&&r!==void 0&&(z.value=Yf(c,this.options,r)),N&&N(z.value),R&&this.finish(),z}get duration(){const{resolved:e}=this;return e?yr(e.calculatedDuration):0}get time(){return yr(this.currentTime)}set time(e){e=gr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=ZO,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const QO=new Set(["opacity","clipPath","filter","transform"]);function JO(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const m=oI(u,r);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const eV=L_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),of=10,tV=2e4;function nV(t){return K_(t.type)||t.type==="spring"||!sI(t.ease)}function iV(t,e){const n=new av({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<tV;)i=n.sample(o),r.push(i.value),o+=of;return{times:void 0,keyframes:r,duration:o-of,ease:"linear"}}const zI={anticipate:_I,backInOut:yI,circInOut:wI};function rV(t){return t in zI}class x1 extends DI{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new MI(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:c,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&nf()&&rV(o)&&(o=zI[o]),nV(this.options)){const{onComplete:g,onUpdate:_,motionValue:E,element:k,...C}=this.options,N=iV(e,C);e=N.keyframes,e.length===1&&(e[1]=e[0]),i=N.duration,r=N.times,o=N.ease,a="keyframes"}const m=JO(u.owner.current,c,e,{...this.options,duration:i,times:r,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(o1(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Yf(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=gr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mn;const{animation:i}=n;o1(i,e)}return Mn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:_,...E}=this.options,k=new av({...E,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),C=gr(this.time);f.setWithVelocity(k.sample(C-of).value,k.sample(C).value,of)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return eV()&&i&&QO.has(i)&&!c&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const sV={type:"spring",stiffness:500,damping:25,restSpeed:10},oV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aV={type:"keyframes",duration:.8},lV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uV=(t,{keyframes:e})=>e.length>2?aV:Lo.has(t)?t.startsWith("scale")?oV(e[1]):sV:lV;function cV({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...m}){return!!Object.keys(m).length}const lv=(t,e,n,i={},r,o)=>a=>{const u=G_(i,t)||{},c=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-gr(c);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};cV(u)||(m={...m,...uV(t,m)}),m.duration&&(m.duration=gr(m.duration)),m.repeatDelay&&(m.repeatDelay=gr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!o&&e.get()!==void 0){const _=Yf(m.keyframes,u);if(_!==void 0)return Qe.update(()=>{m.onUpdate(_),m.onComplete()}),new bD([])}return!o&&x1.supports(m)?new x1(m):new av(m)};function hV({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function BI(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...c}=e;i&&(a=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in c){const _=t.getValue(g,(o=t.latestValues[g])!==null&&o!==void 0?o:null),E=c[g];if(E===void 0||m&&hV(m,g))continue;const k={delay:n,...G_(a||{},g)};let C=!1;if(window.MotionHandoffAnimation){const P=dI(t);if(P){const x=window.MotionHandoffAnimation(P,g,Qe);x!==null&&(k.startTime=x,C=!0)}}Ug(t,g),_.start(lv(g,_,E,t.shouldReduceMotion&&cI.has(g)?{type:!1}:k,t,C));const N=_.animation;N&&f.push(N)}return u&&Promise.all(f).then(()=>{Qe.update(()=>{u&&HD(t,u)})}),f}function Gg(t,e,n={}){var i;const r=Zf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(BI(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:_}=o;return dV(t,e,m+f,g,_,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,m]=c==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function dV(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(fV).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Gg(f,e,{...o,delay:n+c(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function fV(t,e){return t.sortNodePosition(e)}function pV(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Gg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Gg(t,e,n);else{const r=typeof e=="function"?Zf(t,e,n.custom):e;i=Promise.all(BI(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const mV=D_.length;function HI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?HI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mV;n++){const i=D_[n],r=t.props[i];(rc(r)||r===!1)&&(e[i]=r)}return e}const gV=[...M_].reverse(),yV=M_.length;function _V(t){return e=>Promise.all(e.map(({animation:n,options:i})=>pV(t,n,i)))}function vV(t){let e=_V(t),n=E1(),i=!0;const r=c=>(f,m)=>{var g;const _=Zf(t,m,c==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(_){const{transition:E,transitionEnd:k,...C}=_;f={...f,...C,...k}}return f};function o(c){e=c(t)}function a(c){const{props:f}=t,m=HI(t.parent)||{},g=[],_=new Set;let E={},k=1/0;for(let N=0;N<yV;N++){const P=gV[N],x=n[P],A=f[P]!==void 0?f[P]:m[P],F=rc(A),z=P===c?x.isActive:null;z===!1&&(k=N);let $=A===m[P]&&A!==f[P]&&F;if($&&i&&t.manuallyAnimateOnMount&&($=!1),x.protectedKeys={...E},!x.isActive&&z===null||!A&&!x.prevProp||Gf(A)||typeof A=="boolean")continue;const R=wV(x.prevProp,A);let I=R||P===c&&x.isActive&&!$&&F||N>k&&F,M=!1;const D=Array.isArray(A)?A:[A];let V=D.reduce(r(P),{});z===!1&&(V={});const{prevResolvedValues:U={}}=x,O={...U,...V},ke=J=>{I=!0,_.has(J)&&(M=!0,_.delete(J)),x.needsAnimating[J]=!0;const G=t.getValue(J);G&&(G.liveStyle=!1)};for(const J in O){const G=V[J],re=U[J];if(E.hasOwnProperty(J))continue;let Q=!1;Vg(G)&&Vg(re)?Q=!nI(G,re):Q=G!==re,Q?G!=null?ke(J):_.add(J):G!==void 0&&_.has(J)?ke(J):x.protectedKeys[J]=!0}x.prevProp=A,x.prevResolvedValues=V,x.isActive&&(E={...E,...V}),i&&t.blockInitialAnimation&&(I=!1),I&&(!($&&R)||M)&&g.push(...D.map(J=>({animation:J,options:{type:P}})))}if(_.size){const N={};_.forEach(P=>{const x=t.getBaseTarget(P),A=t.getValue(P);A&&(A.liveStyle=!0),N[P]=x??null}),g.push({animation:N})}let C=!!g.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(C=!1),i=!1,C?e(g):Promise.resolve()}function u(c,f){var m;if(n[c].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(_=>{var E;return(E=_.animationState)===null||E===void 0?void 0:E.setActive(c,f)}),n[c].isActive=f;const g=a(c);for(const _ in n)n[_].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=E1(),i=!0}}}function wV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nI(e,t):!1}function Ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E1(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class ks{constructor(e){this.isMounted=!1,this.node=e}update(){}}class TV extends ks{constructor(e){super(e),e.animationState||(e.animationState=vV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let xV=0;class EV extends ks{constructor(){super(...arguments),this.id=xV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const SV={animation:{Feature:TV},exit:{Feature:EV}};function lc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Ac(t){return{point:{x:t.pageX,y:t.pageY}}}const PV=t=>e=>Y_(e)&&t(e,Ac(e));function Au(t,e,n,i){return lc(t,e,PV(n),i)}const S1=(t,e)=>Math.abs(t-e);function IV(t,e){const n=S1(t.x,e.x),i=S1(t.y,e.y);return Math.sqrt(n**2+i**2)}class WI{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=_m(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=IV(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:k}=g,{timestamp:C}=Ut;this.history.push({...k,timestamp:C});const{onStart:N,onMove:P}=this.handlers;_||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=ym(_,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:E,onSessionEnd:k,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=_m(g.type==="pointercancel"?this.lastMoveEventInfo:ym(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,N),k&&k(g,N)},!Y_(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Ac(e),u=ym(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=Ut;this.history=[{...c,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,_m(u,this.history)),this.removeListeners=Cc(Au(this.contextWindow,"pointermove",this.handlePointerMove),Au(this.contextWindow,"pointerup",this.handlePointerUp),Au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_s(this.updatePoint)}}function ym(t,e){return e?{point:e(t.point)}:t}function P1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _m({point:t},e){return{point:t,delta:P1(t,$I(e)),offset:P1(t,CV(e)),velocity:AV(e,.1)}}function CV(t){return t[0]}function $I(t){return t[t.length-1]}function AV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=$I(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>gr(e)));)n--;if(!i)return{x:0,y:0};const o=yr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const qI=1e-4,bV=1-qI,kV=1+qI,GI=.01,RV=0-GI,NV=0+GI;function On(t){return t.max-t.min}function LV(t,e,n){return Math.abs(t-e)<=n}function I1(t,e,n,i=.5){t.origin=i,t.originPoint=nt(e.min,e.max,t.origin),t.scale=On(n)/On(e),t.translate=nt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bV&&t.scale<=kV||isNaN(t.scale))&&(t.scale=1),(t.translate>=RV&&t.translate<=NV||isNaN(t.translate))&&(t.translate=0)}function bu(t,e,n,i){I1(t.x,e.x,n.x,i?i.originX:void 0),I1(t.y,e.y,n.y,i?i.originY:void 0)}function C1(t,e,n){t.min=n.min+e.min,t.max=t.min+On(e)}function MV(t,e,n){C1(t.x,e.x,n.x),C1(t.y,e.y,n.y)}function A1(t,e,n){t.min=e.min-n.min,t.max=t.min+On(e)}function ku(t,e,n){A1(t.x,e.x,n.x),A1(t.y,e.y,n.y)}function DV(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?nt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?nt(n,t,i.max):Math.min(t,n)),t}function b1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function OV(t,{top:e,left:n,bottom:i,right:r}){return{x:b1(t.x,n,r),y:b1(t.y,e,i)}}function k1(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function VV(t,e){return{x:k1(t.x,e.x),y:k1(t.y,e.y)}}function jV(t,e){let n=.5;const i=On(t),r=On(e);return r>i?n=tl(e.min,e.max-i,t.min):i>r&&(n=tl(t.min,t.max-r,e.min)),Er(0,1,n)}function FV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Kg=.35;function UV(t=Kg){return t===!1?t=0:t===!0&&(t=Kg),{x:R1(t,"left","right"),y:R1(t,"top","bottom")}}function R1(t,e,n){return{min:N1(t,e),max:N1(t,n)}}function N1(t,e){return typeof t=="number"?t:t[e]||0}const L1=()=>({translate:0,scale:1,origin:0,originPoint:0}),La=()=>({x:L1(),y:L1()}),M1=()=>({min:0,max:0}),dt=()=>({x:M1(),y:M1()});function Gn(t){return[t("x"),t("y")]}function KI({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function zV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function BV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function vm(t){return t===void 0||t===1}function Zg({scale:t,scaleX:e,scaleY:n}){return!vm(t)||!vm(e)||!vm(n)}function eo(t){return Zg(t)||ZI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ZI(t){return D1(t.x)||D1(t.y)}function D1(t){return t&&t!=="0%"}function af(t,e,n){const i=t-n,r=e*i;return n+r}function O1(t,e,n,i,r){return r!==void 0&&(t=af(t,r,i)),af(t,n,i)+e}function Yg(t,e=0,n=1,i,r){t.min=O1(t.min,e,n,i,r),t.max=O1(t.max,e,n,i,r)}function YI(t,{x:e,y:n}){Yg(t.x,e.translate,e.scale,e.originPoint),Yg(t.y,n.translate,n.scale,n.originPoint)}const V1=.999999999999,j1=1.0000000000001;function HV(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Da(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,YI(t,a)),i&&eo(o.latestValues)&&Da(t,o.latestValues))}e.x<j1&&e.x>V1&&(e.x=1),e.y<j1&&e.y>V1&&(e.y=1)}function Ma(t,e){t.min=t.min+e,t.max=t.max+e}function F1(t,e,n,i,r=.5){const o=nt(t.min,t.max,r);Yg(t,e,n,o,i)}function Da(t,e){F1(t.x,e.x,e.scaleX,e.scale,e.originX),F1(t.y,e.y,e.scaleY,e.scale,e.originY)}function XI(t,e){return KI(BV(t.getBoundingClientRect(),e))}function WV(t,e,n){const i=XI(t,n),{scroll:r}=e;return r&&(Ma(i.x,r.offset.x),Ma(i.y,r.offset.y)),i}const QI=({current:t})=>t?t.ownerDocument.defaultView:null,$V=new WeakMap;class qV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ac(m).point)},o=(m,g)=>{const{drag:_,dragPropagation:E,onDragStart:k}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jD(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gn(N=>{let P=this.getAxisMotionValue(N).get()||0;if(ji.test(P)){const{projection:x}=this.visualElement;if(x&&x.layout){const A=x.layout.layoutBox[N];A&&(P=On(A)*(parseFloat(P)/100))}}this.originPoint[N]=P}),k&&Qe.postRender(()=>k(m,g)),Ug(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:k,onDrag:C}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=g;if(E&&this.currentDirection===null){this.currentDirection=GV(N),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),C&&C(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Gn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new WI(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:QI(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Qe.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Hh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=DV(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ra(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=OV(r.layoutBox,n):this.constraints=!1,this.elastic=UV(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=FV(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ra(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=WV(i,r.root,this.visualElement.getTransformPagePoint());let a=VV(r.layout.layoutBox,o);if(n){const u=n(zV(a));this.hasMutatedConstraints=!!u,u&&(a=KI(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Gn(m=>{if(!Hh(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Ug(this.visualElement,e),i.start(lv(e,i,0,n,this.visualElement,!1))}stopAnimation(){Gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Gn(n=>{const{drag:i}=this.getProps();if(!Hh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-nt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ra(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Gn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const c=u.get();r[a]=jV({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Gn(a=>{if(!Hh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(nt(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;$V.set(this.visualElement,this);const e=this.visualElement.current,n=Au(e,"pointerdown",c=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Ra(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Qe.read(i);const a=lc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Gn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Kg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Hh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function GV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KV extends ks{constructor(e){super(e),this.removeGroupControls=Mn,this.removeListeners=Mn,this.controls=new qV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const U1=t=>(e,n)=>{t&&Qe.postRender(()=>t(e,n))};class ZV extends ks{constructor(){super(...arguments),this.removePointerDownListener=Mn}onPointerDown(e){this.session=new WI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:U1(e),onStart:U1(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Qe.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=Au(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const su={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(de.test(t))t=parseFloat(t);else return t;const n=z1(t,e.target.x),i=z1(t,e.target.y);return`${n}% ${i}%`}},YV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=vs.parse(t);if(r.length>5)return i;const o=vs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=nt(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class XV extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;yD(QV),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Qe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),V_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JI(t){const[e,n]=DP(),i=W.useContext(b_);return w.jsx(XV,{...t,layoutGroup:i,switchLayoutGroup:W.useContext(HP),isPresent:e,safeToRemove:n})}const QV={borderRadius:{...su,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:su,borderTopRightRadius:su,borderBottomLeftRadius:su,borderBottomRightRadius:su,boxShadow:YV};function JV(t,e,n){const i=Jt(t)?t:oc(t);return i.start(lv("",i,e,n)),i.animation}function e4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const t4=(t,e)=>t.depth-e.depth;class n4{constructor(){this.children=[],this.isDirty=!1}add(e){X_(this.children,e),this.isDirty=!0}remove(e){Q_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t4),this.isDirty=!1,this.children.forEach(e)}}function i4(t,e){const n=Fi.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(_s(i),t(o-e))};return Qe.read(i,!0),()=>_s(i)}const eC=["TopLeft","TopRight","BottomLeft","BottomRight"],r4=eC.length,B1=t=>typeof t=="string"?parseFloat(t):t,H1=t=>typeof t=="number"||de.test(t);function s4(t,e,n,i,r,o){r?(t.opacity=nt(0,n.opacity!==void 0?n.opacity:1,o4(i)),t.opacityExit=nt(e.opacity!==void 0?e.opacity:1,0,a4(i))):o&&(t.opacity=nt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<r4;a++){const u=`border${eC[a]}Radius`;let c=W1(e,u),f=W1(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||H1(c)===H1(f)?(t[u]=Math.max(nt(B1(c),B1(f),i),0),(ji.test(f)||ji.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=nt(e.rotate||0,n.rotate||0,i))}function W1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const o4=tC(0,.5,vI),a4=tC(.5,.95,Mn);function tC(t,e,n){return i=>i<t?0:i>e?1:n(tl(t,e,i))}function $1(t,e){t.min=e.min,t.max=e.max}function qn(t,e){$1(t.x,e.x),$1(t.y,e.y)}function q1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function G1(t,e,n,i,r){return t-=e,t=af(t,1/n,i),r!==void 0&&(t=af(t,1/r,i)),t}function l4(t,e=0,n=1,i=.5,r,o=t,a=t){if(ji.test(e)&&(e=parseFloat(e),e=nt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=nt(o.min,o.max,i);t===o&&(u-=e),t.min=G1(t.min,e,n,u,r),t.max=G1(t.max,e,n,u,r)}function K1(t,e,[n,i,r],o,a){l4(t,e[n],e[i],e[r],e.scale,o,a)}const u4=["x","scaleX","originX"],c4=["y","scaleY","originY"];function Z1(t,e,n,i){K1(t.x,e,u4,n?n.x:void 0,i?i.x:void 0),K1(t.y,e,c4,n?n.y:void 0,i?i.y:void 0)}function Y1(t){return t.translate===0&&t.scale===1}function nC(t){return Y1(t.x)&&Y1(t.y)}function X1(t,e){return t.min===e.min&&t.max===e.max}function h4(t,e){return X1(t.x,e.x)&&X1(t.y,e.y)}function Q1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iC(t,e){return Q1(t.x,e.x)&&Q1(t.y,e.y)}function J1(t){return On(t.x)/On(t.y)}function eT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class d4{constructor(){this.members=[]}add(e){X_(this.members,e),e.scheduleRender()}remove(e){if(Q_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f4(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:_,skewX:E,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),g&&(i+=`rotateX(${g}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),k&&(i+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(i+=`scale(${u}, ${c})`),i||"none"}const to={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},fu=typeof window<"u"&&window.MotionDebug!==void 0,wm=["","X","Y","Z"],p4={visibility:"hidden"},tT=1e3;let m4=0;function Tm(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function rC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=dI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Qe,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&rC(i)}function sC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=m4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fu&&(to.totalNodes=to.resolvedTargetDeltas=to.recalculatedProjection=0),this.nodes.forEach(_4),this.nodes.forEach(E4),this.nodes.forEach(S4),this.nodes.forEach(v4),fu&&window.MotionDebug.record(to)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new n4)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new J_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=e4(a),this.instance=a;const{layoutId:c,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=i4(_,250),pd.hasAnimatedSinceResize&&(pd.hasAnimatedSinceResize=!1,this.nodes.forEach(iT))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:E,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||m.getDefaultTransition()||b4,{onLayoutAnimationStart:N,onLayoutAnimationComplete:P}=m.getProps(),x=!this.targetLayout||!iC(this.targetLayout,k)||E,A=!_&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||_&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,A);const F={...G_(C,"layout"),onPlay:N,onComplete:P};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||iT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nT);return}this.isUpdating||this.nodes.forEach(T4),this.isUpdating=!1,this.nodes.forEach(x4),this.nodes.forEach(g4),this.nodes.forEach(y4),this.clearAllSnapshots();const u=Fi.now();Ut.delta=Er(0,1e3/60,u-Ut.timestamp),Ut.timestamp=u,Ut.isProcessing=!0,hm.update.process(Ut),hm.preRender.process(Ut),hm.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,V_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(w4),this.sharedNodes.forEach(I4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!nC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||eo(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),k4(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return dt();const c=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(R4))){const{scroll:m}=this.root;m&&(Ma(c.x,m.offset.x),Ma(c.y,m.offset.y))}return c}removeElementScroll(a){var u;const c=dt();if(qn(c,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:_}=m;m!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&qn(c,a),Ma(c.x,g.offset.x),Ma(c.y,g.offset.y))}return c}applyTransform(a,u=!1){const c=dt();qn(c,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Da(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),eo(m.latestValues)&&Da(c,m.latestValues)}return eo(this.latestValues)&&Da(c,this.latestValues),c}removeTransform(a){const u=dt();qn(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!eo(f.latestValues))continue;Zg(f.latestValues)&&f.updateSnapshot();const m=dt(),g=f.measurePageBox();qn(m,g),Z1(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return eo(this.latestValues)&&Z1(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),ku(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qn(this.target,this.layout.layoutBox),YI(this.target,this.targetDelta)):qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),ku(this.relativeTargetOrigin,this.target,E.target),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fu&&to.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Zg(this.parent.latestValues)||ZI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;qn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;HV(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=dt());const{target:k}=u;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(q1(this.prevProjectionDelta.x,this.projectionDelta.x),q1(this.prevProjectionDelta.y,this.projectionDelta.y)),bu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==E||!eT(this.projectionDelta.x,this.prevProjectionDelta.x)||!eT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),fu&&to.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=La(),this.projectionDelta=La(),this.projectionDeltaWithTransform=La()}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},m={...this.latestValues},g=La();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=dt(),E=c?c.source:void 0,k=this.layout?this.layout.source:void 0,C=E!==k,N=this.getStack(),P=!N||N.members.length<=1,x=!!(C&&!P&&this.options.crossfade===!0&&!this.path.some(A4));this.animationProgress=0;let A;this.mixTargetDelta=F=>{const z=F/1e3;rT(g.x,a.x,z),rT(g.y,a.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ku(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C4(this.relativeTarget,this.relativeTargetOrigin,_,z),A&&h4(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=dt()),qn(A,this.relativeTarget)),C&&(this.animationValues=m,s4(m,f,this.latestValues,z,x,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{pd.hasAnimatedSinceResize=!0,this.currentAnimation=JV(0,tT,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:m}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&oC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||dt();const g=On(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const _=On(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+_}qn(u,c),Da(u,m),bu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new d4),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&Tm("z",a,f,this.animationValues);for(let m=0;m<wm.length;m++)Tm(`rotate${wm[m]}`,a,f,this.animationValues),Tm(`skew${wm[m]}`,a,f,this.animationValues);a.render();for(const m in f)a.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return p4;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=dd(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=dd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!eo(this.latestValues)&&(C.transform=m?m({},""):"none",this.hasProjected=!1),C}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=f4(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:E,y:k}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(c=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const C in tf){if(_[C]===void 0)continue;const{correct:N,applyTo:P}=tf[C],x=f.transform==="none"?_[C]:N(_[C],g);if(P){const A=P.length;for(let F=0;F<A;F++)f[P[F]]=x}else f[C]=x}return this.options.layoutId&&(f.pointerEvents=g===this?dd(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(nT),this.root.sharedNodes.clear()}}}function g4(t){t.updateLayout()}function y4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Gn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=On(_);_.min=i[g].min,_.max=_.min+E}):oC(o,n.layoutBox,i)&&Gn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=On(i[g]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=La();bu(u,i,n.layoutBox);const c=La();a?bu(c,t.applyTransform(r,!0),n.measuredBox):bu(c,i,n.layoutBox);const f=!nC(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:E}=g;if(_&&E){const k=dt();ku(k,n.layoutBox,_.layoutBox);const C=dt();ku(C,i,E.layoutBox),iC(k,C)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function _4(t){fu&&to.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function w4(t){t.clearSnapshot()}function nT(t){t.clearMeasurements()}function T4(t){t.isLayoutDirty=!1}function x4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function iT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function E4(t){t.resolveTargetDelta()}function S4(t){t.calcProjection()}function P4(t){t.resetSkewAndRotation()}function I4(t){t.removeLeadSnapshot()}function rT(t,e,n){t.translate=nt(e.translate,0,n),t.scale=nt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sT(t,e,n,i){t.min=nt(e.min,n.min,i),t.max=nt(e.max,n.max,i)}function C4(t,e,n,i){sT(t.x,e.x,n.x,i),sT(t.y,e.y,n.y,i)}function A4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const b4={duration:.45,ease:[.4,0,.1,1]},oT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),aT=oT("applewebkit/")&&!oT("chrome/")?Math.round:Mn;function lT(t){t.min=aT(t.min),t.max=aT(t.max)}function k4(t){lT(t.x),lT(t.y)}function oC(t,e,n){return t==="position"||t==="preserve-aspect"&&!LV(J1(e),J1(n),.2)}function R4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const N4=sC({attachResizeListener:(t,e)=>lc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xm={current:void 0},aC=sC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xm.current){const t=new N4({});t.mount(window),t.setOptions({layoutScroll:!0}),xm.current=t}return xm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),L4={pan:{Feature:ZV},drag:{Feature:KV,ProjectionNode:aC,MeasureLayout:JI}};function uT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Qe.postRender(()=>o(e,Ac(e)))}class M4 extends ks{mount(){const{current:e}=this.node;e&&(this.unmount=LD(e,n=>(uT(this.node,n,"Start"),i=>uT(this.node,i,"End"))))}unmount(){}}class D4 extends ks{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cT(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Qe.postRender(()=>o(e,Ac(e)))}class O4 extends ks{mount(){const{current:e}=this.node;e&&(this.unmount=VD(e,n=>(cT(this.node,n,"Start"),(i,{success:r})=>cT(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xg=new WeakMap,Em=new WeakMap,V4=t=>{const e=Xg.get(t.target);e&&e(t)},j4=t=>{t.forEach(V4)};function F4({root:t,...e}){const n=t||document;Em.has(n)||Em.set(n,{});const i=Em.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(j4,{root:t,...e})),i[r]}function U4(t,e,n){const i=F4(e);return Xg.set(t,n),i.observe(t),()=>{Xg.delete(t),i.unobserve(t)}}const z4={some:0,all:1};class B4 extends ks{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:z4[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(c)};return U4(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(H4(e,n))&&this.startObserver()}unmount(){}}function H4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const W4={inView:{Feature:B4},tap:{Feature:O4},focus:{Feature:D4},hover:{Feature:M4}},$4={layout:{ProjectionNode:aC,MeasureLayout:JI}},Qg={current:null},lC={current:!1};function q4(){if(lC.current=!0,!!N_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Qg.current=t.matches;t.addListener(e),e()}else Qg.current=!1}const G4=[...LI,Kt,vs],K4=t=>G4.find(NI(t)),hT=new WeakMap;function Z4(t,e,n){for(const i in e){const r=e[i],o=n[i];if(Jt(r))t.addValue(i,r);else if(Jt(o))t.addValue(i,oc(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,oc(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const dT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Y4{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Fi.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Qe.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:m}=a;this.onUpdate=m,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Kf(n),this.isVariantNode=zP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in _){const k=_[E];c[E]!==void 0&&Jt(k)&&k.set(c[E],!1)}}mount(e){this.current=e,hT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),lC.current||q4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hT.delete(this.current),this.projection&&this.projection.unmount(),_s(this.notifyUpdate),_s(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Lo.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Qe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nl){const n=nl[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<dT.length;i++){const r=dT[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Z4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=oc(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(kI(r)||TI(r))?r=parseFloat(r):!K4(r)&&vs.test(n)&&(r=CI(e,n)),this.setBaseTarget(e,Jt(r)?r.get():r)),Jt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=F_(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Jt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new J_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uC extends Y4{constructor(){super(...arguments),this.KeyframeResolver=MI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function X4(t){return window.getComputedStyle(t)}class Q4 extends uC{constructor(){super(...arguments),this.type="html",this.renderInstance=YP}readValueFromInstance(e,n){if(Lo.has(n)){const i=rv(n);return i&&i.default||0}else{const i=X4(e),r=(GP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XI(e,n)}build(e,n,i){B_(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return q_(e,n,i)}}class J4 extends uC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Lo.has(n)){const i=rv(n);return i&&i.default||0}return n=XP.has(n)?n:O_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return eI(e,n,i)}build(e,n,i){H_(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){QP(e,n,i,r)}mount(e){this.isSVGTag=$_(e.tagName),super.mount(e)}}const e3=(t,e)=>j_(t)?new J4(e):new Q4(e,{allowProjection:t!==W.Fragment}),t3=ID({...SV,...W4,...L4,...$4},e3),$i=zM(t3),n3={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},i3=(t,e,n)=>{let i;const r=n3[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?i+"":i+"":i},r3={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},s3={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},o3={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},a3={date:Ha({formats:r3,defaultWidth:"full"}),time:Ha({formats:s3,defaultWidth:"full"}),dateTime:Ha({formats:o3,defaultWidth:"full"})},l3={lastWeek:"''eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"''eeee p",other:"P"},u3=(t,e,n,i)=>l3[t],c3={narrow:["",""],abbreviated:["",""],wide:["",""]},h3={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},d3={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},f3={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},p3={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},m3={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},g3=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n+"";case"hour":return n+"";case"minute":return n+"";case"second":return n+"";default:return" "+n}},y3={ordinalNumber:g3,era:Ni({values:c3,defaultWidth:"wide"}),quarter:Ni({values:h3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ni({values:d3,defaultWidth:"wide"}),day:Ni({values:f3,defaultWidth:"wide"}),dayPeriod:Ni({values:p3,defaultWidth:"wide",formattingValues:m3,defaultFormattingWidth:"wide"})},_3=/^(\s*)?\d+(|||)?/i,v3=/\d+/i,w3={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},T3={any:[/^()/i,/^()/i]},x3={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},E3={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},S3={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},P3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},I3={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},C3={any:[//i,//i,//i,//i,//i,//i,//i]},A3={any:/^(?|?||[]|?||?|)/i},b3={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},k3={ordinalNumber:kP({matchPattern:_3,parsePattern:v3,valueCallback:t=>parseInt(t,10)}),era:Li({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:T3,defaultParseWidth:"any"}),quarter:Li({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:E3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Li({matchPatterns:S3,defaultMatchWidth:"wide",parsePatterns:P3,defaultParseWidth:"any"}),day:Li({matchPatterns:I3,defaultMatchWidth:"wide",parsePatterns:C3,defaultParseWidth:"any"}),dayPeriod:Li({matchPatterns:A3,defaultMatchWidth:"any",parsePatterns:b3,defaultParseWidth:"any"})},R3={code:"zh-TW",formatDistance:i3,formatLong:a3,formatRelative:u3,localize:y3,match:k3,options:{weekStartsOn:1,firstWeekContainsDate:4}};function N3({id:t,activity:e,isLast:n,isEditing:i,onEdit:r,onDelete:o,onFocus:a}){const c=(f=>{switch(f){case"Plane":return Iu;case"MapPin":return Dg;case"Coffee":return kN;case"Camera":return SN;case"Train":return PP;case"Car":return PN;case"Sun":return Og;case"Moon":return ON;case"Briefcase":return xN;case"Utensils":return IP;case"CheckSquare":return cd;default:return Uw}})(e.iconName);return w.jsxs($i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative flex gap-4 group/item",onViewportEnter:()=>{t&&a&&a(t)},viewport:{amount:.6,margin:"0px 0px -20% 0px"},children:[!n&&w.jsx("div",{className:"absolute left-[15px] top-8 bottom-[-24px] w-0.5 bg-indigo-100 group-hover/item:bg-indigo-200 transition-colors"}),w.jsx("div",{className:"relative z-10 flex-shrink-0 w-8 h-8 bg-white border-2 border-indigo-100 rounded-full flex items-center justify-center text-indigo-500 shadow-sm group-hover/item:border-indigo-400 group-hover/item:scale-110 group-hover/item:shadow-md transition-all duration-300",children:w.jsx(c,{size:14})}),w.jsxs("div",{className:"flex-1 pb-6",children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-2",children:[w.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded w-fit",children:e.time}),w.jsx("h4",{className:"font-semibold text-gray-800 text-base",children:e.title}),e.cost&&w.jsxs("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:["$",e.cost]})]}),i&&w.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[w.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded",title:"",children:w.jsx(BN,{size:14})}),w.jsx("button",{onClick:o,className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"",children:w.jsx(ml,{size:14})})]})]}),w.jsx("p",{className:"text-sm text-gray-600 mt-1.5 leading-relaxed",children:e.description}),e.attachments&&e.attachments.length>0&&w.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.attachments.map(f=>f.type==="image"?w.jsxs("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"block w-24 h-24 rounded-lg overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors relative group/img",children:[w.jsx("img",{src:f.url,alt:f.label,className:"w-full h-full object-cover"}),w.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/10 transition-colors"})]},f.id):w.jsxs("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-blue-600 bg-blue-50 px-2.5 py-1.5 rounded-md border border-blue-100 hover:bg-blue-100 transition-colors",children:[w.jsx(Mg,{size:12}),f.label||""]},f.id))}),(e.tips||e.location)&&w.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[e.location&&w.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.location)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-gray-500 bg-white px-2.5 py-1.5 rounded-md border border-gray-200 w-fit hover:bg-gray-50 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:[w.jsx(Dg,{size:12}),e.location]}),e.tips&&w.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100",children:[w.jsx(Uw,{size:14,className:"mt-0.5 flex-shrink-0"}),w.jsx("span",{className:"leading-relaxed",children:e.tips})]})]}),e.modifiedBy&&w.jsx("div",{className:"mt-2 flex justify-end",children:w.jsxs("span",{className:"text-[10px] text-gray-300",children:["Updated by ",e.modifiedBy.split("@")[0],"  ",e.modifiedAt?dM(new Date(e.modifiedAt),{addSuffix:!0,locale:R3}):""]})})]})]})}function cC(t,e){const n=W.useRef(e);W.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const L3=1;function M3(t){return Object.freeze({__version:L3,map:t})}function hC(t,e){return Object.freeze({...t,...e})}const dC=W.createContext(null),fC=dC.Provider;function Xf(){const t=W.useContext(dC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function pC(t){function e(n,i){const{instance:r,context:o}=t(n).current;return W.useImperativeHandle(i,()=>r),n.children==null?null:Cd.createElement(fC,{value:o},n.children)}return W.forwardRef(e)}function D3(t){function e(n,i){const[r,o]=W.useState(!1),{instance:a}=t(n,o).current;W.useImperativeHandle(i,()=>a),W.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?EP.createPortal(n.children,u):null}return W.forwardRef(e)}function O3(t){function e(n,i){const{instance:r}=t(n).current;return W.useImperativeHandle(i,()=>r),null}return W.forwardRef(e)}function uv(t,e){const n=W.useRef();W.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Qf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function V3(t,e){return function(i,r){const o=Xf(),a=t(Qf(i,o),o);return cC(o.map,i.attribution),uv(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Jg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Kk,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,S,j;return j=function(){p=!1,v&&(S.apply(d,v),v=!1)},S=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(j,l),p=!0)},S}function m(s,l,d){var p=l[1],v=l[0],S=p-v;return s===p&&d?s:((s-v)%S+S)%S+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return E(s).split(/\s+/)}function C(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function N(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function x(s,l){return s.replace(P,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var A=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var M=window.requestAnimationFrame||$("RequestAnimationFrame")||I,D=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&M===I)s.call(l);else return M.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:E,splitWords:k,setOptions:C,getParamString:N,template:x,isArray:A,indexOf:F,emptyImageUrl:z,requestFn:M,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:U};function ke(){}ke.extend=function(s){var l=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(jt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,j=p._initHooks.length;S<j;S++)p._initHooks[S].call(this)}},l},ke.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ke.mergeOptions=function(s){return r(this.prototype.options,s),this},ke.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function jt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=A(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ze={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var v=arguments.length===1,S=0,j=s.length;S<j;S++)v?this._off(s[S]):this._off(s[S],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,S;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,S=p.length;v<S;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(s,l,d);if(j!==!1){var H=p[j];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(j,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var S=0,j=v.length;S<j;S++){var H=v[S],K=H.fn;H.once&&this.off(s,K,H.ctx),K.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var S=this._events&&this._events[s];if(S&&S.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var j in this._eventParents)if(this._eventParents[j].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,S=p.length;v<S;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var v=0,S=s.length;v<S;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ze.addEventListener=Ze.on,Ze.removeEventListener=Ze.clearAllEventListeners=Ze.off,Ze.addOneTimeEventListener=Ze.once,Ze.fireEvent=Ze.fire,Ze.hasEventListeners=Ze.listens;var J=ke.extend(Ze);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var re=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(Q(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Q(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(s){s=Q(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=Q(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Q(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Q(s,l,d){return s instanceof G?s:A(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function he(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}he.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=Q(s);else if(s=xe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=Q(s):s=xe(s),s instanceof he?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>=l.x&&p.x<=d.x,j=v.y>=l.y&&p.y<=d.y;return S&&j},overlaps:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,S=v.x>l.x&&p.x<d.x,j=v.y>l.y&&p.y<d.y;return S&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return xe(Q(l.x-p,l.y-v),Q(d.x+p,d.y+v))},equals:function(s){return s?(s=xe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function xe(s,l){return!s||s instanceof he?s:new he(s,l)}function We(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}We.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Ee)p=s,v=s;else if(s instanceof We){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(fe(s)||Re(s)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new We(new Ee(l.lat-p,l.lng-v),new Ee(d.lat+p,d.lng+v))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=fe(s):s=Re(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof We?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>=l.lat&&p.lat<=d.lat,j=v.lng>=l.lng&&p.lng<=d.lng;return S&&j},overlaps:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),S=v.lat>l.lat&&p.lat<d.lat,j=v.lng>l.lng&&p.lng<d.lng;return S&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Re(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Re(s,l){return s instanceof We?s:new We(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=fe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return nn.distance(this,fe(s))},wrap:function(){return nn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Re([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function fe(s,l,d){return s instanceof Ee?s:A(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var gt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new he(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var S=s.getSouthWest(),j=s.getNorthEast(),H=new Ee(S.lat-p,S.lng-v),K=new Ee(j.lat-p,j.lng-v);return new We(H,K)}},nn=r({},gt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,S=Math.sin((l.lat-s.lat)*d/2),j=Math.sin((l.lng-s.lng)*d/2),H=S*S+Math.cos(p)*Math.cos(v)*j*j,K=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*K}}),ue=6378137,$e={R:ue,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=ue*Math.PI;return new he([-s,-s],[s,s])}()};function rn(s,l,d,p){if(A(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}rn.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function sn(s,l,d,p){return new rn(s,l,d,p)}var on=r({},nn,{code:"EPSG:3857",projection:$e,transformation:function(){var s=.5/(Math.PI*$e.R);return sn(s,.5,-s,.5)}()}),Ms=r({},on,{code:"EPSG:900913"});function Vo(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function jo(s,l){var d="",p,v,S,j,H,K;for(p=0,S=s.length;p<S;p++){for(H=s[p],v=0,j=H.length;v<j;v++)K=H[v],d+=(v?"L":"M")+K.x+" "+K.y;d+=l?ae.svg?"z":"x":""}return d||"M0 0"}var Ds=document.documentElement.style,Os="ActiveXObject"in window,bt=Os&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),br=mn("webkit"),Hc=mn("android"),Sl=mn("android 2")||mn("android 3"),Pp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Vs=Hc&&mn("Google")&&Pp<537&&!("AudioNode"in window),Fo=!!window.opera,Pl=!kt&&mn("chrome"),Uo=mn("gecko")&&!br&&!Fo&&!Os,Ip=!Pl&&mn("safari"),Wc=mn("phantom"),Il="OTransition"in Ds,$c=navigator.platform.indexOf("Win")===0,kr=Os&&"transition"in Ds,js="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sl,zo="MozPerspective"in Ds,Yi=!window.L_DISABLE_3D&&(kr||js||zo)&&!Il&&!Wc,Rr=typeof orientation<"u"||mn("mobile"),Bo=Rr&&br,qc=Rr&&js,Nr=!window.PointerEvent&&window.MSPointerEvent,Cl=!!(window.PointerEvent||Nr),Rt="ontouchstart"in window||!!window.TouchEvent,Gc=!window.L_NO_TOUCH&&(Rt||Cl),Fs=Rr&&Fo,Us=Rr&&Uo,Cp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ap=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),Lr=function(){return!!document.createElement("canvas").getContext}(),Al=!!(document.createElementNS&&Vo("svg").createSVGRect),bp=!!Al&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ho=!Al&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Kc=navigator.platform.indexOf("Mac")===0,Zc=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:Os,ielt9:bt,edge:kt,webkit:br,android:Hc,android23:Sl,androidStock:Vs,opera:Fo,chrome:Pl,gecko:Uo,safari:Ip,phantom:Wc,opera12:Il,win:$c,ie3d:kr,webkit3d:js,gecko3d:zo,any3d:Yi,mobile:Rr,mobileWebkit:Bo,mobileWebkit3d:qc,msPointer:Nr,pointer:Cl,touch:Gc,touchNative:Rt,mobileOpera:Fs,mobileGecko:Us,retina:Cp,passiveEvents:Ap,canvas:Lr,svg:Al,vml:Ho,inlineSvg:bp,mac:Kc,linux:Zc},Yc=ae.msPointer?"MSPointerDown":"pointerdown",ti=ae.msPointer?"MSPointerMove":"pointermove",bl=ae.msPointer?"MSPointerUp":"pointerup",kl=ae.msPointer?"MSPointerCancel":"pointercancel",zs={touchstart:Yc,touchmove:ti,touchend:bl,touchcancel:kl},Wo={touchstart:Rl,touchmove:Fn,touchend:Fn,touchcancel:Fn},Xi={},Xc=!1;function Qc(s,l,d){return l==="touchstart"&&Bs(),Wo[l]?(d=Wo[l].bind(this,d),s.addEventListener(zs[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function kp(s,l,d){if(!zs[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(zs[l],d,!1)}function $o(s){Xi[s.pointerId]=s}function Jc(s){Xi[s.pointerId]&&(Xi[s.pointerId]=s)}function qo(s){delete Xi[s.pointerId]}function Bs(){Xc||(document.addEventListener(Yc,$o,!0),document.addEventListener(ti,Jc,!0),document.addEventListener(bl,qo,!0),document.addEventListener(kl,qo,!0),Xc=!0)}function Fn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Xi)l.touches.push(Xi[d]);l.changedTouches=[l],s(l)}}function Rl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&yt(l),Fn(s,l)}function Rp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var eh=200;function th(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(S){if(S.detail!==1){p=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var j=Ol(S);if(!(j.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!j.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var H=Date.now();H-d<=eh?(p++,p===2&&l(Rp(S))):p=1,d=H}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function nh(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Hs=Go(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qi=Go(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nl=Qi==="webkitTransition"||Qi==="OTransition"?Qi+"End":"transitionend";function Ll(s){return typeof s=="string"?document.getElementById(s):s}function Mr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ne(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function De(s){var l=s.parentNode;l&&l.removeChild(s)}function an(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Un(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function zn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ws(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=wi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Ws(s,l)){var S=wi(s);Ji(s,(S?S+" ":"")+l)}}function qe(s,l){s.classList!==void 0?s.classList.remove(l):Ji(s,E((" "+wi(s)+" ").replace(" "+l+" "," ")))}function Ji(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function wi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function gn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&ih(s,l)}function ih(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Go(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function er(s,l,d){var p=l||new G(0,0);s.style[Hs]=(ae.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ot(s,l){s._leaflet_pos=l,ae.any3d?er(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function tr(s){return s._leaflet_pos||new G(0,0)}var ni,In,Ko;if("onselectstart"in document)ni=function(){ye(window,"selectstart",yt)},In=function(){ze(window,"selectstart",yt)};else{var Dr=Go(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(Dr){var s=document.documentElement.style;Ko=s[Dr],s[Dr]="none"}},In=function(){Dr&&(document.documentElement.style[Dr]=Ko,Ko=void 0)}}function Zo(){ye(window,"dragstart",yt)}function Yo(){ze(window,"dragstart",yt)}var $s,Ti;function Ml(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Xo(),$s=s,Ti=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Xo))}function Xo(){$s&&($s.style.outlineStyle=Ti,$s=void 0,Ti=void 0,ze(window,"keydown",Xo))}function rh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Bn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Np={__proto__:null,TRANSFORM:Hs,TRANSITION:Qi,TRANSITION_END:Nl,get:Ll,getStyle:Mr,create:Ne,remove:De,empty:an,toFront:Un,toBack:zn,hasClass:Ws,addClass:se,removeClass:qe,setClass:Ji,getClass:wi,setOpacity:gn,testProp:Go,setTransform:er,setPosition:ot,getPosition:tr,get disableTextSelection(){return ni},get enableTextSelection(){return In},disableImageDrag:Zo,enableImageDrag:Yo,preventOutline:Ml,restoreOutline:Xo,getSizedParentNode:rh,getScale:Bn};function ye(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Qo(s,v,l[v],d);else{l=k(l);for(var S=0,j=l.length;S<j;S++)Qo(s,l[S],d,p)}return this}var ln="_leaflet_events";function ze(s,l,d,p){if(arguments.length===1)Or(s),delete s[ln];else if(l&&typeof l=="object")for(var v in l)qs(s,v,l[v],d);else if(l=k(l),arguments.length===2)Or(s,function(H){return F(l,H)!==-1});else for(var S=0,j=l.length;S<j;S++)qs(s,l[S],d,p);return this}function Or(s,l){for(var d in s[ln]){var p=d.split(/\d/)[0];(!l||l(p))&&qs(s,p,null,null,d)}}var nr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qo(s,l,d,p){var v=l+c(d)+(p?"_"+c(p):"");if(s[ln]&&s[ln][v])return this;var S=function(H){return d.call(p||s,H||window.event)},j=S;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?S=Qc(s,l,S):ae.touch&&l==="dblclick"?S=th(s,S):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(nr[l]||l,S,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(S=function(H){H=H||window.event,jl(s,H)&&j(H)},s.addEventListener(nr[l],S,!1)):s.addEventListener(l,j,!1):s.attachEvent("on"+l,S),s[ln]=s[ln]||{},s[ln][v]=S}function qs(s,l,d,p,v){v=v||l+c(d)+(p?"_"+c(p):"");var S=s[ln]&&s[ln][v];if(!S)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?kp(s,l,S):ae.touch&&l==="dblclick"?nh(s,S):"removeEventListener"in s?s.removeEventListener(nr[l]||l,S,!1):s.detachEvent("on"+l,S),s[ln][v]=null}function Ve(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Dl(s){return Qo(s,"wheel",Ve),this}function Gs(s){return ye(s,"mousedown touchstart dblclick contextmenu",Ve),s._leaflet_disable_click=!0,this}function yt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function xi(s){return yt(s),Ve(s),this}function Ol(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ks(s,l){if(!l)return new G(s.clientX,s.clientY);var d=Bn(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var Ei=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vl(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ei:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function jl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Zs={__proto__:null,on:ye,off:ze,stopPropagation:Ve,disableScrollPropagation:Dl,disableClickPropagation:Gs,preventDefault:yt,stop:xi,getPropagationPath:Ol,getMousePosition:Ks,getWheelDelta:Vl,isExternalTarget:jl,addListener:ye,removeListener:ze},Fl=J.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=tr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ot(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=J.extend({options:{crs:on,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=C(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(fe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qi&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,Nl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(fe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),S=s instanceof G?s:this.latLngToContainerPoint(s),j=S.subtract(v).multiplyBy(1-1/p),H=this.containerPointToLatLng(v.add(j));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Re(s);var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var S=p.subtract(d).divideBy(2),j=this.project(s.getSouthWest(),v),H=this.project(s.getNorthEast(),v),K=this.unproject(j.add(H).divideBy(2).add(S),v);return{center:K,zoom:v}},fitBounds:function(s,l){if(s=Re(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=Q(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ae.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),S=this.getSize(),j=this._zoom;s=fe(s),l=l===void 0?j:l;var H=Math.max(S.x,S.y),K=H*this.getZoomScale(j,l),Y=v.distanceTo(p)||1,ne=1.42,pe=ne*ne;function Pe(_t){var wh=_t?-1:1,Bk=_t?K:H,Hk=K*K-H*H+wh*pe*pe*Y*Y,Wk=2*Bk*pe*Y,Vp=Hk/Wk,A0=Math.sqrt(Vp*Vp+1)-Vp,$k=A0<1e-9?-18:Math.log(A0);return $k}function un(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function Nt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}function $n(_t){return un(_t)/Nt(_t)}var _n=Pe(0);function ha(_t){return H*(Nt(_n)/Nt(_n+ne*_t))}function jk(_t){return H*(Nt(_n)*$n(_n+ne*_t)-un(_n))/pe}function Fk(_t){return 1-Math.pow(1-_t,1.5)}var Uk=Date.now(),I0=(Pe(1)-_n)/ne,zk=d.duration?1e3*d.duration:1e3*I0*.8;function C0(){var _t=(Date.now()-Uk)/zk,wh=Fk(_t)*I0;_t<=1?(this._flyToFrame=V(C0,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(jk(wh)/Y)),j),this.getScaleZoom(H/ha(wh),j),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),C0.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Re(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Re(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),S=this.project(s),j=this.getPixelBounds(),H=xe([j.min.add(d),j.max.subtract(p)]),K=H.getSize();if(!H.contains(S)){this._enforcingBounds=!0;var Y=S.subtract(H.getCenter()),ne=H.extend(S).getSize().subtract(K);v.x+=Y.x<0?-ne.x:ne.x,v.y+=Y.y<0?-ne.y:ne.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),S=p.subtract(v);return!S.x&&!S.y?this:(s.animate&&s.pan?this.panBy(S):(s.pan&&this._rawPanBy(S),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ee(l,d),v=p.toBounds(s.coords.accuracy*2),S=this._locateOptions;if(S.setView){var j=this.getBoundsZoom(v);this.setView(p,S.maxZoom?Math.min(j,S.maxZoom):j)}var H={latlng:p,bounds:v,timestamp:s.timestamp};for(var K in s.coords)typeof s.coords[K]=="number"&&(H[K]=s.coords[K]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)De(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ne("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new We(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Re(s),d=Q(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),S=this.getMaxZoom(),j=s.getNorthWest(),H=s.getSouthEast(),K=this.getSize().subtract(d),Y=xe(this.project(H,p),this.project(j,p)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,pe=K.x/Y.x,Pe=K.y/Y.y,un=l?Math.max(pe,Pe):Math.min(pe,Pe);return p=this.getScaleZoom(un,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(v,Math.min(S,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new he(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(fe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Q(s),l)},layerPointToLatLng:function(s){var l=Q(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(fe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Re(s))},distance:function(s,l){return this.options.crs.distance(fe(s),fe(l))},containerPointToLayerPoint:function(s){return Q(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Q(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(Q(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return Ks(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ll(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Mr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ot(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ot(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?ze:ye;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",S=s.target||s.srcElement,j=!1;S;){if(p=this._targets[c(S)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){j=!0;break}if(p&&p.listens(l,!0)&&(v&&!jl(S,s)||(d.push(p),v))||S===this._container)break;S=S.parentNode}return!d.length&&!j&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Ml(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var S=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&S.push(d[j]);v=S.concat(v)}if(v.length){l==="contextmenu"&&yt(s);var H=v[0],K={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=H.getLatLng&&(!H._radius||H._radius<=10);K.containerPoint=Y?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=Y?H.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(j=0;j<v.length;j++)if(v[j].fire(l,K,!0),K.originalEvent._stopped||v[j].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return tr(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return xe([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),S=new he(p.subtract(v),p.add(v)),j=this._getBoundsOffset(S,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?s:this.unproject(p.add(j),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new he(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=xe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),S=p.max.subtract(s.max),j=this._rebound(v.x,-S.x),H=this._rebound(v.y,-S.y);return new G(j,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ae.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Hs,p=this._proxy.style[d];er(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();er(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Jo(s,l){return new Se(s,l)}var yn=ke.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Si=function(s){return new yn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ne("div",l+"control-container",this._container);function p(v,S){var j=l+v+" "+l+S;s[v+S]=Ne("div",j,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)De(this._controlCorners[s]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sh=yn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){C(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return yn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ne("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Gs(l),Dl(l);var p=this._section=Ne("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ye(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ne("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ye(v,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){yt(S),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ne("div",s+"-base",p),this._separator=Ne("div",s+"-separator",p),this._overlaysList=Ne("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;an(this._baseLayersList),an(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(p),p.layerId=c(s.layer),ye(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var S=document.createElement("span");l.appendChild(S),S.appendChild(p),S.appendChild(v);var j=s.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var S=s.length-1;S>=0;S--)l=s[S],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(S=0;S<v.length;S++)this._map.hasLayer(v[S])&&this._map.removeLayer(v[S]);for(S=0;S<p.length;S++)this._map.hasLayer(p[S])||this._map.addLayer(p[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",yt),this.expand();var l=this;setTimeout(function(){ze(s,"click",yt),l._preventClick=!1})}}),oh=function(s,l,d){return new sh(s,l,d)},ir=yn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ne("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var S=Ne("a",d,p);return S.innerHTML=s,S.href="#",S.title=l,S.setAttribute("role","button"),S.setAttribute("aria-label",l),Gs(S),ye(S,"click",xi),ye(S,"click",v,this),ye(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";qe(this._zoomInButton,l),qe(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ir,this.addControl(this.zoomControl))});var ah=function(s){return new ir(s)},Ul=yn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ne("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ne("div",l,d)),s.imperial&&(this._iScale=Ne("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),zl=function(s){return new Ul(s)},Bl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ea=yn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Bl+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Gs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new ea().addTo(this)});var ta=function(s){return new ea(s)};yn.Layers=sh,yn.Zoom=ir,yn.Scale=Ul,yn.Attribution=ea,Si.layers=oh,Si.zoom=ah,Si.scale=zl,Si.attribution=ta;var Cn=ke.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cn.addTo=function(s,l){return s.addHandler(l,this),this};var lh={Events:Ze},Pi=ae.touch?"touchstart mousedown":"mousedown",ii=J.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){C(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(ye(this._dragStartTarget,Pi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,Pi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ws(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ii._dragging=this,this._preventOutline&&Ml(this._element),Zo(),ni(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=rh(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=tr(this._element),this._parentScale=Bn(d);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,yt(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ot(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){qe(document.body,"leaflet-dragging"),this._lastTarget&&(qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Yo(),In();var l=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Hl(s,l,d){var p,v=[1,4,2,8],S,j,H,K,Y,ne,pe,Pe;for(S=0,ne=s.length;S<ne;S++)s[S]._code=q(s[S],l);for(H=0;H<4;H++){for(pe=v[H],p=[],S=0,ne=s.length,j=ne-1;S<ne;j=S++)K=s[S],Y=s[j],K._code&pe?Y._code&pe||(Pe=B(Y,K,pe,l,d),Pe._code=q(Pe,l),p.push(Pe)):(Y._code&pe&&(Pe=B(Y,K,pe,l,d),Pe._code=q(Pe,l),p.push(Pe)),p.push(K));s=p}return s}function Wl(s,l){var d,p,v,S,j,H,K,Y,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=fe([0,0]),Pe=Re(s),un=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());un<1700&&(pe=na(s));var Nt=s.length,$n=[];for(d=0;d<Nt;d++){var _n=fe(s[d]);$n.push(l.project(fe([_n.lat-pe.lat,_n.lng-pe.lng])))}for(H=K=Y=0,d=0,p=Nt-1;d<Nt;p=d++)v=$n[d],S=$n[p],j=v.y*S.x-S.y*v.x,K+=(v.x+S.x)*j,Y+=(v.y+S.y)*j,H+=j*3;H===0?ne=$n[0]:ne=[K/H,Y/H];var ha=l.unproject(Q(ne));return fe([ha.lat+pe.lat,ha.lng+pe.lng])}function na(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var S=fe(s[v]);l+=S.lat,d+=S.lng,p++}return fe([l/p,d/p])}var ia={__proto__:null,clipPolygon:Hl,polygonCenter:Wl,centroid:na};function Wt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Vr(s,d),s}function $l(s,l,d){return Math.sqrt(_e(s,l,d,!0))}function uh(s,l,d){return _e(s,l,d)}function Vr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,h(s,v,l,0,d-1);var S,j=[];for(S=0;S<d;S++)v[S]&&j.push(s[S]);return j}function h(s,l,d,p,v){var S=0,j,H,K;for(H=p+1;H<=v-1;H++)K=_e(s[H],s[p],s[v],!0),K>S&&(j=H,S=K);S>d&&(l[j]=1,h(s,l,d,p,j),h(s,l,d,j,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,S=s.length;p<S;p++)te(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<S-1&&d.push(s[S-1]),d}var T;function b(s,l,d,p,v){var S=p?T:q(s,d),j=q(l,d),H,K,Y;for(T=j;;){if(!(S|j))return[s,l];if(S&j)return!1;H=S||j,K=B(s,l,H,d,v),Y=q(K,d),H===S?(s=K,S=Y):(l=K,j=Y)}}function B(s,l,d,p,v){var S=l.x-s.x,j=l.y-s.y,H=p.min,K=p.max,Y,ne;return d&8?(Y=s.x+S*(K.y-s.y)/j,ne=K.y):d&4?(Y=s.x+S*(H.y-s.y)/j,ne=H.y):d&2?(Y=K.x,ne=s.y+j*(K.x-s.x)/S):d&1&&(Y=H.x,ne=s.y+j*(H.x-s.x)/S),new G(Y,ne,v)}function q(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function _e(s,l,d,p){var v=l.x,S=l.y,j=d.x-v,H=d.y-S,K=j*j+H*H,Y;return K>0&&(Y=((s.x-v)*j+(s.y-S)*H)/K,Y>1?(v=d.x,S=d.y):Y>0&&(v+=j*Y,S+=H*Y)),j=s.x-v,H=s.y-S,p?j*j+H*H:new G(v,S)}function Oe(s){return!A(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function je(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oe(s)}function ht(s,l){var d,p,v,S,j,H,K,Y;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=fe([0,0]),pe=Re(s),Pe=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Pe<1700&&(ne=na(s));var un=s.length,Nt=[];for(d=0;d<un;d++){var $n=fe(s[d]);Nt.push(l.project(fe([$n.lat-ne.lat,$n.lng-ne.lng])))}for(d=0,p=0;d<un-1;d++)p+=Nt[d].distanceTo(Nt[d+1])/2;if(p===0)Y=Nt[0];else for(d=0,S=0;d<un-1;d++)if(j=Nt[d],H=Nt[d+1],v=j.distanceTo(H),S+=v,S>p){K=(S-p)/v,Y=[H.x-K*(H.x-j.x),H.y-K*(H.y-j.y)];break}var _n=l.unproject(Q(Y));return fe([_n.lat+ne.lat,_n.lng+ne.lng])}var Hn={__proto__:null,simplify:Wt,pointToSegmentDistance:$l,closestPointOnSegment:uh,clipSegment:b,_getEdgeIntersection:B,_getBitCode:q,_sqClosestPointOnSegment:_e,isFlat:Oe,_flat:je,polylineCenter:ht},ri={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new he([-180,-90],[180,90])},Wn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,S=Math.sqrt(1-v*v),j=S*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-j)/(1+j),S/2);return p=-d*Math.log(Math.max(H,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),S=Math.exp(-s.y/d),j=Math.PI/2-2*Math.atan(S),H=0,K=.1,Y;H<15&&Math.abs(K)>1e-7;H++)Y=v*Math.sin(j),Y=Math.pow((1-Y)/(1+Y),v/2),K=Math.PI/2-2*Math.atan(S*Y)-j,j+=K;return new Ee(j*l,s.x*l/d)}},Ii={__proto__:null,LonLat:ri,Mercator:Wn,SphericalMercator:$e},ra=r({},nn,{code:"EPSG:3395",projection:Wn,transformation:function(){var s=.5/(Math.PI*Wn.R);return sn(s,.5,-s,.5)}()}),sa=r({},nn,{code:"EPSG:4326",projection:ri,transformation:sn(1/180,1,-1/180,.5)}),gk=r({},gt,{projection:ri,transformation:sn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});gt.Earth=nn,gt.EPSG3395=ra,gt.EPSG3857=on,gt.EPSG900913=Ms,gt.EPSG4326=sa,gt.Simple=gk;var si=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?A(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oa=si.extend({initialize:function(s,l){C(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),yk=function(s,l){return new oa(s,l)},rr=oa.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),oa.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),oa.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new We;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),_k=function(s,l){return new rr(s,l)},aa=ke.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=Q(p),S=Q(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),S&&(s.style.marginLeft=-S.x+"px",s.style.marginTop=-S.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function vk(s){return new aa(s)}var ql=aa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ql.imagePath!="string"&&(ql.imagePath=this._detectIconPath()),(this.options.imagePath||ql.imagePath)+aa.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var S=p.exec(d);return S&&S[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),l=Mr(s,"background-image")||Mr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),a0=Cn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ii(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,S=tr(l._icon),j=d.getPixelBounds(),H=d.getPixelOrigin(),K=xe(j.min._subtract(H).add(v),j.max._subtract(H).subtract(v));if(!K.contains(S)){var Y=Q((Math.max(K.max.x,S.x)-K.max.x)/(j.max.x-K.max.x)-(Math.min(K.min.x,S.x)-K.min.x)/(j.min.x-K.min.x),(Math.max(K.max.y,S.y)-K.max.y)/(j.max.y-K.max.y)-(Math.min(K.min.y,S.y)-K.min.y)/(j.min.y-K.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),ot(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=tr(l._icon),v=l._map.layerPointToLatLng(p);d&&ot(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ch=si.extend({options:{icon:new ql,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){C(this,l),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),S=!1;v!==this._shadow&&(this._removeShadow(),S=!0),v&&(se(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&S&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),a0)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new a0(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&gn(this._icon,s),this._shadow&&gn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?Q(l.iconSize):Q(0,0),p=l.iconAnchor?Q(l.iconAnchor):Q(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function wk(s,l){return new ch(s,l)}var jr=si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hh=jr.extend({options:{fill:!0,radius:10},initialize:function(s,l){C(this,l),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return jr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new he(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tk(s,l){return new hh(s,l)}var Lp=hh.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),C(this,l),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new We(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:jr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===nn.distance){var v=Math.PI/180,S=this._mRadius/nn.R/v,j=d.project([l+S,s]),H=d.project([l-S,s]),K=j.add(H).divideBy(2),Y=d.unproject(K).lat,ne=Math.acos((Math.cos(S*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(ne)||ne===0)&&(ne=S/Math.cos(Math.PI/180*l)),this._point=K.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:K.x-d.project([Y,s-ne]).x,this._radiusY=K.y-j.y}else{var pe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(pe).x}this._updateBounds()}});function xk(s,l,d){return new Lp(s,l,d)}var sr=jr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){C(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=_e,v,S,j=0,H=this._parts.length;j<H;j++)for(var K=this._parts[j],Y=1,ne=K.length;Y<ne;Y++){v=K[Y-1],S=K[Y];var pe=p(s,v,S,!0);pe<l&&(l=pe,d=p(s,v,S))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ht(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=fe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new We,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Oe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Oe(s),p=0,v=s.length;p<v;p++)d?(l[p]=fe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ee,v=s.length,S,j;if(p){for(j=[],S=0;S<v;S++)j[S]=this._map.latLngToLayerPoint(s[S]),d.extend(j[S]);l.push(j)}else for(S=0;S<v;S++)this._projectLatlngs(s[S],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,S,j,H,K;for(d=0,v=0,S=this._rings.length;d<S;d++)for(K=this._rings[d],p=0,j=K.length;p<j-1;p++)H=b(K[p],K[p+1],s,p,!0),H&&(l[v]=l[v]||[],l[v].push(H[0]),(H[1]!==K[p+1]||p===j-2)&&(l[v].push(H[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Wt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,S,j,H,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,S=this._parts.length;d<S;d++)for(H=this._parts[d],p=0,j=H.length,v=j-1;p<j;v=p++)if(!(!l&&p===0)&&$l(s,H[v],H[p])<=K)return!0;return!1}});function Ek(s,l){return new sr(s,l)}sr._flat=je;var la=sr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=sr.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){sr.prototype._setLatLngs.call(this,s),Oe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new he(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,S;p<v;p++)S=Hl(this._rings[p],s,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,S,j,H,K,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(S=0,K=this._parts.length;S<K;S++)for(d=this._parts[S],j=0,Y=d.length,H=Y-1;j<Y;H=j++)p=d[j],v=d[H],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||sr.prototype._containsPoint.call(this,s,!0)}});function Sk(s,l){return new la(s,l)}var or=rr.extend({initialize:function(s,l){C(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=A(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var S=this.options;if(S.filter&&!S.filter(s))return this;var j=dh(s,S);return j?(j.feature=mh(s),j.defaultOptions=j.options,this.resetStyle(j),S.onEachFeature&&S.onEachFeature(s,j),this.addLayer(j)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function dh(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],S=l&&l.pointToLayer,j=l&&l.coordsToLatLng||Mp,H,K,Y,ne;if(!p&&!d)return null;switch(d.type){case"Point":return H=j(p),l0(S,s,H,l);case"MultiPoint":for(Y=0,ne=p.length;Y<ne;Y++)H=j(p[Y]),v.push(l0(S,s,H,l));return new rr(v);case"LineString":case"MultiLineString":return K=fh(p,d.type==="LineString"?0:1,j),new sr(K,l);case"Polygon":case"MultiPolygon":return K=fh(p,d.type==="Polygon"?1:2,j),new la(K,l);case"GeometryCollection":for(Y=0,ne=d.geometries.length;Y<ne;Y++){var pe=dh({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);pe&&v.push(pe)}return new rr(v);case"FeatureCollection":for(Y=0,ne=d.features.length;Y<ne;Y++){var Pe=dh(d.features[Y],l);Pe&&v.push(Pe)}return new rr(v);default:throw new Error("Invalid GeoJSON object.")}}function l0(s,l,d,p){return s?s(l,d):new ch(d,p&&p.markersInheritOptions&&p)}function Mp(s){return new Ee(s[1],s[0],s[2])}function fh(s,l,d){for(var p=[],v=0,S=s.length,j;v<S;v++)j=l?fh(s[v],l-1,d):(d||Mp)(s[v]),p.push(j);return p}function Dp(s,l){return s=fe(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function ph(s,l,d,p){for(var v=[],S=0,j=s.length;S<j;S++)v.push(l?ph(s[S],Oe(s[S])?0:l-1,d,p):Dp(s[S],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function ua(s,l){return s.feature?r({},s.feature,{geometry:l}):mh(l)}function mh(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Op={toGeoJSON:function(s){return ua(this,{type:"Point",coordinates:Dp(this.getLatLng(),s)})}};ch.include(Op),Lp.include(Op),hh.include(Op),sr.include({toGeoJSON:function(s){var l=!Oe(this._latlngs),d=ph(this._latlngs,l?1:0,!1,s);return ua(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),la.include({toGeoJSON:function(s){var l=!Oe(this._latlngs),d=l&&!Oe(this._latlngs[0]),p=ph(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),ua(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),oa.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),ua(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var S=v.toGeoJSON(s);if(d)p.push(S.geometry);else{var j=mh(S);j.type==="FeatureCollection"?p.push.apply(p,j.features):p.push(j)}}}),d?ua(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function u0(s,l){return new or(s,l)}var Pk=u0,gh=si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Re(l),C(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Un(this._image),this},bringToBack:function(){return this._map&&zn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Re(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ne("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;er(this._image,d,l)},_reset:function(){var s=this._image,l=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ot(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){gn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Ik=function(s,l,d){return new gh(s,l,d)},c0=gh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ne("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var j=Ne("source");j.src=this._url[S],l.appendChild(j)}}});function Ck(s,l,d){return new c0(s,l,d)}var h0=gh.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function Ak(s,l,d){return new h0(s,l,d)}var Ci=si.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||A(s))?(this._latlng=fe(s),C(this,l)):(C(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&gn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&gn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(gn(this._container,0),this._removeTimeout=setTimeout(a(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Un(this._container),this},bringToBack:function(){return this._map&&zn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof rr){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=Q(this.options.offset),d=this._getAnchor();this._zoomAnimated?ot(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),si.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(C(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var yh=Ci.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ci.prototype.openOn.call(this,s)},onAdd:function(s){Ci.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof jr||this._source.on("preclick",Ve))},onRemove:function(s){Ci.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof jr||this._source.off("preclick",Ve))},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ne("div",s+"-content-wrapper",l);if(this._contentNode=Ne("div",s+"-content",d),Gs(l),Dl(this._contentNode),ye(l,"contextmenu",Ve),this._tipContainer=Ne("div",s+"-tip-container",l),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ne("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(v){yt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,S="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",se(s,S)):qe(s,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ot(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Mr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new G(this._containerLeft,-d-this._containerBottom);v._add(tr(this._container));var S=s.layerPointToContainerPoint(v),j=Q(this.options.autoPanPadding),H=Q(this.options.autoPanPaddingTopLeft||j),K=Q(this.options.autoPanPaddingBottomRight||j),Y=s.getSize(),ne=0,pe=0;S.x+p+K.x>Y.x&&(ne=S.x+p-Y.x+K.x),S.x-ne-H.x<0&&(ne=S.x-H.x),S.y+d+K.y>Y.y&&(pe=S.y+d-Y.y+K.y),S.y-pe-H.y<0&&(pe=S.y-H.y),(ne||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,pe]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bk=function(s,l){return new yh(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,d){return this._initOverlay(yh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),si.include({bindPopup:function(s,l){return this._popup=this._initOverlay(yh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof rr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){xi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof jr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var _h=Ci.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ci.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ci.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,S=p.latLngToContainerPoint(p.getCenter()),j=p.layerPointToContainerPoint(s),H=this.options.direction,K=v.offsetWidth,Y=v.offsetHeight,ne=Q(this.options.offset),pe=this._getAnchor();H==="top"?(l=K/2,d=Y):H==="bottom"?(l=K/2,d=0):H==="center"?(l=K/2,d=Y/2):H==="right"?(l=0,d=Y/2):H==="left"?(l=K,d=Y/2):j.x<S.x?(H="right",l=0,d=Y/2):(H="left",l=K+(ne.x+pe.x)*2,d=Y/2),s=s.subtract(Q(l,d,!0)).add(ne).add(pe),qe(v,"leaflet-tooltip-right"),qe(v,"leaflet-tooltip-left"),qe(v,"leaflet-tooltip-top"),qe(v,"leaflet-tooltip-bottom"),se(v,"leaflet-tooltip-"+H),ot(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&gn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kk=function(s,l){return new _h(s,l)};Se.include({openTooltip:function(s,l,d){return this._initOverlay(_h,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),si.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_h,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof rr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ye(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var d0=aa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(an(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=Q(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Rk(s){return new d0(s)}aa.Default=ql;var Gl=si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),De(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,S;p<v;p++)S=l[p].style.zIndex,l[p]!==this._container&&S&&(d=s(d,+S));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){gn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var S=Math.min(1,(s-v.loaded)/200);gn(v.el,S),S<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(De(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)De(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),S=Math.floor(l/2),j=d-1,H=new G(+v,+S);H.z=+j;var K=this._tileCoordsToKey(H),Y=this._tiles[K];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),j>p?this._retainParent(v,S,j,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var S=2*l;S<2*l+2;S++){var j=new G(v,S);j.z=d+1;var H=this._tileCoordsToKey(j),K=this._tiles[H];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);d+1<p&&this._retainChildren(v,S,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var S=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||S)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ae.any3d?er(s.el,v,p):ot(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),S=l.getSize().divideBy(p*2);return new he(v.subtract(S),v.add(S))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),S=v.getCenter(),j=[],H=this.options.keepBuffer,K=new he(v.getBottomLeft().subtract([H,-H]),v.getTopRight().add([H,-H]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ne=this._tiles[Y].coords;(ne.z!==this._tileZoom||!K.contains(new G(ne.x,ne.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var pe=v.min.y;pe<=v.max.y;pe++)for(var Pe=v.min.x;Pe<=v.max.x;Pe++){var un=new G(Pe,pe);if(un.z=this._tileZoom,!!this._isValidTile(un)){var Nt=this._tiles[this._tileCoordsToKey(un)];Nt?Nt.current=!0:j.push(un)}}if(j.sort(function(_n,ha){return _n.distanceTo(S)-ha.distanceTo(S)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $n=document.createDocumentFragment();for(Pe=0;Pe<j.length;Pe++)this._addTile(j[Pe],$n);this._level.el.appendChild($n)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Re(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),S=l.unproject(p,s.z),j=l.unproject(v,s.z);return[S,j]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new We(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(De(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ae.ielt9&&this.options.opacity<1&&gn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,s,null,v)),ot(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(gn(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new he(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Nk(s){return new Gl(s)}var ca=Gl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=C(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return ye(d,"load",a(this._tileOnLoad,this,l,d)),ye(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return x(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ae.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=z;var d=this._tiles[s].coords;De(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",z),Gl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===z))return Gl.prototype._tileReady.call(this,s,l,d)}});function f0(s,l){return new ca(s,l)}var p0=ca.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=C(this,l);var v=l.detectRetina&&ae.retina?2:1,S=this.getTileSize();d.width=S.x*v,d.height=S.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ca.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=xe(d.project(l[0]),d.project(l[1])),v=p.min,S=p.max,j=(this._wmsVersion>=1.3&&this._crs===sa?[v.y,v.x,S.y,S.x]:[v.x,v.y,S.x,S.y]).join(","),H=ca.prototype.getTileUrl.call(this,s);return H+N(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function Lk(s,l){return new p0(s,l)}ca.WMS=p0,f0.wms=Lk;var ar=si.extend({options:{padding:.1},initialize:function(s){C(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),S=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));ae.any3d?er(this._container,S,d):ot(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new he(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),m0=ar.extend({options:{tolerance:0},getEvents:function(){var s=ar.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,De(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ae.retina?2:1;ot(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,S,j=s._parts,H=j.length,K=this._ctx;if(H){for(K.beginPath(),d=0;d<H;d++){for(p=0,v=j[d].length;p<v;p++)S=j[d][p],K[p?"lineTo":"moveTo"](S.x,S.y);l&&K.closePath()}this._fillStroke(K,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(qe(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function g0(s){return ae.canvas?new m0(s):null}var Kl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Mk={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ar.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Kl("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Kl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;De(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Kl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=A(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Kl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Un(s._container)},_bringToBack:function(s){zn(s._container)}},vh=ae.vml?Kl:Vo,Zl=ar.extend({_initContainer:function(){this._container=vh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ot(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=vh("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){De(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,jo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",S=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,S)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Un(s._path)},_bringToBack:function(s){zn(s._path)}});ae.vml&&Zl.include(Mk);function y0(s){return ae.svg||ae.vml?new Zl(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&g0(s)||y0(s)}});var _0=la.extend({initialize:function(s,l){la.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Re(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Dk(s,l){return new _0(s,l)}Zl.create=vh,Zl.pointsToPath=jo,or.geometryToLayer=dh,or.coordsToLatLng=Mp,or.coordsToLatLngs=fh,or.latLngToCoords=Dp,or.latLngsToCoords=ph,or.getFeature=ua,or.asFeature=mh,Se.mergeOptions({boxZoom:!0});var v0=Cn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),Zo(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new he(this._point,this._startPoint),d=l.getSize();ot(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(De(this._box),qe(this._container,"leaflet-crosshair")),In(),Yo(),ze(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new We(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",v0),Se.mergeOptions({doubleClickZoom:!0});var w0=Cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Se.addInitHook("addHandler","doubleClickZoom",w0),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var T0=Cn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ii(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qe(this._map._container,"leaflet-grab"),qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Re(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,S=(p+l+d)%s-l-d,j=Math.abs(v+d)<Math.abs(S+d)?v:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,H=v.multiplyBy(j/S),K=H.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,K),ne=H.multiplyBy(Y/K),pe=Y/(d.inertiaDeceleration*j),Pe=ne.multiplyBy(-pe/2).round();!Pe.x&&!Pe.y?l.fire("moveend"):(Pe=l._limitOffset(Pe,l.options.maxBounds),V(function(){l.panBy(Pe,{duration:pe,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",T0),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var x0=Cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=Q(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(Q(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;xi(s)}}});Se.addInitHook("addHandler","keyboard",x0),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var E0=Cn.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Vl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),xi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,S=d?Math.ceil(v/d)*d:v,j=s._limitZoom(l+(this._delta>0?S:-S))-l;this._delta=0,this._startTime=null,j&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+j):s.setZoomAround(this._lastMousePos,l+j))}});Se.addInitHook("addHandler","scrollWheelZoom",E0);var Ok=600;Se.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var S0=Cn.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",yt),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Ok),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",yt),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Se.addInitHook("addHandler","tapHold",S0),Se.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var P0=Cn.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qe(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),yt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var S=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&S.x===0&&S.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var j=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(j,this,!0),yt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",P0),Se.BoxZoom=v0,Se.DoubleClickZoom=w0,Se.Drag=T0,Se.Keyboard=x0,Se.ScrollWheelZoom=E0,Se.TapHold=S0,Se.TouchZoom=P0,n.Bounds=he,n.Browser=ae,n.CRS=gt,n.Canvas=m0,n.Circle=Lp,n.CircleMarker=hh,n.Class=ke,n.Control=yn,n.DivIcon=d0,n.DivOverlay=Ci,n.DomEvent=Zs,n.DomUtil=Np,n.Draggable=ii,n.Evented=J,n.FeatureGroup=rr,n.GeoJSON=or,n.GridLayer=Gl,n.Handler=Cn,n.Icon=aa,n.ImageOverlay=gh,n.LatLng=Ee,n.LatLngBounds=We,n.Layer=si,n.LayerGroup=oa,n.LineUtil=Hn,n.Map=Se,n.Marker=ch,n.Mixin=lh,n.Path=jr,n.Point=G,n.PolyUtil=ia,n.Polygon=la,n.Polyline=sr,n.Popup=yh,n.PosAnimation=Fl,n.Projection=Ii,n.Rectangle=_0,n.Renderer=ar,n.SVG=Zl,n.SVGOverlay=h0,n.TileLayer=ca,n.Tooltip=_h,n.Transformation=rn,n.Util=O,n.VideoOverlay=c0,n.bind=a,n.bounds=xe,n.canvas=g0,n.circle=xk,n.circleMarker=Tk,n.control=Si,n.divIcon=Rk,n.extend=r,n.featureGroup=_k,n.geoJSON=u0,n.geoJson=Pk,n.gridLayer=Nk,n.icon=vk,n.imageOverlay=Ik,n.latLng=fe,n.latLngBounds=Re,n.layerGroup=yk,n.map=Jo,n.marker=wk,n.point=Q,n.polygon=Sk,n.polyline=Ek,n.popup=bk,n.rectangle=Dk,n.setOptions=C,n.stamp=c,n.svg=y0,n.svgOverlay=Ak,n.tileLayer=f0,n.tooltip=kk,n.transformation=sn,n.version=i,n.videoOverlay=Ck;var Vk=window.L;n.noConflict=function(){return window.L=Vk,this},window.L=n})})(Jg,Jg.exports);var _l=Jg.exports;const Jf=cE(_l);function ep(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function tp(t,e){return e==null?function(i,r){const o=W.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=W.useRef();o.current||(o.current=t(i,r));const a=W.useRef(i),{instance:u}=o.current;return W.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function mC(t,e){W.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function gC(t){return function(n){const i=Xf(),r=t(Qf(n,i),i);return cC(i.map,n.attribution),uv(r.current,n.eventHandlers),mC(r.current,i),r}}function j3(t,e){const n=W.useRef();W.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function F3(t){return function(n){const i=Xf(),r=t(Qf(n,i),i);return uv(r.current,n.eventHandlers),mC(r.current,i),j3(r.current,n),r}}function U3(t,e){const n=tp(t,e),i=gC(n);return pC(i)}function z3(t,e){const n=tp(t),i=V3(n,e);return D3(i)}function B3(t,e){const n=tp(t,e),i=F3(n);return pC(i)}function H3(t,e){const n=tp(t,e),i=gC(n);return O3(i)}function W3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function $3(){return Xf().map}function ey(){return ey=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ey.apply(this,arguments)}function q3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...m},g){const[_]=W.useState({className:r,id:o,style:u}),[E,k]=W.useState(null);W.useImperativeHandle(g,()=>(E==null?void 0:E.map)??null,[E]);const C=W.useCallback(P=>{if(P!==null&&E===null){const x=new _l.Map(P,m);n!=null&&f!=null?x.setView(n,f):t!=null&&x.fitBounds(t,e),c!=null&&x.whenReady(c),k(M3(x))}},[]);W.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const N=E?Cd.createElement(fC,{value:E},i):a??null;return Cd.createElement("div",ey({},_,{ref:C}),N)}const G3=W.forwardRef(q3),K3=U3(function({position:e,...n},i){const r=new _l.Marker(e,n);return ep(r,hC(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Z3=B3(function({positions:e,...n},i){const r=new _l.Polyline(e,n);return ep(r,hC(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),Y3=z3(function(e,n){const i=new _l.Popup(e,n.overlayContainer);return ep(i,n)},function(e,n,{position:i},r){W.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function c(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:c}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),X3=H3(function({url:e,...n},i){const r=new _l.TileLayer(e,Qf(n,i));return ep(r,i)},function(e,n,i){W3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),Q3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",J3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function yC(t,e,n,i){const o=es(n-t),a=es(i-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(es(t))*Math.cos(es(n))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function es(t){return t*(Math.PI/180)}function fT(t){return t*(180/Math.PI)}function ej(t,e,n=100){const[i,r]=t,[o,a]=e;if(yC(i,r,o,a)<500)return[t,e];const c=[],f=es(i),m=es(r),g=es(o),_=es(a),E=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-g)/2),2)+Math.cos(f)*Math.cos(g)*Math.pow(Math.sin((m-_)/2),2)));let k=t[1];for(let C=0;C<=n;C++){const N=C/n,P=Math.sin((1-N)*E)/Math.sin(E),x=Math.sin(N*E)/Math.sin(E),A=P*Math.cos(f)*Math.cos(m)+x*Math.cos(g)*Math.cos(_),F=P*Math.cos(f)*Math.sin(m)+x*Math.cos(g)*Math.sin(_),z=P*Math.sin(f)+x*Math.sin(g),$=Math.atan2(z,Math.sqrt(A*A+F*F));let R=Math.atan2(F,A),I=fT(R);const M=I-k;M<-180?I+=360:M>180&&(I-=360),c.push([fT($),I]),k=I}return c}let _C=Jf.icon({iconUrl:Q3,shadowUrl:J3,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Jf.Marker.prototype.options.icon=_C;const tj=({coords:t})=>{const e=$3();return W.useEffect(()=>{if(t.length>0){const n=Jf.latLngBounds(t);e.fitBounds(n,{padding:[50,50]})}},[t,e]),null},vC=({activities:t,className:e="h-[300px] w-full rounded-xl overflow-hidden",highlightedActivityId:n})=>{const i=t.filter(a=>a.coordinates&&a.coordinates.lng<0),r=[];if(i.length>0){const a=i[0].coordinates;r.push([a.lat,a.lng]);for(let u=0;u<i.length-1;u++){const c=i[u].coordinates,f=i[u+1].coordinates;if(yC(c.lat,c.lng,f.lat,f.lng)>500){const g=ej([c.lat,c.lng],[f.lat,f.lng]);r.push(...g.slice(1))}else r.push([f.lat,f.lng])}}if(i.length===0)return w.jsxs("div",{className:`${e} bg-gray-100 flex items-center justify-center text-gray-400 flex-col gap-2`,children:[w.jsx(Dg,{className:"w-8 h-8 opacity-50"}),w.jsx("span",{className:"text-sm",children:""})]});const o=i.length>0?[i[0].coordinates.lat,i[0].coordinates.lng]:[37.7749,-122.4194];return w.jsx("div",{className:e,children:w.jsxs(G3,{center:o,zoom:13,scrollWheelZoom:!1,className:"h-full w-full z-0",children:[w.jsx(X3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.map((a,u)=>{const c=n&&a.id===n,f=c?Jf.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[30,48],iconAnchor:[15,48],popupAnchor:[1,-34],shadowSize:[41,41]}):_C;return w.jsx(K3,{position:[a.coordinates.lat,a.coordinates.lng],icon:f,zIndexOffset:c?1e3:0,children:w.jsx(Y3,{children:w.jsxs("div",{className:"font-sans",children:[w.jsx("div",{className:"font-bold text-indigo-600",children:a.time}),w.jsx("div",{className:"font-medium",children:a.title}),w.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.location}),w.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${a.coordinates.lat},${a.coordinates.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-blue-500 mt-2 hover:underline",children:[w.jsx(FN,{className:"w-3 h-3"}),"Google Maps "]})]})})},u)}),r.length>1&&w.jsx(Z3,{positions:r,color:"#4f46e5",weight:3,opacity:.7,dashArray:"5, 10"}),w.jsx(tj,{coords:r})]})})};function wC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=wC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Mi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=wC(t))&&(i&&(i+=" "),i+=e);return i}function nj({day:t,isExpanded:e,onToggle:n,isEditing:i,onAddActivity:r,onUpdateActivity:o,onRemoveActivity:a,onActivityFocus:u}){const[c,f]=W.useState(!1);return w.jsxs("div",{className:Mi("polaroid-card mb-8 relative",e?"z-20 scale-105 rotate-0":"hover:z-10"),children:[w.jsx("div",{className:"washi-tape",style:{transform:`translateX(-50%) rotate(${Math.random()*4-2}deg)`,backgroundColor:t.city==="SF"?"rgba(255, 154, 158, 0.6)":"rgba(162, 217, 255, 0.6)"}}),w.jsxs("div",{onClick:n,className:"cursor-pointer flex items-start justify-between group select-none",children:[w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b-2 border-gray-100 pb-2",children:[w.jsx("span",{className:"font-hand text-xl font-bold text-gray-500 transform -rotate-2",children:t.date}),w.jsx("div",{className:"flex-1"}),w.jsx("span",{className:"text-xs font-bold tracking-widest uppercase bg-gray-800 text-white px-2 py-1 transform rotate-1",children:t.cityLabel})]}),w.jsx("h3",{className:"text-2xl font-heading font-bold text-gray-800 mb-2 leading-tight",children:t.title}),w.jsx("p",{className:"font-hand text-lg text-gray-500 leading-snug",children:t.summary})]}),w.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[w.jsx("button",{onClick:m=>{m.stopPropagation(),f(!c)},className:`p-2 rounded-full border-2 transition-all lg:hidden ${c?"border-gray-800 text-gray-800 bg-gray-100":"border-gray-200 text-gray-400 hover:border-gray-400"}`,title:c?"List View":"Map View",children:c?w.jsx(LN,{size:18}):w.jsx(SP,{size:18})}),w.jsx("div",{className:Mi("p-2 text-gray-300 transition-transform duration-300",e&&"rotate-180 text-gray-800"),children:w.jsx(CN,{size:20})})]})]}),e&&w.jsx("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-gray-200",children:w.jsxs("div",{className:"bg-[var(--paper-bg)] p-4 rounded border border-gray-100 shadow-inner",children:[c?w.jsx(vC,{activities:t.activities}):w.jsxs("div",{className:"space-y-4 relative",children:[w.jsx("div",{className:"absolute left-4 top-2 bottom-2 w-0.5 bg-gray-200 border-l border-dashed border-gray-300"}),t.activities.map((m,g)=>w.jsx(N3,{id:`${t.id}-${g}`,activity:m,isLast:g===t.activities.length-1,isEditing:i,onEdit:()=>o==null?void 0:o(g,m),onDelete:()=>a==null?void 0:a(g),onFocus:u},g))]}),i&&w.jsxs("button",{onClick:r,className:"mt-6 w-full py-3 border-2 border-dashed border-gray-300 rounded text-gray-500 font-heading font-bold hover:border-gray-800 hover:text-gray-800 transition-colors flex items-center justify-center gap-2 group",children:[w.jsx(Wf,{size:18,className:"group-hover:rotate-90 transition-transform"}),"Add New Memory"]})]})})]})}const Sm=[{id:"day1",date:"2026/05/20 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"14:00 (TPE)",title:"",description:"",type:"flight",iconName:"Plane",coordinates:{lat:25.0797,lng:121.2342}},{time:"16:30 (TPE)",title:"",description:" JX012  ()",type:"flight",iconName:"Plane"},{time:"12:30 (SFO)",title:" SFO ",description:"",type:"transport",iconName:"MapPin",tips:" 1.5-2 ",coordinates:{lat:37.6213,lng:-122.379}},{time:"14:30",title:"",description:" BART ()  Powell St.  Uber/Lyft",type:"transport",iconName:"Train",tips:" Union SquareBART "},{time:"16:00",title:" Check-in & ",description:"",type:"hotel",iconName:"Moon"},{time:"18:00",title:"",description:" Ferry Building Marketplace ",type:"food",iconName:"Utensils",location:"1 Ferry Building, San Francisco",coordinates:{lat:37.7955,lng:-122.3937}}]},{id:"day2",date:"2026/05/21 ()",city:"SF",cityLabel:"/",title:"Apple Park",summary:" Apple ParkGoogle ",activities:[{time:"08:30",title:"",description:" (Turo  Hertz) Cupertino",type:"transport",iconName:"Car",tips:" 50 "},{time:"10:00",title:"Apple Park Visitor Center",description:"AR ",type:"sightseeing",iconName:"MapPin",location:"10600 N Tantau Ave, Cupertino",tips:" T-shirt",coordinates:{lat:37.3349,lng:-122.009}},{time:"12:30",title:"",description:" Main Street Cupertino ",type:"food",iconName:"Utensils"},{time:"14:00",title:"Googleplex & Android Statues",description:" Mountain View  Google ",type:"sightseeing",iconName:"Camera",location:"1600 Amphitheatre Pkwy, Mountain View",coordinates:{lat:37.422,lng:-122.0841}},{time:"16:00",title:"",description:" Main QuadHoover Tower ",type:"sightseeing",iconName:"Briefcase",tips:" Tresidder Parking Lot",coordinates:{lat:37.4275,lng:-122.1697}},{time:"19:00",title:"",description:" Palo Alto ",type:"transport",iconName:"Car"}]},{id:"day3",date:"2026/05/22 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (Golden Gate Bridge)",description:" Welcome Center",type:"sightseeing",iconName:"Camera",tips:" Uber  Battery Spencer",coordinates:{lat:37.8199,lng:-122.4783}},{time:"11:30",title:" (Palace of Fine Arts)",description:"",type:"sightseeing",iconName:"Camera",coordinates:{lat:37.8029,lng:-122.4484}},{time:"14:00",title:" (Lombard Street)",description:"",type:"sightseeing",iconName:"MapPin",tips:" Uber  (Hyde St)",coordinates:{lat:37.8021,lng:-122.4187}},{time:"16:00",title:"",description:" Westfield ",type:"other",iconName:"Coffee"}]},{id:"day4",date:"2026/05/23 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"09:30",title:" (Alcatraz) ",description:" 33 ",type:"sightseeing",iconName:"MapPin",tips:" 90 ",coordinates:{lat:37.827,lng:-122.423}},{time:"13:00",title:"39  (Pier 39)",description:" Boudin ",type:"food",iconName:"Utensils",coordinates:{lat:37.8087,lng:-122.4098}},{time:"15:00",title:"",description:" Musee Mecanique ()",type:"sightseeing",iconName:"Camera"}]},{id:"day5",date:"2026/05/24 ()",city:"SF",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" Sausalito",description:" Ferry Building  Golden Gate Ferry",type:"transport",iconName:"Plane"},{time:"10:30",title:"Sausalito ",description:"",type:"sightseeing",iconName:"Sun",coordinates:{lat:37.8591,lng:-122.4853}},{time:"14:00",title:"",description:" Powell-Hyde ",type:"sightseeing",iconName:"Train",tips:""}]},{id:"day6",date:"2026/05/25 ()",city:"SLC",cityLabel:"",title:"",summary:" ACSM ",activities:[{time:"09:00",title:" SFO ",description:"Check-out Uber/BART ",type:"transport",iconName:"Plane"},{time:"12:00",title:" (SLC)",description:" (Delta/United/Southwest) 2 ",type:"flight",iconName:"Plane"},{time:"15:30",title:" SLC & ",description:" TRAX  () ",type:"transport",iconName:"Train",tips:"",coordinates:{lat:40.7899,lng:-111.9791}},{time:"17:00",title:" Check-in",description:" Salt Palace Convention Center ",type:"hotel",iconName:"Moon"}]},{id:"day7",date:"2026/05/26 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 1",summary:"",activities:[{time:"08:00",title:"",description:" Salt Palace Convention Center ",type:"conference",iconName:"Briefcase",coordinates:{lat:40.767,lng:-111.8965}},{time:"09:00",title:" & ",description:"",type:"conference",iconName:"Briefcase"},{time:"17:00",title:" (Temple Square)",description:"",type:"sightseeing",iconName:"Camera"},{time:"19:00",title:"City Creek Center ",description:"",type:"food",iconName:"Utensils"}]},{id:"day8",date:"2026/05/27 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 2",summary:"",activities:[{time:"08:30",title:"",description:" (Poster Session) ",type:"conference",iconName:"Briefcase"},{time:"12:00",title:"",description:"",type:"food",iconName:"Coffee"},{time:"18:00",title:"",description:" Uber  Utah State Capitol ",type:"sightseeing",iconName:"Camera",tips:"",coordinates:{lat:40.7774,lng:-111.8882}}]},{id:"day9",date:"2026/05/28 ()",city:"SLC",cityLabel:"",title:"ACSM  Day 3",summary:"",activities:[{time:"09:00",title:"",description:"",type:"conference",iconName:"Briefcase"},{time:"19:00",title:" (Gala) ",description:" Red Iguana ",type:"food",iconName:"Utensils",tips:"Red Iguana "}]},{id:"day10",date:"2026/05/29 ()",city:"SLC",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:"",description:" (Expo)",type:"conference",iconName:"Briefcase"},{time:"14:00",title:"",description:" The Leonardo ",type:"sightseeing",iconName:"Camera"},{time:"18:00",title:"",description:"",type:"hotel",iconName:"CheckSquare"}]},{id:"day11",date:"2026/05/30 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" SLC ",description:" TRAX ",type:"transport",iconName:"Train"},{time:"11:00",title:" (SAN)",description:" Delta/Southwest 2 ",type:"flight",iconName:"Plane"},{time:"13:00",title:" SAN",description:" Uber  992 ",type:"transport",iconName:"MapPin",tips:" Downtown  Little Italy ",coordinates:{lat:32.7338,lng:-117.1933}},{time:"18:00",title:"Gaslamp Quarter",description:"",type:"food",iconName:"Utensils",coordinates:{lat:32.7114,lng:-117.1599}}]},{id:"day12",date:"2026/05/31 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"09:00",title:" (San Diego Zoo)",description:" (Skyfari)",type:"sightseeing",iconName:"Camera",location:"2920 Zoo Dr, San Diego",tips:"",coordinates:{lat:32.7353,lng:-117.149}},{time:"14:00",title:" (Balboa Park)",description:"",type:"sightseeing",iconName:"Sun"},{time:"18:00",title:"Little Italy ",description:"",type:"food",iconName:"Utensils"}]},{id:"day13",date:"2026/06/01 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (USS Midway)",description:"",type:"sightseeing",iconName:"Briefcase",tips:"",coordinates:{lat:32.7137,lng:-117.1751}},{time:"13:00",title:"",description:"",type:"sightseeing",iconName:"Camera"},{time:"14:00",title:"Seaport Village",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day14",date:"2026/06/02 ()",city:"SAN",cityLabel:"",title:"",summary:" La Jolla ",activities:[{time:"14:00",title:" La Jolla",description:" Uber/Lyft  ( 20-30 )",type:"transport",iconName:"Car"},{time:"15:00",title:"La Jolla Cove",description:" ()",type:"sightseeing",iconName:"Camera"},{time:"18:30",title:"",description:"",type:"sightseeing",iconName:"Sun"}]},{id:"day15",date:"2026/06/03 ()",city:"SAN",cityLabel:"",title:"",summary:"",activities:[{time:"10:00",title:" (Coronado)",description:" Hotel del Coronado",type:"sightseeing",iconName:"Sun",tips:"",coordinates:{lat:32.6859,lng:-117.1831}},{time:"14:00",title:"Old Town San Diego",description:"",type:"sightseeing",iconName:"MapPin",coordinates:{lat:32.7549,lng:-117.1978}},{time:"18:00",title:"",description:" Old Town  Taco  Margarita",type:"food",iconName:"Utensils"}]},{id:"day16",date:"2026/06/04 ()",city:"LA",cityLabel:"",title:" LAX ",summary:"",activities:[{time:"10:00",title:" & ",description:"",type:"hotel",iconName:"Coffee"},{time:"13:00",title:" (LAX)",description:" (One-way rental)  LAX",type:"transport",iconName:"Car",tips:" 2.5-3  5 "},{time:"20:30",title:" LAX ",description:" Tom Bradley  (TBIT) ",type:"flight",iconName:"Plane",tips:"",coordinates:{lat:33.9416,lng:-118.4085}},{time:"23:50",title:"",description:" JX001/JX005 ()",type:"flight",iconName:"Plane"}]}],pT=["ESTA  ( 72 )","ACSM ","Apple Park Visitor Center "," (90)",""," eSIM"," ( 110V )"," ()",""],ij=()=>{};var mT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},rj=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},xC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;c||(E=64,a||(_=64)),i.push(n[m],n[g],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new sj;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oj=function(t){const e=TC(t);return xC.encodeByteArray(e,!0)},lf=function(t){return oj(t).replace(/\./g,"")},EC=function(t){try{return xC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=()=>aj().__FIREBASE_DEFAULTS__,uj=()=>{if(typeof process>"u"||typeof mT>"u")return;const t=mT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EC(t[1]);return e&&JSON.parse(e)},np=()=>{try{return ij()||lj()||uj()||cj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SC=t=>{var e,n;return(n=(e=np())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},PC=t=>{const e=SC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},IC=()=>{var t;return(t=np())==null?void 0:t.config},CC=t=>{var e;return(e=np())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lf(JSON.stringify(n)),lf(JSON.stringify(a)),""].join(".")}const Ru={};function dj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?t.emulator.push(e):t.prod.push(e);return t}function fj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gT=!1;function hv(t,e){if(typeof window>"u"||typeof document>"u"||!Rs(window.location.host)||Ru[t]===e||Ru[t]||gT)return;Ru[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=dj().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{gT=!0,a()},_}function m(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=fj(i),E=n("text"),k=document.getElementById(E)||document.createElement("span"),C=n("learnmore"),N=document.getElementById(C)||document.createElement("a"),P=n("preprendIcon"),x=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const A=_.element;u(A),m(N,C);const F=f();c(x,P),A.append(x,k,N,F),document.body.appendChild(A)}o?(k.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function mj(){var e;const t=(e=np())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _j(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vj(){const t=tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wj(){return!mj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tj(){try{return typeof indexedDB=="object"}catch{return!1}}function xj(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="FirebaseError";class Zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Ej,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Sj(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Zi(r,u,i)}}function Sj(t,e){return t.replace(Pj,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Pj=/\{\$([^}]+)}/g;function Ij(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(yT(o)&&yT(a)){if(!xo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function yT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Cj(t,e){const n=new Aj(t,e);return n.subscribe.bind(n)}class Aj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bj(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Pm),r.error===void 0&&(r.error=Pm),r.complete===void 0&&(r.complete=Pm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new hj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nj(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Rj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rj(t){return t===no?void 0:t}function Nj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const Mj={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Dj=Ce.INFO,Oj={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},Vj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Oj[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=Dj,this._logHandler=Vj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const jj=(t,e)=>e.some(n=>t instanceof n);let _T,vT;function Fj(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uj(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bC=new WeakMap,ty=new WeakMap,kC=new WeakMap,Im=new WeakMap,fv=new WeakMap;function zj(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(cs(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&bC.set(n,t)}).catch(()=>{}),fv.set(e,t),e}function Bj(t){if(ty.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});ty.set(t,e)}let ny={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Hj(t){ny=t(ny)}function Wj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cm(this),e,...n);return kC.set(i,e.sort?e.sort():[e]),cs(i)}:Uj().includes(t)?function(...e){return t.apply(Cm(this),e),cs(bC.get(this))}:function(...e){return cs(t.apply(Cm(this),e))}}function $j(t){return typeof t=="function"?Wj(t):(t instanceof IDBTransaction&&Bj(t),jj(t,Fj())?new Proxy(t,ny):t)}function cs(t){if(t instanceof IDBRequest)return zj(t);if(Im.has(t))return Im.get(t);const e=$j(t);return e!==t&&(Im.set(t,e),fv.set(e,t)),e}const Cm=t=>fv.get(t);function qj(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=cs(a);return i&&a.addEventListener("upgradeneeded",c=>{i(cs(a.result),c.oldVersion,c.newVersion,cs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const Gj=["get","getKey","getAll","getAllKeys","count"],Kj=["put","add","delete","clear"],Am=new Map;function wT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Kj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Gj.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return Am.set(e,o),o}Hj(t=>({...t,get:(e,n,i)=>wT(e,n)||t.get(e,n,i),has:(e,n)=>!!wT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Yj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iy="@firebase/app",TT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new dv("@firebase/app"),Xj="@firebase/app-compat",Qj="@firebase/analytics-compat",Jj="@firebase/analytics",eF="@firebase/app-check-compat",tF="@firebase/app-check",nF="@firebase/auth",iF="@firebase/auth-compat",rF="@firebase/database",sF="@firebase/data-connect",oF="@firebase/database-compat",aF="@firebase/functions",lF="@firebase/functions-compat",uF="@firebase/installations",cF="@firebase/installations-compat",hF="@firebase/messaging",dF="@firebase/messaging-compat",fF="@firebase/performance",pF="@firebase/performance-compat",mF="@firebase/remote-config",gF="@firebase/remote-config-compat",yF="@firebase/storage",_F="@firebase/storage-compat",vF="@firebase/firestore",wF="@firebase/ai",TF="@firebase/firestore-compat",xF="firebase",EF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",SF={[iy]:"fire-core",[Xj]:"fire-core-compat",[Jj]:"fire-analytics",[Qj]:"fire-analytics-compat",[tF]:"fire-app-check",[eF]:"fire-app-check-compat",[nF]:"fire-auth",[iF]:"fire-auth-compat",[rF]:"fire-rtdb",[sF]:"fire-data-connect",[oF]:"fire-rtdb-compat",[aF]:"fire-fn",[lF]:"fire-fn-compat",[uF]:"fire-iid",[cF]:"fire-iid-compat",[hF]:"fire-fcm",[dF]:"fire-fcm-compat",[fF]:"fire-perf",[pF]:"fire-perf-compat",[mF]:"fire-rc",[gF]:"fire-rc-compat",[yF]:"fire-gcs",[_F]:"fire-gcs-compat",[vF]:"fire-fst",[TF]:"fire-fst-compat",[wF]:"fire-vertex","fire-js":"fire-js",[xF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,PF=new Map,sy=new Map;function xT(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(sy.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,t);for(const n of uf.values())xT(n,t);for(const n of PF.values())xT(n,t);return!0}function ip(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new bc("app","Firebase",IF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=EF;function RC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ry,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw hs.create("bad-app-name",{appName:String(r)});if(n||(n=IC()),!n)throw hs.create("no-options");const o=uf.get(r);if(o){if(xo(n,o.options)&&xo(i,o.config))return o;throw hs.create("duplicate-app",{appName:r})}const a=new Lj(r);for(const c of sy.values())a.addComponent(c);const u=new CF(n,i,a);return uf.set(r,u),u}function pv(t=ry){const e=uf.get(t);if(!e&&t===ry&&IC())return RC();if(!e)throw hs.create("no-app",{appName:t});return e}function Ui(t,e,n){let i=SF[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}Eo(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="firebase-heartbeat-database",bF=1,uc="firebase-heartbeat-store";let bm=null;function NC(){return bm||(bm=qj(AF,bF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(t=>{throw hs.create("idb-open",{originalErrorMessage:t.message})})),bm}async function kF(t){try{const n=(await NC()).transaction(uc),i=await n.objectStore(uc).get(LC(t));return await n.done,i}catch(e){if(e instanceof Zi)Sr.warn(e.message);else{const n=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function ET(t,e){try{const i=(await NC()).transaction(uc,"readwrite");await i.objectStore(uc).put(e,LC(t)),await i.done}catch(n){if(n instanceof Zi)Sr.warn(n.message);else{const i=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(i.message)}}}function LC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=1024,NF=30;class LF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ST();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>NF){const a=OF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Sr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ST(),{heartbeatsToSend:i,unsentEntries:r}=MF(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Sr.warn(n),""}}}function ST(){return new Date().toISOString().substring(0,10)}function MF(t,e=RF){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),PT(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),PT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class DF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tj()?xj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ET(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ET(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PT(t){return lf(JSON.stringify({version:2,heartbeats:t})).length}function OF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){Eo(new ws("platform-logger",e=>new Zj(e),"PRIVATE")),Eo(new ws("heartbeat",e=>new LF(e),"PRIVATE")),Ui(iy,TT,t),Ui(iy,TT,"esm2020"),Ui("fire-js","")}VF("");var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,MC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function M(){}M.prototype=I.prototype,R.F=I.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(D,V,U){for(var O=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)O[ke-2]=arguments[ke];return I.prototype[V].apply(D,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,M){M||(M=0);const D=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)D[V]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(V=0;V<16;++V)D[V]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=R.g[0],M=R.g[1],V=R.g[2];let U=R.g[3],O;O=I+(U^M&(V^U))+D[0]+3614090360&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[1]+3905402710&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[2]+606105819&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[3]+3250441966&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[4]+4118548399&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[5]+1200080426&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[6]+2821735955&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[7]+4249261313&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[8]+1770035416&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[9]+2336552879&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[10]+4294925233&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[11]+2304563134&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(U^M&(V^U))+D[12]+1804603682&4294967295,I=M+(O<<7&4294967295|O>>>25),O=U+(V^I&(M^V))+D[13]+4254626195&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(M^U&(I^M))+D[14]+2792965006&4294967295,V=U+(O<<17&4294967295|O>>>15),O=M+(I^V&(U^I))+D[15]+1236535329&4294967295,M=V+(O<<22&4294967295|O>>>10),O=I+(V^U&(M^V))+D[1]+4129170786&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[6]+3225465664&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[11]+643717713&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[0]+3921069994&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[5]+3593408605&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[10]+38016083&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[15]+3634488961&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[4]+3889429448&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[9]+568446438&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[14]+3275163606&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[3]+4107603335&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[8]+1163531501&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(M^V))+D[13]+2850285829&4294967295,I=M+(O<<5&4294967295|O>>>27),O=U+(M^V&(I^M))+D[2]+4243563512&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^M&(U^I))+D[7]+1735328473&4294967295,V=U+(O<<14&4294967295|O>>>18),O=M+(U^I&(V^U))+D[12]+2368359562&4294967295,M=V+(O<<20&4294967295|O>>>12),O=I+(M^V^U)+D[5]+4294588738&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[8]+2272392833&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[11]+1839030562&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[14]+4259657740&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[1]+2763975236&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[4]+1272893353&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[7]+4139469664&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[10]+3200236656&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[13]+681279174&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[0]+3936430074&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[3]+3572445317&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[6]+76029189&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(M^V^U)+D[9]+3654602809&4294967295,I=M+(O<<4&4294967295|O>>>28),O=U+(I^M^V)+D[12]+3873151461&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^M)+D[15]+530742520&4294967295,V=U+(O<<16&4294967295|O>>>16),O=M+(V^U^I)+D[2]+3299628645&4294967295,M=V+(O<<23&4294967295|O>>>9),O=I+(V^(M|~U))+D[0]+4096336452&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[7]+1126891415&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[14]+2878612391&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[5]+4237533241&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[12]+1700485571&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[3]+2399980690&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[10]+4293915773&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[1]+2240044497&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[8]+1873313359&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[15]+4264355552&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[6]+2734768916&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[13]+1309151649&4294967295,M=V+(O<<21&4294967295|O>>>11),O=I+(V^(M|~U))+D[4]+4149444226&4294967295,I=M+(O<<6&4294967295|O>>>26),O=U+(M^(I|~V))+D[11]+3174756917&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~M))+D[2]+718787259&4294967295,V=U+(O<<15&4294967295|O>>>17),O=M+(U^(V|~I))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const M=I-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<I;){if(V==0)for(;U<=M;)r(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(D[V++]=R.charCodeAt(U++),V==this.blockSize){r(this,D),V=0;break}}else for(;U<I;)if(D[V++]=R[U++],V==this.blockSize){r(this,D),V=0;break}}this.h=V,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,M=0;M<4;++M)for(let D=0;D<32;D+=8)R[I++]=this.g[M]>>>D&255;return R};function o(R,I){var M=u;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=I(R)}function a(R,I){this.h=I;const M=[];let D=!0;for(let V=R.length-1;V>=0;V--){const U=R[V]|0;D&&U==I||(M[V]=U,D=!1)}this.g=M}var u={};function c(R){return-128<=R&&R<128?o(R,function(I){return new a([I|0],I<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return N(f(-R));const I=[];let M=1;for(let D=0;R>=M;D++)I[D]=R/M|0,M*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return N(m(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(I,8));let D=g;for(let U=0;U<R.length;U+=8){var V=Math.min(8,R.length-U);const O=parseInt(R.substring(U,U+V),I);V<8?(V=f(Math.pow(I,V)),D=D.j(V).add(f(O))):(D=D.j(M),D=D.add(f(O)))}return D}var g=c(0),_=c(1),E=c(16777216);t=a.prototype,t.m=function(){if(C(this))return-N(this).m();let R=0,I=1;for(let M=0;M<this.g.length;M++){const D=this.i(M);R+=(D>=0?D:4294967296+D)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(C(this))return"-"+N(this).toString(R);const I=f(Math.pow(R,6));var M=this;let D="";for(;;){const V=F(M,I).g;M=P(M,V.j(I));let U=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=V,k(M))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function C(R){return R.h==-1}t.l=function(R){return R=P(this,R),C(R)?-1:k(R)?0:1};function N(R){const I=R.g.length,M=[];for(let D=0;D<I;D++)M[D]=~R.g[D];return new a(M,~R.h).add(_)}t.abs=function(){return C(this)?N(this):this},t.add=function(R){const I=Math.max(this.g.length,R.g.length),M=[];let D=0;for(let V=0;V<=I;V++){let U=D+(this.i(V)&65535)+(R.i(V)&65535),O=(U>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);D=O>>>16,U&=65535,O&=65535,M[V]=O<<16|U}return new a(M,M[M.length-1]&-2147483648?-1:0)};function P(R,I){return R.add(N(I))}t.j=function(R){if(k(this)||k(R))return g;if(C(this))return C(R)?N(this).j(N(R)):N(N(this).j(R));if(C(R))return N(this.j(N(R)));if(this.l(E)<0&&R.l(E)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,M=[];for(var D=0;D<2*I;D++)M[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<R.g.length;V++){const U=this.i(D)>>>16,O=this.i(D)&65535,ke=R.i(V)>>>16,jt=R.i(V)&65535;M[2*D+2*V]+=O*jt,x(M,2*D+2*V),M[2*D+2*V+1]+=U*jt,x(M,2*D+2*V+1),M[2*D+2*V+1]+=O*ke,x(M,2*D+2*V+1),M[2*D+2*V+2]+=U*ke,x(M,2*D+2*V+2)}for(R=0;R<I;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=I;R<2*I;R++)M[R]=0;return new a(M,0)};function x(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function A(R,I){this.g=R,this.h=I}function F(R,I){if(k(I))throw Error("division by zero");if(k(R))return new A(g,g);if(C(R))return I=F(N(R),I),new A(N(I.g),N(I.h));if(C(I))return I=F(R,N(I)),new A(N(I.g),I.h);if(R.g.length>30){if(C(R)||C(I))throw Error("slowDivide_ only works with positive integers.");for(var M=_,D=I;D.l(R)<=0;)M=z(M),D=z(D);var V=$(M,1),U=$(D,1);for(D=$(D,2),M=$(M,2);!k(D);){var O=U.add(D);O.l(R)<=0&&(V=V.add(M),U=O),D=$(D,1),M=$(M,1)}return I=P(R,V.j(I)),new A(V,I)}for(V=g;R.l(I)>=0;){for(M=Math.max(1,Math.floor(R.m()/I.m())),D=Math.ceil(Math.log(M)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(M),O=U.j(I);C(O)||O.l(R)>0;)M-=D,U=f(M),O=U.j(I);k(U)&&(U=_),V=V.add(U),R=P(R,O)}return new A(V,R)}t.B=function(R){return F(this,R).h},t.and=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)&R.i(D);return new a(M,this.h&R.h)},t.or=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)|R.i(D);return new a(M,this.h|R.h)},t.xor=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let D=0;D<I;D++)M[D]=this.i(D)^R.i(D);return new a(M,this.h^R.h)};function z(R){const I=R.g.length+1,M=[];for(let D=0;D<I;D++)M[D]=R.i(D)<<1|R.i(D-1)>>>31;return new a(M,R.h)}function $(R,I){const M=I>>5;I%=32;const D=R.g.length-M,V=[];for(let U=0;U<D;U++)V[U]=I>0?R.i(U+M)>>>I|R.i(U+M+1)<<32-I:R.i(U+M);return new a(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,MC=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ds=a}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DC,pu,OC,md,oy,VC,jC,FC;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function r(h,y){if(y)e:{var T=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var B=h[b];if(!(B in T))break e;T=T[B]}h=h[h.length-1],b=T[h],y=y(b),y!=b&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(y){var T=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&T.push([b,y[b]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function c(h,y,T){return h.call.apply(h.bind,arguments)}function f(h,y,T){return f=c,f.apply(null,arguments)}function m(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var b=T.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function g(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(b,B,q){for(var te=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)te[_e-2]=arguments[_e];return y.prototype[B].apply(b,te)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function E(h){const y=h.length;if(y>0){const T=Array(y);for(let b=0;b<y;b++)T[b]=h[b];return T}return[]}function k(h,y){for(let b=1;b<arguments.length;b++){const B=arguments[b];var T=typeof B;if(T=T!="object"?T:B?Array.isArray(B)?"array":T:"null",T=="array"||T=="object"&&typeof B.length=="number"){T=h.length||0;const q=B.length||0;h.length=T+q;for(let te=0;te<q;te++)h[T+te]=B[te]}else h.push(B)}}class C{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function N(h){a.setTimeout(()=>{throw h},0)}function P(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class x{constructor(){this.h=this.g=null}add(y,T){const b=A.get();b.set(y,T),this.h?this.h.next=b:this.g=b,this.h=b}}var A=new C(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,$=!1,R=new x,I=()=>{const h=Promise.resolve(void 0);z=()=>{h.then(M)}};function M(){for(var h;h=P();){try{h.h.call(h.g)}catch(T){N(T)}var y=A;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}$=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,y),a.removeEventListener("test",T,y)}catch{}return h}();function O(h){return/^[\s\xa0]*$/.test(h)}function ke(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}g(ke,V),ke.prototype.init=function(h,y){const T=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var jt="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function J(h,y,T,b,B){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!b,this.ha=B,this.key=++Ze,this.da=this.fa=!1}function G(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,y,T){for(const b in h)y.call(T,h[b],b,h)}function Q(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function he(h){const y={};for(const T in h)y[T]=h[T];return y}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(h,y){let T,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(T in b)h[T]=b[T];for(let q=0;q<xe.length;q++)T=xe[q],Object.prototype.hasOwnProperty.call(b,T)&&(h[T]=b[T])}}function Re(h){this.src=h,this.g={},this.h=0}Re.prototype.add=function(h,y,T,b,B){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const te=fe(h,y,b,B);return te>-1?(y=h[te],T||(y.fa=!1)):(y=new J(y,this.src,q,!!b,B),y.fa=T,h.push(y)),y};function Ee(h,y){const T=y.type;if(T in h.g){var b=h.g[T],B=Array.prototype.indexOf.call(b,y,void 0),q;(q=B>=0)&&Array.prototype.splice.call(b,B,1),q&&(G(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function fe(h,y,T,b){for(let B=0;B<h.length;++B){const q=h[B];if(!q.da&&q.listener==y&&q.capture==!!T&&q.ha==b)return B}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),nn={};function ue(h,y,T,b,B){if(Array.isArray(y)){for(let q=0;q<y.length;q++)ue(h,y[q],T,b,B);return null}return T=Os(T),h&&h[jt]?h.J(y,T,u(b)?!!b.capture:!1,B):$e(h,y,T,!1,b,B)}function $e(h,y,T,b,B,q){if(!y)throw Error("Invalid event type");const te=u(B)?!!B.capture:!!B;let _e=jo(h);if(_e||(h[gt]=_e=new Re(h)),T=_e.add(y,T,b,te,q),T.proxy)return T;if(b=rn(),T.proxy=b,b.src=h,b.listener=T,h.addEventListener)U||(B=te),B===void 0&&(B=!1),h.addEventListener(y.toString(),b,B);else if(h.attachEvent)h.attachEvent(Ms(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return T}function rn(){function h(T){return y.call(h.src,h.listener,T)}const y=Vo;return h}function sn(h,y,T,b,B){if(Array.isArray(y))for(var q=0;q<y.length;q++)sn(h,y[q],T,b,B);else b=u(b)?!!b.capture:!!b,T=Os(T),h&&h[jt]?(h=h.i,q=String(y).toString(),q in h.g&&(y=h.g[q],T=fe(y,T,b,B),T>-1&&(G(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[q],h.h--)))):h&&(h=jo(h))&&(y=h.g[y.toString()],h=-1,y&&(h=fe(y,T,b,B)),(T=h>-1?y[h]:null)&&on(T))}function on(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[jt])Ee(y.i,h);else{var T=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(T,b,h.capture):y.detachEvent?y.detachEvent(Ms(T),b):y.addListener&&y.removeListener&&y.removeListener(b),(T=jo(y))?(Ee(T,h),T.h==0&&(T.src=null,y[gt]=null)):G(h)}}}function Ms(h){return h in nn?nn[h]:nn[h]="on"+h}function Vo(h,y){if(h.da)h=!0;else{y=new ke(y,this);const T=h.listener,b=h.ha||h.src;h.fa&&on(h),h=T.call(b,y)}return h}function jo(h){return h=h[gt],h instanceof Re?h:null}var Ds="__closure_events_fn_"+(Math.random()*1e9>>>0);function Os(h){return typeof h=="function"?h:(h[Ds]||(h[Ds]=function(y){return h.handleEvent(y)}),h[Ds])}function bt(){D.call(this),this.i=new Re(this),this.M=this,this.G=null}g(bt,D),bt.prototype[jt]=!0,bt.prototype.removeEventListener=function(h,y,T,b){sn(this,h,y,T,b)};function kt(h,y){var T,b=h.G;if(b)for(T=[];b;b=b.G)T.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var B=y;y=new V(b,h),We(y,B)}B=!0;let q,te;if(T)for(te=T.length-1;te>=0;te--)q=y.g=T[te],B=br(q,b,!0,y)&&B;if(q=y.g=h,B=br(q,b,!0,y)&&B,B=br(q,b,!1,y)&&B,T)for(te=0;te<T.length;te++)q=y.g=T[te],B=br(q,b,!1,y)&&B}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let b=0;b<T.length;b++)G(T[b]);delete h.g[y],h.h--}}this.G=null},bt.prototype.J=function(h,y,T,b){return this.i.add(String(h),y,!1,T,b)},bt.prototype.K=function(h,y,T,b){return this.i.add(String(h),y,!0,T,b)};function br(h,y,T,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let q=0;q<y.length;++q){const te=y[q];if(te&&!te.da&&te.capture==T){const _e=te.listener,Oe=te.ha||te.src;te.fa&&Ee(h.i,te),B=_e.call(Oe,b)!==!1&&B}}return B&&!b.defaultPrevented}function Hc(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(h,y||0)}function Sl(h){h.g=Hc(()=>{h.g=null,h.i&&(h.i=!1,Sl(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Pp extends D{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Sl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(h){D.call(this),this.h=h,this.g={}}g(Vs,D);var Fo=[];function Pl(h){re(h.g,function(y,T){this.g.hasOwnProperty(T)&&on(y)},h),h.g={}}Vs.prototype.N=function(){Vs.Z.N.call(this),Pl(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uo=a.JSON.stringify,Ip=a.JSON.parse,Wc=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Il(){}function $c(){}var kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function js(){V.call(this,"d")}g(js,V);function zo(){V.call(this,"c")}g(zo,V);var Yi={},Rr=null;function Bo(){return Rr=Rr||new bt}Yi.Ia="serverreachability";function qc(h){V.call(this,Yi.Ia,h)}g(qc,V);function Nr(h){const y=Bo();kt(y,new qc(y))}Yi.STAT_EVENT="statevent";function Cl(h,y){V.call(this,Yi.STAT_EVENT,h),this.stat=y}g(Cl,V);function Rt(h){const y=Bo();kt(y,new Cl(y,h))}Yi.Ja="timingevent";function Gc(h,y){V.call(this,Yi.Ja,h),this.size=y}g(Gc,V);function Fs(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function Us(){this.g=!0}Us.prototype.ua=function(){this.g=!1};function Cp(h,y,T,b,B,q){h.info(function(){if(h.g)if(q){var te="",_e=q.split("&");for(let je=0;je<_e.length;je++){var Oe=_e[je].split("=");if(Oe.length>1){const ht=Oe[0];Oe=Oe[1];const Hn=ht.split("_");te=Hn.length>=2&&Hn[1]=="type"?te+(ht+"="+Oe+"&"):te+(ht+"=redacted&")}}}else te=null;else te=q;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+y+`
`+T+`
`+te})}function Ap(h,y,T,b,B,q,te){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+y+`
`+T+`
`+q+" "+te})}function Lr(h,y,T,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+bp(h,T)+(b?" "+b:"")})}function Al(h,y){h.info(function(){return"TIMEOUT: "+y})}Us.prototype.info=function(){};function bp(h,y){if(!h.g)return y;if(!y)return null;try{const q=JSON.parse(y);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var T=q[h];if(!(T.length<2)){var b=T[1];if(Array.isArray(b)&&!(b.length<1)){var B=b[0];if(B!="noop"&&B!="stop"&&B!="close")for(let te=1;te<b.length;te++)b[te]=""}}}}return Uo(q)}catch{return y}}var Ho={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zc;function mn(){}g(mn,Il),mn.prototype.g=function(){return new XMLHttpRequest},Zc=new mn;function ae(h){return encodeURIComponent(String(h))}function Yc(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function ti(h,y,T,b){this.j=h,this.i=y,this.l=T,this.S=b||1,this.V=new Vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bl}function bl(){this.i=null,this.g="",this.h=!1}var kl={},zs={};function Wo(h,y,T){h.M=1,h.A=qe(an(y)),h.u=T,h.R=!0,Xi(h,null)}function Xi(h,y){h.F=Date.now(),$o(h),h.B=an(h.A);var T=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),Yo(T.i,"t",b),h.C=0,T=h.j.L,h.h=new bl,h.g=Wl(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Pp(f(h.Y,h,h.g),h.P)),y=h.V,T=h.g,b=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Fo[0]=B.toString()),B=Fo);for(let q=0;q<B.length;q++){const te=ue(T,B[q],b||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=h.J?he(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Nr(),Cp(h.i,h.v,h.B,h.l,h.S,h.u)}ti.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ei(h)==3?y.j():this.Y(h)},ti.prototype.Y=function(h){try{if(h==this.g)e:{const _e=Ei(this.g),Oe=this.g.ya(),je=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Vl(this.g)))){this.K||_e!=4||Oe==7||(Oe==8||je<=0?Nr(3):Nr(2)),qo(this);var y=this.g.ca();this.X=y;var T=Xc(this);if(this.o=y==200,Ap(this.i,this.v,this.B,this.l,this.S,_e,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(b)){var q=b;break t}}q=null}if(h=q)Lr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rl(this,h);else{this.o=!1,this.m=3,Rt(12),Fn(this),Bs(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<T.length;)if(ht=kp(this,T),ht==zs){_e==4&&(this.m=4,Rt(14),h=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==kl){this.m=4,Rt(15),Lr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Lr(this.i,this.l,ht,null),Rl(this,ht);if(Qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||T.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)Lr(this.i,this.l,T,"[Invalid Chunked Response]"),Fn(this),Bs(this);else if(T.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Bl(te),te.P=!0,Rt(11))}}else Lr(this.i,this.l,T,null),Rl(this,T);_e==4&&Fn(this),this.o&&!this.K&&(_e==4?Cn(this.j,this):(this.o=!1,$o(this)))}else jl(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Fn(this),Bs(this)}}}catch{}finally{}};function Xc(h){if(!Qc(h))return h.g.la();const y=Vl(h.g);if(y==="")return"";let T="";const b=y.length,B=Ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Fn(h),Bs(h),"";h.h.i=new a.TextDecoder}for(let q=0;q<b;q++)h.h.h=!0,T+=h.h.i.decode(y[q],{stream:!(B&&q==b-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Qc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function kp(h,y){var T=h.C,b=y.indexOf(`
`,T);return b==-1?zs:(T=Number(y.substring(T,b)),isNaN(T)?kl:(b+=1,b+T>y.length?zs:(y=y.slice(b,b+T),h.C=b+T,y)))}ti.prototype.cancel=function(){this.K=!0,Fn(this)};function $o(h){h.T=Date.now()+h.H,Jc(h,h.H)}function Jc(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Fs(f(h.aa,h),y)}function qo(h){h.D&&(a.clearTimeout(h.D),h.D=null)}ti.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Al(this.i,this.B),this.M!=2&&(Nr(),Rt(17)),Fn(this),this.m=2,Bs(this)):Jc(this,this.T-h)};function Bs(h){h.j.I==0||h.K||Cn(h.j,h)}function Fn(h){qo(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Pl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Rl(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Hs(T.h,h))){if(!h.L&&Hs(T.h,h)&&T.I==3){try{var b=T.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)ta(T),Jo(T);else break e;zl(T),Rt(18)}}else T.xa=B[1],0<T.xa-T.K&&B[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Fs(f(T.Va,T),6e3));nh(T.h)<=1&&T.ta&&(T.ta=void 0)}else Pi(T,11)}else if((h.L||T.g==h)&&ta(T),!O(y))for(B=T.Ba.g.parse(y),y=0;y<B.length;y++){let je=B[y];const ht=je[0];if(!(ht<=T.K))if(T.K=ht,je=je[1],T.I==2)if(je[0]=="c"){T.M=je[1],T.ba=je[2];const Hn=je[3];Hn!=null&&(T.ka=Hn,T.j.info("VER="+T.ka));const ri=je[4];ri!=null&&(T.za=ri,T.j.info("SVER="+T.za));const Wn=je[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(b=1.5*Wn,T.O=b,T.j.info("backChannelRequestTimeoutMs_="+b)),b=T;const Ii=h.g;if(Ii){const ra=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var q=b.h;q.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Qi(q,q.h),q.h=null))}if(b.G){const sa=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(b.wa=sa,se(b.J,b.G,sa))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),b=T;var te=h;if(b.na=Hl(b,b.L?b.ba:null,b.W),te.L){Nl(b.h,te);var _e=te,Oe=b.O;Oe&&(_e.H=Oe),_e.D&&(qo(_e),$o(_e)),b.g=te}else Ul(b);T.i.length>0&&Si(T)}else je[0]!="stop"&&je[0]!="close"||Pi(T,7);else T.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Pi(T,7):Se(T):je[0]!="noop"&&T.l&&T.l.qa(je),T.A=0)}}Nr(4)}catch{}}var Rp=class{constructor(h,y){this.g=h,this.map=y}};function eh(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function th(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function nh(h){return h.h?1:h.g?h.g.size:0}function Hs(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Qi(h,y){h.g?h.g.add(y):h.h=y}function Nl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}eh.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ll(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return E(h.i)}var Mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ne(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const b=h[T].indexOf("=");let B,q=null;b>=0?(B=h[T].substring(0,b),q=h[T].substring(b+1)):B=h[T],y(B,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function De(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof De?(this.l=h.l,Un(this,h.j),this.o=h.o,this.g=h.g,zn(this,h.u),this.h=h.h,Ws(this,$s(h.i)),this.m=h.m):h&&(y=String(h).match(Mr))?(this.l=!1,Un(this,y[1]||"",!0),this.o=Ji(y[2]||""),this.g=Ji(y[3]||"",!0),zn(this,y[4]),this.h=Ji(y[5]||"",!0),Ws(this,y[6]||"",!0),this.m=Ji(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}De.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(wi(y,ih,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(wi(y,ih,!0),"@"),h.push(ae(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(wi(T,T.charAt(0)=="/"?er:Go,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",wi(T,tr)),h.join("")},De.prototype.resolve=function(h){const y=an(this);let T=!!h.j;T?Un(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var b=h.h;if(T)zn(y,h.u);else if(T=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var B=y.h.lastIndexOf("/");B!=-1&&(b=y.h.slice(0,B+1)+b)}if(B=b,B==".."||B==".")b="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){b=B.lastIndexOf("/",0)==0,B=B.split("/");const q=[];for(let te=0;te<B.length;){const _e=B[te++];_e=="."?b&&te==B.length&&q.push(""):_e==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),b&&te==B.length&&q.push("")):(q.push(_e),b=!0)}b=q.join("/")}else b=B}return T?y.h=b:T=h.i.toString()!=="",T?Ws(y,$s(h.i)):T=!!h.m,T&&(y.m=h.m),y};function an(h){return new De(h)}function Un(h,y,T){h.j=T?Ji(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function zn(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ws(h,y,T){y instanceof ni?(h.i=y,Ml(h.i,h.l)):(T||(y=wi(y,ot)),h.i=new ni(y,h.l))}function se(h,y,T){h.i.set(y,T)}function qe(h){return se(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ji(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function wi(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,gn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ih=/[#\/\?@]/g,Go=/[#\?:]/g,er=/[#\?]/g,ot=/[#\?@]/g,tr=/#/g;function ni(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function In(h){h.g||(h.g=new Map,h.h=0,h.i&&Ne(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=ni.prototype,t.add=function(h,y){In(this),this.i=null,h=Ti(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Ko(h,y){In(h),y=Ti(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Dr(h,y){return In(h),y=Ti(h,y),h.g.has(y)}t.forEach=function(h,y){In(this),this.g.forEach(function(T,b){T.forEach(function(B){h.call(y,B,b,this)},this)},this)};function Zo(h,y){In(h);let T=[];if(typeof y=="string")Dr(h,y)&&(T=T.concat(h.g.get(Ti(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}t.set=function(h,y){return In(this),this.i=null,h=Ti(this,h),Dr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=Zo(this,h),h.length>0?String(h[0]):y):y};function Yo(h,y,T){Ko(h,y),T.length>0&&(h.i=null,h.g.set(Ti(h,y),E(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var T=y[b];const B=ae(T);T=Zo(this,T);for(let q=0;q<T.length;q++){let te=B;T[q]!==""&&(te+="="+ae(T[q])),h.push(te)}}return this.i=h.join("&")};function $s(h){const y=new ni;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ti(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ml(h,y){y&&!h.j&&(In(h),h.i=null,h.g.forEach(function(T,b){const B=b.toLowerCase();b!=B&&(Ko(this,b),Yo(this,B,T))},h)),h.j=y}function Xo(h,y){const T=new Us;if(a.Image){const b=new Image;b.onload=m(Bn,T,"TestLoadImage: loaded",!0,y,b),b.onerror=m(Bn,T,"TestLoadImage: error",!1,y,b),b.onabort=m(Bn,T,"TestLoadImage: abort",!1,y,b),b.ontimeout=m(Bn,T,"TestLoadImage: timeout",!1,y,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function rh(h,y){const T=new Us,b=new AbortController,B=setTimeout(()=>{b.abort(),Bn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(q=>{clearTimeout(B),q.ok?Bn(T,"TestPingServer: ok",!0,y):Bn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Bn(T,"TestPingServer: error",!1,y)})}function Bn(h,y,T,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(T)}catch{}}function Np(){this.g=new Wc}function ye(h){this.i=h.Sb||null,this.h=h.ab||!1}g(ye,Il),ye.prototype.g=function(){return new ln(this.i,this.h)};function ln(h,y){bt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ln,bt),t=ln.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,nr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ze(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ze(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Or(this):nr(this),this.readyState==3&&ze(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Or(this))},t.Na=function(h){this.g&&(this.response=h,Or(this))},t.ga=function(){this.g&&Or(this)};function Or(h){h.readyState=4,h.l=null,h.j=null,h.B=null,nr(h)}t.setRequestHeader=function(h,y){this.A.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qo(h){let y="";return re(h,function(T,b){y+=b,y+=":",y+=T,y+=`\r
`}),y}function qs(h,y,T){e:{for(b in T){var b=!1;break e}b=!0}b||(T=Qo(T),typeof h=="string"?T!=null&&ae(T):se(h,y,T))}function Ve(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ve,bt);var Dl=/^https?$/i,Gs=["POST","PUT"];t=Ve.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,y,T,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(q){yt(this,q);return}if(h=T||"",T=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)T.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())T.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(T.keys()).find(q=>q.toLowerCase()=="content-type"),B=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Gs,y,void 0)>=0)||b||B||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of T)this.g.setRequestHeader(q,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){yt(this,q)}};function yt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,xi(h),Ks(h)}function xi(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,kt(this,"complete"),kt(this,"abort"),Ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ol(this):this.Xa())},t.Xa=function(){Ol(this)};function Ol(h){if(h.h&&typeof o<"u"){if(h.v&&Ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(kt(h,"readystatechange"),Ei(h)==4){h.h=!1;try{const q=h.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var b;if(b=q===0){let te=String(h.D).match(Mr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),b=!Dl.test(te?te.toLowerCase():"")}T=b}if(T)kt(h,"complete"),kt(h,"success");else{h.o=6;try{var B=Ei(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",xi(h)}}finally{Ks(h)}}}}function Ks(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||kt(h,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ei(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ip(y)}};function Vl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jl(h){const y={};h=(h.g&&Ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(O(h[b]))continue;var T=Yc(h[b]);const B=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const q=y[B]||[];y[B]=q,q.push(T)}Q(y,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Fl(h){this.za=0,this.i=[],this.j=new Us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,h),this.Za=Zs("retryDelaySeedMs",1e4,h),this.Ta=Zs("forwardChannelMaxRetries",2,h),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new eh(h&&h.concurrentRequestLimit),this.Ba=new Np,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fl.prototype,t.ka=8,t.I=1,t.connect=function(h,y,T,b){Rt(0),this.W=h,this.H=y||{},T&&b!==void 0&&(this.H.OSID=T,this.H.OAID=b),this.F=this.X,this.J=Hl(this,null,this.W),Si(this)};function Se(h){if(yn(h),h.I==3){var y=h.V++,T=an(h.J);if(se(T,"SID",h.M),se(T,"RID",y),se(T,"TYPE","terminate"),ir(h,T),y=new ti(h,h.j,y),y.M=2,y.A=qe(an(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&a.Image&&(new Image().src=y.A,T=!0),T||(y.g=Wl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),$o(y)}ii(h)}function Jo(h){h.g&&(Bl(h),h.g.cancel(),h.g=null)}function yn(h){Jo(h),h.v&&(a.clearTimeout(h.v),h.v=null),ta(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function Si(h){if(!th(h.h)&&!h.m){h.m=!0;var y=h.Ea;z||I(),$||(z(),$=!0),R.add(y,h),h.D=0}}function sh(h,y){return nh(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Fs(f(h.Ea,h,y),lh(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new ti(this,this.j,h);let q=this.o;if(this.U&&(q?(q=he(q),We(q,this.U)):q=this.U),this.u!==null||this.R||(B.J=q,q=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var b=this.i[T];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=ah(this,B,y),T=an(this.J),se(T,"RID",h),se(T,"CVER",22),this.G&&se(T,"X-HTTP-Session-Id",this.G),ir(this,T),q&&(this.R?y="headers="+ae(Qo(q))+"&"+y:this.u&&qs(T,this.u,q)),Qi(this.h,B),this.Ra&&se(T,"TYPE","init"),this.S?(se(T,"$req",y),se(T,"SID","null"),B.U=!0,Wo(B,T,null)):Wo(B,T,y),this.I=2}}else this.I==3&&(h?oh(this,h):this.i.length==0||th(this.h)||oh(this))};function oh(h,y){var T;y?T=y.l:T=h.V++;const b=an(h.J);se(b,"SID",h.M),se(b,"RID",T),se(b,"AID",h.K),ir(h,b),h.u&&h.o&&qs(b,h.u,h.o),T=new ti(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ah(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Qi(h.h,T),Wo(T,b,y)}function ir(h,y){h.H&&re(h.H,function(T,b){se(y,b,T)}),h.l&&re({},function(T,b){se(y,b,T)})}function ah(h,y,T){T=Math.min(h.i.length,T);const b=h.l?f(h.l.Ka,h.l,h):null;e:{var B=h.i;let _e=-1;for(;;){const Oe=["count="+T];_e==-1?T>0?(_e=B[0].g,Oe.push("ofs="+_e)):_e=0:Oe.push("ofs="+_e);let je=!0;for(let ht=0;ht<T;ht++){var q=B[ht].g;const Hn=B[ht].map;if(q-=_e,q<0)_e=Math.max(0,B[ht].g-100),je=!1;else try{q="req"+q+"_"||"";try{var te=Hn instanceof Map?Hn:Object.entries(Hn);for(const[ri,Wn]of te){let Ii=Wn;u(Wn)&&(Ii=Uo(Wn)),Oe.push(q+ri+"="+encodeURIComponent(Ii))}}catch(ri){throw Oe.push(q+"type="+encodeURIComponent("_badmap")),ri}}catch{b&&b(Hn)}}if(je){te=Oe.join("&");break e}}te=void 0}return h=h.i.splice(0,T),y.G=h,te}function Ul(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;z||I(),$||(z(),$=!0),R.add(y,h),h.A=0}}function zl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Fs(f(h.Da,h),lh(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,ea(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Fs(f(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Jo(this),ea(this))};function Bl(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function ea(h){h.g=new ti(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=an(h.na);se(y,"RID","rpc"),se(y,"SID",h.M),se(y,"AID",h.K),se(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&se(y,"TO",h.ia),se(y,"TYPE","xmlhttp"),ir(h,y),h.u&&h.o&&qs(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=qe(an(y)),T.u=null,T.R=!0,Xi(T,h)}t.Va=function(){this.C!=null&&(this.C=null,Jo(this),zl(this),Rt(19))};function ta(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Cn(h,y){var T=null;if(h.g==y){ta(h),Bl(h),h.g=null;var b=2}else if(Hs(h.h,y))T=y.G,Nl(h.h,y),b=1;else return;if(h.I!=0){if(y.o)if(b==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;b=Bo(),kt(b,new Gc(b,T)),Si(h)}else Ul(h);else if(B=y.m,B==3||B==0&&y.X>0||!(b==1&&sh(h,y)||b==2&&zl(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),B){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function lh(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Pi(h,y){if(h.j.info("Error code "+y),y==2){var T=f(h.bb,h),b=h.Ua;const B=!b;b=new De(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Un(b,"https"),qe(b),B?Xo(b.toString(),T):rh(b.toString(),T)}else Rt(2);h.I=0,h.l&&h.l.pa(y),ii(h),yn(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function ii(h){if(h.I=0,h.ja=[],h.l){const y=Ll(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,E(h.i),h.i.length=0),h.l.oa()}}function Hl(h,y,T){var b=T instanceof De?an(T):new De(T);if(b.g!="")y&&(b.g=y+"."+b.g),zn(b,b.u);else{var B=a.location;b=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const q=new De(null);b&&Un(q,b),y&&(q.g=y),B&&zn(q,B),T&&(q.h=T),b=q}return T=h.G,y=h.wa,T&&y&&se(b,T,y),se(b,"VER",h.ka),ir(h,b),b}function Wl(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ve(new ye({ab:T})):new Ve(h.ma),y.Fa(h.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function na(){}t=na.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ia(){}ia.prototype.g=function(h,y){return new Wt(h,y)};function Wt(h,y){bt.call(this),this.g=new Fl(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Vr(this)}g(Wt,bt),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Se(this.g)},Wt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Uo(h),h=T);y.i.push(new Rp(y.Ya++,h)),y.I==3&&Si(y)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Se(this.g),delete this.g,Wt.Z.N.call(this)};function $l(h){js.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}g($l,js);function uh(){zo.call(this),this.status=1}g(uh,zo);function Vr(h){this.g=h}g(Vr,na),Vr.prototype.ra=function(){kt(this.g,"a")},Vr.prototype.qa=function(h){kt(this.g,new $l(h))},Vr.prototype.pa=function(h){kt(this.g,new uh)},Vr.prototype.oa=function(){kt(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,FC=function(){return new ia},jC=function(){return Bo()},VC=Yi,oy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,md=Ho,Kc.COMPLETE="complete",OC=Kc,$c.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",bt.prototype.listen=bt.prototype.J,pu=$c,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,DC=Ve}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});const CT="@firebase/firestore",AT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new dv("@firebase/firestore");function ma(){return So.logLevel}function ie(t,...e){if(So.logLevel<=Ce.DEBUG){const n=e.map(mv);So.debug(`Firestore (${vl}): ${t}`,...n)}}function Pr(t,...e){if(So.logLevel<=Ce.ERROR){const n=e.map(mv);So.error(`Firestore (${vl}): ${t}`,...n)}}function Po(t,...e){if(So.logLevel<=Ce.WARN){const n=e.map(mv);So.warn(`Firestore (${vl}): ${t}`,...n)}}function mv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,UC(t,i,n)}function UC(t,e,n){let i=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Pr(i),new Error(i)}function Ue(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||UC(e,r,i)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class jF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FF{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new zC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class UF{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zF{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new UF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=HF(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ae(t,e){return t<e?-1:t>e?1:0}function ay(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return km(r)===km(o)?Ae(r,o):km(r)?1:-1}return Ae(t.length,e.length)}const WF=55296,$F=57343;function km(t){const e=t.charCodeAt(0);return e>=WF&&e<=$F}function rl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__name__";class ki{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ki.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ae(e.length,n.length)}static compareSegments(e,n){const i=ki.isNumericId(e),r=ki.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ki.extractNumericId(e).compare(ki.extractNumericId(n)):ay(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class tt extends ki{construct(e,n,i){return new tt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const qF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends ki{construct(e,n,i){return new Dt(e,n,i)}static isValidIdentifier(e){return qF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kT}static keyField(){return new Dt([kT])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(tt.fromString(e))}static fromName(e){return new ce(tt.fromString(e).popFirst(5))}static empty(){return new ce(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t,e,n){if(!n)throw new le(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HC(t,e,n,i){if(e===!0&&i===!0)throw new le(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RT(t){if(!ce.isDocumentKey(t))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function mi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gv(t);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Rc(t,e){if(!WC(t))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new le(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=-62135596800,LT=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*LT);return new Ge(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<NT)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LT}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-NT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:Et("string",Ge._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ge(0,0))}static max(){return new ve(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=-1;function KF(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Ts(r,ce.empty(),e)}function ZF(t){return new Ts(t.readTime,t.key,cc)}class Ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ts(ve.min(),ce.empty(),cc)}static max(){return new Ts(ve.max(),ce.empty(),cc)}}function YF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==XF)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function JF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-1;function op(t){return t==null}function cf(t){return t===0&&1/t==-1/0}function e5(t){return typeof t=="number"&&Number.isInteger(t)&&!cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="";function t5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MT(e)),e=n5(t.get(n),e);return MT(e)}function n5(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case $C:n+="";break;default:n+=o}}return n}function MT(t){return t+$C+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??zt.RED,this.left=r??zt.EMPTY,this.right=o??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new zt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return zt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new OT(this.data.getIterator())}getIteratorFrom(e){return new OT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class OT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Ct(Dt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new GC("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const i5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=i5.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="server_timestamp",ZC="__type__",YC="__previous_value__",XC="__local_write_time__";function _v(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZC])==null?void 0:i.stringValue)===KC}function ap(t){const e=t.mapValue.fields[YC];return _v(e)?ap(e):e}function hc(t){const e=xs(t.mapValue.fields[XC].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,i,r,o,a,u,c,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=m}}const hf="(default)";class sl{constructor(e,n){this.projectId=e,this.database=n||hf}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database===hf}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__type__",s5="__max__",qh={mapValue:{}},JC="__vector__",df="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_v(t)?4:a5(t)?9007199254740991:o5(t)?10:11:me(28295,{value:t})}function qi(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hc(t).isEqual(hc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=xs(r.timestampValue),u=xs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Es(r.bytesValue).isEqual(Es(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ft(r.geoPointValue.latitude)===ft(o.geoPointValue.latitude)&&ft(r.geoPointValue.longitude)===ft(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ft(r.integerValue)===ft(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ft(r.doubleValue),u=ft(o.doubleValue);return a===u?cf(a)===cf(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(DT(a)!==DT(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!qi(a[c],u[c])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function dc(t,e){return(t.values||[]).find(n=>qi(n,e))!==void 0}function ol(t,e){if(t===e)return 0;const n=Ss(t),i=Ss(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ft(o.integerValue||o.doubleValue),c=ft(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return VT(t.timestampValue,e.timestampValue);case 4:return VT(hc(t),hc(e));case 5:return ay(t.stringValue,e.stringValue);case 6:return function(o,a){const u=Es(o),c=Es(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const m=Ae(u[f],c[f]);if(m!==0)return m}return Ae(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ae(ft(o.latitude),ft(a.latitude));return u!==0?u:Ae(ft(o.longitude),ft(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jT(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,E,k,C;const u=o.fields||{},c=a.fields||{},f=(_=u[df])==null?void 0:_.arrayValue,m=(E=c[df])==null?void 0:E.arrayValue,g=Ae(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((C=m==null?void 0:m.values)==null?void 0:C.length)||0);return g!==0?g:jT(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===qh.mapValue&&a===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(a===qh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const _=ay(c[g],m[g]);if(_!==0)return _;const E=ol(u[c[g]],f[m[g]]);if(E!==0)return E}return Ae(c.length,m.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function VT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=xs(t),i=xs(e),r=Ae(n.seconds,i.seconds);return r!==0?r:Ae(n.nanos,i.nanos)}function jT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=ol(n[r],i[r]);if(o)return o}return Ae(n.length,i.length)}function al(t){return ly(t)}function ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=ly(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${ly(n.fields[a])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function gd(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ap(t);return e?16+gd(e):16;case 5:return 2*t.stringValue.length;case 6:return Es(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+gd(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ns(i.fields,(o,a)=>{r+=o.length+gd(a)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function uy(t){return!!t&&"integerValue"in t}function vv(t){return!!t&&"arrayValue"in t}function FT(t){return!!t&&"nullValue"in t}function UT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yd(t){return!!t&&"mapValue"in t}function o5(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[QC])==null?void 0:i.stringValue)===JC}function Nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Nu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(t.arrayValue.values[n]);return e}return{...t}}function a5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===s5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=Dt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Nu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];yd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ns(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Tn(Nu(this.value))}}function eA(t){const e=[];return Ns(t.fields,(n,i)=>{const r=new Dt([n]);if(yd(i)){const o=eA(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Xt(e,0,ve.min(),ve.min(),ve.min(),Tn.empty(),0)}static newFoundDocument(e,n,i,r){return new Xt(e,1,n,ve.min(),i,r,0)}static newNoDocument(e,n){return new Xt(e,2,n,ve.min(),ve.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ve.min(),ve.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function zT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(a.referenceValue),n.key):i=ol(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function BT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n="asc"){this.field=e,this.dir=n}}function l5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{}class Pt extends tA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new c5(e,n,i):n==="array-contains"?new f5(e,i):n==="in"?new p5(e,i):n==="not-in"?new m5(e,i):n==="array-contains-any"?new g5(e,i):new Pt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new h5(e,i):new d5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ol(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends tA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gi(e,n)}matches(e){return nA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nA(t){return t.op==="and"}function iA(t){return u5(t)&&nA(t)}function u5(t){for(const e of t.filters)if(e instanceof Gi)return!1;return!0}function cy(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+al(t.value);if(iA(t))return t.filters.map(e=>cy(e)).join(",");{const e=t.filters.map(n=>cy(n)).join(",");return`${t.op}(${e})`}}function rA(t,e){return t instanceof Pt?function(i,r){return r instanceof Pt&&i.op===r.op&&i.field.isEqual(r.field)&&qi(i.value,r.value)}(t,e):t instanceof Gi?function(i,r){return r instanceof Gi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&rA(a,r.filters[u]),!0):!1}(t,e):void me(19439)}function sA(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${al(n.value)}`}(t):t instanceof Gi?function(n){return n.op.toString()+" {"+n.getFilters().map(sA).join(" ,")+"}"}(t):"Filter"}class c5 extends Pt{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class h5 extends Pt{constructor(e,n){super(e,"in",n),this.keys=oA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class d5 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=oA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class f5 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vv(n)&&dc(n.arrayValue,this.value)}}class p5 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dc(this.value.arrayValue,n)}}class m5 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!dc(this.value.arrayValue,n)}}class g5 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>dc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function HT(t,e=null,n=[],i=[],r=null,o=null,a=null){return new y5(t,e,n,i,r,o,a)}function wv(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>cy(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>al(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>al(i)).join(",")),e.Te=n}return e.Te}function Tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!l5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BT(t.startAt,e.startAt)&&BT(t.endAt,e.endAt)}function hy(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _5(t,e,n,i,r,o,a,u){return new lp(t,e,n,i,r,o,a,u)}function up(t){return new lp(t)}function WT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function v5(t){return t.collectionGroup!==null}function Lu(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ct(Dt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new pf(o,i))}),n.has(Dt.keyField().canonicalString())||e.Ie.push(new pf(Dt.keyField(),i))}return e.Ie}function zi(t){const e=Te(t);return e.Ee||(e.Ee=w5(e,Lu(t))),e.Ee}function w5(t,e){if(t.limitType==="F")return HT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new pf(r.field,o)});const n=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;return HT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dy(t,e,n){return new lp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return Tv(zi(t),zi(e))&&t.limitType===e.limitType}function aA(t){return`${wv(zi(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>sA(r)).join(", ")}]`),op(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>al(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>al(r)).join(",")),`Target(${i})`}(zi(t))}; limitType=${t.limitType})`}function hp(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Lu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=zT(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,Lu(i),r)||i.endAt&&!function(a,u,c){const f=zT(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,Lu(i),r))}(t,e)}function T5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lA(t){return(e,n)=>{let i=!1;for(const r of Lu(t)){const o=x5(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function x5(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?ol(c,f):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return qC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=new st(ce.comparator);function Ir(){return E5}const uA=new st(ce.comparator);function mu(...t){let e=uA;for(const n of t)e=e.insert(n.key,n);return e}function cA(t){let e=uA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ao(){return Mu()}function hA(){return Mu()}function Mu(){return new Do(t=>t.toString(),(t,e)=>t.isEqual(e))}const S5=new st(ce.comparator),P5=new Ct(ce.comparator);function be(...t){let e=P5;for(const n of t)e=e.add(n);return e}const I5=new Ct(Ae);function C5(){return I5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function dA(t){return{integerValue:""+t}}function A5(t,e){return e5(e)?dA(e):xv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this._=void 0}}function b5(t,e,n){return t instanceof mf?function(r,o){const a={fields:{[ZC]:{stringValue:KC},[XC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&_v(o)&&(o=ap(o)),o&&(a.fields[YC]=o),{mapValue:a}}(n,e):t instanceof fc?pA(t,e):t instanceof pc?mA(t,e):function(r,o){const a=fA(r,o),u=$T(a)+$T(r.Ae);return uy(a)&&uy(r.Ae)?dA(u):xv(r.serializer,u)}(t,e)}function k5(t,e,n){return t instanceof fc?pA(t,e):t instanceof pc?mA(t,e):n}function fA(t,e){return t instanceof gf?function(i){return uy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class mf extends dp{}class fc extends dp{constructor(e){super(),this.elements=e}}function pA(t,e){const n=gA(e);for(const i of t.elements)n.some(r=>qi(r,i))||n.push(i);return{arrayValue:{values:n}}}class pc extends dp{constructor(e){super(),this.elements=e}}function mA(t,e){let n=gA(e);for(const i of t.elements)n=n.filter(r=>!qi(r,i));return{arrayValue:{values:n}}}class gf extends dp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $T(t){return ft(t.integerValue||t.doubleValue)}function gA(t){return vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function R5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof fc&&r instanceof fc||i instanceof pc&&r instanceof pc?rl(i.elements,r.elements,qi):i instanceof gf&&r instanceof gf?qi(i.Ae,r.Ae):i instanceof mf&&r instanceof mf}(t.transform,e.transform)}class N5{constructor(e,n){this.version=e,this.transformResults=n}}class Bi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fp{}function yA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vA(t.key,Bi.none()):new Nc(t.key,t.data,Bi.none());{const n=t.data,i=Tn.empty();let r=new Ct(Dt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Ls(t.key,i,new Rn(r.toArray()),Bi.none())}}function L5(t,e,n){t instanceof Nc?function(r,o,a){const u=r.value.clone(),c=GT(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Ls?function(r,o,a){if(!_d(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=GT(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(_A(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Du(t,e,n,i){return t instanceof Nc?function(o,a,u,c){if(!_d(o.precondition,a))return u;const f=o.value.clone(),m=KT(o.fieldTransforms,c,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ls?function(o,a,u,c){if(!_d(o.precondition,a))return u;const f=KT(o.fieldTransforms,c,a),m=a.data;return m.setAll(_A(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return _d(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function M5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=fA(i.transform,r||null);o!=null&&(n===null&&(n=Tn.empty()),n.set(i.field,o))}return n||null}function qT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&rl(i,r,(o,a)=>R5(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends fp{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ls extends fp{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _A(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function GT(t,e,n){const i=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,k5(a,u,n[r]))}return i}function KT(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,b5(o,a,e))}return i}class vA extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D5 extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&L5(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Du(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Du(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=hA();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=yA(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(n,i)=>qT(n,i))&&rl(this.baseMutations,e.baseMutations,(n,i)=>qT(n,i))}}class Ev{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ue(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return S5}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Ev(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Le;function F5(t){switch(t){case X.OK:return me(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function wA(t){if(t===void 0)return Pr("GRPC error has no .code"),X.UNKNOWN;switch(t){case vt.OK:return X.OK;case vt.CANCELLED:return X.CANCELLED;case vt.UNKNOWN:return X.UNKNOWN;case vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case vt.INTERNAL:return X.INTERNAL;case vt.UNAVAILABLE:return X.UNAVAILABLE;case vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case vt.NOT_FOUND:return X.NOT_FOUND;case vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case vt.ABORTED:return X.ABORTED;case vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case vt.DATA_LOSS:return X.DATA_LOSS;default:return me(39323,{code:t})}}(Le=vt||(vt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=new ds([4294967295,4294967295],0);function ZT(t){const e=U5().encode(t),n=new MC;return n.update(e),new Uint8Array(n.digest())}function YT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ds([n,i],0),new ds([r,o],0)]}class Sv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new gu(`Invalid padding: ${n}`);if(i<0)throw new gu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ds.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ds.fromNumber(i)));return r.compare(z5)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ZT(e),[i,r]=YT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Sv(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=ZT(e),[i,r]=YT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new pp(ve.min(),r,new st(Ae),Ir(),be())}}class Lc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lc(i,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class TA{constructor(e,n){this.targetId=e,this.Ce=n}}class xA{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class XT{constructor(){this.ve=0,this.Fe=QT(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),i=be();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me(38017,{changeType:o})}}),new Lc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=QT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ir(),this.Je=Gh(),this.He=Gh(),this.Ye=new st(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(hy(o))if(i===0){const a=new ce(o.path);this.et(n,a,Xt.newNoDocument(a,ve.min()))}else Ue(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),c=u?this.ct(u,e,a):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=Es(i).toUint8Array()}catch(c){if(c instanceof GC)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Sv(a,r,o)}catch(c){return Po(c instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&hy(u.target)){const c=new ce(u.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Xt.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=be();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new pp(e,n,this.Ye,this.je,i);return this.je=Ir(),this.Je=Gh(),this.He=Gh(),this.Ye=new st(Ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new XT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gh(){return new st(ce.comparator)}function QT(){return new st(ce.comparator)}const H5={asc:"ASCENDING",desc:"DESCENDING"},W5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$5={and:"AND",or:"OR"};class q5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fy(t,e){return t.useProto3Json||op(e)?e:{value:e}}function yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G5(t,e){return yf(t,e.toTimestamp())}function Hi(t){return Ue(!!t,49232),ve.fromTimestamp(function(n){const i=xs(n);return new Ge(i.seconds,i.nanos)}(t))}function Pv(t,e){return py(t,e).canonicalString()}function py(t,e){const n=function(r){return new tt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SA(t){const e=tt.fromString(t);return Ue(bA(e),10190,{key:e.toString()}),e}function my(t,e){return Pv(t.databaseId,e.path)}function Rm(t,e){const n=SA(e);if(n.get(1)!==t.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(IA(n))}function PA(t,e){return Pv(t.databaseId,e)}function K5(t){const e=SA(t);return e.length===4?tt.emptyPath():IA(e)}function gy(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IA(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function JT(t,e,n){return{name:my(t,e),fields:n.value.mapValue.fields}}function Z5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:me(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ue(m===void 0||typeof m=="string",58123),Vt.fromBase64String(m||"")):(Ue(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Vt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:wA(f.code);return new le(m,f.message||"")}(a);n=new xA(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Rm(t,i.document.name),o=Hi(i.document.updateTime),a=i.document.createTime?Hi(i.document.createTime):ve.min(),u=new Tn({mapValue:{fields:i.document.fields}}),c=Xt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new vd(f,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Rm(t,i.document),o=i.readTime?Hi(i.readTime):ve.min(),a=Xt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new vd([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Rm(t,i.document),o=i.removedTargetIds||[];n=new vd([],o,r,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new j5(r,o),u=i.targetId;n=new TA(u,a)}}return n}function Y5(t,e){let n;if(e instanceof Nc)n={update:JT(t,e.key,e.value)};else if(e instanceof vA)n={delete:my(t,e.key)};else if(e instanceof Ls)n={update:JT(t,e.key,e.data),updateMask:s6(e.fieldMask)};else{if(!(e instanceof D5))return me(16599,{Vt:e.type});n={verify:my(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof mf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof fc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof pc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gf)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw me(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:G5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function X5(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Hi(r.updateTime):Hi(o);return a.isEqual(ve.min())&&(a=Hi(o)),new N5(a,r.transformResults||[])}(n,e))):[]}function Q5(t,e){return{documents:[PA(t,e.path)]}}function J5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=PA(t,r);const o=function(f){if(f.length!==0)return AA(Gi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:ya(_.field),direction:n6(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=fy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function e6(t){let e=K5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ue(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=CA(g);return _ instanceof Gi&&iA(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(k){return new pf(_a(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,op(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,E=g.values||[];return new ff(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,E=g.values||[];return new ff(E,_)}(n.endAt)),_5(e,r,a,o,u,"F",c,f)}function t6(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_a(n.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=_a(n.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_a(n.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_a(n.unaryFilter.field);return Pt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(_a(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gi.create(n.compositeFilter.filters.map(i=>CA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function n6(t){return H5[t]}function i6(t){return W5[t]}function r6(t){return $5[t]}function ya(t){return{fieldPath:t.canonicalString()}}function _a(t){return Dt.fromServerFormat(t.fieldPath)}function AA(t){return t instanceof Pt?function(n){if(n.op==="=="){if(UT(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(FT(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UT(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(FT(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:i6(n.op),value:n.value}}}(t):t instanceof Gi?function(n){const i=n.getFilters().map(r=>AA(r));return i.length===1?i[0]:{compositeFilter:{op:r6(n.op),filters:i}}}(t):me(54877,{filter:t})}function s6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,i,r,o=ve.min(),a=ve.min(),u=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.yt=e}}function a6(t){const e=e6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.Cn=new u6}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Ts.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class u6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ct(tt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ct(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kA=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(kA,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ll(0)}static cr(){return new ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="LruGarbageCollector",c6=1048576;function nx([t,e],[n,i]){const r=Ae(t,n);return r===0?Ae(e,i):r}class h6{constructor(e){this.Ir=e,this.buffer=new Ct(nx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();nx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(tx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?ie(tx,"Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Vr(3e5)})}}class f6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(sp.ce);const i=new h6(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(ex)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ex):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,c,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ma()<=Ce.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function p6(t,e){return new f6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.changes=new Do(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Du(i.mutation,r,Rn.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=be()){const r=ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=mu();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ao();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,be()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Ir();const a=Mu(),u=function(){return Mu()}();return n.forEach((c,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Ls)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Du(m.mutation,f,m.mutation.getFieldMask(),Ge.now())):a.set(f.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new g6(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Mu();let r=new st((a,u)=>a-u),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let m=i.get(c)||Rn.empty();m=u.applyToLocalView(f,m),i.set(c,m);const g=(r.get(u.batchId)||be()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,m=c.value,g=hA();m.forEach(_=>{if(!o.has(_)){const E=yA(n.get(_),i.get(_));E!==null&&g.set(_,E),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(ao());let u=cc,c=o;return a.next(f=>Z.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,be())).next(m=>({batchId:u,changes:cA(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let r=mu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=mu();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,c=>{const f=function(g,_){return new lp(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Xt.newInvalidDocument(m)))});let u=mu();return a.forEach((c,f)=>{const m=o.get(c);m!==void 0&&Du(m.mutation,f,Rn.empty(),Ge.now()),hp(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Hi(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:a6(r.bundledQuery),readTime:Hi(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.overlays=new st(ce.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ao();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=ao(),o=n.length+1,a=new ce(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new st((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ao(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=ao(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Z.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new V5(n,i));let o=this.qr.get(n);o===void 0&&(o=be(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.Qr=new Ct(Lt.$r),this.Ur=new Ct(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Lt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ce(new tt([])),i=new Lt(n,e),r=new Lt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new tt([])),i=new Lt(n,e),r=new Lt(n,e+1);let o=be();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Lt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Lt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new O5(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Lt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?yv:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Lt(n,0),r=new Lt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(Ae);return n.forEach(r=>{const o=new Lt(r,0),a=new Lt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const a=new Lt(new ce(o),0);let u=new Ct(Ae);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.Yr)),!0)},a),Z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,r=>{const o=new Lt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Lt(n,0),r=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.ri=e,this.docs=function(){return new st(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let i=Ir();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Xt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ir();const a=n.path,u=new ce(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||YF(ZF(m),i)<=0||(r.has(m.key)||hp(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){me(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new E6(this)}getSize(e){return Z.resolve(this.size)}}class E6 extends m6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.persistence=e,this.si=new Do(n=>wv(n),Tv),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Iv,this.targetCount=0,this.ai=ll.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ll(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.ui={},this.overlays={},this.ci=new sp(0),this.li=!1,this.li=!0,this.hi=new w6,this.referenceDelegate=e(this),this.Pi=new S6(this),this.indexManager=new l6,this.remoteDocumentCache=function(r){return new x6(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new o6(n),this.Ii=new _6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new T6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new P6(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class P6 extends QF{constructor(e){super(),this.currentSequenceNumber=e}}class Cv{constructor(e){this.persistence=e,this.Ri=new Iv,this.Vi=null}static mi(e){return new Cv(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const r=ce.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _f{constructor(e,n){this.persistence=e,this.pi=new Do(i=>t5(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=p6(this,n)}static mi(e,n){return new _f(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,ve.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gd(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=be(),r=be();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Av(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wj()?8:JF(tn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new I6;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ma()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(ma()<=Ce.DEBUG&&ie("QueryEngine","Query:",ga(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ma()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):Z.resolve())}ys(e,n){if(WT(n))return Z.resolve(null);let i=zi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dy(n,null,"F"),i=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=be(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.Ds(n,u);return this.Cs(n,f,a,c.readTime)?this.ys(e,dy(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,i,r){return WT(n)||r.isEqual(ve.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Z.resolve(null):(ma()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ga(n)),this.vs(e,a,n,KF(r,cc)).next(u=>u))})}Ds(e,n){let i=new Ct(lA(e));return n.forEach((r,o)=>{hp(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ma()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ga(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="LocalStore",A6=3e8;class b6{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new st(Ae),this.xs=new Do(o=>wv(o),Tv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function k6(t,e,n,i){return new b6(t,e,n,i)}async function NA(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=be();for(const f of r){a.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function R6(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,f,m){const g=f.batch,_=g.keys();let E=Z.resolve();return _.forEach(k=>{E=E.next(()=>m.getEntry(c,k)).next(C=>{const N=f.docVersions.get(k);Ue(N!==null,48541),C.version.compareTo(N)<0&&(g.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),m.addEntry(C)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function LA(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function N6(t,e){const n=Te(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Vt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(g,E),function(C,N,P){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=A6?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,E,m)&&u.push(n.Pi.updateTargetData(o,E))});let c=Ir(),f=be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(L6(o,a,e.documentUpdates).next(m=>{c=m.ks,f=m.qs})),!i.isEqual(ve.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Ms=r,o))}function L6(t,e,n){let i=be(),r=be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Ir();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):ie(bv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{ks:a,qs:r}})}function M6(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=yv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function D6(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new ts(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function yy(t,e,n){const i=Te(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Tl(a))throw a;ie(bv,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function ix(t,e,n){const i=Te(t);let r=ve.min(),o=be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,m){const g=Te(c),_=g.xs.get(m);return _!==void 0?Z.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,zi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:ve.min(),n?o:be())).next(u=>(O6(i,T5(e),u),{documents:u,Qs:o})))}function O6(t,e,n){let i=t.Os.get(e)||ve.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class rx{constructor(){this.activeTargetIds=C5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V6{constructor(){this.Mo=new rx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="ConnectivityMonitor";class ox{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(sx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(sx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=null;function _y(){return Kh===null?Kh=function(){return 268435456+Math.round(2147483648*Math.random())}():Kh++,"0x"+Kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",F6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===hf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=_y(),u=this.zo(e,n.toUriEncodedString());ie(Nm,`Sending RPC '${e}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,o);const{host:f}=new URL(u),m=Rs(f);return this.Jo(e,u,c,i,m).then(g=>(ie(Nm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Po(Nm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=F6[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class B6 extends U6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=_y();return new Promise((u,c)=>{const f=new DC;f.setWithCredentials(!0),f.listenOnce(OC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case md.NO_ERROR:const g=f.getResponseJson();ie(Gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case md.TIMEOUT:ie(Gt,`RPC '${e}' ${a} timed out`),c(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const _=f.getStatus();if(ie(Gt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const C=function(P){const x=P.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(x)>=0?x:X.UNKNOWN}(k.status);c(new le(C,k.message))}else c(new le(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new le(X.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Gt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Gt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=_y(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FC(),u=jC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");ie(Gt,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);this.I_(g);let _=!1,E=!1;const k=new z6({Yo:N=>{E?ie(Gt,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(_||(ie(Gt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),ie(Gt,`RPC '${e}' stream ${r} sending:`,N),g.send(N))},Zo:()=>g.close()}),C=(N,P,x)=>{N.listen(P,A=>{try{x(A)}catch(F){setTimeout(()=>{throw F},0)}})};return C(g,pu.EventType.OPEN,()=>{E||(ie(Gt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),C(g,pu.EventType.CLOSE,()=>{E||(E=!0,ie(Gt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),C(g,pu.EventType.ERROR,N=>{E||(E=!0,Po(Gt,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new le(X.UNAVAILABLE,"The operation could not be completed")))}),C(g,pu.EventType.MESSAGE,N=>{var P;if(!E){const x=N.data[0];Ue(!!x,16349);const A=x,F=(A==null?void 0:A.error)||((P=A[0])==null?void 0:P.error);if(F){ie(Gt,`RPC '${e}' stream ${r} received error:`,F);const z=F.status;let $=function(M){const D=vt[M];if(D!==void 0)return wA(D)}(z),R=F.message;$===void 0&&($=X.INTERNAL,R="Unknown error status: "+z+" with message "+F.message),E=!0,k.a_(new le($,R)),g.close()}else ie(Gt,`RPC '${e}' stream ${r} received:`,x),k.u_(x)}}),C(u,VC.STAT_EVENT,N=>{N.stat===oy.PROXY?ie(Gt,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===oy.NOPROXY&&ie(Gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){return new q5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="PersistentStream";class DA{constructor(e,n,i,r,o,a,u,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new le(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(ax,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(ax,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H6 extends DA{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Z5(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ve.min():a.readTime?Hi(a.readTime):ve.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=gy(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=hy(c)?{documents:Q5(o,c)}:{query:J5(o,c).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=EA(o,a.resumeToken);const f=fy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ve.min())>0){u.readTime=yf(o,a.snapshotVersion.toTimestamp());const f=fy(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=t6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=gy(this.serializer),n.removeTarget=e,this.q_(n)}}class W6 extends DA{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=X5(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=gy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Y5(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{}class q6 extends $6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,py(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,py(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class G6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="RemoteStore";class K6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Oo(this)&&(ie(Io,"Restarting streams for network reachability change."),await async function(c){const f=Te(c);f.Ea.add(4),await Mc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await gp(f)}(this))})}),this.Ra=new G6(i,r)}}async function gp(t){if(Oo(t))for(const e of t.da)await e(!0)}async function Mc(t){for(const e of t.da)await e(!1)}function OA(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lv(n)?Nv(n):xl(n).O_()&&Rv(n,e))}function kv(t,e){const n=Te(t),i=xl(n);n.Ia.delete(e),i.O_()&&VA(n,e),n.Ia.size===0&&(i.O_()?i.L_():Oo(n)&&n.Ra.set("Unknown"))}function Rv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(t).Y_(e)}function VA(t,e){t.Va.Ue(e),xl(t).Z_(e)}function Nv(t){t.Va=new B5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xl(t).start(),t.Ra.ua()}function Lv(t){return Oo(t)&&!xl(t).x_()&&t.Ia.size>0}function Oo(t){return Te(t).Ea.size===0}function jA(t){t.Va=void 0}async function Z6(t){t.Ra.set("Online")}async function Y6(t){t.Ia.forEach((e,n)=>{Rv(t,e)})}async function X6(t,e){jA(t),Lv(t)?(t.Ra.ha(e),Nv(t)):t.Ra.set("Unknown")}async function Q6(t,e,n){if(t.Ra.set("Online"),e instanceof xA&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vf(t,i)}else if(e instanceof vd?t.Va.Ze(e):e instanceof TA?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const i=await LA(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const m=o.Ia.get(c);if(!m)return;o.Ia.set(c,m.withResumeToken(Vt.EMPTY_BYTE_STRING,m.snapshotVersion)),VA(o,c);const g=new ts(m.target,c,f,m.sequenceNumber);Rv(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(Io,"Failed to raise snapshot:",i),await vf(t,i)}}async function vf(t,e,n){if(!Tl(e))throw e;t.Ea.add(1),await Mc(t),t.Ra.set("Offline"),n||(n=()=>LA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gp(t)})}function FA(t,e){return e().catch(n=>vf(t,n,e))}async function yp(t){const e=Te(t),n=Ps(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yv;for(;J6(e);)try{const r=await M6(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,eU(e,r)}catch(r){await vf(e,r)}UA(e)&&zA(e)}function J6(t){return Oo(t)&&t.Ta.length<10}function eU(t,e){t.Ta.push(e);const n=Ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UA(t){return Oo(t)&&!Ps(t).x_()&&t.Ta.length>0}function zA(t){Ps(t).start()}async function tU(t){Ps(t).ra()}async function nU(t){const e=Ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function iU(t,e,n){const i=t.Ta.shift(),r=Ev.from(i,e,n);await FA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await yp(t)}async function rU(t,e){e&&Ps(t).X_&&await async function(i,r){if(function(a){return F5(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();Ps(i).B_(),await FA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await yp(i)}}(t,e),UA(t)&&zA(t)}async function lx(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ie(Io,"RemoteStore received new credentials");const i=Oo(n);n.Ea.add(3),await Mc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gp(n)}async function sU(t,e){const n=Te(t);e?(n.Ea.delete(2),await gp(n)):e||(n.Ea.add(2),await Mc(n),n.Ra.set("Unknown"))}function xl(t){return t.ma||(t.ma=function(n,i,r){const o=Te(n);return o.sa(),new H6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Z6.bind(null,t),t_:Y6.bind(null,t),r_:X6.bind(null,t),H_:Q6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Lv(t)?Nv(t):t.Ra.set("Unknown")):(await t.ma.stop(),jA(t))})),t.ma}function Ps(t){return t.fa||(t.fa=function(n,i,r){const o=Te(n);return o.sa(),new W6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:tU.bind(null,t),r_:rU.bind(null,t),ta:nU.bind(null,t),na:iU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yp(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(Io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Mv(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),Tl(t))return new le(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=mu(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.ga=new st(ce.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ul{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new ul(e,n,Wa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class aU{constructor(){this.queries=cx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Te(n),o=r.queries;r.queries=cx(),o.forEach((a,u)=>{for(const c of u.Sa)c.onError(i)})})(this,new le(X.ABORTED,"Firestore shutting down"))}}function cx(){return new Do(t=>aA(t),cp)}async function BA(t,e){const n=Te(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new oU,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Dv(a,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ov(n)}async function HA(t,e){const n=Te(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lU(t,e){const n=Te(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Ov(n)}function uU(t,e,n){const i=Te(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Ov(t){t.Ca.forEach(e=>{e.next()})}var vy,hx;(hx=vy||(vy={})).Ma="default",hx.Cache="cache";class WA{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.key=e}}class qA{constructor(e){this.key=e}}class cU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=lA(e),this.tu=new Wa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new ux,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),E=hp(this.query,g)?g:null,k=!!_&&this.mutatedKeys.has(_.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;_&&E?_.data.isEqual(E.data)?k!==C&&(i.track({type:3,doc:E}),N=!0):this.su(_,E)||(i.track({type:2,doc:E}),N=!0,(c&&this.eu(E,c)>0||f&&this.eu(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),N=!0):_&&!E&&(i.track({type:1,doc:_}),N=!0,(c||f)&&(u=!0)),N&&(E?(a=a.add(E),o=C?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(E,k){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:N})}};return C(E)-C(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,f=c!==this.Za;return this.Za=c,a.length!==0||f?{snapshot:new ul(this.query,e.tu,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new qA(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new $A(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vv="SyncEngine";class hU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dU{constructor(e){this.key=e,this.hu=!1}}class fU{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Do(u=>aA(u),cp),this.Iu=new Map,this.Eu=new Set,this.du=new st(ce.comparator),this.Au=new Map,this.Ru=new Iv,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pU(t,e,n=!0){const i=QA(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await GA(i,e,n,!0),r}async function mU(t,e){const n=QA(t);await GA(n,e,!0,!1)}async function GA(t,e,n,i){const r=await D6(t.localStore,zi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await gU(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&OA(t.remoteStore,r),u}async function gU(t,e,n,i,r){t.pu=(g,_,E)=>async function(C,N,P,x){let A=N.view.ru(P);A.Cs&&(A=await ix(C.localStore,N.query,!1).then(({documents:R})=>N.view.ru(R,A)));const F=x&&x.targetChanges.get(N.targetId),z=x&&x.targetMismatches.get(N.targetId)!=null,$=N.view.applyChanges(A,C.isPrimaryClient,F,z);return fx(C,N.targetId,$.au),$.snapshot}(t,g,_,E);const o=await ix(t.localStore,e,!0),a=new cU(e,o.Qs),u=a.ru(o.documents),c=Lc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);fx(t,n,f.au);const m=new hU(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function yU(t,e,n){const i=Te(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!cp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await yy(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&kv(i.remoteStore,r.targetId),wy(i,r.targetId)}).catch(wl)):(wy(i,r.targetId),await yy(i.localStore,r.targetId,!0))}async function _U(t,e){const n=Te(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kv(n.remoteStore,i.targetId))}async function vU(t,e,n){const i=IU(t);try{const r=await function(a,u){const c=Te(a),f=Ge.now(),m=u.reduce((E,k)=>E.add(k.key),be());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=Ir(),C=be();return c.Ns.getEntries(E,m).next(N=>{k=N,k.forEach((P,x)=>{x.isValidDocument()||(C=C.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(N=>{g=N;const P=[];for(const x of u){const A=M5(x,g.get(x.key).overlayedDocument);A!=null&&P.push(new Ls(x.key,A,eA(A.value.mapValue),Bi.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,P,u)}).next(N=>{_=N;const P=N.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(E,N.batchId,P)})}).then(()=>({batchId:_.batchId,changes:cA(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Vu[a.currentUser.toKey()];f||(f=new st(Ae)),f=f.insert(u,c),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await Dc(i,r.changes),await yp(i.remoteStore)}catch(r){const o=Dv(r,"Failed to persist write");n.reject(o)}}async function KA(t,e){const n=Te(t);try{const i=await N6(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ue(a.hu,14607):r.removedDocuments.size>0&&(Ue(a.hu,42227),a.hu=!1))}),await Dc(n,i,e)}catch(i){await wl(i)}}function dx(t,e,n){const i=Te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=Te(a);c.onlineState=u;let f=!1;c.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&Ov(c)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wU(t,e,n){const i=Te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new st(ce.comparator);a=a.insert(o,Xt.newNoDocument(o,ve.min()));const u=be().add(o),c=new pp(ve.min(),new Map,new st(Ae),a,u);await KA(i,c),i.du=i.du.remove(o),i.Au.delete(e),jv(i)}else await yy(i.localStore,e,!1).then(()=>wy(i,e,n)).catch(wl)}async function TU(t,e){const n=Te(t),i=e.batch.batchId;try{const r=await R6(n.localStore,e);YA(n,i,null),ZA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Dc(n,r)}catch(r){await wl(r)}}async function xU(t,e,n){const i=Te(t);try{const r=await function(a,u){const c=Te(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ue(g!==null,37113),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(i.localStore,e);YA(i,e,n),ZA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Dc(i,r)}catch(r){await wl(r)}}function ZA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function YA(t,e,n){const i=Te(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function wy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||XA(t,i)})}function XA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jv(t))}function fx(t,e,n){for(const i of n)i instanceof $A?(t.Ru.addReference(i.key,e),EU(t,i)):i instanceof qA?(ie(Vv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||XA(t,i.key)):me(19791,{wu:i})}function EU(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(Vv,"New document in limbo: "+n),t.Eu.add(i),jv(t))}function jv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(tt.fromString(e)),i=t.fu.next();t.Au.set(i,new dU(n)),t.du=t.du.insert(n,i),OA(t.remoteStore,new ts(zi(up(n.path)),i,"TargetPurposeLimboResolution",sp.ce))}}async function Dc(t,e,n){const i=Te(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,c)=>{a.push(i.pu(c,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=Av.As(c.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(c,f){const m=Te(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Z.forEach(f,_=>Z.forEach(_.Es,E=>m.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>Z.forEach(_.ds,E=>m.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!Tl(g))throw g;ie(bv,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const E=m.Ms.get(_),k=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(_,C)}}}(i.localStore,o))}async function SU(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ie(Vv,"User change. New user:",e.toKey());const i=await NA(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(c=>{c.reject(new le(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dc(n,i.Ls)}}function PU(t,e){const n=Te(t),i=n.Au.get(e);if(i&&i.hu)return be().add(i.key);{let r=be();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function QA(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wU.bind(null,e),e.Pu.H_=lU.bind(null,e.eventManager),e.Pu.yu=uU.bind(null,e.eventManager),e}function IU(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xU.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return k6(this.persistence,new C6,e.initialUser,this.serializer)}Cu(e){return new RA(Cv.mi,this.serializer)}Du(e){return new V6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class CU extends wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof _f,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new d6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new RA(i=>_f.mi(i,n),this.serializer)}}class Ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SU.bind(null,this.syncEngine),await sU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aU}()}createDatastore(e){const n=mp(e.databaseInfo.databaseId),i=function(o){return new B6(o)}(e.databaseInfo);return function(o,a,u,c){return new q6(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new K6(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>dx(this.syncEngine,n,0),function(){return ox.v()?new ox:new j6}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,m){const g=new fU(r,o,a,u,c,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Te(r);ie(Io,"RemoteStore shutting down."),o.Ea.add(5),await Mc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class AU{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(Is,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(Is,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Mm(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await NA(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function px(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bU(t);ie(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>lx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>lx(e.remoteStore,r)),t._onlineComponents=e}async function bU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Is,"Using user provided OfflineComponentProvider");try{await Mm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Mm(t,new wf)}}else ie(Is,"Using default OfflineComponentProvider"),await Mm(t,new CU(void 0));return t._offlineComponents}async function eb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Is,"Using user provided OnlineComponentProvider"),await px(t,t._uninitializedComponentsProvider._online)):(ie(Is,"Using default OnlineComponentProvider"),await px(t,new Ty))),t._onlineComponents}function kU(t){return eb(t).then(e=>e.syncEngine)}async function xy(t){const e=await eb(t),n=e.eventManager;return n.onListen=pU.bind(null,e.syncEngine),n.onUnlisten=yU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_U.bind(null,e.syncEngine),n}function RU(t,e,n={}){const i=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const m=new JA({next:_=>{m.Nu(),a.enqueueAndForget(()=>HA(o,g));const E=_.docs.has(u);!E&&_.fromCache?f.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&c&&c.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new WA(up(u.path),m,{includeMetadataChanges:!0,qa:!0});return BA(o,g)}(await xy(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firestore.googleapis.com",gx=!0;class yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nb,this.ssl=gx}else this.host=e.host,this.ssl=e.ssl??gx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c6)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tb(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new BC;switch(i.type){case"firstParty":return new zF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=mx.get(n);i&&(ie("ComponentProvider","Removing Datastore"),mx.delete(n),i.terminate())}(this),Promise.resolve()}}function ib(t,e,n,i={}){var f;t=mi(t,Fv);const r=Rs(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(cv(`https://${u}`),hv("Firestore",!0)),o.host!==nb&&o.host!==u&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:r,emulatorOptions:i};if(!xo(c,a)&&(t._setSettings(c),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Zt.MOCK_USER;else{m=AC(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zt(_)}t._authCredentials=new jF(new zC(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oc(this.firestore,e,this._query)}}class mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Rc(n,mt._jsonSchema))return new mt(e,i||null,new ce(tt.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Et("string",mt._jsonSchemaVersion),referencePath:Et("string")};class cl extends Oc{constructor(e,n,i){super(e,n,up(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new ce(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function wt(t,e,...n){if(t=At(t),arguments.length===1&&(e=rp.newId()),GF("doc","path",e),t instanceof Fv){const i=tt.fromString(e,...n);return RT(i),new mt(t,null,new ce(i))}{if(!(t instanceof mt||t instanceof cl))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(tt.fromString(e,...n));return RT(i),new mt(t.firestore,t instanceof cl?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="AsyncQueue";class vx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MA(this,"async_queue_retry"),this._c=()=>{const i=Lm();i&&ie(_x,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;ie(_x,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",wx(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Mv.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:wx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Co extends Fv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new vx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vx(e),this._firestoreClient=void 0,await e}}}function rb(t,e){const n=typeof t=="object"?t:pv(),i=typeof t=="string"?t:hf,r=ip(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=PC("firestore");o&&ib(r,...o)}return r}function _p(t){if(t._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NU(t),t._firestoreClient}function NU(t){var i,r,o;const e=t._freezeSettings(),n=function(u,c,f,m){return new r5(u,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new AU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Vt.fromBase64String(e))}catch(n){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:Et("string",bn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:Et("string",gi._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Et("string",yi._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=/^__.*__$/;class MU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class sb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ob(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class Uv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ob(this.Ac)&&LU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||mp(e)}Cc(e,n,i,r=!1){return new Uv({Ac:e,methodName:n,Dc:i,path:Dt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ab(t){const e=t._freezeSettings(),n=mp(t._databaseId);return new DU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OU(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);zv("Data must be an object, but it was:",a,i);const u=lb(i,a);let c,f;if(o.merge)c=new Rn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=Ey(e,g,n);if(!a.contains(_))throw new le(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);cb(m,_)||m.push(_)}c=new Rn(m),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new MU(new Tn(u),c,f)}class wp extends vp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function VU(t,e,n,i){const r=t.Cc(1,e,n);zv("Data must be an object, but it was:",r,i);const o=[],a=Tn.empty();Ns(i,(c,f)=>{const m=Bv(e,c,n);f=At(f);const g=r.yc(m);if(f instanceof wp)o.push(m);else{const _=Tp(f,g);_!=null&&(o.push(m),a.set(m,_))}});const u=new Rn(o);return new sb(a,u,r.fieldTransforms)}function jU(t,e,n,i,r,o){const a=t.Cc(1,e,n),u=[Ey(e,i,n)],c=[r];if(o.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(Ey(e,o[_])),c.push(o[_+1]);const f=[],m=Tn.empty();for(let _=u.length-1;_>=0;--_)if(!cb(f,u[_])){const E=u[_];let k=c[_];k=At(k);const C=a.yc(E);if(k instanceof wp)f.push(E);else{const N=Tp(k,C);N!=null&&(f.push(E),m.set(E,N))}}const g=new Rn(f);return new sb(m,g,a.fieldTransforms)}function Tp(t,e){if(ub(t=At(t)))return zv("Unsupported field value:",e,t),lb(t,e);if(t instanceof vp)return function(i,r){if(!ob(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=Tp(u,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return A5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ge.fromDate(i);return{timestampValue:yf(r.serializer,o)}}if(i instanceof Ge){const o=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yf(r.serializer,o)}}if(i instanceof gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bn)return{bytesValue:EA(r.serializer,i._byteString)};if(i instanceof mt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof yi)return function(a,u){return{mapValue:{fields:{[QC]:{stringValue:JC},[df]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return xv(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${gv(i)}`)}(t,e)}function lb(t,e){const n={};return qC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(i,r)=>{const o=Tp(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function ub(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof gi||t instanceof bn||t instanceof mt||t instanceof vp||t instanceof yi)}function zv(t,e,n){if(!ub(n)||!WC(n)){const i=gv(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ey(t,e,n){if((e=At(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return Bv(t,e);throw Tf("Field path arguments must be of type string or ",t,!1,void 0,n)}const FU=new RegExp("[~\\*/\\[\\]]");function Bv(t,e,n){if(e.search(FU)>=0)throw Tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vc(...e.split("."))._internalPath}catch{throw Tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tf(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new le(X.INVALID_ARGUMENT,u+t+c)}function cb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(db("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UU extends hb{data(){return super.data()}}function db(t,e){return typeof e=="string"?Bv(t,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fb{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ns(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[df].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>ft(a.doubleValue));return new yi(n)}convertGeoPoint(e){return new gi(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ap(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=xs(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=tt.fromString(e);Ue(bA(i),9688,{name:e});const r=new sl(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return r.isEqual(n)||Pr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends hb{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(db("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:Et("string",ps._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class Ou extends ps{data(e={}){return super.data(e)}}class fo{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Oa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ou(this._firestore,this._userDataWriter,i.key,i,new Oa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Ou(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Oa(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Ou(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Oa(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:HU(u.type),doc:c,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){t=mi(t,mt);const e=mi(t.firestore,Co);return RU(_p(e),t._key).then(n=>mb(e,t,n))}fo._jsonSchemaVersion="firestore/querySnapshot/1.0",fo._jsonSchema={type:Et("string",fo._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class pb extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function hi(t,e,n){t=mi(t,mt);const i=mi(t.firestore,Co),r=BU(t.converter,e,n);return Hv(i,[OU(ab(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Bi.none())])}function wd(t,e,n,...i){t=mi(t,mt);const r=mi(t.firestore,Co),o=ab(r);let a;return a=typeof(e=At(e))=="string"||e instanceof Vc?jU(o,"updateDoc",t._key,e,n,i):VU(o,"updateDoc",t._key,e),Hv(r,[a.toMutation(t._key,Bi.exists(!0))])}function jc(t,...e){var c,f,m;t=At(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Tx(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Tx(e[i])){const g=e[i];e[i]=(c=g.next)==null?void 0:c.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof mt)a=mi(t.firestore,Co),u=up(t._key.path),o={next:g=>{e[i]&&e[i](mb(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=mi(t,Oc);a=mi(g.firestore,Co),u=g._query;const _=new pb(a);o={next:E=>{e[i]&&e[i](new fo(a,_,g,E))},error:e[i+1],complete:e[i+2]},zU(t._query)}return function(_,E,k,C){const N=new JA(C),P=new WA(E,N,k);return _.asyncQueue.enqueueAndForget(async()=>BA(await xy(_),P)),()=>{N.Nu(),_.asyncQueue.enqueueAndForget(async()=>HA(await xy(_),P))}}(_p(a),u,r,o)}function Hv(t,e){return function(i,r){const o=new fs;return i.asyncQueue.enqueueAndForget(async()=>vU(await kU(i),r,o)),o.promise}(_p(t),e)}function mb(t,e,n){const i=n.docs.get(e._key),r=new pb(t);return new ps(t,r,e._key,i,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){vl=r})(Mo),Eo(new ws("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Co(new FF(i.getProvider("auth-internal")),new BF(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ui(CT,AT,e),Ui(CT,AT,"esm2020")})();const WU=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:fb,Bytes:bn,CollectionReference:cl,DocumentReference:mt,DocumentSnapshot:ps,FieldPath:Vc,FieldValue:vp,Firestore:Co,FirestoreError:le,GeoPoint:gi,Query:Oc,QueryDocumentSnapshot:Ou,QuerySnapshot:fo,SnapshotMetadata:Oa,Timestamp:Ge,VectorValue:yi,_AutoId:rp,_ByteString:Vt,_DatabaseId:sl,_DocumentKey:ce,_EmptyAuthCredentialsProvider:BC,_FieldPath:Dt,_cast:mi,_logWarn:Po,_validateIsNotUsedTogether:HC,connectFirestoreEmulator:ib,doc:wt,ensureFirestoreConfigured:_p,executeWrite:Hv,getDoc:Sy,getFirestore:rb,onSnapshot:jc,setDoc:hi,updateDoc:wd},Symbol.toStringTag,{value:"Module"}));var $U="firebase",qU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui($U,qU,"app");function gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GU=gb,yb=new bc("auth","Firebase",gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new dv("@firebase/auth");function KU(t,...e){xf.logLevel<=Ce.WARN&&xf.warn(`Auth (${Mo}): ${t}`,...e)}function Td(t,...e){xf.logLevel<=Ce.ERROR&&xf.error(`Auth (${Mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,...e){throw $v(t,...e)}function _i(t,...e){return $v(t,...e)}function Wv(t,e,n){const i={...GU(),[e]:n};return new bc("auth","Firebase",i).create(e,{appName:t.name})}function po(t){return Wv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZU(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ki(t,"argument-error"),Wv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $v(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return yb.create(t,...e)}function ge(t,e,...n){if(!t)throw $v(e,...n)}function fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Td(e),new Error(e)}function Cr(t,e){t||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YU(){return xx()==="http:"||xx()==="https:"}function xx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YU()||yj()||"connection"in navigator)?navigator.onLine:!0}function QU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cr(n>e,"Short delay should be less than long delay!"),this.isMobile=pj()||_j()}get(){return XU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){Cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tz=new Fc(3e4,6e4);function Gv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function El(t,e,n,i,r={}){return vb(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=kc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return gj()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Rs(t.emulatorConfig.host)&&(f.credentials="include"),_b.fetch()(await wb(t,t.config.apiHost,n,u),f)})}async function vb(t,e,n){t._canInitEmulator=!1;const i={...JU,...e};try{const r=new iz(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Zh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Zh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Zh(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Wv(t,m,f);Ki(t,m)}}catch(r){if(r instanceof Zi)throw r;Ki(t,"network-request-failed",{message:String(r)})}}async function nz(t,e,n,i,r={}){const o=await El(t,e,n,i,r);return"mfaPendingCredential"in o&&Ki(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function wb(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?qv(t.config,r):`${t.config.apiScheme}://${r}`;return ez.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class iz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),tz.get())})}}function Zh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_i(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(t,e){return El(t,"POST","/v1/accounts:delete",e)}async function Ef(t,e){return El(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sz(t,e=!1){const n=At(t),i=await n.getIdToken(e),r=Kv(i);ge(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Vu(Dm(r.auth_time)),issuedAtTime:Vu(Dm(r.iat)),expirationTime:Vu(Dm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Dm(t){return Number(t)*1e3}function Kv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const r=EC(n);return r?JSON.parse(r):(Td("Failed to decode base64 JWT payload"),null)}catch(r){return Td("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Ex(t){const e=Kv(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Zi&&oz(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function oz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(t){var g;const e=t.auth,n=await t.getIdToken(),i=await mc(t,Ef(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?Tb(r.providerUserInfo):[],a=uz(t.providerData,o),u=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Iy(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function lz(t){const e=At(t);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uz(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Tb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e){const n=await vb(t,{},async()=>{const i=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await wb(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:i};return t.emulatorConfig&&Rs(t.emulatorConfig.host)&&(c.credentials="include"),_b.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hz(t,e){return El(t,"POST","/v2/accounts:revokeToken",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Ex(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await cz(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new $a;return i&&(ge(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ge(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new az(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Iy(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sz(this,e)}reload(){return lz(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(po(this.auth));const e=await this.getIdToken();return await mc(this,rz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:k,stsTokenManager:C}=n;ge(g&&C,e,"internal-error");const N=$a.fromJSON(this.name,C);ge(typeof g=="string",e,"internal-error"),zr(i,e.name),zr(r,e.name),ge(typeof _=="boolean",e,"internal-error"),ge(typeof E=="boolean",e,"internal-error"),zr(o,e.name),zr(a,e.name),zr(u,e.name),zr(c,e.name),zr(f,e.name),zr(m,e.name);const P=new di({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:N,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(P.providerData=k.map(x=>({...x}))),c&&(P._redirectEventId=c),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new $a;r.updateFromServerResponse(n);const o=new di({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ge(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Tb(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new $a;u.updateFromIdToken(i);const c=new di({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Iy(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Map;function pr(t){Cr(t instanceof Function,"Expected a class definition");let e=Sx.get(t);return e?(Cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xb.type="NONE";const Px=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class qa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=xd(this.userKey,r.apiKey,o),this.fullPersistenceKey=xd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ef(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new qa(pr(Px),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||pr(Px);const a=xd(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Ef(e,{idToken:m}).catch(()=>{});if(!_)break;g=await di._fromGetAccountInfoResponse(e,_,m)}else g=di._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new qa(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new qa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ib(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ab(e))return"Blackberry";if(bb(e))return"Webos";if(Sb(e))return"Safari";if((e.includes("chrome/")||Pb(e))&&!e.includes("edge/"))return"Chrome";if(Cb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Eb(t=tn()){return/firefox\//i.test(t)}function Sb(t=tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pb(t=tn()){return/crios\//i.test(t)}function Ib(t=tn()){return/iemobile/i.test(t)}function Cb(t=tn()){return/android/i.test(t)}function Ab(t=tn()){return/blackberry/i.test(t)}function bb(t=tn()){return/webos/i.test(t)}function Zv(t=tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dz(t=tn()){var e;return Zv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function fz(){return vj()&&document.documentMode===10}function kb(t=tn()){return Zv(t)||Cb(t)||bb(t)||Ab(t)||/windows phone/i.test(t)||Ib(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e=[]){let n;switch(t){case"Browser":n=Ix(tn());break;case"Worker":n=`${Ix(tn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(t,e={}){return El(t,"GET","/v2/passwordPolicy",Gv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=6;class yz{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cx(this),this.idTokenSubscription=new Cx(this),this.beforeStateQueue=new pz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ef(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(po(this));const n=e?At(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mz(this),n=new yz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&KU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xp(t){return At(t)}class Cx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cj(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vz(t){Yv=t}function wz(t){return Yv.loadJS(t)}function Tz(){return Yv.gapiScript}function xz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e){const n=ip(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(xo(o,e??{}))return r;Ki(r,"already-initialized")}return n.initialize({options:e})}function Sz(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Pz(t,e,n){const i=xp(t);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=Nb(e),{host:a,port:u}=Iz(e),c=u===null?"":`:${u}`,f={url:`${o}//${a}${c}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(xo(f,i.config.emulator)&&xo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Rs(a)?(cv(`${o}//${a}${c}`),hv("Auth",!0)):Cz()}function Nb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Iz(t){const e=Nb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Ax(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:Ax(a)}}}function Ax(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Cz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e){return nz(t,"POST","/v1/accounts:signInWithIdp",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az="http://localhost";class Ao extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new Ao(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ga(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:Az,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends Xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Uc{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ao._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return cr.credential(n,i)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Uc{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Uc{constructor(){super("twitter.com")}static credential(e,n){return Ao._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Yr.credential(n,i)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await di._fromIdTokenResponse(e,i,r),a=bx(i);return new hl({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=bx(i);return new hl({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function bx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends Zi{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Pf(e,n,i,r)}}function Mb(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(t,o,e,i):o})}async function bz(t,e,n=!1){const i=await mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e,n=!1){const{auth:i}=t;if(Yn(i.app))return Promise.reject(po(i));const r="reauthenticate";try{const o=await mc(t,Mb(i,r,e,t),n);ge(o.idToken,i,"internal-error");const a=Kv(o.idToken);ge(a,i,"internal-error");const{sub:u}=a;return ge(t.uid===u,i,"user-mismatch"),hl._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ki(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz(t,e,n=!1){if(Yn(t.app))return Promise.reject(po(t));const i="signIn",r=await Mb(t,i,e),o=await hl._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Nz(t,e,n,i){return At(t).onIdTokenChanged(e,n,i)}function Lz(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function Mz(t){return At(t).signOut()}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=1e3,Oz=10;class Ob extends Db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);fz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Oz):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Dz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ob.type="LOCAL";const Vz=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends Db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vb.type="SESSION";const jb=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ep(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await jz(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=Qv("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function Uz(t){Wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function zz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Hz(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebaseLocalStorageDb",Wz=1,Cf="firebaseLocalStorage",zb="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sp(t,e){return t.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function $z(){const t=indexedDB.deleteDatabase(Ub);return new zc(t).toPromise()}function Cy(){const t=indexedDB.open(Ub,Wz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Cf,{keyPath:zb})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Cf)?e(i):(i.close(),await $z(),e(await Cy()))})})}async function kx(t,e,n){const i=Sp(t,!0).put({[zb]:e,value:n});return new zc(i).toPromise()}async function qz(t,e){const n=Sp(t,!1).get(e),i=await new zc(n).toPromise();return i===void 0?null:i.value}function Rx(t,e){const n=Sp(t,!0).delete(e);return new zc(n).toPromise()}const Gz=800,Kz=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Kz)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(Hz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await zz(),!this.activeServiceWorker)return;this.sender=new Fz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cy();return await kx(e,If,"1"),await Rx(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>kx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>qz(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Sp(r,!1).getAll();return new zc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const Zz=Bb;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){return e?pr(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Yz(t){return Rz(t.auth,new Jv(t),t.bypassAuthState)}function Xz(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),kz(n,new Jv(t),t.bypassAuthState)}async function Qz(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),bz(n,new Jv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yz;case"linkViaPopup":case"linkViaRedirect":return Qz;case"reauthViaPopup":case"reauthViaRedirect":return Xz;default:Ki(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=new Fc(2e3,1e4);async function eB(t,e,n){if(Yn(t.app))return Promise.reject(_i(t,"operation-not-supported-in-this-environment"));const i=xp(t);ZU(t,e,Xv);const r=Hb(i,n);return new lo(i,"signInViaPopup",e,r).executeNotNull()}class lo extends Wb{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jz.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="pendingRedirect",Ed=new Map;class nB extends Wb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ed.get(this.auth._key());if(!e){try{const i=await iB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ed.set(this.auth._key(),e)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iB(t,e){const n=oB(e),i=sB(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function rB(t,e){Ed.set(t._key(),e)}function sB(t){return pr(t._redirectPersistence)}function oB(t){return xd(tB,t.config.apiKey,t.name)}async function aB(t,e,n=!1){if(Yn(t.app))return Promise.reject(po(t));const i=xp(t),r=Hb(i,e),a=await new nB(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=10*60*1e3;class uB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!$b(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lB&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $b({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e={}){return El(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fB=/^https?/;async function pB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hB(t);for(const n of e)try{if(mB(n))return}catch{}Ki(t,"unauthorized-domain")}function mB(t){const e=Py(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!fB.test(n))return!1;if(dB.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=new Fc(3e4,6e4);function Lx(){const t=Wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yB(t){return new Promise((e,n)=>{var r,o,a;function i(){Lx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lx(),n(_i(t,"network-request-failed"))},timeout:gB.get()})}if((o=(r=Wi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Wi().gapi)!=null&&a.load)i();else{const u=xz("iframefcb");return Wi()[u]=()=>{gapi.load?i():n(_i(t,"network-request-failed"))},wz(`${Tz()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function _B(t){return Sd=Sd||yB(t),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=new Fc(5e3,15e3),wB="__/auth/iframe",TB="emulator/auth/iframe",xB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SB(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qv(e,TB):`https://${t.config.authDomain}/${wB}`,i={apiKey:e.apiKey,appName:t.name,v:Mo},r=EB.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${kc(i).slice(1)}`}async function PB(t){const e=await _B(t),n=Wi().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:SB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xB,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=_i(t,"network-request-failed"),u=Wi().setTimeout(()=>{o(a)},vB.get());function c(){Wi().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CB=500,AB=600,bB="_blank",kB="http://localhost";class Mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RB(t,e,n,i=CB,r=AB){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c={...IB,width:i.toString(),height:r.toString(),top:o,left:a},f=tn().toLowerCase();n&&(u=Pb(f)?bB:n),Eb(f)&&(e=e||kB,c.scrollbars="yes");const m=Object.entries(c).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(dz(f)&&u!=="_self")return NB(e||"",u),new Mx(null);const g=window.open(e||"",u,m);ge(g,t,"popup-blocked");try{g.focus()}catch{}return new Mx(g)}function NB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB="__/auth/handler",MB="emulator/auth/handler",DB=encodeURIComponent("fac");async function Dx(t,e,n,i,r,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mo,eventId:r};if(e instanceof Xv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Ij(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Uc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),f=c?`#${DB}=${encodeURIComponent(c)}`:"";return`${OB(t)}?${kc(u).slice(1)}${f}`}function OB({config:t}){return t.emulator?qv(t,MB):`https://${t.authDomain}/${LB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class VB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jb,this._completeRedirectFn=aB,this._overrideRedirectResult=rB}async _openPopup(e,n,i,r){var a;Cr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Dx(e,n,i,Py(),r);return RB(e,o,Qv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Dx(e,n,i,Py(),r);return Uz(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Cr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await PB(e),i=new uB(e);return n.register("authEvent",r=>(ge(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Om,{type:Om},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Om];o!==void 0&&n(!!o),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kb()||Sb()||Zv()}}const jB=VB;var Ox="@firebase/auth",Vx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zB(t){Eo(new ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(t)},f=new _z(i,r,o,c);return Sz(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Eo(new ws("auth-internal",e=>{const n=xp(e.getProvider("auth").getImmediate());return(i=>new FB(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(Ox,Vx,UB(t)),Ui(Ox,Vx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=5*60,HB=CC("authIdTokenMaxAge")||BB;let jx=null;const WB=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>HB)return;const r=n==null?void 0:n.token;jx!==r&&(jx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function $B(t=pv()){const e=ip(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ez(t,{popupRedirectResolver:jB,persistence:[Zz,Vz,jb]}),i=CC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=WB(o.toString());Lz(n,a,()=>a(n.currentUser)),Nz(n,u=>a(u))}}const r=SC("auth");return r&&Pz(n,`http://${r}`),n}function qB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vz({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=_i("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",qB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zB("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebasestorage.googleapis.com",Gb="storageBucket",GB=2*60*1e3,KB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Zi{constructor(e,n,i=0){super(Vm(e),`Firebase Storage: ${n} (${Vm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Vm(t){return"storage/"+t}function e0(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(ut.UNKNOWN,t)}function ZB(t){return new ct(ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YB(t){return new ct(ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(ut.UNAUTHENTICATED,t)}function QB(){return new ct(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JB(t){return new ct(ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function e9(){return new ct(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t9(){return new ct(ut.CANCELED,"User canceled the upload/download.")}function n9(t){return new ct(ut.INVALID_URL,"Invalid URL '"+t+"'.")}function i9(t){return new ct(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function r9(){return new ct(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gb+"' property when initializing the app?")}function s9(){return new ct(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function o9(){return new ct(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a9(t){return new ct(ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ay(t){return new ct(ut.INVALID_ARGUMENT,t)}function Kb(){return new ct(ut.APP_DELETED,"The Firebase app was deleted.")}function l9(t){return new ct(ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ju(t,e){return new ct(ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ou(t){throw new ct(ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(i.path==="")return i;throw i9(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${m}/b/${r}/o${_}`,"i"),k={bucket:1,path:3},C=n===qb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",P=new RegExp(`^https?://${C}/${r}/${N}`,"i"),A=[{regex:u,indices:c,postModify:o},{regex:E,indices:k,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<A.length;F++){const z=A[F],$=z.regex.exec(e);if($){const R=$[z.indices.bucket];let I=$[z.indices.path];I||(I=""),i=new Nn(R,I),z.postModify(i);break}}if(i==null)throw n9(e);return i}}class u9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function c(){return u===2}let f=!1;function m(...N){f||(f=!0,e.apply(null,N))}function g(N){r=setTimeout(()=>{r=null,t(E,c())},N)}function _(){o&&clearTimeout(o)}function E(N,...P){if(f){_();return}if(N){_(),m.call(null,N,...P);return}if(c()||a){_(),m.call(null,N,...P);return}i<64&&(i*=2);let A;u===1?(u=2,A=0):A=(i+Math.random())*1e3,g(A)}let k=!1;function C(N){k||(k=!0,_(),!f&&(r!==null?(N||(u=2),clearTimeout(r),g(0)):N||(u=1)))}return g(0),o=setTimeout(()=>{a=!0,C(!0)},n),C}function h9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t){return t!==void 0}function f9(t){return typeof t=="object"&&!Array.isArray(t)}function t0(t){return typeof t=="string"||t instanceof String}function Fx(t){return n0()&&t instanceof Blob}function n0(){return typeof Blob<"u"}function Ux(t,e,n,i){if(i<e)throw Ay(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ay(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Zb(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var mo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mo||(mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n,i,r,o,a,u,c,f,m,g,_=!0,E=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=_,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,C)=>{this.resolve_=k,this.reject_=C,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Yh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===mo.NO_ERROR,c=o.getStatus();if(!u||p9(c,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===mo.ABORT;i(!1,new Yh(!1,null,m));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new Yh(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());d9(c)?o(c):o()}catch(c){a(c)}else if(u!==null){const c=e0();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(r.canceled){const c=this.appDelete_?Kb():t9();a(c)}else{const c=e9();a(c)}};this.canceled_?n(!1,new Yh(!1,null,!0)):this.backoffId_=c9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function g9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function y9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function v9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function w9(t,e,n,i,r,o,a=!0,u=!1){const c=Zb(t.urlParams),f=t.url+c,m=Object.assign({},t.headers);return _9(m,e),g9(m,n),y9(m,o),v9(m,i),new m9(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function x9(...t){const e=T9();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(n0())return new Blob(t);throw new ct(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t){if(typeof atob>"u")throw a9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jm{constructor(e,n){this.data=e,this.contentType=n||null}}function P9(t,e){switch(t){case Di.RAW:return new jm(Yb(e));case Di.BASE64:case Di.BASE64URL:return new jm(Xb(t,e));case Di.DATA_URL:return new jm(C9(e),A9(e))}throw e0()}function Yb(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function I9(t){let e;try{e=decodeURIComponent(t)}catch{throw ju(Di.DATA_URL,"Malformed data URL.")}return Yb(e)}function Xb(t,e){switch(t){case Di.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw ju(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Di.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw ju(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=S9(e)}catch(r){throw r.message.includes("polyfill")?r:ju(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class Qb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ju(Di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=b9(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function C9(t){const e=new Qb(t);return e.base64?Xb(Di.BASE64,e.rest):I9(e.rest)}function A9(t){return new Qb(t).contentType}function b9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){let i=0,r="";Fx(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Fx(this.data_)){const i=this.data_,r=E9(i,e,n);return r===null?null:new Xr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Xr(i,!0)}}static getBlob(...e){if(n0()){const n=e.map(i=>i instanceof Xr?i.data_:i);return new Xr(x9.apply(null,n))}else{const n=e.map(a=>t0(a)?P9(Di.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Xr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){let e;try{e=JSON.parse(t)}catch{return null}return f9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function R9(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function ek(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t,e){return e}class cn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||N9}}let Xh=null;function L9(t){return!t0(t)||t.length<2?t:ek(t)}function tk(){if(Xh)return Xh;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(o,a){return L9(a)}const n=new cn("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new cn("size");return r.xform=i,t.push(r),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),Xh=t,Xh}function M9(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Nn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function D9(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return M9(i,t),i}function nk(t,e,n){const i=Jb(e);return i===null?null:D9(t,i,n)}function O9(t,e,n,i){const r=Jb(e);if(r===null||!t0(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,g=t.fullPath,_="/b/"+a(m)+"/o/"+a(g),E=i0(_,n,i),k=Zb({alt:"media",token:f});return E+k})[0]}function V9(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class ik{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){if(!t)throw e0()}function j9(t,e){function n(i,r){const o=nk(t,r,e);return rk(o!==null),o}return n}function F9(t,e){function n(i,r){const o=nk(t,r,e);return rk(o!==null),O9(o,r,t.host,t._protocol)}return n}function sk(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=QB():r=XB():n.getStatus()===402?r=YB(t.bucket):n.getStatus()===403?r=JB(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function U9(t){const e=sk(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=ZB(t.path)),o.serverResponse=r.serverResponse,o}return n}function z9(t,e,n){const i=e.fullServerUrl(),r=i0(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new ik(r,o,F9(t,n),a);return u.errorHandler=U9(e),u}function B9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function H9(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=B9(null,e)),i}function W9(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let A="";for(let F=0;F<2;F++)A=A+Math.random().toString().slice(2);return A}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const f=H9(e,i,r),m=V9(f,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+c+"--",E=Xr.getBlob(g,i,_);if(E===null)throw s9();const k={name:f.fullPath},C=i0(o,t.host,t._protocol),N="POST",P=t.maxUploadRetryTime,x=new ik(C,N,j9(t,n),P);return x.urlParams=k,x.headers=a,x.body=E.uploadData(),x.errorHandler=sk(e),x}class $9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw ou("cannot .send() more than once");if(Rs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ou("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ou("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ou("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ou("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class q9 extends $9{initXhr(){this.xhr_.responseType="text"}}function ok(){return new q9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bo(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ek(this._location.path)}get storage(){return this._service}get parent(){const e=k9(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new bo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw l9(e)}}function G9(t,e,n){t._throwIfRoot("uploadBytes");const i=W9(t.storage,t._location,tk(),new Xr(e,!0),n);return t.storage.makeRequestWithTokens(i,ok).then(r=>({metadata:r,ref:t}))}function K9(t){t._throwIfRoot("getDownloadURL");const e=z9(t.storage,t._location,tk());return t.storage.makeRequestWithTokens(e,ok).then(n=>{if(n===null)throw o9();return n})}function Z9(t,e){const n=R9(t._location.path,e),i=new Nn(t._location.bucket,n);return new bo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(t){return/^[A-Za-z]+:\/\//.test(t)}function X9(t,e){return new bo(t,e)}function ak(t,e){if(t instanceof r0){const n=t;if(n._bucket==null)throw r9();const i=new bo(n,n._bucket);return e!=null?ak(i,e):i}else return e!==void 0?Z9(t,e):t}function Q9(t,e){if(e&&Y9(e)){if(t instanceof r0)return X9(t,e);throw Ay("To use ref(service, url), the first argument must be a Storage instance.")}else return ak(t,e)}function zx(t,e){const n=e==null?void 0:e[Gb];return n==null?null:Nn.makeFromBucketSpec(n,t)}function J9(t,e,n,i={}){t.host=`${e}:${n}`;const r=Rs(e);r&&(cv(`https://${t.host}/b`),hv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:AC(o,t.app.options.projectId))}class r0{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=qb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GB,this._maxUploadRetryTime=KB,this._requests=new Set,r!=null?this._bucket=Nn.makeFromBucketSpec(r,this._host):this._bucket=zx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=zx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bo(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new u9(Kb());{const a=w9(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Bx="@firebase/storage",Hx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="storage";function e8(t,e,n){return t=At(t),G9(t,e,n)}function t8(t){return t=At(t),K9(t)}function n8(t,e){return t=At(t),Q9(t,e)}function i8(t=pv(),e){t=At(t);const i=ip(t,lk).getImmediate({identifier:e}),r=PC("storage");return r&&r8(i,...r),i}function r8(t,e,n,i={}){J9(t,e,n,i)}function s8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new r0(n,i,r,e,Mo)}function o8(){Eo(new ws(lk,s8,"PUBLIC").setMultipleInstances(!0)),Ui(Bx,Hx,""),Ui(Bx,Hx,"esm2020")}o8();const a8={apiKey:"AIzaSyCPt2M4p5y-dDjNefu_Hq4vcyiKKN6Nmd8",authDomain:"acsm-trip-2026.firebaseapp.com",projectId:"acsm-trip-2026",storageBucket:"acsm-trip-2026.firebasestorage.app",messagingSenderId:"90847137220",appId:"1:90847137220:web:3f158196c5046666e96891",measurementId:"G-YV63KV6GPT"},s0=RC(a8),Tt=rb(s0),Pd=$B(s0),uk=i8(s0),ck=new cr,l8=Object.freeze(Object.defineProperty({__proto__:null,auth:Pd,db:Tt,googleProvider:ck,storage:uk},Symbol.toStringTag,{value:"Module"}));function u8({isEditing:t}){const[e,n]=W.useState([]),[i,r]=W.useState(()=>{const $=localStorage.getItem("trip_checklist");return $?JSON.parse($):{}}),[o,a]=W.useState(""),[u,c]=W.useState(!1),[f,m]=W.useState(null),[g,_]=W.useState(""),[E,k]=W.useState(!1),C=t||E;W.useEffect(()=>{const $=jc(wt(Tt,"trips","checklist"),R=>{R.exists()?n(R.data().items||[]):(hi(wt(Tt,"trips","checklist"),{items:pT}),n(pT))});return()=>$()},[]),W.useEffect(()=>{localStorage.setItem("trip_checklist",JSON.stringify(i))},[i]);const N=$=>{C||r(R=>({...R,[$]:!R[$]}))},P=async()=>{if(!o.trim())return;const $=[...e,o.trim()];await hi(wt(Tt,"trips","checklist"),{items:$}),a(""),c(!1)},x=async $=>{if(!confirm(""))return;const R=e.filter((I,M)=>M!==$);await hi(wt(Tt,"trips","checklist"),{items:R})},A=($,R)=>{m($),_(R)},F=async $=>{if(!g.trim())return;const R=[...e];R[$]=g.trim(),await hi(wt(Tt,"trips","checklist"),{items:R}),m(null)},z=e.length>0?Math.round(Object.values(i).filter(Boolean).length/e.length*100):0;return w.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative",children:[w.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-32 h-8 bg-yellow-100/80 transform rotate-1 shadow-sm z-10"}),w.jsxs("div",{className:"p-6 bg-[var(--paper-bg)] border-b border-gray-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 font-heading",children:[w.jsx(cd,{size:20,className:"text-gray-600"}),""]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:()=>k(!E),className:Mi("p-1.5 rounded-full transition-colors",E?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:E?"":"",children:w.jsx(cd,{size:16})}),w.jsxs("span",{className:"text-sm font-bold text-gray-600 font-hand text-lg",children:[z,"% "]})]})]}),w.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:w.jsx("div",{className:"bg-gray-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${z}%`}})})]}),w.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-3 bg-white",children:[e.map(($,R)=>w.jsx("div",{className:"relative group",children:f===R?w.jsxs("div",{className:"flex gap-2 items-center p-2 rounded-lg border border-indigo-300 bg-indigo-50",children:[w.jsx("input",{type:"text",value:g,onChange:I=>_(I.target.value),className:"flex-1 bg-transparent outline-none text-sm",autoFocus:!0}),w.jsx("button",{onClick:()=>F(R),className:"text-indigo-600 hover:text-indigo-800",children:w.jsx(E_,{size:16})}),w.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:w.jsx(To,{size:16})})]}):w.jsxs("label",{className:Mi("flex items-start gap-3 p-3 rounded-lg transition-all border relative",C?"cursor-default border-dashed border-gray-300":"cursor-pointer",i[$]&&!C?"bg-gray-50 border-gray-200":!C&&"hover:bg-gray-50 border-transparent hover:border-gray-200"),children:[w.jsx("div",{className:"relative flex items-center mt-0.5",children:!C&&w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"checkbox",className:"peer sr-only",checked:!!i[$],onChange:()=>N($)}),w.jsx("div",{className:Mi("w-5 h-5 rounded border flex items-center justify-center transition-colors",i[$]?"bg-gray-600 border-gray-600":"bg-white border-gray-300"),children:i[$]&&w.jsx(IN,{size:12,className:"text-white"})})]})}),w.jsx("span",{className:Mi("text-sm transition-colors select-none flex-1 font-hand text-lg",i[$]&&!C?"text-gray-400 line-through decoration-gray-400":"text-gray-700"),children:$}),C&&w.jsxs("div",{className:"flex gap-1 ml-2",children:[w.jsx("button",{onClick:I=>{I.preventDefault(),A(R,$)},className:"p-1 text-gray-400 hover:text-indigo-600 rounded hover:bg-indigo-50",children:w.jsx(cd,{size:14})}),w.jsx("button",{onClick:I=>{I.preventDefault(),x(R)},className:"p-1 text-gray-400 hover:text-red-600 rounded hover:bg-red-50",children:w.jsx(ml,{size:14})})]})]})},R)),C&&w.jsx("div",{className:"col-span-1 md:col-span-2 mt-2",children:u?w.jsxs("div",{className:"flex gap-2 items-center p-3 rounded-lg border-2 border-dashed border-indigo-300 bg-indigo-50",children:[w.jsx("input",{type:"text",value:o,onChange:$=>a($.target.value),placeholder:"...",className:"flex-1 bg-transparent outline-none text-sm placeholder-indigo-300",autoFocus:!0,onKeyDown:$=>$.key==="Enter"&&P()}),w.jsx("button",{onClick:P,className:"px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700",children:""}),w.jsx("button",{onClick:()=>c(!1),className:"p-1 text-gray-400 hover:text-gray-600",children:w.jsx(To,{size:16})})]}):w.jsxs("button",{onClick:()=>c(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 font-bold",children:[w.jsx(Wf,{size:18}),""]})})]})]})}function c8(t){try{const e=decodeURIComponent(t),n=e.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(n)return{lat:parseFloat(n[1]),lng:parseFloat(n[2])};const i=e.match(/[?&](?:q|query)=(-?\d+\.\d+),(-?\d+\.\d+)/);if(i)return{lat:parseFloat(i[1]),lng:parseFloat(i[2])};const r=e.match(/[?&]ll=(-?\d+\.\d+),(-?\d+\.\d+)/);if(r)return{lat:parseFloat(r[1]),lng:parseFloat(r[2])};const o=e.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);return o?{lat:parseFloat(o[1]),lng:parseFloat(o[2])}:null}catch(e){return console.error("Error parsing Google Maps URL:",e),null}}const h8=[{value:"flight",label:""},{value:"transport",label:""},{value:"food",label:""},{value:"sightseeing",label:""},{value:"hotel",label:""},{value:"conference",label:""},{value:"other",label:""}];function d8({isOpen:t,onClose:e,onSave:n,initialData:i,availableDays:r,currentDayId:o}){var ke,jt,Ze;const[a,u]=W.useState({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[]}),[c,f]=W.useState(""),[m,g]=W.useState("(Local)"),[_,E]=W.useState(o),[k,C]=W.useState(!1),[N,P]=W.useState(!1),[x,A]=W.useState(""),[F,z]=W.useState(""),[$,R]=W.useState(!1),I=W.useRef(null);W.useEffect(()=>{if(t)if(E(o),i){u({...i,attachments:i.attachments||[]});const J=i.time.match(/^(\d{2}:\d{2})\s*(\(.*\))?$/);J?(f(J[1]),g(J[2]||"(Local)")):(f(i.time),g("(Local)")),C(!!i.walletItemId)}else u({time:"",title:"",description:"",type:"other",location:"",tips:"",attachments:[],coordinates:void 0}),f(""),g("(Local)"),C(!1)},[i,t,o]);const M=J=>{J.preventDefault();const G=m==="(Local)"?c:`${c} ${m} `;n({...a,time:G},_,k),e()},D=async J=>{var re;const G=(re=J.target.files)==null?void 0:re[0];if(G){P(!0);try{const Q=n8(uk,`trip_images / ${Date.now()}_${G.name} `);await e8(Q,G);const he=await t8(Q),xe={id:Date.now().toString(),type:"image",url:he,label:G.name};u(We=>({...We,attachments:[...We.attachments||[],xe]}))}catch(Q){console.error("Upload failed:",Q),alert("")}finally{P(!1),I.current&&(I.current.value="")}}},V=()=>{if(!x)return;const J={id:Date.now().toString(),type:"link",url:x,label:F||x};u(G=>({...G,attachments:[...G.attachments||[],J]})),A(""),z(""),R(!1)},U=J=>{u(G=>{var re;return{...G,attachments:(re=G.attachments)==null?void 0:re.filter(Q=>Q.id!==J)}})},O=[{value:"(TPE)",label:" (TPE)"},{value:"(SFO)",label:" (SFO)"},{value:"(SLC)",label:" (SLC)"},{value:"(SAN)",label:" (SAN)"},{value:"(LAX)",label:" (LAX)"},{value:"(Local)",label:""}];return w.jsx(Sc,{children:t&&w.jsxs(w.Fragment,{children:[w.jsx($i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),w.jsx($i.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i?"":""}),w.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500",children:w.jsx(To,{size:20})})]}),w.jsxs("form",{onSubmit:M,className:"p-4 space-y-4 overflow-y-auto",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:_,onChange:J=>E(J.target.value),children:r.map(J=>w.jsxs("option",{value:J.id,children:[J.date," - ",J.cityLabel]},J.id))})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("div",{className:"flex gap-2",children:w.jsx("input",{type:"time",required:!0,className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:c,onChange:J=>f(J.target.value)})})]}),w.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:m,onChange:J=>g(J.target.value),children:O.map(J=>w.jsx("option",{value:J.value,children:J.label},J.value))})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.type,onChange:J=>u({...a,type:J.target.value}),children:h8.map(J=>w.jsx("option",{value:J.value,children:J.label},J.value))})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.title,onChange:J=>u({...a,title:J.target.value})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),w.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",value:a.description,onChange:J=>u({...a,description:J.target.value})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),w.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.location||"",onChange:J=>u({...a,location:J.target.value})})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (USD)"}),w.jsx("input",{type:"number",min:"0",placeholder:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.cost||0,onChange:J=>u({...a,cost:parseFloat(J.target.value)})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"/ ()"}),w.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a.tips||"",onChange:J=>u({...a,tips:J.target.value})})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Coordinates)"}),w.jsx("div",{className:"flex gap-2 mb-2",children:w.jsx("input",{type:"text",placeholder:" Google Maps ...",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm",onChange:J=>{const G=c8(J.target.value);G&&(u({...a,coordinates:G}),J.target.value="")}})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lat)"}),w.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((ke=a.coordinates)==null?void 0:ke.lat)||"",onChange:J=>{var re;const G=parseFloat(J.target.value);u({...a,coordinates:{lng:((re=a.coordinates)==null?void 0:re.lng)||0,lat:isNaN(G)?0:G}})},placeholder:"e.g. 37.7749"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (Lng)"}),w.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:((jt=a.coordinates)==null?void 0:jt.lng)||"",onChange:J=>{var re;const G=parseFloat(J.target.value);u({...a,coordinates:{lat:((re=a.coordinates)==null?void 0:re.lat)||0,lng:isNaN(G)?0:G}})},placeholder:"e.g. -122.4194"})]})]}),(a.cost||0)>0&&w.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1 p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[w.jsx("input",{type:"checkbox",id:"syncWallet",className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500",checked:k,onChange:J=>C(J.target.checked)}),w.jsx("label",{htmlFor:"syncWallet",className:"text-sm text-indigo-700 font-medium cursor-pointer select-none flex-1",children:" (Budget)"}),a.walletItemId&&w.jsx("span",{className:"text-xs text-indigo-400 bg-white px-2 py-0.5 rounded border border-indigo-100",children:""})]})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[w.jsx(UN,{size:16})," (/)"]}),w.jsx("div",{className:"space-y-2 mb-3",children:(Ze=a.attachments)==null?void 0:Ze.map(J=>w.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border border-gray-200",children:[w.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[J.type==="image"?w.jsx(Fw,{size:16,className:"text-indigo-500"}):w.jsx(Mg,{size:16,className:"text-blue-500"}),w.jsx("a",{href:J.url,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-700 truncate hover:underline",children:J.label||"Attachment"})]}),w.jsx("button",{type:"button",onClick:()=>U(J.id),className:"text-gray-400 hover:text-red-500",children:w.jsx(ml,{size:16})})]},J.id))}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"button",onClick:()=>{var J;return(J=I.current)==null?void 0:J.click()},disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:N?"...":w.jsxs(w.Fragment,{children:[w.jsx(Fw,{size:16})," "]})}),w.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:D}),w.jsxs("button",{type:"button",onClick:()=>R(!$),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm text-gray-700",children:[w.jsx(Mg,{size:16})," "]})]}),$&&w.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2",children:[w.jsx("input",{type:"text",placeholder:" (https://...)",className:"w-full px-3 py-1.5 border rounded text-sm",value:x,onChange:J=>A(J.target.value)}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"text",placeholder:" ()",className:"flex-1 px-3 py-1.5 border rounded text-sm",value:F,onChange:J=>z(J.target.value)}),w.jsx("button",{type:"button",onClick:V,className:"px-3 py-1.5 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700",children:""})]})]})]}),w.jsx("div",{className:"pt-4 border-t",children:w.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[w.jsx(E_,{size:20}),""]})})]})]})})]})})}const f8={flight:Iu,hotel:NN,ticket:KN,insurance:S_,food:IP,transport:PP,shopping:qN,entertainment:jN,other:VN},p8={flight:"",hotel:"",ticket:"",insurance:"",food:"",transport:"",shopping:"",entertainment:"",other:""};function m8({isOpen:t,onClose:e,items:n,onAdd:i,onUpdate:r,onRemove:o,totalCost:a}){const[u,c]=W.useState(!1),[f,m]=W.useState(null),[g,_]=W.useState({category:"other",title:"",reference:"",details:"",cost:0}),E=N=>{N.preventDefault(),f?(r(f,g),m(null)):(i(g),c(!1)),_({category:"other",title:"",reference:"",details:"",cost:0})},k=N=>{_({category:N.category,title:N.title,reference:N.reference,details:N.details,cost:N.cost}),m(N.id),c(!1)},C=()=>{m(null),_({category:"other",title:"",reference:"",details:"",cost:0})};return w.jsx(Sc,{children:t&&w.jsxs(w.Fragment,{children:[w.jsx($i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:e}),w.jsx($i.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl pointer-events-auto flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-t-xl",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[w.jsx(Lg,{className:"text-amber-400"})," & "]}),w.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),w.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:w.jsx(To,{size:24})})]}),w.jsxs("div",{className:"bg-white/10 rounded-lg p-4 backdrop-blur-sm border border-white/10",children:[w.jsx("div",{className:"text-xs text-slate-300 uppercase tracking-wider font-medium mb-1",children:" ( + )"}),w.jsxs("div",{className:"text-3xl font-bold text-white font-mono",children:["$",a.toLocaleString()," ",w.jsx("span",{className:"text-lg text-slate-400",children:"USD"})]})]})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[u||f?w.jsxs("form",{onSubmit:E,className:"bg-white p-4 rounded-xl shadow-sm border space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("h3",{className:"font-bold text-gray-800",children:f?"":""}),w.jsx("button",{type:"button",onClick:()=>f?C():c(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),w.jsx("select",{className:"w-full p-2 border rounded-lg",value:g.category,onChange:N=>_({...g,category:N.target.value}),children:Object.entries(p8).map(([N,P])=>w.jsx("option",{value:N,children:P},N))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (USD)"}),w.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg",value:g.cost,onChange:N=>_({...g,cost:Number(N.target.value)})})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),w.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded-lg",value:g.title,onChange:N=>_({...g,title:N.target.value})})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),w.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.reference,onChange:N=>_({...g,reference:N.target.value})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" (/)"}),w.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",value:g.details,onChange:N=>_({...g,details:N.target.value})})]})]}),w.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 font-medium",children:f?"":""})]}):w.jsxs("button",{onClick:()=>c(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 mb-6",children:[w.jsx(Wf,{size:20}),""]}),w.jsxs("div",{className:"space-y-3",children:[n.map(N=>{const P=f8[N.category];return w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex items-start gap-4 group",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 flex-shrink-0",children:w.jsx(P,{size:20})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsx("h4",{className:"font-bold text-gray-800 truncate",children:N.title}),N.cost?w.jsxs("span",{className:"font-mono font-medium text-gray-900",children:["$",N.cost]}):null]}),w.jsx("div",{className:"text-sm text-indigo-600 font-mono mt-0.5",children:N.reference}),w.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.details})]}),w.jsxs("div",{className:"flex gap-1",children:[w.jsx("button",{onClick:()=>k(N),className:"p-2 text-gray-300 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:w.jsx(zN,{size:18})}),w.jsx("button",{onClick:()=>o(N.id),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:w.jsx(ml,{size:18})})]})]},N.id)}),n.length===0&&!u&&w.jsxs("div",{className:"text-center py-12 text-gray-400",children:[w.jsx(Lg,{size:48,className:"mx-auto mb-3 opacity-20"}),w.jsx("p",{children:""})]})]})]})]})})]})})}var Wx;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(Wx||(Wx={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $x;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})($x||($x={}));var qx;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(qx||(qx={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=["user","model","function","system"];var Kx;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Kx||(Kx={}));var Zx;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Zx||(Zx={}));var Yx;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Yx||(Yx={}));var Xx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(Xx||(Xx={}));var Fu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Fu||(Fu={}));var Qx;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Qx||(Qx={}));var Jx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Jx||(Jx={}));var eE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class pa extends Qt{constructor(e,n){super(e),this.response=n}}class hk extends Qt{constructor(e,n,i,r){super(e),this.status=n,this.statusText=i,this.errorDetails=r}}class ms extends Qt{}class dk extends Qt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8="https://generativelanguage.googleapis.com",y8="v1beta",_8="0.24.1",v8="genai-js";var ko;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ko||(ko={}));class w8{constructor(e,n,i,r,o){this.model=e,this.task=n,this.apiKey=i,this.stream=r,this.requestOptions=o}toString(){var e,n;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||y8;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||g8}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function T8(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${v8}/${_8}`),e.join(" ")}async function x8(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",T8(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new ms(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,o]of i.entries()){if(r==="x-goog-api-key")throw new ms(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new ms(`Header name ${r} can only be set using the apiClient field`);n.append(r,o)}}return n}async function E8(t,e,n,i,r,o){const a=new w8(t,e,n,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},C8(o)),{method:"POST",headers:await x8(a),body:r})}}async function Bc(t,e,n,i,r,o={},a=fetch){const{url:u,fetchOptions:c}=await E8(t,e,n,i,r,o);return S8(u,c,a)}async function S8(t,e,n=fetch){let i;try{i=await n(t,e)}catch(r){P8(r,t)}return i.ok||await I8(i,t),i}function P8(t,e){let n=t;throw n.name==="AbortError"?(n=new dk(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof hk||t instanceof ms||(n=new Qt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function I8(t,e){let n="",i;try{const r=await t.json();n=r.error.message,r.error.details&&(n+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new hk(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,i)}function C8(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Id(t.candidates[0]))throw new pa(`${$r(t)}`,t);return A8(t)}else if(t.promptFeedback)throw new pa(`Text not available. ${$r(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Id(t.candidates[0]))throw new pa(`${$r(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),tE(t)[0]}else if(t.promptFeedback)throw new pa(`Function call not available. ${$r(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Id(t.candidates[0]))throw new pa(`${$r(t)}`,t);return tE(t)}else if(t.promptFeedback)throw new pa(`Function call not available. ${$r(t)}`,t)},t}function A8(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function tE(t){var e,n,i,r;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const b8=[Fu.RECITATION,Fu.SAFETY,Fu.LANGUAGE];function Id(t){return!!t.finishReason&&b8.includes(t.finishReason)}function $r(t){var e,n,i;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){const o=t.candidates[0];Id(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}function gc(t){return this instanceof gc?(this.v=t,this):new gc(t)}function k8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(_){i[_]&&(r[_]=function(E){return new Promise(function(k,C){o.push([_,E,k,C])>1||u(_,E)})})}function u(_,E){try{c(i[_](E))}catch(k){g(o[0][3],k)}}function c(_){_.value instanceof gc?Promise.resolve(_.value.v).then(f,m):g(o[0][2],_)}function f(_){u("next",_)}function m(_){u("throw",_)}function g(_,E){_(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function R8(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=M8(e),[i,r]=n.tee();return{stream:L8(i),response:N8(r)}}async function N8(t){const e=[],n=t.getReader();for(;;){const{done:i,value:r}=await n.read();if(i)return o0(D8(e));e.push(r)}}function L8(t){return k8(this,arguments,function*(){const n=t.getReader();for(;;){const{value:i,done:r}=yield gc(n.read());if(r)break;yield yield gc(o0(i))}})}function M8(t){const e=t.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:a,done:u})=>{if(u){if(r.trim()){i.error(new Qt("Failed to parse stream"));return}i.close();return}r+=a;let c=r.match(nE),f;for(;c;){try{f=JSON.parse(c[1])}catch{i.error(new Qt(`Error parsing JSON response: "${c[1]}"`));return}i.enqueue(f),r=r.substring(c[0].length),c=r.match(nE)}return o()}).catch(a=>{let u=a;throw u.stack=a.stack,u.name==="AbortError"?u=new dk("Request aborted when reading from the stream"):u=new Qt("Error reading from the stream"),u})}}})}function D8(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of t){if(i.candidates){let r=0;for(const o of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[r]||(n.candidates[r]={index:r}),n.candidates[r].citationMetadata=o.citationMetadata,n.candidates[r].groundingMetadata=o.groundingMetadata,n.candidates[r].finishReason=o.finishReason,n.candidates[r].finishMessage=o.finishMessage,n.candidates[r].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[r].content||(n.candidates[r].content={role:o.content.role||"user",parts:[]});const a={};for(const u of o.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[r].content.parts.push(a)}r++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e,n,i){const r=await Bc(e,ko.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return R8(r)}async function pk(t,e,n,i){const o=await(await Bc(e,ko.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:o0(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function yc(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return O8(e)}function O8(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,r=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),r=!0):(e.parts.push(o),i=!0);if(i&&r)throw new Qt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Qt("No content is provided for sending chat message.");return i?e:n}function V8(t,e){var n;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const r=t.generateContentRequest!=null;if(t.contents){if(r)throw new ms("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=t.contents}else if(r)i=Object.assign(Object.assign({},i),t.generateContentRequest);else{const o=yc(t);i.contents=[o]}return{generateContentRequest:i}}function iE(t){let e;return t.contents?e=t:e={contents:[yc(t)]},t.systemInstruction&&(e.systemInstruction=mk(t.systemInstruction)),e}function j8(t){return typeof t=="string"||Array.isArray(t)?{content:yc(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],F8={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function U8(t){let e=!1;for(const n of t){const{role:i,parts:r}=n;if(!e&&i!=="user")throw new Qt(`First content should be with role 'user', got ${i}`);if(!Gx.includes(i))throw new Qt(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Gx)}`);if(!Array.isArray(r))throw new Qt("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Qt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const c of rE)c in u&&(o[c]+=1);const a=F8[i];for(const u of rE)if(!a.includes(u)&&o[u]>0)throw new Qt(`Content with role '${i}' can't contain '${u}' part`);e=!0}}function sE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="SILENT_ERROR";class z8{constructor(e,n,i,r={}){this.model=n,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(U8(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=yc(e),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n);let _;return this._sendPromise=this._sendPromise.then(()=>pk(this._apiKey,this.model,m,g)).then(E=>{var k;if(sE(E.response)){this._history.push(f);const C=Object.assign({parts:[],role:"model"},(k=E.response.candidates)===null||k===void 0?void 0:k[0].content);this._history.push(C)}else{const C=$r(E.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}_=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,_}async sendMessageStream(e,n={}){var i,r,o,a,u,c;await this._sendPromise;const f=yc(e),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n),_=fk(this._apiKey,this.model,m,g);return this._sendPromise=this._sendPromise.then(()=>_).catch(E=>{throw new Error(oE)}).then(E=>E.response).then(E=>{if(sE(E)){this._history.push(f);const k=Object.assign({},E.candidates[0].content);k.role||(k.role="model"),this._history.push(k)}else{const k=$r(E);k&&console.warn(`sendMessageStream() was unsuccessful. ${k}. Inspect response object for details.`)}}).catch(E=>{E.message!==oE&&console.error(E)}),_}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B8(t,e,n,i){return(await Bc(e,ko.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e,n,i){return(await Bc(e,ko.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}async function W8(t,e,n,i){const r=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Bc(e,ko.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,i={}){this.apiKey=e,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=mk(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var i;const r=iE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return pk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}async generateContentStream(e,n={}){var i;const r=iE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return fk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}startChat(e){var n;return new z8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const i=V8(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),n);return B8(this.apiKey,this.model,i,r)}async embedContent(e,n={}){const i=j8(e),r=Object.assign(Object.assign({},this._requestOptions),n);return H8(this.apiKey,this.model,i,r)}async batchEmbedContents(e,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return W8(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Qt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new aE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,i){if(!e.name)throw new ms("Cached content must contain a `name` field.");if(!e.model)throw new ms("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const a of r)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){const u=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===c)continue}throw new ms(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new aE(this.apiKey,o,i)}}function q8(){const[t,e]=W.useState([]),[n,i]=W.useState(!1),[r,o]=W.useState(null);return{messages:t,loading:n,error:r,sendMessage:async(c,f,m)=>{if(!c){o(" API Key");return}i(!0),o(null);try{const g={role:"user",text:f};e(A=>[...A,g]);const E=new $8(c).getGenerativeModel({model:"gemini-2.0-flash"}),k=`
You are a helpful travel assistant for the 'ACSM Trip 2026'.
Here is the current itinerary data in JSON format:
${JSON.stringify(m,null,2)}

Please answer the user's questions based on this itinerary.
- Be concise and friendly.
- If the user asks about time, location, or details, refer to the JSON data.
- If the answer is not in the data, offer general travel advice for San Francisco, Salt Lake City, or San Diego.
- Reply in Traditional Chinese ().
            `,x=(await E.startChat({history:[{role:"user",parts:[{text:k}]},{role:"model",parts:[{text:""}]},...t.map(A=>({role:A.role,parts:[{text:A.text}]}))]}).sendMessage(f)).response.text();e(A=>[...A,{role:"model",text:x}])}catch(g){console.error("Gemini API Error:",g),o(g.message||" API Key ")}finally{i(!1)}},clearHistory:()=>{e([]),o(null)}}}function G8({itinerary:t}){const[e,n]=W.useState(!1),[i,r]=W.useState(""),[o,a]=W.useState(""),[u,c]=W.useState(!1),{messages:f,loading:m,error:g,sendMessage:_,clearHistory:E}=q8(),k=W.useRef(null);W.useEffect(()=>{const x=localStorage.getItem("gemini_api_key");x?a(x):c(!0)},[]);const C=x=>{a(x),localStorage.setItem("gemini_api_key",x),c(!1)};W.useEffect(()=>{var x;(x=k.current)==null||x.scrollIntoView({behavior:"smooth"})},[f]);const N=()=>{i.trim()&&(_(o,i,t),r(""))},P=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),N())};return w.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[w.jsx(Sc,{children:e&&w.jsxs($i.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-80 sm:w-96 h-[500px] mb-4 flex flex-col overflow-hidden border border-gray-200",children:[w.jsxs("div",{className:"bg-indigo-600 p-4 flex justify-between items-center text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(zw,{size:18}),w.jsx("h3",{className:"font-bold",children:"AI "})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>c(!u),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:" API Key",children:w.jsx(WN,{size:16})}),w.jsx("button",{onClick:E,className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",title:"",children:w.jsx(ml,{size:16})}),w.jsx("button",{onClick:()=>n(!1),className:"p-1.5 hover:bg-indigo-500 rounded-full transition-colors",children:w.jsx(To,{size:18})})]})]}),u?w.jsxs("div",{className:"flex-1 p-6 bg-gray-50 flex flex-col justify-center",children:[w.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:" Gemini API Key"}),w.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[" Google Gemini API Key  AI ",w.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 hover:underline ml-1",children:" Key"})]}),w.jsx("input",{type:"password",placeholder:"Paste API Key here...",className:"w-full px-3 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-indigo-500 outline-none",value:o,onChange:x=>a(x.target.value)}),w.jsx("button",{onClick:()=>C(o),className:"w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700",children:""})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-50 space-y-4",children:[f.length===0&&w.jsxs("div",{className:"text-center text-gray-400 mt-10 text-sm",children:[w.jsx(zw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),w.jsx("p",{children:" AI "}),w.jsx("p",{children:""})]}),f.map((x,A)=>w.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:w.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm whitespace-pre-wrap ${x.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-none"}`,children:x.text})},A)),m&&w.jsx("div",{className:"flex justify-start",children:w.jsx("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none shadow-sm border border-gray-100",children:w.jsxs("div",{className:"flex gap-1",children:[w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),g&&w.jsx("div",{className:"text-center text-xs text-red-500 bg-red-50 p-2 rounded-lg",children:g}),w.jsx("div",{ref:k})]}),w.jsxs("div",{className:"p-3 bg-white border-t border-gray-100 flex gap-2",children:[w.jsx("input",{type:"text",placeholder:"...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",value:i,onChange:x=>r(x.target.value),onKeyDown:P,disabled:m}),w.jsx("button",{onClick:N,disabled:m||!i.trim(),className:"p-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w.jsx(HN,{size:18})})]})]})]})}),w.jsx($i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!e),className:"bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors flex items-center justify-center",children:e?w.jsx(To,{size:24}):w.jsx(DN,{size:24})})]})}function K8({info:t}){const n=(i=>{switch(i){case"fog":return AN;case"sun":return Og;case"cloud-sun":return bN;default:return Og}})(t.icon);return w.jsxs($i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"sticker p-4 mb-6 flex flex-col sm:flex-row items-start sm:items-center gap-4 relative overflow-hidden",children:[w.jsxs("div",{className:"flex items-center gap-3 min-w-[140px] relative z-10",children:[w.jsx("div",{className:"p-2.5 bg-gray-100 text-gray-800 rounded-full border border-gray-200",children:w.jsx(n,{size:24})}),w.jsxs("div",{children:[w.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-0.5 font-sans",children:"Weather"}),w.jsx("div",{className:"font-bold text-gray-800 text-lg font-heading",children:t.tempRange})]})]}),w.jsx("div",{className:"w-px h-10 bg-gray-200 hidden sm:block relative z-10 border-r border-dashed border-gray-300"}),w.jsxs("div",{className:"flex-1 space-y-1 relative z-10",children:[w.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium font-hand text-lg",children:[w.jsx(GN,{size:16,className:"text-gray-400"}),w.jsx("span",{children:t.description})]}),w.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-500 leading-relaxed font-sans",children:[w.jsx($N,{size:16,className:"text-gray-400 mt-0.5 flex-shrink-0"}),w.jsx("span",{children:t.clothing})]})]})]})}function Z8({isOpen:t,onClose:e,currentAdmins:n,currentUserEmail:i}){const[r,o]=W.useState(""),[a,u]=W.useState(!1),[c,f]=W.useState("2026-05-20"),[m,g]=W.useState("2026-06-04"),[_,E]=W.useState(!1);W.useEffect(()=>{t&&Sy(wt(Tt,"trips","settings")).then(P=>{if(P.exists()){const x=P.data();x.startDate&&f(x.startDate),x.endDate&&g(x.endDate)}})},[t]);const k=async P=>{if(P.preventDefault(),!(!r||!r.includes("@"))){if(n.includes(r)){alert(" Email ");return}u(!0);try{const x=[...n,r];await wd(wt(Tt,"trips","settings"),{adminEmails:x}),o("")}catch(x){console.error("Failed to add admin:",x),alert("")}finally{u(!1)}}},C=async P=>{if(P===i){alert("");return}if(confirm(` ${P} `))try{const x=n.filter(A=>A!==P);await wd(wt(Tt,"trips","settings"),{adminEmails:x})}catch(x){console.error("Failed to remove admin:",x),alert("")}},N=async()=>{if(confirm(`
${c}
${m}
`)){E(!0);try{await hi(wt(Tt,"trips","settings"),{startDate:c,endDate:m},{merge:!0});const P=await Sy(wt(Tt,"trips","main"));if(P.exists()){const x=P.data().days,A=fM(c),F=x.map((z,$)=>{const R=XN(A,$),I=uM(R,"yyyy/MM/dd"),M=["","","","","","",""][R.getDay()];return{...z,date:`${I} (${M})`}});await wd(wt(Tt,"trips","main"),{days:F}),alert("")}}catch(P){console.error("Failed to update date:",P),alert("")}finally{E(!1)}}};return t?w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:w.jsxs($i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden max-h-[90vh] overflow-y-auto",children:[w.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-slate-800 to-slate-900 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(S_,{className:"text-emerald-400",size:20}),w.jsx("h2",{className:"text-lg font-bold",children:""})]}),w.jsx("button",{onClick:e,className:"text-white/70 hover:text-white transition-colors",children:w.jsx(To,{size:20})})]}),w.jsxs("div",{className:"p-6 space-y-8",children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[w.jsx(EN,{size:16,className:"text-indigo-600"}),""]}),w.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 space-y-3",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:" (Day 1)"}),w.jsx("input",{type:"date",value:c,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-1",children:""}),w.jsx("input",{type:"date",value:m,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-indigo-200 focus:ring-2 focus:ring-indigo-500 outline-none text-indigo-900"})]}),w.jsxs("button",{onClick:N,disabled:_,className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[w.jsx(E_,{size:16}),""]}),w.jsx("p",{className:"text-xs text-indigo-600 mt-2 opacity-80 text-center",children:"* "})]})]}),w.jsx("hr",{className:"border-gray-100"}),w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[w.jsx(Bw,{size:16,className:"text-indigo-600"}),""]}),w.jsx("form",{onSubmit:k,className:"mb-4",children:w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"email",value:r,onChange:P=>o(P.target.value),placeholder:" Google Email",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",required:!0}),w.jsxs("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center gap-1",children:[w.jsx(Wf,{size:18}),""]})]})}),w.jsx("div",{className:"space-y-2",children:w.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 pr-1",children:w.jsx(Sc,{mode:"popLayout",children:n.map(P=>w.jsxs($i.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-500 shadow-sm",children:w.jsx(Bw,{size:14})}),w.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[180px]",children:P}),P===i&&w.jsx("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold",children:"YOU"})]}),P!==i&&w.jsx("button",{onClick:()=>C(P),className:"text-gray-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"",children:w.jsx(ml,{size:16})})]},P))})})})]})]})]})}):null}function Y8(){const[t,e]=W.useState(Sm),[n,i]=W.useState(!0),r="main";W.useEffect(()=>{const C=jc(wt(Tt,"trips",r),N=>{N.exists()?e(N.data().days):hi(wt(Tt,"trips",r),{days:Sm}),i(!1)},N=>{console.error("Firestore sync error:",N),i(!1)});return()=>C()},[]);const o=async C=>{try{await hi(wt(Tt,"trips",r),{days:C})}catch(N){console.error("Error saving to Firestore:",N),alert("")}},a=C=>[...C].sort((N,P)=>{const x=N.time.split(" ")[0],A=P.time.split(" ")[0];return x.localeCompare(A)});return{itinerary:t,loading:n,addActivity:(C,N)=>{const P=t.map(x=>{if(x.id===C){const A=[...x.activities,N];return{...x,activities:a(A)}}return x});o(P)},removeActivity:(C,N)=>{const P=t.map(x=>{if(x.id===C){const A=[...x.activities];return A.splice(N,1),{...x,activities:A}}return x});o(P)},updateActivity:(C,N,P)=>{const x=t.map(A=>{if(A.id===C){const F=[...A.activities];return F[N]=P,{...A,activities:a(F)}}return A});o(x)},reorderActivity:(C,N,P)=>{console.warn("reorderActivity is deprecated. Activities are now automatically sorted by time.")},moveActivity:(C,N,P,x)=>{const A=t.map(F=>{if(F.id===C){const z=[...F.activities];return typeof x=="number"&&z.splice(x,1),{...F,activities:z}}if(F.id===N){const z=[...F.activities,P];return{...F,activities:a(z)}}return F});o(A)},resetItinerary:()=>{confirm("")&&o(Sm)},exportItinerary:()=>{const C=JSON.stringify(t,null,2),N=new Blob([C],{type:"application/json"}),P=URL.createObjectURL(N),x=document.createElement("a");x.href=P,x.download=`acsm-trip-itinerary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(P)},importItinerary:C=>{const N=new FileReader;N.onload=P=>{var x;try{const A=(x=P.target)==null?void 0:x.result,F=JSON.parse(A);Array.isArray(F)?(o(F),alert("")):alert("")}catch(A){console.error("Import failed:",A),alert("")}},N.readAsText(C)}}}const lE=[{id:"1",category:"flight",title:" JX012 (TPE-SFO)",reference:"PNR: ABC12345",details:"2026/05/20 23:40 , ",cost:1200},{id:"2",category:"hotel",title:"San Francisco Marriott Marquis",reference:"Conf: #8829102",details:"5/20 - 5/25 (5 Nights)",cost:1500}];function X8(){const[t,e]=W.useState(lE),[n,i]=W.useState(!0);W.useEffect(()=>{const f=jc(wt(Tt,"trips","wallet"),m=>{m.exists()?e(m.data().items):hi(wt(Tt,"trips","wallet"),{items:lE}),i(!1)},m=>{console.error("Firestore sync error:",m),i(!1)});return()=>f()},[]);const r=async f=>{try{await hi(wt(Tt,"trips","wallet"),{items:f})}catch(m){console.error("Error saving wallet to Firestore:",m),alert("")}};return{walletItems:t,loading:n,addWalletItem:f=>{const m={...f,id:crypto.randomUUID()},g=[...t,m];return r(g),m.id},removeWalletItem:f=>{const m=t.filter(g=>g.id!==f);r(m)},updateWalletItem:(f,m)=>{const g=t.map(_=>_.id===f?{..._,...m}:_);r(g)},getTotalCost:()=>t.reduce((f,m)=>f+(m.cost||0),0)}}const Fm=["weber900127@gmail.com"];function Q8(){const[t,e]=W.useState(null),[n,i]=W.useState(!0),[r,o]=W.useState(!1),[a,u]=W.useState([]);return W.useEffect(()=>Pd.onAuthStateChanged(g=>{e(g),g||(o(!1),i(!1))}),[]),W.useEffect(()=>{const m=jc(wt(Tt,"trips","settings"),g=>{if(g.exists()){const _=g.data().adminEmails;u(_)}else hi(wt(Tt,"trips","settings"),{adminEmails:Fm}),u(Fm)},g=>{console.error("Failed to sync admin list:",g),u(Fm)});return()=>m()},[]),W.useEffect(()=>{t&&a.length>0?(o(a.includes(t.email||"")),i(!1)):t&&o(!1)},[t,a]),{user:t,isUserAdmin:r,adminList:a,loading:n,login:async()=>{try{await eB(Pd,ck)}catch(m){console.error("Login failed:",m),alert("")}},logout:async()=>{try{await Mz(Pd)}catch(m){console.error("Logout failed:",m)}}}}const uE={SF:{tempRange:"11C - 18C",description:"",clothing:"",icon:"fog"},SLC:{tempRange:"10C - 24C",description:"",clothing:"",icon:"sun"},SAN:{tempRange:"16C - 22C",description:"",clothing:"",icon:"cloud-sun"},LA:{tempRange:"16C - 24C",description:"",clothing:"",icon:"sun"}};function J8(){var nn;const[t,e]=W.useState("ALL"),[n,i]=W.useState({day1:!0}),[r,o]=W.useState(!1),[a,u]=W.useState(!1),[c,f]=W.useState(!1),{user:m,login:g,logout:_,loading:E,isUserAdmin:k,adminList:C}=Q8(),[N,P]=W.useState(!1),[x,A]=W.useState(null),{itinerary:F,addActivity:z,updateActivity:$,removeActivity:R,moveActivity:I,exportItinerary:M,importItinerary:D}=Y8(),{walletItems:V,addWalletItem:U,updateWalletItem:O,removeWalletItem:ke,getTotalCost:jt}=X8(),Ze=ue=>{i($e=>({...$e,[ue]:!$e[ue]}))},J=t==="ALL"?F:F.filter(ue=>ue.city===t||t==="LA"&&ue.city==="LA"),re=F.reduce((ue,$e)=>ue+$e.activities.reduce((rn,sn)=>rn+(sn.cost||0),0),0)+jt(),Q=(ue,$e,rn)=>{const sn={...ue,modifiedBy:(m==null?void 0:m.displayName)||"Anonymous",modifiedAt:new Date().toISOString()};if(rn&&(ue.cost||0)>0){let on="other";switch(ue.type){case"flight":on="flight";break;case"transport":on="transport";break;case"food":on="food";break;case"hotel":on="hotel";break;case"sightseeing":on="ticket";break;default:on="other"}const Ms={category:on,title:ue.title,reference:"",details:`${ue.time}`,cost:ue.cost};if(ue.walletItemId)O(ue.walletItemId,Ms);else{const Vo=U(Ms);sn.walletItemId=Vo}}x?x.dayId===$e?$(x.dayId,x.index,sn):I(x.dayId,$e,sn,x.index):z($e,sn),P(!1),A(null)},he=(ue,$e,rn)=>{A({dayId:ue,index:$e,activity:rn}),P(!0)},xe=(ue,$e)=>{confirm("")&&R(ue,$e)};if(E)return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--paper-bg)] text-gray-500 font-hand text-xl",children:"Loading your memories..."});console.log("Scrapbook Theme Loaded v3");const[We,Re]=W.useState(null),Ee=Object.keys(n).filter(ue=>n[ue]),fe=ue=>($e,rn)=>({...$e,id:`${ue}-${rn}`}),gt=Ee.length>0?J.filter(ue=>n[ue.id]).flatMap(ue=>ue.activities.map(fe(ue.id))):J.flatMap(ue=>ue.activities.map(fe(ue.id)));return w.jsxs("div",{className:"min-h-screen pb-12 relative",children:[w.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 opacity-50 mix-blend-multiply",style:{backgroundImage:"var(--paper-texture)"}}),w.jsxs("div",{className:"relative z-10",children:[w.jsx(bM,{isEditing:r,onToggleEdit:()=>o(!r),onExport:M,onImport:D,onOpenWallet:()=>u(!0),onOpenSettings:()=>f(!0),user:m,isAdmin:k,onLogin:g,onLogout:_}),w.jsxs("main",{className:"max-w-7xl mx-auto px-4 -mt-6 relative z-20",children:[w.jsx("div",{className:"flex overflow-x-auto gap-3 pb-4 scrollbar-hide mb-6 no-scrollbar px-2",children:[{id:"ALL",label:"All Trips"},{id:"SF",label:"San Francisco"},{id:"SLC",label:"Salt Lake City"},{id:"SAN",label:"San Diego"}].map(ue=>w.jsxs("button",{onClick:()=>e(ue.id),className:Mi("px-5 py-2 whitespace-nowrap text-sm font-bold transition-all relative group",t===ue.id?"text-white transform -rotate-1":"text-gray-600 hover:text-gray-900 hover:rotate-1"),children:[w.jsx("div",{className:Mi("absolute inset-0 border-2 border-dashed rounded-lg -z-10 transition-all",t===ue.id?"bg-gray-800 border-gray-800 shadow-md":"bg-white border-gray-300 group-hover:border-gray-400")}),w.jsx("div",{className:Mi("absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-r border-gray-300",t===ue.id&&"border-transparent")}),w.jsx("div",{className:Mi("absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[var(--paper-bg)] border-l border-gray-300",t===ue.id&&"border-transparent")}),w.jsx("span",{className:"font-heading tracking-wide uppercase",children:ue.label})]},ue.id))}),w.jsx(Sc,{mode:"wait",children:t!=="ALL"&&uE[t]&&w.jsx(K8,{city:t,info:uE[t]},t)}),m?w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[w.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[J.map(ue=>w.jsx(nj,{day:ue,isExpanded:!!n[ue.id],onToggle:()=>Ze(ue.id),isEditing:r,onAddActivity:()=>{A({dayId:ue.id,index:-1,activity:{}}),P(!0)},onUpdateActivity:($e,rn)=>he(ue.id,$e,rn),onRemoveActivity:$e=>xe(ue.id,$e),onActivityFocus:$e=>Re($e)},ue.id)),w.jsx(u8,{isEditing:r})]}),w.jsx("div",{className:"hidden lg:block lg:col-span-1",children:w.jsx("div",{className:"sticky top-8",children:w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg border border-gray-200 transform rotate-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(SP,{size:20,className:"text-indigo-600"}),w.jsx("h3",{className:"font-heading font-bold text-gray-800",children:"Trip Map"})]}),w.jsx(vC,{activities:gt,highlightedActivityId:We,className:"h-[500px] w-full rounded-lg overflow-hidden border border-gray-100"})]})})})]}):w.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm text-center mt-8",children:[w.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx("span",{className:"text-2xl",children:""})}),w.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:""}),w.jsx("p",{className:"text-gray-500 mb-6",children:" Google "}),w.jsx("button",{onClick:g,className:"bg-indigo-600 text-white px-6 py-2 rounded-full font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:" Google "})]}),w.jsxs("div",{className:"mt-12 text-center text-xs text-gray-400 pb-8",children:[w.jsx("p",{children:""}),w.jsx("p",{className:"mt-2",children:"Created for 2026 ACSM Trip"})]})]}),w.jsx(d8,{isOpen:N,onClose:()=>{P(!1),A(null)},onSave:Q,initialData:x==null?void 0:x.activity,availableDays:F,currentDayId:(x==null?void 0:x.dayId)||((nn=F[0])==null?void 0:nn.id)}),w.jsx(m8,{isOpen:a,onClose:()=>u(!1),items:V,onAdd:U,onRemove:ke,onUpdate:O,totalCost:re}),w.jsx(G8,{itinerary:F}),w.jsx(Z8,{isOpen:c,onClose:()=>f(!1),currentAdmins:C,currentUserEmail:m==null?void 0:m.email})]})]})}class e7 extends W.Component{constructor(){super(...arguments);b0(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){var n;return this.state.hasError?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg w-full border border-red-200",children:[w.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),w.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-60 text-sm font-mono text-gray-800 mb-4",children:(n=this.state.error)==null?void 0:n.toString()}),w.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Um.createRoot(document.getElementById("root")).render(w.jsx(Cd.StrictMode,{children:w.jsx(e7,{children:w.jsx(J8,{})})}));
